"use strict";(self.webpackChunkacacia_ready_admin=self.webpackChunkacacia_ready_admin||[]).push([[102],{1102:(Et,Z,d)=>{d.r(Z),d.d(Z,{ShopModule:()=>kt});var h=d(9808),s=d(3075),P=d(1402),p=d(6642),m=d(5620),A=d(2916),t=d(5e3),q=d(4594),S=d(3251),x=d(7423),I=d(5245),T=d(7544),l=d(9224);function Q(e,r){if(1&e&&t._UZ(0,"img",8),2&e){const o=t.oxw();t.Q6J("src",o.thumbnail,t.LSH)}}function Y(e,r){if(1&e&&(t.TgZ(0,"p",9),t._UZ(1,"span",10),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("matBadge",o.quantity)}}function B(e,r){if(1&e&&(t.TgZ(0,"p",11),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(o.description)}}const V=function(e){return{quantity:e}},j=function(e){return{queryParams:e}},G=function(e,r){return["/shop/products",e,r]};let W=(()=>{class e{constructor(){}get id(){return this.product.id}get description(){return this.product.description}get name(){return this.product.name}get thumbnail(){return!!this.product.image&&`assets/images/app/${this.product.image}`}get price(){return this.product.price}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-view"]],inputs:{product:"product",quantity:"quantity"},decls:20,vars:16,consts:[[3,"routerLink"],["mat-card-sm-image","",3,"src",4,"ngIf"],[1,"product-title"],["style","float:left",4,"ngIf"],[1,"price"],["class","description",4,"ngIf"],["color","secondary","mat-raised-button","",2,"float","left: padding-botton:"],["mat-raised-button","","color","secondary",2,"float","right"],["mat-card-sm-image","",3,"src"],[2,"float","left"],["matBadgeOverlap","true",2,"font-size","10px",3,"matBadge"],[1,"description"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card")(1,"a",0)(2,"mat-card-title-group"),t.YNc(3,Q,1,1,"img",1),t.TgZ(4,"mat-card-title",2),t._uU(5),t.qZA()()(),t.TgZ(6,"mat-card-footer"),t.YNc(7,Y,2,1,"p",3),t.TgZ(8,"p",4),t._uU(9),t.ALo(10,"number"),t.qZA(),t.YNc(11,B,2,1,"p",5),t.TgZ(12,"button",6)(13,"mat-icon"),t._uU(14,"edit"),t.qZA(),t._uU(15,"Edit"),t.qZA(),t.TgZ(16,"button",7)(17,"mat-icon"),t._uU(18,"remove"),t.qZA(),t._uU(19,"Remove"),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("routerLink",t.WLB(13,G,n.id,t.VKq(11,j,t.VKq(9,V,n.quantity)))),t.xp6(2),t.Q6J("ngIf",n.thumbnail),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Q6J("ngIf",n.quantity>0),t.xp6(2),t.hij("\xa3 ",t.xi3(10,6,n.price,"1.2-2")," "),t.xp6(2),t.Q6J("ngIf",n.description))},directives:[l.a8,P.yS,l.C1,h.O5,l.vP,l.n5,l.rt,T.k,x.lW,I.Hw],pipes:[h.JJ],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{display:flex}mat-card[_ngcontent-%COMP%]{width:300px;height:180px;margin:10px;display:flex;flex-flow:column;justify-content:space-between}@media only screen and (max-width: 768px){mat-card[_ngcontent-%COMP%]{margin:15px 0!important}}mat-card[_ngcontent-%COMP%]:hover{box-shadow:3px 3px 16px -2px #00000080}mat-card-title[_ngcontent-%COMP%]{margin-right:10px}mat-card-title-group[_ngcontent-%COMP%]{margin:0}a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}img[_ngcontent-%COMP%]{width:60px;min-width:60px;margin-left:5px}mat-card-content[_ngcontent-%COMP%]{margin:15px 0 0}span[_ngcontent-%COMP%]{display:inline-block;font-size:13px}mat-card-footer[_ngcontent-%COMP%]{padding:0 25px 25px}"]}),e})();var a=(()=>{return(e=a||(a={})).Search="[Category] Search",e.SearchComplete="[Category] Search Complete",e.SearchError="[Category] Search Error",e.Load="[Category] Load",e.LoadComplete="[Category] Load Complete",e.LoadError="[Category] Load Error",e.Select="[Category] Select",e.SelectProduct="[Product] Select",e.CreateCategory="[Category] Create",e.CreateCategoryComplete="[Category] Create Complete",e.CreateCategoryError="[Category] Create Error",e.CreateProduct="[Product] Create",e.CreateProductComplete="[Product] Create Complete",e.CreateProductError="[Product] Create Error",e.RemoveProduct="[Product] Remove",e.RemoveProductComplete="[Product] Remove Complete",e.RemoveProductError="[Product] Remove Error",a;var e})();class z{constructor(r){this.payload=r,this.type=a.CreateCategory}}class H{constructor(r){this.payload=r,this.type=a.CreateCategoryComplete}}class R{constructor(r){this.payload=r,this.type=a.CreateCategoryError}}class D{constructor(r){this.payload=r,this.type=a.CreateProduct}}class X{constructor(r){this.payload=r,this.type=a.CreateProductComplete}}class K{constructor(r){this.payload=r,this.type=a.CreateProductError}}class tt{constructor(r){this.payload=r,this.type=a.RemoveProductComplete}}class et{constructor(r){this.payload=r,this.type=a.RemoveProductError}}class _{constructor(){this.type=a.Load}}class ot{constructor(r){this.payload=r,this.type=a.LoadComplete}}class rt{constructor(r){this.payload=r,this.type=a.LoadError}}class L{constructor(r){this.payload=r,this.type=a.Select}}class nt{constructor(r){this.payload=r,this.type=a.SelectProduct}}var O=d(163),k=d(7322),E=d(7531);let F=(()=>{class e{constructor(o,n){this.store=o,this.dbService=n,this.isVisible=!1,this.close=new t.vpe}ngOnChanges(o){this.dbService.getNextProductId(this.categoryId),this.dbService.nextProductId$.subscribe(n=>{this.nextProductId=n,console.log("inside ngchanges nextproductId = "+this.nextProductId)})}ngOnInit(){console.log("categoryId = "+this.categoryId),this.productForm=new s.cw({name:new s.NI("",[s.kI.required]),description:new s.NI("",[s.kI.required]),price:new s.NI("",[s.kI.required]),reference:new s.NI("",[]),image:new s.NI("",[])}),this.dbService.getNextProductId(this.categoryId),this.dbService.nextProductId$.subscribe(o=>{this.nextProductId=o,console.log("nextproductId = "+this.nextProductId)})}save(){if(console.log("catid: "+this.categoryId),this.productForm.valid){const o=Object.assign(this.productForm.value,{id:this.nextProductId});console.log("new product"),console.dir(o),console.log("catId"),console.log(this.categoryId),this.store.dispatch(new D({catId:this.categoryId,product:o})),this.close.emit(!1)}}cancelForm(){this.close.emit(!1)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.yh),t.Y36(O.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-product"]],inputs:{categoryId:"categoryId"},outputs:{close:"close"},features:[t.TTD],decls:27,vars:2,consts:[[3,"formGroup"],["type","text","matInput","","placeholder","Product name","formControlName","name"],["type","text","matInput","","placeholder","Product description","formControlName","description"],["type","text","matInput","","placeholder","Product reference","formControlName","reference"],["type","number","matInput","","placeholder","Product price","formControlName","price"],["type","text","matInput","","placeholder","Product image","formControlName","image"],[1,"loginButtons"],["mat-fab","","type","button","mat-button","",3,"disabled","click"],["mat-fab","","type","button","mat-button","",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-subtitle"),t._uU(3,"Add new product "),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"form",0)(6,"p")(7,"mat-form-field"),t._UZ(8,"input",1),t.qZA(),t.TgZ(9,"mat-form-field"),t._UZ(10,"input",2),t.qZA()(),t.TgZ(11,"p")(12,"mat-form-field"),t._UZ(13,"input",3),t.qZA(),t.TgZ(14,"mat-form-field"),t._UZ(15,"input",4),t.qZA()(),t.TgZ(16,"p")(17,"mat-form-field"),t._UZ(18,"input",5),t.qZA()(),t.TgZ(19,"mat-card-actions")(20,"span",6)(21,"button",7),t.NdJ("click",function(){return n.save()}),t._uU(22,"Save"),t.qZA()(),t.TgZ(23,"span",6)(24,"button",8),t.NdJ("click",function(){return n.cancelForm()}),t._uU(25,"Cancel"),t.qZA()()(),t._UZ(26,"mat-card-footer"),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",n.productForm),t.xp6(16),t.Q6J("disabled",!n.productForm.valid))},directives:[l.a8,l.dk,l.$j,l.dn,s._Y,s.JL,s.sg,k.KE,E.Nt,s.Fj,s.JJ,s.u,s.wV,l.hq,x.lW,l.rt],encapsulation:2}),e})();function at(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).editFormVisible=!0}),t.TgZ(1,"mat-icon",10),t._uU(2,"list"),t.qZA()()}2&e&&t.Q6J("color","secondary")}function ct(e,r){if(1&e&&(t.TgZ(0,"a",5,6)(2,"span",7),t._uU(3),t.qZA(),t.YNc(4,at,3,1,"button",8),t.qZA()),2&e){const o=r.$implicit,n=t.MAs(1);t.Q6J("routerLink",o.path)("active",n.isActive),t.xp6(3),t.hij("",o.label," \xa0 \xa0"),t.xp6(1),t.Q6J("ngIf",n.isActive)}}function it(e,r){1&e&&t._UZ(0,"app-product-view",13),2&e&&t.Q6J("product",r.$implicit)}function st(e,r){if(1&e&&(t.TgZ(0,"div",11),t.YNc(1,it,1,1,"app-product-view",12),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.products)}}function dt(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"app-edit-product",14),t.NdJ("close",function(c){return t.CHM(o),t.oxw().hideForm(c)}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("categoryId",o.routeLinks[o.currentTabIndex].catId)}}let pt=(()=>{class e{constructor(){this.currentTabIndex=0,this.changeCategoryIndex=new t.vpe,this.editFormVisible=!1}ngOnInit(){this.categories$.subscribe(o=>{console.log("currentTabIndex: "+this.currentTabIndex),this.categories=o,this.categories[this.currentTabIndex]&&(this.products=o[this.currentTabIndex].products,this.changeCategoryIndex.emit(this.currentTabIndex))})}ngOnChanges(o){this.categories&&this.categories[this.currentTabIndex]&&(this.products=this.categories[this.currentTabIndex].products,this.changeCategoryIndex.emit(this.currentTabIndex))}hideForm(o){this.editFormVisible=!1}showForm(){this.editFormVisible=!0}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-product"]],inputs:{categories$:"categories$",routeLinks:"routeLinks",currentTabIndex:"currentTabIndex"},outputs:{changeCategoryIndex:"changeCategoryIndex"},features:[t.TTD],decls:6,vars:4,consts:[[1,"toolbar-flex"],["mat-tab-nav-bar","",3,"backgroundColor"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["style","display:flex; flex-wrap: wrap; align-content: flex-start;",4,"ngIf"],[3,"categoryId","close",4,"ngIf"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],[2,"color","blue"],["style","color:green; font-weight: bold","mat-button","",3,"color","click",4,"ngIf"],["mat-button","",2,"color","green","font-weight","bold",3,"color","click"],["matBadge","+","matBadgePosition","above before","matBadgeColor","green",2,"color","green"],[2,"display","flex","flex-wrap","wrap","align-content","flex-start"],[3,"product",4,"ngFor","ngForOf"],[3,"product"],[3,"categoryId","close"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-toolbar")(1,"span",0)(2,"nav",1),t.YNc(3,ct,5,4,"a",2),t.qZA()()(),t.YNc(4,st,2,1,"div",3),t.YNc(5,dt,1,1,"app-edit-product",4)),2&o&&(t.xp6(2),t.Q6J("backgroundColor","secondary"),t.xp6(1),t.Q6J("ngForOf",n.routeLinks),t.xp6(1),t.Q6J("ngIf",!n.editFormVisible),t.xp6(1),t.Q6J("ngIf",n.editFormVisible))},directives:[q.Ye,S.BU,h.sg,P.yS,S.Nj,P.Od,h.O5,x.lW,I.Hw,T.k,W,F],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.toolbar-flex[_ngcontent-%COMP%]{flex:1 .5 auto;float:left}"]}),e})();var lt=d(1135);const C=(0,d(5685).H)({selectId:e=>e.id,sortComparer:function mt(e,r){return e.name.localeCompare(r.name)}}),gt=C.getInitialState({isLoaded:!1,selectedCategoryId:null,selectedProductId:null}),ft={categories:function ht(e=gt,r){switch(r.type){case a.Load:return C.getInitialState(e);case a.LoadComplete:return e=Object.assign(Object.assign(Object.assign({},e),{isLoaded:!0})),C.addMany(r.payload,e);case a.CreateCategory:return C.addOne(r.payload,e);case a.CreateProduct:case a.RemoveProduct:return C.getInitialState(e);case a.CreateCategory:return C.addOne(r.payload,e);case a.Select:return Object.assign(Object.assign({},e),{selectedCategoryId:r.payload});case a.SelectProduct:return Object.assign(Object.assign({},e),{selectedProductId:r.payload});default:return e}}},Ct=(0,m.ZF)("shop"),b=(0,m.P1)(Ct,e=>e.categories),M=(0,m.P1)(b,e=>e.selectedCategoryId),yt=(0,m.P1)(b,e=>e.selectedProductId),{selectEntities:$,selectAll:Pt}=((0,m.P1)(b,e=>e.isLoaded),C.getSelectors(b)),xt=((0,m.P1)(M,$,(e,r)=>r[e].products),(0,m.P1)(yt,M,$,(e,r,o)=>o[r].products.filter(n=>n.id===e)[0]));let U=(()=>{class e{constructor(o,n){this.store=o,this.route=n,this.routeLinks=new Array,this.categories$=new lt.X(null),this.currentCategoryIndex=0}ngOnInit(){this.store.dispatch(new _),this.store.select(Pt).subscribe(o=>{this.categories$.next(o),o.forEach((n,c)=>this.routeLinks.push({catId:n.id,label:n.name,path:"/shop/categories/"+c})),this.selectedCategoryId=this.routeLinks[this.currentCategoryIndex].catId,this.store.dispatch(new L(this.selectedCategoryId))}),this.route.paramMap.subscribe(o=>{this.currentCategoryIndex=+o.get("id"),console.log("pathVariable : "+this.currentCategoryIndex),this.routeLinks[this.currentCategoryIndex].catId&&(this.selectedCategoryId=this.routeLinks[this.currentCategoryIndex].catId,console.log("selectedCategoryId router: "+this.selectedCategoryId),this.store.dispatch(new L(this.selectedCategoryId)))})}setCurrentCategoryIndex(o){console.log("EventEmitter catid: "+o),this.currentCategoryIndex=o}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.yh),t.Y36(P.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-list-page"]],decls:1,vars:3,consts:[[3,"categories$","routeLinks","currentTabIndex","changeCategoryIndex"]],template:function(o,n){1&o&&(t.TgZ(0,"app-list-product",0),t.NdJ("changeCategoryIndex",function(f){return n.setCurrentCategoryIndex(f)}),t.qZA()),2&o&&t.Q6J("categories$",n.categories$.asObservable())("routeLinks",n.routeLinks)("currentTabIndex",n.currentCategoryIndex)},styles:[".mat-tab-label-active[_ngcontent-%COMP%]{background-color:#5eadb0;color:#d5feff;border:1px solid #6B7F7F;font-weight:700}.mat-tab-link[_ngcontent-%COMP%], .mat-tab-label[_ngcontent-%COMP%]{line-height:30px!important;height:30px!important;min-width:100px!important;border:1px solid #7e7e7e}.tabContentContainer[_ngcontent-%COMP%]{border:1px solid #aaaaaa;background:#ffffff 50% 50% repeat-x}"],changeDetection:0}),e})();function vt(e,r){if(1&e&&t._UZ(0,"img",4),2&e){const o=t.oxw(2);t.Q6J("src",o.thumbnail,t.LSH)}}function It(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"p")(1,"button",5),t.NdJ("click",function(){t.CHM(o);const c=t.oxw(2);return c.add.emit(c.product)}),t._uU(2," Save "),t.TgZ(3,"mat-icon"),t._uU(4,"loupe"),t.qZA()()()}}function _t(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-title")(2,"span"),t._uU(3),t.YNc(4,vt,1,1,"img",1),t.qZA()(),t.TgZ(5,"mat-card-content"),t._UZ(6,"span",2),t.qZA(),t.TgZ(7,"mat-card-actions")(8,"button",3),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return c.remove.emit(c.product)}),t._uU(9," Cancel "),t.TgZ(10,"mat-icon"),t._uU(11,"cancel"),t.qZA()(),t.YNc(12,It,5,0,"p",0),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(3),t.hij("",o.name," "),t.xp6(1),t.Q6J("ngIf",o.thumbnail),t.xp6(2),t.Q6J("innerHtml",o.description,t.oJD),t.xp6(6),t.Q6J("ngIf",o.valid)}}let bt=(()=>{class e{constructor(){this.valid=!1,this.add=new t.vpe,this.remove=new t.vpe}get id(){return this.product.id}get name(){return this.product.name}get description(){return this.product.description}get thumbnail(){return`assets/images/app/${this.product.image}`}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-detail"]],inputs:{product:"product",quantity:"quantity",inBasket:"inBasket",valid:"valid"},outputs:{add:"add",remove:"remove"},decls:1,vars:1,consts:[[4,"ngIf"],["mat-card-sm-image","",3,"src",4,"ngIf"],[2,"font-size","11px",3,"innerHtml"],["mat-raised-button","","color","warn",3,"click"],["mat-card-sm-image","",3,"src"],["mat-raised-button","","color","primary",3,"click"]],template:function(o,n){1&o&&t.YNc(0,_t,13,4,"mat-card",0),2&o&&t.Q6J("ngIf",n.product)},directives:[h.O5,l.a8,l.n5,l.vP,l.dn,l.hq,x.lW,I.Hw],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;margin:75px 0}mat-card[_ngcontent-%COMP%]{max-width:600px}mat-card-title-group[_ngcontent-%COMP%]{margin-left:0}img[_ngcontent-%COMP%]{width:60px;min-width:60px;margin-left:5px}mat-card-content[_ngcontent-%COMP%]{margin:15px 0 50px}mat-card-actions[_ngcontent-%COMP%]{margin:25px 0 0!important}\\a6[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]{padding:0 25px 25px;position:relative}"]}),e})();function wt(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"app-product-detail",1),t.NdJ("save",function(c){return t.CHM(o),t.oxw().save(c)})("remove",function(c){return t.CHM(o),t.oxw().remove(c)}),t.ALo(3,"async"),t.qZA()(),t.TgZ(4,"mat-card-footer")(5,"p",2)(6,"button",3),t.NdJ("click",function(){return t.CHM(o),t.oxw().back()}),t._uU(7," Cancel "),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()()()()}if(2&e){const o=t.oxw();t.xp6(2),t.Q6J("product",o.product)("valid",t.lcZ(3,2,o.valid$))}}let Zt=(()=>{class e{constructor(o,n,c){this.store=o,this.route=n,this.location=c}ngOnInit(){this.route.params.subscribe(o=>{this.store.dispatch(new nt(+o.productId)),this.store.pipe((0,m.Ys)(xt)).subscribe(c=>this.product=c)})}back(){this.location.back()}ngOnDestroy(){}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.yh),t.Y36(P.gz),t.Y36(h.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-view-page"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"product","valid","save","remove"],[2,"padding","5px","margin","5px"],["mat-raised-button","",3,"click"]],template:function(o,n){1&o&&t.YNc(0,wt,10,4,"mat-card",0),2&o&&t.Q6J("ngIf",n.product)},directives:[h.O5,l.a8,l.dn,bt,l.rt,x.lW,I.Hw],pipes:[h.Ov],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;margin:75px 0}mat-card[_ngcontent-%COMP%]{max-width:600px}mat-card-title-group[_ngcontent-%COMP%]{margin-left:0}img[_ngcontent-%COMP%]{width:60px;min-width:60px;margin-left:5px}mat-card-content[_ngcontent-%COMP%]{margin:15px 0 50px}mat-card-actions[_ngcontent-%COMP%]{margin:25px 0 0!important}\\a6[_ngcontent-%COMP%]   mat-card-footer[_ngcontent-%COMP%]{padding:0 25px 25px;position:relative}"],changeDetection:0}),e})();var y=d(9646),w=d(3900),g=d(4004),v=d(262),J=d(5525),St=d(6185);let N=(()=>{class e{constructor(o){this.db=o,this.placedOrderSuccess=!1}getCategories(){let o=new Array;return this.db.collection("categories").snapshotChanges().pipe((0,g.U)(n=>(o=n.map(c=>c.payload.doc.data()),o)))}createCategory(o){let n=this.db.collection("categories").doc(o.id.toString()).set({id:o.id,name:o.name,description:o.description,products:[]});return(0,y.of)(n)}createProduct(o,n){return console.log("catId: "+o),console.dir(n),this.db.collection("categories").doc(o.toString()).update({products:(0,J.vr)(n)}),(0,y.of)({catId:o,product:n})}removeProduct(o,n){return console.log("catId: "+o," prodId: "+n),this.db.collection("categories").doc(o.toString()).update({products:(0,J.Ab)(n)}),(0,y.of)({catId:o,prodId:n})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(St.ST))},e.\u0275prov=t.Yz7({token:e,factory:function(o){let n=null;return n=o?new(o||e):"db",n},providedIn:"any"}),e})();var Tt=d(1271);let Lt=(()=>{class e{constructor(o,n,c,f){this.actions$=o,this.productService=n,this.snackBar=c,this.router=f,this.getAllCategories$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.Load),(0,w.w)(i=>this.productService.getCategories().pipe((0,g.U)(u=>new ot(u)),(0,v.K)(u=>(0,y.of)(new rt(u))))))),this.getAllCategoriesSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.LoadComplete),(0,g.U)(i=>this.snackBar.open(`[${i.payload.length}] categories loaded successfully.`,"Close",{duration:2e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}))),{dispatch:!1}),this.getAllCategoriesError$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.LoadError),(0,g.U)(i=>this.snackBar.open(`Error in loading Categories [${i.payload}].`,"Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}))),{dispatch:!1}),this.createCategory$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.CreateCategory),(0,w.w)(i=>this.productService.createCategory(i.payload).pipe((0,g.U)(u=>new H(u)),(0,v.K)(u=>(0,y.of)(new R(u))))))),this.createCategorySuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.CreateCategoryComplete),(0,g.U)(i=>(this.snackBar.open(`Category [${i.payload.name}] saved successfully.`,"Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}),new _)),(0,v.K)(i=>(0,y.of)(i)))),this.createCategoryError$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.CreateCategoryError),(0,g.U)(i=>this.snackBar.open(`Error in creating Category [${i.payload}].`,"Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}))),{dispatch:!1}),this.createProduct$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.CreateProduct),(0,w.w)(i=>this.productService.createProduct(i.payload.catId,i.payload.product).pipe((0,g.U)(u=>(console.log("create product - productservice"),console.dir(u),new X(u))),(0,v.K)(u=>(0,y.of)(new K(u))))))),this.createProductSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.CreateProductComplete),(0,g.U)(i=>(this.snackBar.open(`Product [${i.payload.product.name} in CategoryId [${i.payload.catId}]]saved successfully.`,"Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}),new _)))),this.createProductError$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.CreateProductError),(0,g.U)(i=>this.snackBar.open(`Error in creating Product [${i.payload}].`,"Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}))),{dispatch:!1}),this.removeProduct$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.RemoveProduct),(0,w.w)(i=>this.productService.removeProduct(i.payload.catId,i.payload.prodId).pipe((0,g.U)(u=>(console.log("remove product - productservice"),console.dir(u),new tt({catId:u.catId,prodId:u.prodId}))),(0,v.K)(u=>(0,y.of)(new et(u))))))),this.removeProductSuccess$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.RemoveProductComplete),(0,g.U)(i=>(this.snackBar.open(`Product [${i.payload.prodId} in CategoryId [${i.payload.catId}]] removed successfully.`,"Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}),new _)))),this.removeProductError$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(a.RemoveProductError),(0,g.U)(i=>this.snackBar.open(`Error in removing Product [${i.payload}].`,"Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}))),{dispatch:!1})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(p.eX),t.LFG(N),t.LFG(Tt.ux),t.LFG(P.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),Ot=(()=>{class e{constructor(o,n){this.store=o,this.dbService=n}ngOnInit(){this.categoryForm=new s.cw({name:new s.NI("",[s.kI.required]),description:new s.NI("",[s.kI.required])}),this.dbService.getNextCategoryId(),this.dbService.nextCategoryId$.subscribe(o=>this.nextCategoryId=o)}save(){if(this.categoryForm.valid){const o=Object.assign(this.categoryForm.value,{id:this.nextCategoryId});this.store.dispatch(new z(o))}}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.yh),t.Y36(O.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-category-edit"]],decls:16,vars:2,consts:[[3,"formGroup"],["type","text","matInput","","placeholder","Category name","formControlName","name"],["type","text","matInput","","placeholder","Category description","formControlName","description"],[1,"loginButtons"],["mat-fab","","type","button","mat-button","",3,"disabled","click"]],template:function(o,n){1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-subtitle"),t._uU(3,"New Category "),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"form",0)(6,"p")(7,"mat-form-field"),t._UZ(8,"input",1),t.qZA()(),t.TgZ(9,"p")(10,"mat-form-field"),t._UZ(11,"input",2),t.qZA()(),t.TgZ(12,"mat-card-actions")(13,"p",3)(14,"button",4),t.NdJ("click",function(){return n.save()}),t._uU(15,"Create"),t.qZA()()()()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",n.categoryForm),t.xp6(9),t.Q6J("disabled",!n.categoryForm.valid))},directives:[l.a8,l.dk,l.$j,l.dn,s._Y,s.JL,s.sg,k.KE,E.Nt,s.Fj,s.JJ,s.u,l.hq,x.lW],encapsulation:2}),e})(),kt=(()=>{class e{static forRoot(){return{ngModule:e,providers:[]}}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[N],imports:[[h.ez,A.q,s.UX,P.Bz.forChild([{path:"",redirectTo:"categories/:id",pathMatch:"full"},{path:"categories/:id",component:U},{path:"products/:productId",component:Zt},{path:"category/new",component:Ot},{path:"product/new",component:F}]),m.Aw.forFeature("shop",ft),p.sQ.forFeature([Lt])]]}),e})();t.B6R(U,[pt],[])}}]);