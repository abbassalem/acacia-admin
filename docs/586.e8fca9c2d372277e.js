"use strict";(self.webpackChunkacacia_ready_admin=self.webpackChunkacacia_ready_admin||[]).push([[586],{4586:(Ep,is,ue)=>{ue.r(is),ue.d(is,{OrdersModule:()=>Os});var D=ue(9808),u=ue(3075),No=ue(1402),ke=ue(6642),Lt=ue(5620),Go=ue(2916),os=ue(819),Bo=ue(5685),ve=ue(6338);const jo=(0,Bo.H)({selectId:W=>W.id,sortComparer:function Di(W,le){return W.id==le.id?1:0}}),Wo=jo.getInitialState({selectedOrderId:null,savedOrder:null}),Re=(0,Lt.ZF)("orders");function as(W=Wo,le){switch(le.type){case ve.ZU.Reset:return Wo;case ve.ZU.SaveOrder:return W;case ve.ZU.SaveOrderComplete:return Object.assign(Object.assign({},W),{savedOrder:le.payload});case ve.ZU.SaveOrderError:case ve.ZU.Load:case ve.ZU.PaidChange:case ve.ZU.PaidChangeComplete:case ve.ZU.StatusChangeComplete:case ve.ZU.StatusChange:return W;case ve.ZU.LoadComplete:return jo.addMany(le.payload,W);case ve.ZU.LoadError:case ve.ZU.Load:return W;case ve.ZU.Select:return Object.assign(Object.assign({},W),{selectedOrderId:le.payload});default:return W}}(0,Lt.P1)(Re,W=>W.savedOrder);const pt=(0,Lt.P1)(Re,W=>W.entities),ss=(0,Lt.P1)(Re,W=>W.ids),Yr=(0,Lt.P1)(pt,ss,(W,le)=>{let k=new Array;for(let X of le)k.push(W[X]);return k});var ls=ue(4839),L=ue(5e3),us=ue(8372),cs=ue(1884),Kt=ue(3900),_t=ue(9646),Ri=ue(4594),bt=ue(7322),Vo=ue(7531),Fi=ue(6856),Fn=ue(1079),ki=ue(508),hs=ue(4107),Ho=ue(7423),wr=ue(5245);function fs(W,le){if(1&W&&(L.TgZ(0,"mat-option",15),L._uU(1),L.qZA()),2&W){const k=le.$implicit;L.Q6J("value",k),L.xp6(1),L.hij(" ",k.email," ")}}function ps(W,le){if(1&W&&(L.TgZ(0,"mat-option",16),L._uU(1),L.qZA()),2&W){const k=le.$implicit;L.Q6J("value",k.value)("selected",k.isSelected),L.xp6(1),L.hij("",k.label," ")}}let kn=(()=>{class W{constructor(){this.query="",this.searching=!1,this.error="",this.searchCriteriaChange=new L.vpe,this.usersForAutoChange=new L.vpe,this.statusList=[]}ngOnInit(){this.initilizeStatusList(),this.searchGroup=new u.cw({startDate:new u.NI(new Date(0),[u.kI.required]),endDate:new u.NI(new Date,[u.kI.required]),orderStatus:new u.NI("ALL"),orderUser:new u.NI}),this.userSubscription=this.searchGroup.get("orderUser").valueChanges.pipe((0,us.b)(1e3),(0,cs.x)(),(0,Kt.w)(k=>(0,_t.of)(k))).subscribe(k=>{console.log("userEmail from search comp"),console.dir(k),"string"==typeof k?this.usersForAutoChange.emit(k):(console.log("selectedUser: "),console.dir(k),this.selectedUser=k)})}displayFn(k){return k?k.email:""}executeSearch(){var k,X;let ne={start:this.searchGroup.get("startDate").value.getTime(),end:this.searchGroup.get("endDate").value.getTime(),status:this.searchGroup.get("orderStatus").value,userId:null===(X=null===(k=this.searchGroup.get("orderUser"))||void 0===k?void 0:k.value)||void 0===X?void 0:X.uid};this.searchCriteriaChange.emit(ne)}initilizeStatusList(){this.statusList.push({value:"ALL",label:"All",isSelected:!1}),this.statusList.push({value:"OPEN",label:"Open",isSelected:!0}),this.statusList.push({value:"CLOSED",label:"Closed",isSelected:!1}),this.statusList.push({value:"DELIVERED",label:"Delivered",isSelected:!1}),this.statusList.push({value:"CANCELLED",label:"Cancelled",isSelected:!1})}ngOnDestroy(){this.userSubscription.unsubscribe()}}return W.\u0275fac=function(k){return new(k||W)},W.\u0275cmp=L.Xpm({type:W,selectors:[["app-order-search"]],inputs:{query:"query",searching:"searching",error:"error",fetchedUsers$:"fetchedUsers$"},outputs:{searchCriteriaChange:"searchCriteriaChange",usersForAutoChange:"usersForAutoChange"},decls:34,vars:12,consts:[[3,"formGroup"],[2,"float","right"],[2,"max-width","fit-content"],["matInput","","placeholder","Choose start date","formControlName","startDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","placeholder","Choose end date","formControlName","endDate",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","orderUser","placeholder","Filter email",3,"matAutocomplete"],["autoActiveFirstOption","",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["formControlName","orderStatus"],[3,"value","selected",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent",2,"align-content","flex-start",3,"disabled","click"],[3,"value"],[3,"value","selected"]],template:function(k,X){if(1&k&&(L.TgZ(0,"form",0)(1,"mat-toolbar")(2,"mat-toolbar-row")(3,"h6",1)(4,"small"),L._uU(5,"Search order"),L.qZA()()(),L.TgZ(6,"mat-toolbar-row")(7,"mat-form-field",2),L._UZ(8,"input",3)(9,"mat-datepicker-toggle",4)(10,"mat-datepicker",null,5),L.qZA(),L._uU(12," \xa0\xa0 "),L.TgZ(13,"mat-form-field",2),L._UZ(14,"input",6)(15,"mat-datepicker-toggle",4)(16,"mat-datepicker",null,7),L.qZA(),L._uU(18," \xa0\xa0 "),L.TgZ(19,"mat-form-field",2),L._UZ(20,"input",8),L.TgZ(21,"mat-autocomplete",9,10),L.YNc(23,fs,2,2,"mat-option",11),L.ALo(24,"async"),L.qZA()(),L._uU(25," \xa0\xa0 "),L.TgZ(26,"mat-form-field")(27,"mat-select",12),L.YNc(28,ps,2,3,"mat-option",13),L.qZA()(),L._uU(29," \xa0\xa0 "),L.TgZ(30,"button",14),L.NdJ("click",function(){return X.executeSearch()}),L.TgZ(31,"mat-icon"),L._uU(32,"search"),L.qZA(),L._uU(33,"Search "),L.qZA()()()()),2&k){const ne=L.MAs(11),ce=L.MAs(17),Le=L.MAs(22);L.Q6J("formGroup",X.searchGroup),L.xp6(8),L.Q6J("matDatepicker",ne),L.xp6(1),L.Q6J("for",ne),L.xp6(5),L.Q6J("matDatepicker",ce),L.xp6(1),L.Q6J("for",ce),L.xp6(5),L.Q6J("matAutocomplete",Le),L.xp6(1),L.Q6J("displayWith",X.displayFn),L.xp6(2),L.Q6J("ngForOf",L.lcZ(24,10,X.fetchedUsers$)),L.xp6(5),L.Q6J("ngForOf",X.statusList),L.xp6(2),L.Q6J("disabled",!X.searchGroup.valid)}},directives:[u._Y,u.JL,u.sg,Ri.Ye,Ri.rD,bt.KE,Vo.Nt,u.Fj,Fi.hl,u.JJ,u.u,Fi.nW,bt.R9,Fi.Mq,Fn.ZL,Fn.XC,D.sg,ki.ey,hs.gD,Ho.lW,wr.Hw],pipes:[D.Ov],styles:["mat-card-title[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%], mat-card-footer[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-card-footer[_ngcontent-%COMP%]{color:red;padding:5px 0}mat-form-field[_ngcontent-%COMP%]{min-width:300px;font-size:14px}.mat-spinner[_ngcontent-%COMP%]{position:relative;top:10px;left:10px;opacity:0;padding-left:60px}.mat-spinner.show[_ngcontent-%COMP%]{opacity:1}"]}),W})();var zo=ue(4448);function Xr(){}function Uo(){}function Li(W,le){if(1&W){const k=L.EpF();L.TgZ(0,"mat-toolbar-row")(1,"button",2),L.NdJ("click",function(){return L.CHM(k),L.oxw().deliver()}),L._uU(2," Delivered"),L.qZA(),L.TgZ(3,"button",2),L.NdJ("click",function(){return L.CHM(k),L.oxw().cancel()}),L._uU(4," Cancel"),L.qZA(),L.TgZ(5,"button",2),L.NdJ("click",function(){return L.CHM(k),L.oxw().pay()}),L._uU(6," Paid"),L.qZA()()}}function $o(W,le){if(1&W){const k=L.EpF();L.TgZ(0,"ag-grid-angular",3,4),L.NdJ("gridReady",function(ne){return L.CHM(k),L.oxw().onGridReady(ne)})("selectionChanged",function(ne){return L.CHM(k),L.oxw().checkIfEmpty(ne)})("rowEditingStopped",function(ne){return L.CHM(k),L.oxw().onRowEditingStopped(ne)})("rowEditingStarted",function(ne){return L.CHM(k),L.oxw().onRowEditingStarted(ne)})("cellClicked",function(ne){return L.CHM(k),L.oxw().onCellClicked(ne)}),L.qZA()}if(2&W){const k=L.oxw();L.Q6J("gridOptions",k.gridOptions)("masterDetail",!0)("pagination",!0)("paginationPageSize",10)("columnDefs",k.columnDefs)("defaultColDef",k.defaultColDef)("detailCellRendererParams",k.detailCellRendererParams)("rowData",k.orderList)("rowSelection","multiple")("getRowNodeId",k.getRowNodeId)("animateRows",!0)("sideBar",!0)}}Xr.prototype.init=function(W){this.params=W,this.eGui=document.createElement("input"),this.eGui.type="checkbox",this.eGui.checked=W.value,this.eGui.disabled=!0,this.checkedHandler=this.checkedHandler.bind(this)},Xr.prototype.checkedHandler=function(W){},Xr.prototype.getGui=function(W){return this.eGui},Xr.prototype.destroy=function(W){this.eGui.removeEventListener("click",this.checkedHandler)},Uo.prototype.init=function(W){this.params=W,this.eGui=document.createElement("input"),this.eGui.type="button",this.eGui.value="Show User",this.eGui.disabled=!1,this.eGui.addEventListener("click",this.buttonHandler),this.buttonHandler=this.buttonHandler.bind(this)},Uo.prototype.buttonHandler=function(W){console.log("inside buttonrenderer handler"),this.params.columnDefs["orderUser.displayName"].hide=!1,this.params.columnDefs["orderUser.phoneNumber"].hide=!1},ue(3497);let ds=(()=>{class W{constructor(){this.payChange=new L.vpe,this.deliverChange=new L.vpe,this.cancelChange=new L.vpe,this.rowsSelected=new Array,this.columnDefs=[{headerName:"Order Date",class:"header-order-date",hide:"false",field:"orderDate",cellRenderer:"agGroupCellRenderer",valueFormatter:k=>this.dateFormatter(k.data.orderDate)},{headerName:"Order Details",children:[{headerName:"Status",field:"status"},{headerName:"Amount",field:"amount",sortable:!0,valueFormatter:k=>k.data.amount.toFixed(2)},{headerName:"Order Payment",field:"paid",cellRenderer:Xr,editable:!1}]},{headerName:"Delivery Info",children:[{headerName:"Delivery Date",field:"deliveryDate",valueFormatter:k=>this.dateFormatter(k.data.deliveryDate)},{headerName:"Delivery Time",field:"deliveryTime"}]},{headerName:"User Info",children:[{field:"orderUser.displayName",headerName:"Name"},{field:"orderUser.email",headerName:"Email"},{field:"orderUser.phoneNumber",headerName:"Phone"}]},{header:"Selection",checkboxSelection:!0,headerCheckboxSelection:!0,pinned:"left",width:50,field:"checkboxBtn"}],this.defaultColDef={enableValue:!0,enableRowGroup:!0,enablePivot:!0,sortable:!0,filter:!0,editable:!1},this.selection=[],this.detailCellRendererParams={detailGridOptions:{columnDefs:[{headerName:"ID",field:"id"},{headerName:"Quantity",field:"quantity"},{headerName:"Product Name",field:"product.name"}],onFirstDataRendered:k=>{k.api.sizeColumnsToFit()}},getDetailRowData:k=>{console.log("getDetailRowData"),console.dir(k),k.successCallback(k.data.items)}}}checkIfEmpty(k){this.selection=k.gridApi.getSelectedNodes()}dateFormatter(k){return new Date(k).getDate().toString()+"/"+new Date(k).getMonth().toString()+"/"+new Date(k).getFullYear().toString()}getRowNodeId(k){return k.id}onGridReady(k){this.agGrid.api.sizeColumnsToFit(),this.gridApi=this.agGrid.api}pay(){console.log("method paid"),this.rowsSelected=this.gridApi.getSelectedRows(),console.log("paid"),console.dir(this.rowsSelected);const k=this.rowsSelected.map(X=>X.id);this.payChange.emit(k)}deliver(){this.rowsSelected=this.gridApi.getSelectedRows(),console.log("delivered"),console.dir(this.rowsSelected);const k=this.rowsSelected.map(X=>X.id);this.deliverChange.emit(k)}cancel(){this.rowsSelected=this.gridApi.getSelectedRows(),console.log("cancelled"),console.dir(this.rowsSelected);const k=this.rowsSelected.map(X=>X.id);this.cancelChange.emit(k)}}return W.\u0275fac=function(k){return new(k||W)},W.\u0275cmp=L.Xpm({type:W,selectors:[["app-order-list"]],viewQuery:function(k,X){if(1&k&&L.Gf(zo.N8,5),2&k){let ne;L.iGM(ne=L.CRH())&&(X.agGrid=ne.first)}},inputs:{orderList:"orderList"},outputs:{payChange:"payChange",deliverChange:"deliverChange",cancelChange:"cancelChange"},decls:2,vars:2,consts:[[4,"ngIf"],["height","300","class","ag-theme-alpine-dark",3,"gridOptions","masterDetail","pagination","paginationPageSize","columnDefs","defaultColDef","detailCellRendererParams","rowData","rowSelection","getRowNodeId","animateRows","sideBar","pivotColumnGroupTotals","gridReady","selectionChanged","rowEditingStopped","rowEditingStarted","cellClicked",4,"ngIf"],["mat-raised-button","",3,"click"],["height","300",1,"ag-theme-alpine-dark",3,"gridOptions","masterDetail","pagination","paginationPageSize","columnDefs","defaultColDef","detailCellRendererParams","rowData","rowSelection","getRowNodeId","animateRows","sideBar","pivotColumnGroupTotals","gridReady","selectionChanged","rowEditingStopped","rowEditingStarted","cellClicked"],["agGrid",""]],template:function(k,X){1&k&&(L.YNc(0,Li,7,0,"mat-toolbar-row",0),L.YNc(1,$o,2,12,"ag-grid-angular",1)),2&k&&(L.Q6J("ngIf",X.orderList&&X.orderList.length>0),L.xp6(1),L.Q6J("ngIf",X.orderList&&X.orderList.length>0))},directives:[D.O5,Ri.rD,Ho.lW,zo.N8],styles:[".header-order-date[_ngcontent-%COMP%]{color:#00f;font-weight:700;background-color:#fff}ag-grid-angular[_ngcontent-%COMP%]{width:100%;height:30%}[_nghost-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.toolbar-flex[_ngcontent-%COMP%]{flex:1 .5 auto;float:left}"]}),W})(),ir=(()=>{class W{constructor(k,X){this.authStore=k,this.orderStore=X}ngOnInit(){}fetchUsersForAuto(k){this.authStore.dispatch(new ls.WI(k)),this.fetchedUsers$=this.authStore.select(os.L7)}executeQuery(k){this.currentSearchCriteria=k;let X={orderSearchCriteria:k};this.orderStore.dispatch(new ve.AG),this.orderStore.dispatch(new ve.q5(X)),this.orders$=this.orderStore.select(Yr)}executePay(k){this.orderStore.dispatch(new ve.I9({field:"paid",value:!0,ids:k})),this.executeQuery(this.currentSearchCriteria)}executeDeliver(k){this.orderStore.dispatch(new ve.a3({field:"status",value:"DELIVERED",ids:k})),this.executeQuery(this.currentSearchCriteria)}executeCancel(k){this.orderStore.dispatch(new ve.a3({field:"status",value:"CANCELLED",ids:k})),this.executeQuery(this.currentSearchCriteria)}}return W.\u0275fac=function(k){return new(k||W)(L.Y36(Lt.yh),L.Y36(Lt.yh))},W.\u0275cmp=L.Xpm({type:W,selectors:[["app-order-list-page"]],decls:3,vars:4,consts:[[3,"fetchedUsers$","searchCriteriaChange","usersForAutoChange"],[3,"orderList","payChange","deliverChange","cancelChange"]],template:function(k,X){1&k&&(L.TgZ(0,"app-order-search",0),L.NdJ("searchCriteriaChange",function(ce){return X.executeQuery(ce)})("usersForAutoChange",function(ce){return X.fetchUsersForAuto(ce)}),L.qZA(),L.TgZ(1,"app-order-list",1),L.NdJ("payChange",function(ce){return X.executePay(ce)})("deliverChange",function(ce){return X.executeDeliver(ce)})("cancelChange",function(ce){return X.executeCancel(ce)}),L.ALo(2,"async"),L.qZA()),2&k&&(L.Q6J("fetchedUsers$",X.fetchedUsers$),L.xp6(1),L.Q6J("orderList",L.lcZ(2,2,X.orders$)))},directives:[kn,ds],pipes:[D.Ov],styles:[".mat-tab-label-active[_ngcontent-%COMP%]{background-color:#5eadb0;color:#d5feff;border:1px solid #6B7F7F;font-weight:700}"],changeDetection:0}),W})();var qr=ue(4004),xr=ue(262),vs=ue(9841),or=ue(4482);const{isArray:gs}=Array;function ys(W){return 1===W.length&&gs(W[0])?W[0]:W}var ms=ue(3268),Cs=ue(9635),Or=ue(3269);function Ii(...W){const le=(0,Or.jO)(W);return le?(0,Cs.z)(Ii(...W),(0,ms.Z)(le)):(0,or.e)((k,X)=>{(0,vs.l)([k,...ys(W)])(X)})}function _s(...W){return Ii(...W)}var Ni=ue(5861),bs=ue(6185);let Ko=(()=>{class W{constructor(k){this.db=k}saveOrder(k){var X=this;return(0,Ni.Z)(function*(){let ne,ce=yield X.db.collection("orders").add(k),Le=yield(yield ce.get()).data();return ne=Object.assign({id:ce.id},Le),X.db.collection("orders").doc(ce.id).set({id:ce.id},{merge:!0}),ne})()}changePaidOrder(k,X,ne){return ne.forEach(ce=>{this.db.collection("orders").doc(ce).update({[k]:X})}),(0,_t.of)(ne)}changeStatusOrder(k,X,ne){return ne.forEach(ce=>{this.db.collection("orders").doc(ce).update({[k]:X})}),(0,_t.of)({status:X,ids:ne})}getOrders(k){let X;return console.log("service => order search criteria"),console.dir(k),X=k.userId?this.db.collection("orders","ALL"==k.status?ne=>ne.where("userId","==",k.userId):ne=>ne.where("userId","==",k.userId).where("status","==",k.status)):"ALL"==k.status?this.db.collection("orders"):this.db.collection("orders",ne=>ne.where("status","==",k.status)),X.get().pipe((0,qr.U)(ne=>{let ce;return ce=ne.docs.map(Le=>Le.data()),ce}))}filterDate(k,X,ne){const ce=new Date(X.getFullYear(),X.getMonth(),X.getDate()),Le=new Date(ne.getFullYear(),ne.getMonth(),ne.getDate()),Pr=new Date(k.orderDate),he=new Date(Pr.getFullYear(),Pr.getMonth(),Pr.getDate());return he>=ce&&he<=Le}transforDate(k){return new Date(k.getFullYear(),k.getMonth(),k.getDate())}}return W.\u0275fac=function(k){return new(k||W)(L.LFG(bs.ST))},W.\u0275prov=L.Yz7({token:W,factory:W.\u0275fac}),W})();var Ln=ue(1271),Ss=ue(6518);let Yo=(()=>{class W{constructor(k,X,ne,ce,Le,Pr){this.actions$=k,this.orderService=X,this.snackBar=ne,this.authService=ce,this.orderStore=Le,this.router=Pr,this.saveOrder$=(0,ke.GW)(()=>this.actions$.pipe((0,ke.l4)(ve.ZU.SaveOrder),(0,Kt.w)(he=>this.orderService.saveOrder(he.payload)),(0,qr.U)(he=>new ve.Em(he)),(0,xr.K)(he=>(0,_t.of)(he))),{dispatch:!0}),this.saveOrderSuccess$=(0,ke.GW)(()=>this.actions$.pipe((0,ke.l4)(ve.ZU.SaveOrderComplete),(0,Kt.w)(he=>(this.snackBar.open("Order saved successfully.","Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}),this.orderStore.dispatch(new ve.AG),this.router.navigate(["/"])))),{dispatch:!1}),this.loadOrders$=(0,ke.GW)(()=>{let he;return this.actions$.pipe((0,ke.l4)(ve.ZU.Load),(0,Kt.w)(Xo=>this.orderService.getOrders(Xo.payload.orderSearchCriteria).pipe(_s(this.authService.getAllUsers()),(0,qr.U)(Ps=>{const[Gi,Ts]=Ps;return he=Gi.map(ar=>Object.assign(Object.assign({},ar),{orderUser:Ts.find(Bi=>Bi.uid===ar.userId)})),console.log("orderEffect: loadOrders$: userEmail"),console.dir(he),new ve.E0(he)}))),(0,xr.K)(Xo=>(0,_t.of)(new ve.AN("error in loading orders"))))}),this.paidOrder$=(0,ke.GW)(()=>this.actions$.pipe((0,ke.l4)(ve.ZU.PaidChange),(0,Kt.w)(he=>this.orderService.changePaidOrder(he.payload.field,he.payload.value,he.payload.ids)),(0,qr.U)(he=>new ve.Go(he)),(0,xr.K)(he=>(0,_t.of)(he))),{dispatch:!0}),this.paidOrderSuccess$=(0,ke.GW)(()=>this.actions$.pipe((0,ke.l4)(ve.ZU.PaidChangeComplete),(0,Kt.w)(he=>(this.snackBar.open("Orders paid successfully.","Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}),(0,_t.of)(he.payload)))),{dispatch:!1}),this.statusOrder$=(0,ke.GW)(()=>this.actions$.pipe((0,ke.l4)(ve.ZU.StatusChange),(0,Kt.w)(he=>this.orderService.changeStatusOrder(he.payload.field,he.payload.value,he.payload.ids)),(0,qr.U)(he=>new ve._s(he)),(0,xr.K)(he=>(0,_t.of)(he))),{dispatch:!0}),this.statusOrderSuccess$=(0,ke.GW)(()=>this.actions$.pipe((0,ke.l4)(ve.ZU.StatusChangeComplete),(0,Kt.w)(he=>(this.snackBar.open("Orders status changed to ["+he.payload.status+"] successfully.","Close",{duration:4e3,panelClass:["snack-notification"],horizontalPosition:"center",verticalPosition:"top"}),(0,_t.of)(he.payload)))),{dispatch:!1})}}return W.\u0275fac=function(k){return new(k||W)(L.LFG(ke.eX),L.LFG(Ko),L.LFG(Ln.ux),L.LFG(Ss.e),L.LFG(Lt.yh),L.LFG(No.F0))},W.\u0275prov=L.Yz7({token:W,factory:W.\u0275fac}),W})(),xs=(()=>{class W{}return W.\u0275fac=function(k){return new(k||W)},W.\u0275mod=L.oAB({type:W}),W.\u0275inj=L.cJS({}),W})(),Os=(()=>{class W{static forRoot(){return{ngModule:W,providers:[]}}}return W.\u0275fac=function(k){return new(k||W)},W.\u0275mod=L.oAB({type:W}),W.\u0275inj=L.cJS({providers:[Yo,Ko],imports:[[D.ez,Go.q,u.UX,xs,No.Bz.forChild([{path:"",component:ir}]),Lt.Aw.forFeature("orders",as),ke.sQ.forFeature([Yo])]]}),W})()},3497:(Ep,is,ue)=>{var o,u=ue(3564),No=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ke=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Go=function(o){function t(){var r=null!==o&&o.apply(this,arguments)||this;return r.watermarkMessage=void 0,r}var e;return No(t,o),e=t,t.prototype.validateLicense=function(){if(u._.missingOrEmpty(e.licenseKey))this.outputMissingLicenseKey();else if(e.licenseKey.length>32){var r=e.extractLicenseComponents(e.licenseKey),i=r.license,a=r.version,s=r.isTrial;r.md5===this.md5.md5(i)?u._.exists(a)&&a?this.validateLicenseKeyForVersion(a,!!s,i):this.validateLegacyKey(i):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey()},t.extractExpiry=function(r){var n=r.substring(r.lastIndexOf("_")+1,r.length);return new Date(parseInt(e.decode(n),10))},t.extractLicenseComponents=function(r){var n=r.replace(/[\u200B-\u200D\uFEFF]/g,""),i=(n=n.replace(/\r?\n|\r/g,"")).length-32,a=n.substring(i),s=n.substring(0,i),l=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(e.extractBracketedInformation(n),2);return{md5:a,license:s,version:l[0],isTrial:l[1]}},t.prototype.getLicenseDetails=function(r){var n=e.extractLicenseComponents(r),a=n.license,s=n.version,l=n.isTrial,c=n.md5===this.md5.md5(a),h=null;return c&&(h=e.extractExpiry(a),c=!isNaN(h.getTime())),{licenseKey:r,valid:c,expiry:c?e.formatDate(h):null,version:s||"legacy",isTrial:l}},t.prototype.isDisplayWatermark=function(){return!u._.missingOrEmpty(this.watermarkMessage)},t.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},t.formatDate=function(r){var i=r.getDate(),a=r.getMonth(),s=r.getFullYear();return i+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+s},t.getGridReleaseDate=function(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))},t.decode=function(r){for(var s,l,c,h,p,f,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",d=0,v=r.replace(/[^A-Za-z0-9+/=]/g,"");d<v.length;)c=n.indexOf(v.charAt(d++)),s=(15&(h=n.indexOf(v.charAt(d++))))<<4|(p=n.indexOf(v.charAt(d++)))>>2,l=(3&p)<<6|(f=n.indexOf(v.charAt(d++))),i+=String.fromCharCode(c<<2|h>>4),64!=p&&(i+=String.fromCharCode(s)),64!=f&&(i+=String.fromCharCode(l));return e.utf8_decode(i)},t.utf8_decode=function(r){r=r.replace(/rn/g,"n");for(var n="",i=0;i<r.length;i++){var a=r.charCodeAt(i);a<128?n+=String.fromCharCode(a):a>127&&a<2048?(n+=String.fromCharCode(a>>6|192),n+=String.fromCharCode(63&a|128)):(n+=String.fromCharCode(a>>12|224),n+=String.fromCharCode(a>>6&63|128),n+=String.fromCharCode(63&a|128))}return n},t.setLicenseKey=function(r){e.licenseKey=r},t.extractBracketedInformation=function(r){var n=r.split("[").filter(function(s){return s.indexOf("]")>-1}).map(function(s){return s.split("]")[0]});if(!n||0===n.length)return[null,null];var i=1===n.filter(function(s){return"TRIAL"===s}).length;return[n.filter(function(s){return 0===s.indexOf("v")}).map(function(s){return s.replace(/^v/,"")})[0],i]},t.prototype.validateLicenseKeyForVersion=function(r,n,i){"2"===r&&(n?this.validateForTrial(i):this.validateLegacyKey(i))},t.prototype.validateLegacyKey=function(r){var n=e.getGridReleaseDate(),i=e.extractExpiry(r),a=!1,s=!1;if(isNaN(i.getTime())||(a=!0,s=n<i),a){if(!s){var l=e.formatDate(i),c=e.formatDate(n);this.outputIncompatibleVersion(l,c)}}else this.outputInvalidLicenseKey()},t.prototype.validateForTrial=function(r){var n=e.extractExpiry(r),i=new Date,a=!1,s=!1;if(isNaN(n.getTime())||(a=!0,s=n>i),a){if(!s){var l=e.formatDate(n);this.outputExpiredTrialKey(l)}}else this.outputInvalidLicenseKey()},t.prototype.outputInvalidLicenseKey=function(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},t.prototype.outputExpiredTrialKey=function(r){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on "+r+".                                                *"),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},t.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},t.prototype.outputIncompatibleVersion=function(r,n){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on "+r+", however the version of AG Grid you    *"),console.error("* are trying to use was released on "+n+".                                                               *"),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"},t.RELEASE_INFORMATION="MTY1MjQ0MzczMDM1MQ==",ke([u.Autowired("md5")],t.prototype,"md5",void 0),ke([u.PreConstruct],t.prototype,"validateLicense",null),e=ke([u.Bean("licenseManager")],t)}(u.BeanStub),os=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ve=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.ieCompatibility=!1,e}return os(t,o),t.prototype.init=function(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")},t.prototype.md5cycle=function(e,r){var n=e[0],i=e[1],a=e[2],s=e[3];n=this.ff(n,i,a,s,r[0],7,-680876936),s=this.ff(s,n,i,a,r[1],12,-389564586),a=this.ff(a,s,n,i,r[2],17,606105819),i=this.ff(i,a,s,n,r[3],22,-1044525330),n=this.ff(n,i,a,s,r[4],7,-176418897),s=this.ff(s,n,i,a,r[5],12,1200080426),a=this.ff(a,s,n,i,r[6],17,-1473231341),i=this.ff(i,a,s,n,r[7],22,-45705983),n=this.ff(n,i,a,s,r[8],7,1770035416),s=this.ff(s,n,i,a,r[9],12,-1958414417),a=this.ff(a,s,n,i,r[10],17,-42063),i=this.ff(i,a,s,n,r[11],22,-1990404162),n=this.ff(n,i,a,s,r[12],7,1804603682),s=this.ff(s,n,i,a,r[13],12,-40341101),a=this.ff(a,s,n,i,r[14],17,-1502002290),i=this.ff(i,a,s,n,r[15],22,1236535329),n=this.gg(n,i,a,s,r[1],5,-165796510),s=this.gg(s,n,i,a,r[6],9,-1069501632),a=this.gg(a,s,n,i,r[11],14,643717713),i=this.gg(i,a,s,n,r[0],20,-373897302),n=this.gg(n,i,a,s,r[5],5,-701558691),s=this.gg(s,n,i,a,r[10],9,38016083),a=this.gg(a,s,n,i,r[15],14,-660478335),i=this.gg(i,a,s,n,r[4],20,-405537848),n=this.gg(n,i,a,s,r[9],5,568446438),s=this.gg(s,n,i,a,r[14],9,-1019803690),a=this.gg(a,s,n,i,r[3],14,-187363961),i=this.gg(i,a,s,n,r[8],20,1163531501),n=this.gg(n,i,a,s,r[13],5,-1444681467),s=this.gg(s,n,i,a,r[2],9,-51403784),a=this.gg(a,s,n,i,r[7],14,1735328473),i=this.gg(i,a,s,n,r[12],20,-1926607734),n=this.hh(n,i,a,s,r[5],4,-378558),s=this.hh(s,n,i,a,r[8],11,-2022574463),a=this.hh(a,s,n,i,r[11],16,1839030562),i=this.hh(i,a,s,n,r[14],23,-35309556),n=this.hh(n,i,a,s,r[1],4,-1530992060),s=this.hh(s,n,i,a,r[4],11,1272893353),a=this.hh(a,s,n,i,r[7],16,-155497632),i=this.hh(i,a,s,n,r[10],23,-1094730640),n=this.hh(n,i,a,s,r[13],4,681279174),s=this.hh(s,n,i,a,r[0],11,-358537222),a=this.hh(a,s,n,i,r[3],16,-722521979),i=this.hh(i,a,s,n,r[6],23,76029189),n=this.hh(n,i,a,s,r[9],4,-640364487),s=this.hh(s,n,i,a,r[12],11,-421815835),a=this.hh(a,s,n,i,r[15],16,530742520),i=this.hh(i,a,s,n,r[2],23,-995338651),n=this.ii(n,i,a,s,r[0],6,-198630844),s=this.ii(s,n,i,a,r[7],10,1126891415),a=this.ii(a,s,n,i,r[14],15,-1416354905),i=this.ii(i,a,s,n,r[5],21,-57434055),n=this.ii(n,i,a,s,r[12],6,1700485571),s=this.ii(s,n,i,a,r[3],10,-1894986606),a=this.ii(a,s,n,i,r[10],15,-1051523),i=this.ii(i,a,s,n,r[1],21,-2054922799),n=this.ii(n,i,a,s,r[8],6,1873313359),s=this.ii(s,n,i,a,r[15],10,-30611744),a=this.ii(a,s,n,i,r[6],15,-1560198380),i=this.ii(i,a,s,n,r[13],21,1309151649),n=this.ii(n,i,a,s,r[4],6,-145523070),s=this.ii(s,n,i,a,r[11],10,-1120210379),a=this.ii(a,s,n,i,r[2],15,718787259),i=this.ii(i,a,s,n,r[9],21,-343485551),e[0]=this.add32(n,e[0]),e[1]=this.add32(i,e[1]),e[2]=this.add32(a,e[2]),e[3]=this.add32(s,e[3])},t.prototype.cmn=function(e,r,n,i,a,s){return r=this.add32(this.add32(r,e),this.add32(i,s)),this.add32(r<<a|r>>>32-a,n)},t.prototype.ff=function(e,r,n,i,a,s,l){return this.cmn(r&n|~r&i,e,r,a,s,l)},t.prototype.gg=function(e,r,n,i,a,s,l){return this.cmn(r&i|n&~i,e,r,a,s,l)},t.prototype.hh=function(e,r,n,i,a,s,l){return this.cmn(r^n^i,e,r,a,s,l)},t.prototype.ii=function(e,r,n,i,a,s,l){return this.cmn(n^(r|~i),e,r,a,s,l)},t.prototype.md51=function(e){var i,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=e.length;i+=64)this.md5cycle(n,this.md5blk(e.substring(i-64,i)));e=e.substring(i-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<e.length;i++)a[i>>2]|=e.charCodeAt(i)<<(i%4<<3);if(a[i>>2]|=128<<(i%4<<3),i>55)for(this.md5cycle(n,a),i=0;i<16;i++)a[i]=0;return a[14]=8*r,this.md5cycle(n,a),n},t.prototype.md5blk=function(e){for(var r=[],n=0;n<64;n+=4)r[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return r},t.prototype.rhex=function(e){for(var r="0123456789abcdef".split(""),n="",i=0;i<4;i++)n+=r[e>>8*i+4&15]+r[e>>8*i&15];return n},t.prototype.hex=function(e){for(var r=0;r<e.length;r++)e[r]=this.rhex(e[r]);return e.join("")},t.prototype.md5=function(e){return this.hex(this.md51(e))},t.prototype.add32=function(e,r){return this.ieCompatibility?this.add32Compat(e,r):this.add32Std(e,r)},t.prototype.add32Std=function(e,r){return e+r&4294967295},t.prototype.add32Compat=function(e,r){var n=(65535&e)+(65535&r);return(e>>16)+(r>>16)+(n>>16)<<16|65535&n},Bo([u.PostConstruct],t.prototype,"init",null),Bo([u.Bean("md5")],t)}(u.BeanStub),jo=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Di=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Wo=function(o){function t(){return o.call(this,'<div class="ag-watermark">\n                    <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n               </div>')||this}return jo(t,o),t.prototype.postConstruct=function(){var e=this,r=this.shouldDisplayWatermark();this.addOrRemoveCssClass("ag-hidden",!r),r&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(function(){return e.addCssClass("ag-opacity-zero")},0),window.setTimeout(function(){return e.addCssClass("ag-hidden")},5e3))},t.prototype.shouldDisplayWatermark=function(){var n=(this.gridOptionsWrapper.getDocument().defaultView||window).location,i=n.hostname,a=void 0===i?"":i,s=n.pathname,l=this.licenseManager.isDisplayWatermark(),c=null!=a.match("^(?:127.0.0.1|localhost|(?:w+.)?ag-grid.com)$");return!!s&&-1!==s.indexOf("forceWatermark")||l&&!c},Di([u.Autowired("licenseManager")],t.prototype,"licenseManager",void 0),Di([u.RefSelector("eLicenseTextRef")],t.prototype,"eLicenseTextRef",void 0),Di([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),Re={moduleName:u.ModuleNames.EnterpriseCoreModule,beans:[Go,ve],agStackComponents:[{componentName:"AgWatermark",componentClass:Wo}]},as=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pt=(()=>(function(o){o[o.EXPANDED=0]="EXPANDED",o[o.COLLAPSED=1]="COLLAPSED",o[o.INDETERMINATE=2]="INDETERMINATE"}(pt||(pt={})),pt))(),ss=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return as(t,o),t.prototype.postConstruct=function(){var e=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",function(n){n.key===u.KeyCode.SPACE&&e.onExpandClicked()}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange(function(){return e.onFilterTextChanged()}),this.addManagedListener(this.eFilterTextField.getInputElement(),"keypress",this.onMiniFilterKeyPress.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var r=this.gridOptionsWrapper.getLocaleTextFunc();this.eSelect.setInputAriaLabel(r("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(r("ariaFilterColumnsInput","Filter Columns Input"))},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=u._.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=u._.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=u._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper)),this.setExpandState(pt.EXPANDED)},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressColumnFilter,r=!this.params.suppressColumnSelectAll,n=!this.params.suppressColumnExpandAll,i=this.columnModel.isPrimaryColumnGroupsPresent(),a=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(a("searchOoo","Search...")),u._.setDisplayed(this.eFilterTextField.getGui(),e),u._.setDisplayed(this.eSelect.getGui(),r),u._.setDisplayed(this.eExpand,n&&i)},t.prototype.onFilterTextChanged=function(){var e=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=u._.debounce(function(){var r=e.eFilterTextField.getValue();e.dispatchEvent({type:"filterChanged",filterText:r})},t.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},t.prototype.onMiniFilterKeyPress=function(e){var r=this;e.key===u.KeyCode.ENTER&&setTimeout(function(){return r.onSelectClicked()},t.DEBOUNCE_DELAY)},t.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},t.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===pt.EXPANDED?"collapseAll":"expandAll"})},t.prototype.setExpandState=function(e){this.expandState=e,u._.setDisplayed(this.eExpandChecked,this.expandState===pt.EXPANDED),u._.setDisplayed(this.eExpandUnchecked,this.expandState===pt.COLLAPSED),u._.setDisplayed(this.eExpandIndeterminate,this.expandState===pt.INDETERMINATE)},t.prototype.setSelectionState=function(e){this.selectState=e,this.eSelect.setValue(this.selectState)},t.DEBOUNCE_DELAY=300,t.TEMPLATE='<div class="ag-column-select-header" role="presentation" tabindex="-1">\n            <div ref="eExpand" class="ag-column-select-header-icon" tabindex="0"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',Rn([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Rn([u.RefSelector("eExpand")],t.prototype,"eExpand",void 0),Rn([u.RefSelector("eSelect")],t.prototype,"eSelect",void 0),Rn([u.RefSelector("eFilterTextField")],t.prototype,"eFilterTextField",void 0),Rn([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),Yr=function(){function o(t,e,r,n,i){void 0===n&&(n=!1),this.eventService=new u.EventService,this.displayName=t,this.dept=r,this.group=n,n?(this.columnGroup=e,this.expanded=i,this.children=[]):this.column=e}return o.prototype.isGroup=function(){return this.group},o.prototype.getDisplayName=function(){return this.displayName},o.prototype.getColumnGroup=function(){return this.columnGroup},o.prototype.getColumn=function(){return this.column},o.prototype.getDept=function(){return this.dept},o.prototype.isExpanded=function(){return!!this.expanded},o.prototype.getChildren=function(){return this.children},o.prototype.isPassesFilter=function(){return this.passesFilter},o.prototype.setExpanded=function(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:o.EVENT_EXPANDED_CHANGED}))},o.prototype.setPassesFilter=function(t){this.passesFilter=t},o.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},o.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},o.EVENT_EXPANDED_CHANGED="expandedChanged",o}(),ls=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),L=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},us=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},_t=function(o){function t(e,r,n){var i=o.call(this,'<div class="ag-menu"></div>')||this;return i.column=e,i.mouseEvent=r,i.parentEl=n,i.displayName=null,i}return ls(t,o),t.prototype.postConstruct=function(){this.initializeProperties(this.column),this.buildMenuItemMap(),this.displayName=this.column instanceof u.Column?this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()&&(this.mouseEvent.preventDefault(),this.displayContextMenu())},t.prototype.initializeProperties=function(e){this.columns=e instanceof u.ProvidedColumnGroup?e.getLeafColumns():[e],this.allowGrouping=this.columns.some(function(r){return r.isPrimary()&&r.isAllowRowGroup()}),this.allowValues=this.columns.some(function(r){return r.isPrimary()&&r.isAllowValue()}),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(function(r){return r.isPrimary()&&r.isAllowPivot()})},t.prototype.buildMenuItemMap=function(){var e=this,r=this.gridOptionsWrapper.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(n){return n.isPrimary()&&n.isAllowRowGroup()},activeFunction:function(n){return n.isRowGroupActive()},activateLabel:function(){return r("groupBy","Group by")+" "+e.displayName},deactivateLabel:function(){return r("ungroupBy","Un-Group by")+" "+e.displayName},activateFunction:function(){var n=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getRowGroupColumns();e.columnModel.setRowGroupColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(n){return n.isPrimary()&&n.isAllowValue()},activeFunction:function(n){return n.isValueActive()},activateLabel:function(){return r("addToValues","Add "+e.displayName+" to values",[e.displayName])},deactivateLabel:function(){return r("removeFromValues","Remove "+e.displayName+" from values",[e.displayName])},activateFunction:function(){var n=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getValueColumns();e.columnModel.setValueColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(n){return e.columnModel.isPivotMode()&&n.isPrimary()&&n.isAllowPivot()},activeFunction:function(n){return n.isPivotActive()},activateLabel:function(){return r("addToLabels","Add "+e.displayName+" to labels",[e.displayName])},deactivateLabel:function(){return r("removeFromLabels","Remove "+e.displayName+" from labels",[e.displayName])},activateFunction:function(){var n=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.addColumnsToList(n),"toolPanelUi")},deActivateFunction:function(){var n=e.columnModel.getPivotColumns();e.columnModel.setPivotColumns(e.removeColumnsFromList(n),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},t.prototype.addColumnsToList=function(e){return function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(us(arguments[t]));return o}(e).concat(this.columns.filter(function(r){return-1===e.indexOf(r)}))},t.prototype.removeColumnsFromList=function(e){var r=this;return e.filter(function(n){return-1===r.columns.indexOf(n)})},t.prototype.displayContextMenu=function(){var e=this,r=this.getGui(),n=this.createBean(new u.AgMenuList),i=this.getMappedMenuItems(),a=function(){};r.appendChild(n.getGui()),n.addMenuItems(i),n.addManagedListener(n,u.AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,function(){e.parentEl.focus(),a()});var s=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,afterGuiAttached:function(){return e.focusService.focusInto(n.getGui())},ariaLabel:"Foo",closedCallback:function(l){l instanceof KeyboardEvent&&e.parentEl.focus(),e.destroyBean(n)}});s&&(a=s.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:r})},t.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},t.prototype.getMappedMenuItems=function(){var e,r,n=[],i=function(h){var p=a.columns.some(function(d){return h.allowedFunction(d)&&!h.activeFunction(d)}),f=a.columns.some(function(d){return h.allowedFunction(d)&&h.activeFunction(d)});p&&n.push({name:h.activateLabel(a.displayName),icon:u._.createIconNoSpan(h.addIcon,a.gridOptionsWrapper,null),action:function(){return h.activateFunction()}}),f&&n.push({name:h.deactivateLabel(a.displayName),icon:u._.createIconNoSpan(h.removeIcon,a.gridOptionsWrapper,null),action:function(){return h.deActivateFunction()}})},a=this;try{for(var s=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.menuItemMap.values()),l=s.next();!l.done;l=s.next())i(l.value)}catch(h){e={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},L([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),L([u.Autowired("popupService")],t.prototype,"popupService",void 0),L([u.Autowired("focusService")],t.prototype,"focusService",void 0),L([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),Ri=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),bt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Vo=function(o){function t(e,r,n,i){var a=o.call(this)||this;return a.modelItem=e,a.allowDragging=r,a.eventType=n,a.focusWrapper=i,a.processingColumnStateChange=!1,a.modelItem=e,a.columnGroup=e.getColumnGroup(),a.columnDept=e.getDept(),a.allowDragging=r,a}return Ri(t,o),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=u._.createIconNoSpan("columnDrag",this.gridOptionsWrapper),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.columnGroup,this.eventType),u._.missing(this.displayName)&&(this.displayName=">>"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,u.AgCheckbox.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,Yr.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),u.CssClassApplier.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsWrapper,null,this.columnGroup).forEach(function(a){return e.addOrRemoveCssClass(a,!0)})},t.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},t.prototype.setupTooltip=function(){var e=this,r=this.columnGroup.getColGroupDef();if(r){var n=function(){e.setTooltip(r.headerTooltip)};n(),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,n)}},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},t.prototype.handleKeyDown=function(e){switch(e.key){case u.KeyCode.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case u.KeyCode.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case u.KeyCode.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},t.prototype.onContextMenu=function(e){var r=this,i=this.columnGroup;if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var s=this.createBean(new _t(i,e,this.focusWrapper));this.addDestroyFunc(function(){s.isAlive()&&r.destroyBean(s)})}},t.prototype.addVisibilityListenersToAllChildren=function(){var e=this;this.columnGroup.getLeafColumns().forEach(function(r){e.addManagedListener(r,u.Column.EVENT_VISIBLE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,u.Column.EVENT_VALUE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,u.Column.EVENT_PIVOT_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(r,u.Column.EVENT_ROW_GROUP_CHANGED,e.onColumnStateChanged.bind(e))})},t.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var r={type:u.DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){e.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.columnGroup})},onDragStopped:function(){e.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END})}};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(r)})}else u._.setDisplayed(this.eDragHandle,!1)},t.prototype.createDragItem=function(){var e={};return this.columnGroup.getLeafColumns().forEach(function(r){e[r.getId()]=r.isVisible()}),{columns:this.columnGroup.getLeafColumns(),visibleState:e}},t.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(u._.createIcon("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(u._.createIcon("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var e=new u.TouchListener(this.eColumnGroupIcons,!0);this.addManagedListener(e,u.TouchListener.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))},t.prototype.onLabelClicked=function(){var e=!this.cbSelect.getValue();this.onChangeCommon(e)},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.getVisibleLeafColumns=function(){var e=[],r=function(n){n.forEach(function(i){!i.isPassesFilter()||(i.isGroup()?r(i.getChildren()):e.push(i.getColumn()))})};return r(this.modelItem.getChildren()),e},t.prototype.onChangeCommon=function(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)},t.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("ariaColumnGroup","Column Group"),n=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");u._.setAriaLabel(this.focusWrapper,this.displayName+" "+r),this.cbSelect.setInputAriaLabel(i+" ("+n+")"),u._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.onColumnStateChanged=function(){var e=this.workOutSelectedValue(),r=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(r),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",r),this.processingColumnStateChange=!1},t.prototype.workOutSelectedValue=function(){var e=this,r=this.columnModel.isPivotMode(),n=this.getVisibleLeafColumns(),i=0,a=0;if(n.forEach(function(s){!r&&s.getColDef().lockVisible||(e.isColumnChecked(s,r)?i++:a++)}),!(i>0&&a>0))return i>0},t.prototype.workOutReadOnlyValue=function(){var e=this.columnModel.isPivotMode(),r=0;return this.columnGroup.getLeafColumns().forEach(function(n){e?n.isAnyFunctionAllowed()&&r++:n.getColDef().lockVisible||r++}),0===r},t.prototype.isColumnChecked=function(e,r){if(r){var n=e.isPivotActive(),i=e.isRowGroupActive(),a=e.isValueActive();return n||i||a}return e.isVisible()},t.prototype.onExpandOrContractClicked=function(){var e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)},t.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},t.prototype.setOpenClosedIcons=function(){var e=this.modelItem.isExpanded();u._.setDisplayed(this.eGroupClosedIcon,!e),u._.setDisplayed(this.eGroupOpenedIcon,e)},t.prototype.refreshAriaExpanded=function(){u._.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){var r=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!r||!e&&r)&&this.cbSelect.toggle()},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.setSelected=function(e){this.cbSelect.setValue(e,!0)},t.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',bt([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),bt([u.Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),bt([u.Autowired("modelItemUtils")],t.prototype,"modelItemUtils",void 0),bt([u.RefSelector("cbSelect")],t.prototype,"cbSelect",void 0),bt([u.RefSelector("eLabel")],t.prototype,"eLabel",void 0),bt([u.RefSelector("eGroupOpenedIcon")],t.prototype,"eGroupOpenedIcon",void 0),bt([u.RefSelector("eGroupClosedIcon")],t.prototype,"eGroupClosedIcon",void 0),bt([u.RefSelector("eColumnGroupIcons")],t.prototype,"eColumnGroupIcons",void 0),bt([u.PostConstruct],t.prototype,"init",null),t}(u.Component),Fi=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ki="ag-list-item-hovered",hs=function(o){function t(e,r){var n=o.call(this)||this;return n.comp=e,n.virtualList=r,n.currentDragColumn=null,n.lastHoveredColumnItem=null,n}return Fi(t,o),t.prototype.postConstruct=function(){this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,this.columnPanelItemDragStart.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,this.columnPanelItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},t.prototype.columnPanelItemDragStart=function(e){this.currentDragColumn=e.column,this.getCurrentColumns().find(function(a){var s=a.getColDef();return!!s.suppressMovable||!!s.lockPosition})&&(this.moveBlocked=!0)},t.prototype.columnPanelItemDragEnd=function(){var e=this;window.setTimeout(function(){e.currentDragColumn=null,e.moveBlocked=!1},10)},t.prototype.createDropTarget=function(){var e=this;this.dragAndDropService.addDropTarget({isInterestedIn:function(n){return n===u.DragSourceType.ToolPanel},getIconName:function(){return u.DragAndDropService[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(n){return e.onDragging(n)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}})},t.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new u.AutoScrollService({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(r){return e.scrollTop=r}})},t.prototype.onDragging=function(e){if(this.currentDragColumn&&!this.moveBlocked){var r=this.getDragColumnItem(e),n=this.virtualList.getComponentAt(r.rowIndex);if(n){var i=n.getGui().parentElement;this.lastHoveredColumnItem&&this.lastHoveredColumnItem.rowIndex===r.rowIndex&&this.lastHoveredColumnItem.position===r.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredColumnItem=r,u._.radioCssClass(i,""+ki),u._.radioCssClass(i,"ag-item-highlight-"+r.position))}}},t.prototype.getDragColumnItem=function(e){var r=this.virtualList.getGui(),n=parseFloat(window.getComputedStyle(r).paddingTop),i=this.virtualList.getRowHeight(),a=this.virtualList.getScrollTop(),s=Math.max(0,(e.y-n+a)/i),l=this.comp.getDisplayedColsList().length-1,c=0|Math.min(l,s);return{rowIndex:c,position:Math.round(s)>s||s>l?"bottom":"top",component:this.virtualList.getComponentAt(c)}},t.prototype.onDragStop=function(){if(!this.moveBlocked){var e=this.getTargetIndex(),r=this.getCurrentColumns();null!=e&&this.columnModel.moveColumns(r,e),this.clearHoveredItems(),this.autoScrollService.ensureCleared()}},t.prototype.getMoveDiff=function(e){var r=this.columnModel.getAllGridColumns(),n=this.getCurrentColumns(),a=n.length;return r.indexOf(n[0])<e?a:0},t.prototype.getCurrentColumns=function(){return this.currentDragColumn instanceof u.ProvidedColumnGroup?this.currentDragColumn.getLeafColumns():[this.currentDragColumn]},t.prototype.getTargetIndex=function(){if(!this.lastHoveredColumnItem)return null;var n,e=this.lastHoveredColumnItem.component,r="top"===this.lastHoveredColumnItem.position;e instanceof Vo?(n=e.getColumns()[0],r=!0):n=e.getColumn();var a=this.columnModel.getAllGridColumns().indexOf(n),s=r?a:a+1;return s-this.getMoveDiff(s)},t.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){this.virtualList.getGui().querySelectorAll("."+ki).forEach(function(r){[ki,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(function(n){r.classList.remove(n)})}),this.lastHoveredColumnItem=null},Fn([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Fn([u.Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Fn([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.BeanStub),Ho=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fs=function(o){function t(e,r,n,i,a){var s=o.call(this)||this;return s.column=e,s.columnDept=r,s.allowDragging=n,s.groupsExist=i,s.focusWrapper=a,s.processingColumnStateChange=!1,s}return Ho(t,o),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE),this.eDragHandle=u._.createIconNoSpan("columnDrag",this.gridOptionsWrapper),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel");var i=u._.escapeString(this.displayName);this.eLabel.innerHTML=i;var a=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+a),this.setupDragging(),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,u.Column.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,u.Column.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,u.Column.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,u.Column.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,u.AgCheckbox.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),u.CssClassApplier.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsWrapper,this.column,null).forEach(function(l){return e.addOrRemoveCssClass(l,!0)})},t.prototype.getColumn=function(){return this.column},t.prototype.setupTooltip=function(){var e=this,r=function(){var n=e.column.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,r)},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},t.prototype.onContextMenu=function(e){var r=this,i=this.column;if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var s=this.createBean(new _t(i,e,this.focusWrapper));this.addDestroyFunc(function(){s.isAlive()&&r.destroyBean(s)})}},t.prototype.handleKeyDown=function(e){e.key===u.KeyCode.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},t.prototype.onLabelClicked=function(){if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var e=!this.cbSelect.getValue();this.onChangeCommon(e)}},t.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},t.prototype.onChangeCommon=function(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))},t.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("ariaColumn","Column"),n=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");u._.setAriaLabel(this.focusWrapper,this.displayName+" "+r),this.cbSelect.setInputAriaLabel(i+" ("+n+")"),u._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},t.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var r={type:u.DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){e.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.column})},onDragStopped:function(){e.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END})}};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(r)})}else u._.setDisplayed(this.eDragHandle,!1)},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var e=this.columnModel.isPivotMode();if(e){var r=this.column.isAnyFunctionActive();this.cbSelect.setValue(r)}else this.cbSelect.setValue(this.column.isVisible());var n=!0,i=!0;if(e){var a=this.gridOptionsWrapper.isFunctionsReadOnly(),s=!this.column.isAnyFunctionAllowed();i=n=!a&&!s}else{var l=this.column.getColDef();n=!l.lockVisible,i=!!l.enableRowGroup||!!l.enableValue||!(l.lockPosition||l.suppressMovable)}this.cbSelect.setReadOnly(!n),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!i),this.addOrRemoveCssClass("ag-column-select-column-readonly",!i&&!n);var y=e&&this.gridOptionsWrapper.isFunctionsPassive();this.cbSelect.setPassive(y),this.processingColumnStateChange=!1},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.onSelectAllChanged=function(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},t.prototype.isSelected=function(){return this.cbSelect.getValue()},t.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},t.prototype.isExpandable=function(){return!1},t.prototype.setExpanded=function(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},t.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',wr([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),wr([u.Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),wr([u.Autowired("modelItemUtils")],t.prototype,"modelItemUtils",void 0),wr([u.RefSelector("eLabel")],t.prototype,"eLabel",void 0),wr([u.RefSelector("cbSelect")],t.prototype,"cbSelect",void 0),wr([u.PostConstruct],t.prototype,"init",null),t}(u.Component),ps=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),kn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zo=function(){function o(t){this.items=t}return o.prototype.getRowCount=function(){return this.items.length},o.prototype.getRow=function(t){return this.items[t]},o}(),Uo=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.destroyColumnItemFuncs=[],e}return ps(t,o),t.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(function(e){return e()}),this.destroyColumnItemFuncs=[]},t.prototype.init=function(e,r,n){var i=this;this.params=e,this.allowDragging=r,this.eventType=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[u.Events.EVENT_COLUMN_PIVOT_CHANGED,u.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,u.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,u.Events.EVENT_COLUMN_VALUE_CHANGED,u.Events.EVENT_COLUMN_VISIBLE,u.Events.EVENT_NEW_COLUMNS_LOADED].forEach(function(c){i.addManagedListener(i.eventService,c,i.fireSelectionChangedEvent.bind(i))}),this.expandGroupsByDefault=!this.params.contractColumnSelection;var l=this.gridOptionsWrapper.getLocaleTextFunc()("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new u.VirtualList("column-select","tree",l)),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator(function(c,h){return u._.setAriaLevel(h,c.getDept()+1),i.createComponentFromItem(c,h)}),this.columnModel.isReady()&&this.onColumnsChanged(),!e.suppressColumnMove&&!this.gridOptionsWrapper.isSuppressMovableColumns()&&this.createManagedBean(new hs(this,this.virtualList))},t.prototype.createComponentFromItem=function(e,r){if(e.isGroup()){var n=new Vo(e,this.allowDragging,this.eventType,r);return this.getContext().createBean(n),n}var i=new fs(e.getColumn(),e.getDept(),this.allowDragging,this.groupsExist,r);return this.getContext().createBean(i),i},t.prototype.onColumnsChanged=function(){var e=this.getExpandedStates(),r=this.columnModel.isPivotMode();this.params.suppressSyncLayoutWithGrid||r?this.buildTreeFromProvidedColumnDefs():this.buildTreeFromWhatGridIsDisplaying(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.getDisplayedColsList=function(){return this.displayedColsList},t.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var e={};return this.forEachItem(function(r){if(r.isGroup()){var n=r.getColumnGroup();n&&(e[n.getId()]=r.isExpanded())}}),e},t.prototype.setExpandedStates=function(e){!this.allColsTree||this.forEachItem(function(r){if(r.isGroup()){var n=r.getColumnGroup();if(n){var i=e[n.getId()];null!=i&&r.setExpanded(i)}}})},t.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},t.prototype.setColumnLayout=function(e){var r=this.colDefService.createColumnTree(e);this.buildListModel(r),this.groupsExist=e.some(function(n){return n&&void 0!==n.children}),this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},t.prototype.buildListModel=function(e){var r=this,n=this.onColumnExpanded.bind(this),a=function(c,h,p){c.forEach(function(f){f instanceof u.ProvidedColumnGroup?s(f,h,p):l(f,h,p)})},s=function(c,h,p){var f=c.getColGroupDef();if(!f||!f.suppressColumnsToolPanel){if(c.isPadding())return void a(c.getChildren(),h,p);var v=r.columnModel.getDisplayNameForProvidedColumnGroup(null,c,r.eventType),g=new Yr(v,c,h,!0,r.expandGroupsByDefault);p.push(g),function(c){c.addEventListener(Yr.EVENT_EXPANDED_CHANGED,n);var h=c.removeEventListener.bind(c,Yr.EVENT_EXPANDED_CHANGED,n);r.destroyColumnItemFuncs.push(h)}(g),a(c.getChildren(),h+1,g.getChildren())}},l=function(c,h,p){if(!c.getColDef()||!c.getColDef().suppressColumnsToolPanel){var d=r.columnModel.getDisplayNameForColumn(c,"columnToolPanel");p.push(new Yr(d,c,h))}};this.destroyColumnTree(),a(e,0,this.allColsTree)},t.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},t.prototype.flattenAndFilterModel=function(){var e=this;this.displayedColsList=[];var r=function(i){!i.isPassesFilter()||(e.displayedColsList.push(i),i.isGroup()&&i.isExpanded()&&i.getChildren().forEach(r))};this.allColsTree.forEach(r),this.virtualList.setModel(new zo(this.displayedColsList));var n=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=n&&this.focusRowIfAlive(n),this.notifyListeners()},t.prototype.focusRowIfAlive=function(e){var r=this;window.setTimeout(function(){r.isAlive()&&r.virtualList.focusRow(e)},0)},t.prototype.forEachItem=function(e){var r=function(n){n.forEach(function(i){e(i),i.isGroup()&&r(i.getChildren())})};r(this.allColsTree)},t.prototype.doSetExpandedAll=function(e){this.forEachItem(function(r){r.isGroup()&&r.setExpanded(e)})},t.prototype.setGroupsExpanded=function(e,r){if(r){var n=[];this.forEachItem(function(a){if(a.isGroup()){var s=a.getColumnGroup().getId();r.indexOf(s)>=0&&(a.setExpanded(e),n.push(s))}});var i=r.filter(function(a){return!u._.includes(n,a)});i.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",i)}else this.doSetExpandedAll(e)},t.prototype.getExpandState=function(){var e=0,r=0;return this.forEachItem(function(n){!n.isGroup()||(n.isExpanded()?e++:r++)}),e>0&&r>0?pt.INDETERMINATE:r>0?pt.COLLAPSED:pt.EXPANDED},t.prototype.doSetSelectedAll=function(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)},t.prototype.getSelectionState=function(){var e=0,r=0,n=this.columnModel.isPivotMode();if(this.forEachItem(function(i){if(!i.isGroup()&&i.isPassesFilter()){var l,a=i.getColumn(),s=a.getColDef();if(n){if(!a.isAllowPivot()&&!a.isAllowRowGroup()&&!a.isAllowValue())return;l=a.isValueActive()||a.isPivotActive()||a.isRowGroupActive()}else{if(s.lockVisible)return;l=a.isVisible()}l?e++:r++}}),!(e>0&&r>0))return!(0===e||r>0)},t.prototype.setFilterText=function(e){this.filterText=u._.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},t.prototype.markFilteredColumns=function(){var e=this,r=function(i){if(!u._.exists(e.filterText))return!0;var a=i.getDisplayName();return null==a||-1!==a.toLowerCase().indexOf(e.filterText)},n=function(i,a){var s=!1;if(i.isGroup()){var l=r(i);i.getChildren().forEach(function(h){var p=n(h,l||a);p&&(s=p)})}var c=!(!a&&!s)||r(i);return i.setPassesFilter(c),c};this.allColsTree.forEach(function(i){return n(i,!1)})},t.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},t.prototype.fireGroupExpandedEvent=function(){var e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})},t.prototype.fireSelectionChangedEvent=function(){var e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})},t.TEMPLATE='<div class="ag-column-select-list" role="presentation"></div>',kn([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),kn([u.Autowired("toolPanelColDefService")],t.prototype,"colDefService",void 0),kn([u.Autowired("modelItemUtils")],t.prototype,"modelItemUtils",void 0),kn([u.PreDestroy],t.prototype,"destroyColumnTree",null),t}(u.Component),Ju=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Li=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$o=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Ju(t,o),t.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},t.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var e=this.gridOptionsWrapper.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,u.AgCheckbox.EVENT_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},t.prototype.onBtPivotMode=function(){var e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");var r=this.gridOptionsWrapper.getApi();r&&r.refreshHeader()}},t.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)},Li([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Li([u.RefSelector("cbPivotMode")],t.prototype,"cbPivotMode",void 0),Li([u.PreConstruct],t.prototype,"init",null),t}(u.Component),ds=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ir=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qr=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return ds(t,o),t.prototype.execute=function(e){var r=u._.missingOrEmpty(this.columnModel.getValueColumns()),n=!this.gridOptionsWrapper.getGroupRowAggFunc(),i=e.changedPath&&e.changedPath.isActive();if(!(r&&n&&i)){var a=this.createAggDetails(e);this.recursivelyCreateAggData(a)}},t.prototype.createAggDetails=function(e){var r=this.columnModel.isPivotActive(),n=this.columnModel.getValueColumns(),i=r?this.columnModel.getPivotColumns():[];return{changedPath:e.changedPath,valueColumns:n,pivotColumns:i}},t.prototype.recursivelyCreateAggData=function(e){var r=this;this.filteredOnly=!this.gridOptionsWrapper.isSuppressAggFilteredOnly(),e.changedPath.forEachChangedNodeDepthFirst(function(i){if(i.hasChildren()){if(-1===i.level){var l=!r.columnModel.isPivotMode();if(r.gridOptionsWrapper.isSuppressAggAtRootLevel()&&l)return}r.aggregateRowNode(i,e)}else i.aggData&&i.setAggData(null)},!0)},t.prototype.aggregateRowNode=function(e,r){var s,n=0===r.valueColumns.length,i=0===r.pivotColumns.length,a=this.gridOptionsWrapper.getGroupRowAggFunc();s=a?a({nodes:e.childrenAfterFilter}):n?null:i?this.aggregateRowNodeUsingValuesOnly(e,r):this.aggregateRowNodeUsingValuesAndPivot(e),e.setAggData(s),e.sibling&&e.sibling.setAggData(s)},t.prototype.aggregateRowNodeUsingValuesAndPivot=function(e){var r=this,n={},i=this.pivotStage.getPivotColumnDefs();return i.filter(function(a){return!u._.exists(a.pivotTotalColumnIds)}).forEach(function(a){var l,c=a.pivotValueColumn,h=a.colId;l=e.leafGroup?r.getValuesFromMappedSet(e.childrenMapped,a.pivotKeys||[],c):r.getValuesPivotNonLeaf(e,h),n[h]=r.aggregateValues(l,c.getAggFunc(),c,e)}),i.filter(function(a){return u._.exists(a.pivotTotalColumnIds)}).forEach(function(a){var s=[],l=a.pivotValueColumn,c=a.pivotTotalColumnIds,h=a.colId;!c||!c.length||(c.forEach(function(p){s.push(n[p])}),n[h]=r.aggregateValues(s,l.getAggFunc(),l,e))}),n},t.prototype.aggregateRowNodeUsingValuesOnly=function(e,r){var n=this,i={},a=r.changedPath.isActive()?r.changedPath.getValueColumnsForNode(e,r.valueColumns):r.valueColumns,s=r.changedPath.isActive()?r.changedPath.getNotValueColumnsForNode(e,r.valueColumns):null,l=this.getValuesNormal(e,a),c=e.aggData;return a.forEach(function(h,p){i[h.getId()]=n.aggregateValues(l[p],h.getAggFunc(),h,e)}),s&&c&&s.forEach(function(h){i[h.getId()]=c[h.getId()]}),i},t.prototype.getValuesPivotNonLeaf=function(e,r){var n=[];return e.childrenAfterFilter.forEach(function(i){n.push(i.aggData[r])}),n},t.prototype.getValuesFromMappedSet=function(e,r,n){var i=this,a=e;if(r.forEach(function(l){return a=a?a[l]:null}),!a)return[];var s=[];return a.forEach(function(l){var c=i.valueService.getValue(n,l);s.push(c)}),s},t.prototype.getValuesNormal=function(e,r){var n=[];r.forEach(function(){return n.push([])});for(var i=r.length,a=this.filteredOnly?e.childrenAfterFilter:e.childrenAfterGroup,s=a.length,l=0;l<s;l++)for(var c=a[l],h=0;h<i;h++){var f=this.valueService.getValue(r[h],c);n[h].push(f)}return n},t.prototype.aggregateValues=function(e,r,n,i){var a="string"==typeof r?this.aggFuncService.getAggFunc(r):r;if("function"!=typeof a)return console.error("AG Grid: unrecognised aggregation function "+r),null;var s=function(){u._.doOnce(function(){console.warn("AG Grid: since v24.0, custom aggregation functions take a params object. Please alter your aggregation function to use params.values")},"aggregationStage.aggregateValues Deprecation")};return a({values:e,column:n,colDef:n?n.getColDef():void 0,rowNode:i,data:i?i.data:void 0,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext(),forEach:function(h,p){return s(),e.forEach(h,p)},get length(){return s(),e.length},set length(h){s(),e.length=h}})},ir([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),ir([u.Autowired("valueService")],t.prototype,"valueService",void 0),ir([u.Autowired("pivotStage")],t.prototype,"pivotStage",void 0),ir([u.Autowired("aggFuncService")],t.prototype,"aggFuncService",void 0),ir([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),ir([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),ir([u.Bean("aggregationStage")],t)}(u.BeanStub),xr=function(){function o(){this.allSets={},this.allParents=[]}return o.prototype.removeFromChildrenAfterGroup=function(t,e){this.getSet(t).removeFromChildrenAfterGroup[e.id]=!0},o.prototype.removeFromAllLeafChildren=function(t,e){this.getSet(t).removeFromAllLeafChildren[e.id]=!0},o.prototype.getSet=function(t){return this.allSets[t.id]||(this.allSets[t.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(t)),this.allSets[t.id]},o.prototype.getAllParents=function(){return this.allParents},o.prototype.flush=function(){var t=this;this.allParents.forEach(function(e){var r=t.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter(function(n){return!r.removeFromChildrenAfterGroup[n.id]}),e.allLeafChildren=e.allLeafChildren.filter(function(n){return!r.removeFromAllLeafChildren[n.id]}),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)}),this.allSets={},this.allParents.length=0},o}(),vs=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),or=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},gs=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ms=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.groupIdSequence=new u.NumberSequence,e}return vs(t,o),t.prototype.postConstruct=function(){this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.usingTreeData&&(this.getDataPath=this.gridOptionsWrapper.getDataPathFunc())},t.prototype.execute=function(e){var r=this.createGroupingDetails(e);r.transactions?this.handleTransaction(r):this.shotgunResetEverything(r,!0===e.afterColumnsChanged),this.positionLeafsAboveGroups(e.changedPath),this.orderGroups(r.rootNode),this.selectableService.updateSelectableAfterGrouping(r.rootNode)},t.prototype.positionLeafsAboveGroups=function(e){this.usingTreeData||e.forEachChangedNodeDepthFirst(function(r){if(r.childrenAfterGroup){var n=[],i=[];r.childrenAfterGroup.forEach(function(a){var s;(null===(s=a.childrenAfterGroup)||void 0===s?void 0:s.length)?i.push(a):n.push(a)}),r.childrenAfterGroup=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(gs(arguments[t]));return o}(n,i)}},!1)},t.prototype.createGroupingDetails=function(e){var r=e.rowNode,n=e.changedPath,i=e.rowNodeTransactions,a=e.rowNodeOrder,s=this.usingTreeData?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsWrapper.isSuppressParentsInRowNodes(),expandByDefault:this.gridOptionsWrapper.getGroupDefaultExpanded(),groupedCols:s,rootNode:r,pivotMode:this.columnModel.isPivotMode(),groupedColCount:this.usingTreeData||!s?0:s.length,rowNodeOrder:a,transactions:i,changedPath:n}},t.prototype.handleTransaction=function(e){var r=this;e.transactions.forEach(function(n){var i=r.usingTreeData?void 0:new xr;if(u._.existsAndNotEmpty(n.remove)&&r.removeNodes(n.remove,e,i),u._.existsAndNotEmpty(n.update)&&r.moveNodesInWrongPath(n.update,e,i),u._.existsAndNotEmpty(n.add)&&r.insertNodes(n.add,e,!1),i){var a=i.getAllParents().slice();i.flush(),r.removeEmptyGroups(a,e)}}),e.rowNodeOrder&&this.sortChildren(e)},t.prototype.sortChildren=function(e){e.changedPath.forEachChangedNodeDepthFirst(function(r){u._.sortRowNodesByOrder(r.childrenAfterGroup,e.rowNodeOrder)})},t.prototype.orderGroups=function(e){if(!this.usingTreeData){var r=this.gridOptionsWrapper.getInitialGroupOrderComparator();u._.exists(r)&&function n(i){u._.exists(i.childrenAfterGroup)&&!i.leafGroup&&(i.childrenAfterGroup.sort(function(s,l){return r({nodeA:s,nodeB:l})}),i.childrenAfterGroup.forEach(function(s){return n(s)}))}(e)}},t.prototype.getExistingPathForNode=function(e,r){for(var n=[],i=this.usingTreeData?e:e.parent;i&&i!==r.rootNode;)n.push({key:i.key,rowGroupColumn:i.rowGroupColumn,field:i.field}),i=i.parent;return n.reverse(),n},t.prototype.moveNodesInWrongPath=function(e,r,n){var i=this;e.forEach(function(a){r.changedPath.isActive()&&r.changedPath.addParentNode(a.parent);var s=function(p){return p.key},l=i.getExistingPathForNode(a,r).map(s),c=i.getGroupInfo(a,r).map(s);u._.areEqual(l,c)||i.moveNode(a,r,n)})},t.prototype.moveNode=function(e,r,n){this.removeNodesInStages([e],r,n),this.insertOneNode(e,r,!0),e.setData(e.data),r.changedPath.isActive()&&r.changedPath.addParentNode(e.parent)},t.prototype.removeNodes=function(e,r,n){this.removeNodesInStages(e,r,n),r.changedPath.isActive()&&e.forEach(function(i){return r.changedPath.addParentNode(i.parent)})},t.prototype.removeNodesInStages=function(e,r,n){if(this.removeNodesFromParents(e,r,n),this.usingTreeData){this.postRemoveCreateFillerNodes(e,r);var i=e.map(function(a){return a.parent});this.removeEmptyGroups(i,r)}},t.prototype.forEachParentGroup=function(e,r,n){for(var i=r;i&&i!==e.rootNode;)n(i),i=i.parent},t.prototype.removeNodesFromParents=function(e,r,n){var i=this,a=null==n,s=n||new xr;e.forEach(function(l){i.removeFromParent(l,s),i.forEachParentGroup(r,l.parent,function(c){s.removeFromAllLeafChildren(c,l)})}),a&&s.flush()},t.prototype.postRemoveCreateFillerNodes=function(e,r){var n=this;e.forEach(function(i){if(i.hasChildren()){var s=n.getExistingPathForNode(i,r),l=n.findParentForNode(i,s,r);l.expanded=i.expanded,l.allLeafChildren=i.allLeafChildren,l.childrenAfterGroup=i.childrenAfterGroup,l.childrenMapped=i.childrenMapped,l.updateHasChildren(),l.childrenAfterGroup.forEach(function(c){return c.parent=l})}})},t.prototype.removeEmptyGroups=function(e,r){for(var n=this,i=!0,s=function(){i=!1;var l=new xr;e.forEach(function(c){n.forEachParentGroup(r,c,function(h){(function(l){var c=n.getChildrenMappedKey(l.key,l.rowGroupColumn),h=l.parent;return!!(h&&h.childrenMapped&&h.childrenMapped[c]&&l.isEmptyRowGroupNode())})(h)&&(i=!0,n.removeFromParent(h,l),h.setSelected(!1))})}),l.flush()};i;)s()},t.prototype.removeFromParent=function(e,r){e.parent&&(r?r.removeFromChildrenAfterGroup(e.parent,e):(u._.removeFromArray(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));var n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);e.parent&&e.parent.childrenMapped&&(e.parent.childrenMapped[n]=void 0),e.setRowTop(null),e.setRowIndex(null)},t.prototype.addToParent=function(e,r){var n=this.getChildrenMappedKey(e.key,e.rowGroupColumn);r&&(null!=r.childrenMapped&&(r.childrenMapped[n]=e),r.childrenAfterGroup.push(e),r.updateHasChildren())},t.prototype.areGroupColsEqual=function(e,r){return null!=e&&null!=r&&e.pivotMode===r.pivotMode&&u._.areEqual(e.groupedCols,r.groupedCols)},t.prototype.checkAllGroupDataAfterColsChanged=function(e){var r=this,n=function(i){!i||i.forEach(function(a){!r.usingTreeData&&!a.group||(r.setGroupData(a,{field:a.field,key:a.key,rowGroupColumn:a.rowGroupColumn}),n(a.childrenAfterGroup))})};n(e.rootNode.childrenAfterGroup)},t.prototype.shotgunResetEverything=function(e,r){if(!this.noChangeInGroupingColumns(e,r)){this.selectionService.removeGroupsFromSelection();var n=e.rootNode;n.leafGroup=!this.usingTreeData&&0===e.groupedCols.length,n.childrenAfterGroup=[],n.childrenMapped={},n.updateHasChildren();var a=n.sibling;a&&(a.childrenAfterGroup=n.childrenAfterGroup,a.childrenMapped=n.childrenMapped),this.insertNodes(n.allLeafChildren,e,!1)}},t.prototype.noChangeInGroupingColumns=function(e,r){var n=!1,i=this.columnModel.getGroupDisplayColumns(),a=i?i.map(function(s){return s.getId()}).join("-"):"";return r&&(n=this.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==a&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=a,n},t.prototype.insertNodes=function(e,r,n){var i=this;e.forEach(function(a){i.insertOneNode(a,r,n),r.changedPath.isActive()&&r.changedPath.addParentNode(a.parent)})},t.prototype.insertOneNode=function(e,r,n){var i=this.getGroupInfo(e,r),a=this.findParentForNode(e,i,r);a.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[a.data,e.data]),this.usingTreeData?this.swapGroupWithUserNode(a,e,n):(e.parent=a,e.level=i.length,a.childrenAfterGroup.push(e),a.updateHasChildren())},t.prototype.findParentForNode=function(e,r,n){var i=this,a=n.rootNode;return r.forEach(function(s,l){(a=i.getOrCreateNextNode(a,s,l,n)).allLeafChildren.push(e)}),a},t.prototype.swapGroupWithUserNode=function(e,r,n){r.parent=e.parent,r.key=e.key,r.field=e.field,r.groupData=e.groupData,r.level=e.level,n||(r.expanded=e.expanded),r.leafGroup=e.leafGroup,r.rowGroupIndex=e.rowGroupIndex,r.allLeafChildren=e.allLeafChildren,r.childrenAfterGroup=e.childrenAfterGroup,r.childrenMapped=e.childrenMapped,r.updateHasChildren(),this.removeFromParent(e),r.childrenAfterGroup.forEach(function(i){return i.parent=r}),this.addToParent(r,e.parent)},t.prototype.getOrCreateNextNode=function(e,r,n,i){var a=this.getChildrenMappedKey(r.key,r.rowGroupColumn),s=e.childrenMapped?e.childrenMapped[a]:void 0;return s||(s=this.createGroup(r,e,n,i),this.addToParent(s,e)),s},t.prototype.createGroup=function(e,r,n,i){var a=new u.RowNode(this.beans);return a.group=!0,a.field=e.field,a.rowGroupColumn=e.rowGroupColumn,this.setGroupData(a,e),a.id=u.RowNode.ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),a.key=e.key,a.level=n,a.leafGroup=!this.usingTreeData&&n===i.groupedColCount-1,a.allLeafChildren=[],a.setAllChildrenCount(0),a.rowGroupIndex=this.usingTreeData?null:n,a.childrenAfterGroup=[],a.childrenMapped={},a.updateHasChildren(),a.parent=i.includeParents?r:null,this.setExpandedInitialValue(i,a),a},t.prototype.setGroupData=function(e,r){var n=this;e.groupData={},this.columnModel.getGroupDisplayColumns().forEach(function(a){(n.usingTreeData||e.rowGroupColumn&&a.isRowGroupDisplayed(e.rowGroupColumn.getId()))&&(e.groupData[a.getColId()]=r.key)})},t.prototype.getChildrenMappedKey=function(e,r){return r?r.getId()+"-"+e:e},t.prototype.setExpandedInitialValue=function(e,r){if(e.pivotMode&&r.leafGroup)r.expanded=!1;else{var n=this.gridOptionsWrapper.getIsGroupOpenByDefaultFunc();r.expanded=n?1==n({rowNode:r,field:r.field,key:r.key,level:r.level,rowGroupColumn:r.rowGroupColumn}):-1===e.expandByDefault||r.level<e.expandByDefault}},t.prototype.getGroupInfo=function(e,r){return this.usingTreeData?this.getGroupInfoFromCallback(e):this.getGroupInfoFromGroupColumns(e,r)},t.prototype.getGroupInfoFromCallback=function(e){var r=this.getDataPath?this.getDataPath(e.data):null;return(null==r||0===r.length)&&u._.doOnce(function(){return console.warn("AG Grid: getDataPath() should not return an empty path for data",e.data)},"groupStage.getGroupInfoFromCallback"),r?r.map(function(i){return{key:i,field:null,rowGroupColumn:null}}):[]},t.prototype.getGroupInfoFromGroupColumns=function(e,r){var n=this,i=[];return r.groupedCols.forEach(function(a){var s=n.valueService.getKeyForNode(a,e),l=null!=s;if(r.pivotMode&&!l&&(s=" ",l=!0),l){var c={key:s,field:a.getColDef().field,rowGroupColumn:a};i.push(c)}}),i},or([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),or([u.Autowired("selectableService")],t.prototype,"selectableService",void 0),or([u.Autowired("valueService")],t.prototype,"valueService",void 0),or([u.Autowired("beans")],t.prototype,"beans",void 0),or([u.Autowired("selectionService")],t.prototype,"selectionService",void 0),or([u.PostConstruct],t.prototype,"postConstruct",null),or([u.Bean("groupStage")],t)}(u.BeanStub),Cs=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Or=function(){return Or=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Or.apply(this,arguments)},Ii=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},_s=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Ni=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(_s(arguments[t]));return o},bs=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}var e;return Cs(t,o),e=t,t.prototype.createPivotColumnDefs=function(r){var n=this.columnModel.getPivotColumns(),i=this.columnModel.getValueColumns(),s=this.recursiveBuildGroup(0,r,[],n.length,n),c=function l(p,f){return void 0===f&&(f=[]),p.forEach(function(d){void 0!==d.children?l(d.children,f):f.push(d)}),f}(s);return this.addRowGroupTotals(s,c,i),this.addExpandablePivotGroups(s,c),this.addPivotTotalsToGroups(s,c),{pivotColumnGroupDefs:s,pivotColumnDefs:c.map(function(p){return u._.cloneObject(p)})}},t.prototype.recursiveBuildGroup=function(r,n,i,a,s){var l=this,c=this.columnModel.getValueColumns();if(r>=a)return this.buildMeasureCols(i);var h=s[r].getColDef(),p=this.headerNameComparator.bind(this,h.pivotComparator);if(1===c.length&&this.gridOptionsWrapper.isRemovePivotHeaderRowWhenSingleValueColumn()&&r===a-1){var f=[];return u._.iterateObject(n,function(v){var g=Ni(i,[v]);f.push(Or(Or({},l.createColDef(c[0],v,g)),{columnGroupShow:"open"}))}),f.sort(p),f}var d=[];return u._.iterateObject(n,function(v,g){var y=Ni(i,[v]);d.push({children:l.recursiveBuildGroup(r+1,g,y,a,s),headerName:v,pivotKeys:y,columnGroupShow:"open",groupId:l.generateColumnGroupId(y)})}),d.sort(p),d},t.prototype.buildMeasureCols=function(r){var n=this,i=this.columnModel.getValueColumns();return 0===i.length?[this.createColDef(null,"-",r)]:i.map(function(a){var s=n.columnModel.getDisplayNameForColumn(a,"header");return Or(Or({},n.createColDef(a,s,r)),{columnGroupShow:"open"})})},t.prototype.addExpandablePivotGroups=function(r,n){var i=this;if(!this.gridOptionsWrapper.isSuppressExpandablePivotGroups()&&!this.gridOptionsWrapper.getPivotColumnGroupTotals()){var a=function(s,l,c){var h=s;if(h.children){var p=new Map;h.children.forEach(function(y){a(y,l,p)});var f=!h.children.some(function(y){return y.children});i.columnModel.getValueColumns().forEach(function(y){var m=i.columnModel.getDisplayNameForColumn(y,"header"),C=i.createColDef(y,m,s.pivotKeys);C.pivotTotalColumnIds=p.get(y.getColId()),C.columnGroupShow="closed",C.aggFunc=y.getAggFunc(),f||(s.children.push(C),l.push(C))}),i.merge(c,p)}else{var d=s;if(!d.pivotValueColumn)return;var v=d.pivotValueColumn.getColId(),g=c.has(v)?c.get(v):[];g.push(d.colId),c.set(v,g)}};r.forEach(function(s){a(s,n,new Map)})}},t.prototype.addPivotTotalsToGroups=function(r,n){var i=this;if(this.gridOptionsWrapper.getPivotColumnGroupTotals()){var a="after"===this.gridOptionsWrapper.getPivotColumnGroupTotals(),s=this.columnModel.getValueColumns(),l=s.map(function(h){return h.getAggFunc()});if(l&&!(l.length<1)&&this.sameAggFuncs(l)){var c=s[0];r.forEach(function(h){i.recursivelyAddPivotTotal(h,n,c,a)})}}},t.prototype.recursivelyAddPivotTotal=function(r,n,i,a){var s=this,l=r;if(!l.children)return r.colId?[r.colId]:null;var h=[];if(l.children.forEach(function(g){var y=s.recursivelyAddPivotTotal(g,n,i,a);y&&(h=h.concat(y))}),l.children.length>1){var f=this.gridOptionsWrapper.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),d=this.createColDef(i,f,r.pivotKeys,!0);d.pivotTotalColumnIds=h,d.aggFunc=i.getAggFunc();var v=r.children;a?v.push(d):v.unshift(d),n.push(d)}return h},t.prototype.addRowGroupTotals=function(r,n,i){var a=this;if(this.gridOptionsWrapper.getPivotRowTotals())for(var s="after"===this.gridOptionsWrapper.getPivotRowTotals(),l=s?i.slice():i.slice().reverse(),c=function(f){var d=l[f],v=[];r.forEach(function(g){v=v.concat(a.extractColIdsForValueColumn(g,d))}),h.createRowGroupTotal(r,n,d,v,s)},h=this,p=0;p<l.length;p++)c(p)},t.prototype.extractColIdsForValueColumn=function(r,n){var i=this;if(!r.children)return r.pivotValueColumn===n&&r.colId?[r.colId]:[];var l=[];return r.children.forEach(function(c){i.extractColIdsForValueColumn(c,n);var h=i.extractColIdsForValueColumn(c,n);l=l.concat(h)}),l},t.prototype.createRowGroupTotal=function(r,n,i,a,s){var c;if(0===this.columnModel.getValueColumns().length)c=this.createColDef(null,"-",[]);else{var h=this.columnModel.getDisplayNameForColumn(i,"header");(c=this.createColDef(i,h,[])).pivotTotalColumnIds=a}c.colId=e.PIVOT_ROW_TOTAL_PREFIX+c.colId,n.push(c),s?r.push(c):r.unshift(c)},t.prototype.createColDef=function(r,n,i,a){void 0===a&&(a=!1);var s={};if(r){var l=r.getColDef();Object.assign(s,l),s.hide=!1}return s.headerName=n,s.colId=this.generateColumnId(i||[],r&&!a?r.getColId():""),s.field=s.colId,s.pivotKeys=i,s.pivotValueColumn=r,!0===s.filter&&(s.filter="agNumberColumnFilter"),s},t.prototype.sameAggFuncs=function(r){if(1==r.length)return!0;for(var n=1;n<r.length;n++)if(r[n]!==r[0])return!1;return!0},t.prototype.headerNameComparator=function(r,n,i){return r?r(n.headerName,i.headerName):n.headerName&&!i.headerName?1:!n.headerName&&i.headerName?-1:n.headerName&&i.headerName?n.headerName<i.headerName?-1:n.headerName>i.headerName?1:0:0},t.prototype.merge=function(r,n){n.forEach(function(i,a,s){var l=r.has(a)?r.get(a):[],c=Ni(l,i);r.set(a,c)})},t.prototype.generateColumnGroupId=function(r){return"pivotGroup_"+this.columnModel.getPivotColumns().map(function(i){return i.getColId()}).join("-")+"_"+r.join("-")},t.prototype.generateColumnId=function(r,n){return"pivot_"+this.columnModel.getPivotColumns().map(function(a){return a.getColId()}).join("-")+"_"+r.join("-")+"_"+n},t.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",Ii([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),e=Ii([u.Bean("pivotColDefService")],t)}(u.BeanStub),Ko=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ln=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ss=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.uniqueValues={},e}return Ko(t,o),t.prototype.execute=function(e){var r=e.rowNode,n=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(r,n):this.executePivotOff(n)},t.prototype.executePivotOff=function(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())},t.prototype.executePivotOn=function(e,r){var n=this.bucketUpRowNodes(e),i=this.setUniqueValues(n),a=this.columnModel.getValueColumns(),s=a.map(function(v){return v.getId()+"-"+v.getColDef().headerName}).join("#"),l=a.map(function(v){return v.getAggFunc().toString()}).join("#"),c=this.aggregationColumnsHashLastTime!==s,h=this.aggregationFuncsHashLastTime!==l;if(this.aggregationColumnsHashLastTime=s,this.aggregationFuncsHashLastTime=l,i||c||h){var p=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),f=p.pivotColumnGroupDefs;this.pivotColumnDefs=p.pivotColumnDefs,this.columnModel.setSecondaryColumns(f,"rowModelUpdated"),r&&r.setInactive()}},t.prototype.setUniqueValues=function(e){return!(JSON.stringify(e)===JSON.stringify(this.uniqueValues)||(this.uniqueValues=e,0))},t.prototype.bucketUpRowNodes=function(e){var r=this,n={},i=function(a){a.leafGroup?r.bucketRowNode(a,n):a.childrenAfterFilter.forEach(function(s){i(s)})};return i(e),n},t.prototype.bucketRowNode=function(e,r){var n=this.columnModel.getPivotColumns();e.childrenMapped=0===n.length?null:this.bucketChildren(e.childrenAfterFilter,n,0,r),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)},t.prototype.bucketChildren=function(e,r,n,i){var a=this,s={},l=r[n];if(e.forEach(function(h){var p=a.valueService.getKeyForNode(l,h);u._.missing(p)&&(p=""),i[p]||(i[p]={}),s[p]||(s[p]=[]),s[p].push(h)}),n===r.length-1)return s;var c={};return u._.iterateObject(s,function(h,p){c[h]=a.bucketChildren(p,r,n+1,i[h])}),c},t.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},Ln([u.Autowired("valueService")],t.prototype,"valueService",void 0),Ln([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Ln([u.Autowired("pivotColDefService")],t.prototype,"pivotColDefService",void 0),Ln([u.Bean("pivotStage")],t)}(u.BeanStub),Yo=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ws=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},It="undefined"==typeof BigInt?null:BigInt,Qu=function(o){function t(){var r=null!==o&&o.apply(this,arguments)||this;return r.aggFuncsMap={},r.initialised=!1,r}var e;return Yo(t,o),e=t,t.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsWrapper.getAggFuncs()))},t.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[e.AGG_SUM]=xs,this.aggFuncsMap[e.AGG_FIRST]=Os,this.aggFuncsMap[e.AGG_LAST]=W,this.aggFuncsMap[e.AGG_MIN]=le,this.aggFuncsMap[e.AGG_MAX]=k,this.aggFuncsMap[e.AGG_COUNT]=X,this.aggFuncsMap[e.AGG_AVG]=ne,this.initialised=!0},t.prototype.isAggFuncPossible=function(r,n){var i=this.getFuncNames(r),a=u._.includes(i,n),s=u._.exists(this.aggFuncsMap[n]);return a&&s},t.prototype.getDefaultAggFunc=function(r){var n=r.getColDef().defaultAggFunc;if(u._.exists(n)&&this.isAggFuncPossible(r,n))return n;if(this.isAggFuncPossible(r,e.AGG_SUM))return e.AGG_SUM;var i=this.getFuncNames(r);return u._.existsAndNotEmpty(i)?i[0]:null},t.prototype.addAggFuncs=function(r){u._.iterateObject(r,this.addAggFunc.bind(this))},t.prototype.addAggFunc=function(r,n){this.init(),this.aggFuncsMap[r]=n},t.prototype.getAggFunc=function(r){return this.init(),this.aggFuncsMap[r]},t.prototype.getFuncNames=function(r){var n=r.getColDef().allowedAggFuncs;return null==n?Object.keys(this.aggFuncsMap).sort():n},t.prototype.clear=function(){this.aggFuncsMap={}},t.AGG_SUM="sum",t.AGG_FIRST="first",t.AGG_LAST="last",t.AGG_MIN="min",t.AGG_MAX="max",t.AGG_COUNT="count",t.AGG_AVG="avg",ws([u.PostConstruct],t.prototype,"init",null),e=ws([u.Bean("aggFuncService")],t)}(u.BeanStub);function xs(o){for(var t=o.values,e=null,r=0;r<t.length;r++){var n=t[r];"number"==typeof n?null===e?e=n:e+=It?"number"==typeof e?n:It(n):n:"bigint"==typeof n&&(e=null===e?n:("bigint"==typeof e?e:It(e))+n)}return e}function Os(o){return o.values.length>0?o.values[0]:null}function W(o){return o.values.length>0?u._.last(o.values):null}function le(o){for(var t=o.values,e=null,r=0;r<t.length;r++){var n=t[r];("number"==typeof n||"bigint"==typeof n)&&(null===e||e>n)&&(e=n)}return e}function k(o){for(var t=o.values,e=null,r=0;r<t.length;r++){var n=t[r];("number"==typeof n||"bigint"==typeof n)&&(null===e||e<n)&&(e=n)}return e}function X(o){for(var t=o.values,e=0,r=0;r<t.length;r++){var n=t[r];e+=null!=n&&"number"==typeof n.value?n.value:1}return{value:e,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function ne(o){for(var t=o.values,e=0,r=0,n=0;n<t.length;n++){var i=t[n],a=null;"number"==typeof i||"bigint"==typeof i?(a=i,r++):null!=i&&("number"==typeof i.value||"bigint"==typeof i.value)&&"number"==typeof i.count&&(a=It?i.value*("number"==typeof i.value?i.count:It(i.count)):i.value*i.count,r+=i.count),"number"==typeof a?e+=It?"number"==typeof e?a:It(a):a:"bigint"==typeof a&&(e=("bigint"==typeof e?e:It(e))+a)}var s=null;return r>0&&(s=It?e/("number"==typeof e?r:It(r)):e/r),{count:r,value:s,toString:function(){return"number"==typeof this.value||"bigint"==typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var na,jn,zi,Ui,$i,Sc,ia,wc,Ws,ce=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Le=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Pr=function(o){function t(e,r,n,i,a){var s=o.call(this)||this;return s.column=e,s.dragSourceDropTarget=r,s.ghost=n,s.valueColumn=i,s.horizontal=a,s.popupShowing=!1,s}return ce(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE);var e=this.getGui(),r=this.gridOptionsWrapper.isFunctionsReadOnly();this.addElementClasses(e),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(u._.createIconNoSpan("columnDrag",this.gridOptionsWrapper)),this.eButton.appendChild(u._.createIconNoSpan("cancel",this.gridOptionsWrapper)),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),!this.ghost&&!r&&this.addDragSource();var n=this.gridOptionsWrapper.getLocaleTextFunc(),i=n("ariaDropZoneColumnComponentDescription","Press DELETE to remove"),a=this.getColumnAndAggFuncName(),s=a.name,l=a.aggFuncName,c="";this.valueColumn&&!r&&(c=n("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type")),u._.setAriaLabel(e,l+" "+s+" "+i+" "+c),this.setupTooltip()},t.prototype.setupTooltip=function(){var e=this,r=function(){var n=e.column.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,r)},t.prototype.addDragSource=function(){var e=this,r={type:u.DragSourceType.ToolPanel,eElement:this.eDragHandle,defaultIconName:u.DragAndDropService.ICON_HIDE,getDragItem:function(){return e.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc(function(){return e.dragAndDropService.removeDragSource(r)})},t.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},t.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.valueColumn&&!this.gridOptionsWrapper.isFunctionsReadOnly()&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},t.prototype.setupRemove=function(){var e=this;u._.setDisplayed(this.eButton,!this.gridOptionsWrapper.isFunctionsReadOnly());var r={type:t.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",function(i){var a=i.key===u.KeyCode.ENTER;i.key===u.KeyCode.DELETE&&(i.preventDefault(),e.dispatchEvent(r)),a&&e.valueColumn&&!e.gridOptionsWrapper.isFunctionsReadOnly()&&(i.preventDefault(),e.onShowAggFuncSelection())}),this.addManagedListener(this.eButton,"click",function(i){e.dispatchEvent(r),i.stopPropagation()});var n=new u.TouchListener(this.eButton);this.addManagedListener(n,u.TouchListener.EVENT_TAP,function(){e.dispatchEvent(r)}),this.addDestroyFunc(n.destroy.bind(n))},t.prototype.getColumnAndAggFuncName=function(){var e=this.displayName,r="";if(this.valueColumn){var n=this.column.getAggFunc(),i="string"==typeof n?n:"agg";r=this.gridOptionsWrapper.getLocaleTextFunc()(i,i)}return{name:e,aggFuncName:r}},t.prototype.setTextValue=function(){var e=this.getColumnAndAggFuncName(),r=e.name,a=u._.escapeString(this.valueColumn?e.aggFuncName+"("+r+")":r);this.eText.innerHTML=a},t.prototype.onShowAggFuncSelection=function(){var e=this;if(!this.popupShowing){this.popupShowing=!0;var r=new u.VirtualList("select-agg-func"),n=this.aggFuncService.getFuncNames(this.column),i=this.getGui(),a=r.getGui();r.setModel({getRow:function(f){return n[f]},getRowCount:function(){return n.length}}),this.getContext().createBean(r);var s=u._.loadTemplate('<div class="ag-select-agg-func-popup"></div>');s.style.top="0px",s.style.left="0px",s.appendChild(a),s.style.width=i.clientWidth+"px";var c=this.gridOptionsWrapper.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:function(){e.destroyBean(r),e.popupShowing=!1,i.focus()},ariaLabel:c("ariaLabelAggregationFunction","Aggregation Function")});h&&r.setComponentCreator(this.createAggSelect.bind(this,h.hideFunc)),r.addGuiEventListener("keydown",function(f){if(f.key===u.KeyCode.ENTER||f.key===u.KeyCode.SPACE){var d=r.getLastFocusedRow();if(null==d)return;var v=r.getComponentAt(d);v&&v.selectItem()}}),this.popupService.positionPopupUnderComponent({type:"aggFuncSelect",eventSource:i,ePopup:s,keepWithinBounds:!0,column:this.column}),r.refresh();var p=n.findIndex(function(f){return f===e.column.getAggFunc()});-1===p&&(p=0),r.focusRow(p)}},t.prototype.createAggSelect=function(e,r){var n=this,a=this.gridOptionsWrapper.getLocaleTextFunc(),s=r.toString(),l=a(s,s);return new he(function(){e(),n.gridOptionsWrapper.isFunctionsPassive()?n.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[n.column],aggFunc:r,api:n.gridApi,columnApi:n.columnApi}):n.columnModel.setColumnAggFunc(n.column,r,"toolPanelDragAndDrop")},l)},t.prototype.addElementClasses=function(e,r){e.classList.add("ag-column-drop-cell"+(r=r?"-"+r:""),"ag-column-drop-"+(this.horizontal?"horizontal":"vertical")+"-cell"+r)},t.EVENT_COLUMN_REMOVE="columnRemove",t.TEMPLATE='<span role="option" tabindex="0">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',Le([u.Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Le([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Le([u.Autowired("popupService")],t.prototype,"popupService",void 0),Le([u.Optional("aggFuncService")],t.prototype,"aggFuncService",void 0),Le([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),Le([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Le([u.RefSelector("eText")],t.prototype,"eText",void 0),Le([u.RefSelector("eDragHandle")],t.prototype,"eDragHandle",void 0),Le([u.RefSelector("eButton")],t.prototype,"eButton",void 0),Le([u.PostConstruct],t.prototype,"init",null),t}(u.Component),he=function(o){function t(e,r){var n=o.call(this,'<div class="ag-select-agg-func-item"/>')||this;return n.selectItem=e,n.getGui().innerText=r,n.addGuiEventListener("click",n.selectItem),n}return ce(t,o),t}(u.Component),Xo=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gi=function(o){function t(e,r){var n=o.call(this,'<div class="ag-unselectable" aria-role="presentation"></div>')||this;return n.horizontal=e,n.valueColumn=r,n.state=t.STATE_NOT_DRAGGING,n.guiDestroyFunctions=[],n.childColumnComponents=[],n.resizeEnabled=!1,n.addElementClasses(n.getGui()),n.eColumnDropList=document.createElement("div"),n.addElementClasses(n.eColumnDropList,"list"),u._.setAriaRole(n.eColumnDropList,"listbox"),n}return Xo(t,o),t.prototype.isHorizontal=function(){return this.horizontal},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e},t.prototype.setBeans=function(e){this.beans=e},t.prototype.destroy=function(){this.destroyGui(),o.prototype.destroy.call(this)},t.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach(function(e){return e()}),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,u._.clearElement(this.getGui()),u._.clearElement(this.eColumnDropList)},t.prototype.init=function(e){this.params=e,this.createManagedBean(new u.ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedListener(this.beans.gridOptionsWrapper,"functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new u.PositionableFeature(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),u._.setAriaLabel(this.eColumnDropList,this.getAriaLabel())},t.prototype.handleKeyDown=function(e){var n=e.key===u.KeyCode.DOWN,i=e.key===u.KeyCode.UP;if(this.horizontal){var a=this.gridOptionsWrapper.isEnableRtl();n=!a&&e.key===u.KeyCode.RIGHT||a&&e.key===u.KeyCode.LEFT,i=!a&&e.key===u.KeyCode.LEFT||a&&e.key===u.KeyCode.RIGHT}if(n||i){var s=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,i);s&&(e.preventDefault(),s.focus())}},t.prototype.addElementClasses=function(e,r){e.classList.add("ag-column-drop"+(r=r?"-"+r:""),"ag-column-drop-"+(this.horizontal?"horizontal":"vertical")+r)},t.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},t.prototype.isInterestedIn=function(e){return e===u.DragSourceType.HeaderCell||e===u.DragSourceType.ToolPanel},t.prototype.checkInsertIndex=function(e){var r=this.horizontal?this.getNewHorizontalInsertIndex(e):this.getNewVerticalInsertIndex(e);if(r<0)return!1;var n=r!==this.insertIndex;return n&&(this.insertIndex=r),n},t.prototype.getNewHorizontalInsertIndex=function(e){if(u._.missing(e.hDirection))return-1;var r=0,n=e.event,i=this.beans.gridOptionsWrapper.isEnableRtl(),a=e.hDirection===u.HorizontalDirection.Left,s=n.clientX;return this.childColumnComponents.forEach(function(l){var c=l.getGui().getBoundingClientRect(),h=a?c.right:c.left;(i?s<=h:s>=h)&&r++}),r},t.prototype.getNewVerticalInsertIndex=function(e){if(u._.missing(e.vDirection))return-1;var r=0,n=e.event;return this.childColumnComponents.forEach(function(i){var a=i.getGui().getBoundingClientRect();n.clientY>=(e.vDirection===u.VerticalDirection.Down?a.top:a.bottom)&&r++}),r},t.prototype.checkDragStartedBySelf=function(e){this.state===t.STATE_NOT_DRAGGING&&(this.state=t.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=e.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())},t.prototype.onDragging=function(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()},t.prototype.onDragEnter=function(e){var r=e.dragSource.getDragItem().columns||[];this.state=t.STATE_NEW_COLUMNS_IN;var n=r.filter(this.isColumnDroppable.bind(this));n.length>0&&(this.potentialDndColumns=n,this.checkInsertIndex(e),this.refreshGui())},t.prototype.isPotentialDndColumns=function(){return u._.existsAndNotEmpty(this.potentialDndColumns)},t.prototype.onDragLeave=function(e){if(this.state===t.STATE_REARRANGE_COLUMNS){var r=e.dragSource.getDragItem().columns||[];this.removeColumns(r)}this.isPotentialDndColumns()&&(this.potentialDndColumns=[],this.refreshGui()),this.state=t.STATE_NOT_DRAGGING},t.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var e=!1;this.state===t.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),e=!0):e=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],(!this.beans.gridOptionsWrapper.isFunctionsPassive()||!e)&&this.refreshGui()}this.state=t.STATE_NOT_DRAGGING},t.prototype.removeColumns=function(e){var r=this.getExistingColumns().filter(function(n){return!u._.includes(e,n)});this.updateColumns(r)},t.prototype.addColumns=function(e){if(e){var r=this.getExistingColumns().slice(),n=e.filter(function(i){return r.indexOf(i)<0});u._.insertArrayIntoArray(r,n,this.insertIndex),this.updateColumns(r)}},t.prototype.rearrangeColumns=function(e){var r=this.getNonGhostColumns().slice();return u._.insertArrayIntoArray(r,e,this.insertIndex),!u._.areEqual(r,this.getExistingColumns())&&(this.updateColumns(r),!0)},t.prototype.refreshGui=function(){var e=this.eColumnDropList.scrollTop,r=this.resizeEnabled,n=this.getFocusedItem(),i=this.focusService.findNextFocusableElement();i||(i=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=e),r&&this.toggleResizable(r),this.restoreFocus(n,i)},t.prototype.getFocusedItem=function(){var e=this.getGui(),r=this.gridOptionsWrapper.getDocument().activeElement;return e.contains(r)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(r):-1},t.prototype.restoreFocus=function(e,r){var n=this.getGui(),i=Array.from(n.querySelectorAll(".ag-column-drop-cell"));if(-1!==e){0===i.length&&r.focus();var s=i[Math.min(i.length-1,e)];s&&s.focus()}},t.prototype.getNonGhostColumns=function(){var e=this,r=this.getExistingColumns();return this.isPotentialDndColumns()?r.filter(function(n){return!u._.includes(e.potentialDndColumns,n)}):r},t.prototype.addColumnsToGui=function(){var e=this,r=this.getNonGhostColumns(),n=this.isPotentialDndColumns(),i=[];r.forEach(function(a,s){if(!(n&&s>=e.insertIndex)){var l=e.createColumnComponent(a,!1);i.push(l)}}),this.isPotentialDndColumns()&&(this.potentialDndColumns.forEach(function(a){var s=e.createColumnComponent(a,!0);i.push(s)}),r.forEach(function(a,s){if(!(s<e.insertIndex)){var l=e.createColumnComponent(a,!1);i.push(l)}})),this.appendChild(this.eColumnDropList),i.forEach(function(a,s){s>0&&e.addArrow(e.eColumnDropList),e.eColumnDropList.appendChild(a.getGui())}),this.addAriaLabelsToComponents()},t.prototype.addAriaLabelsToComponents=function(){var e=this;this.childColumnComponents.forEach(function(r,n){var i=r.getGui();u._.setAriaPosInSet(i,n+1),u._.setAriaSetSize(i,e.childColumnComponents.length)})},t.prototype.createColumnComponent=function(e,r){var n=this,i=new Pr(e,this.dropTarget,r,this.valueColumn,this.horizontal);return i.addEventListener(Pr.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[e])),this.beans.context.createBean(i),this.guiDestroyFunctions.push(function(){return n.destroyBean(i)}),r||this.childColumnComponents.push(i),i},t.prototype.addIconAndTitleToGui=function(){var e=this.params.icon,r=document.createElement("div");if(r.setAttribute("aria-hidden","true"),this.addElementClasses(r,"title-bar"),this.addElementClasses(e,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),r.appendChild(e),!this.horizontal){var n=document.createElement("span");this.addElementClasses(n,"title"),n.innerHTML=this.params.title,r.appendChild(n)}this.appendChild(r)},t.prototype.isExistingColumnsEmpty=function(){return 0===this.getExistingColumns().length},t.prototype.addEmptyMessageToGui=function(){if(this.isExistingColumnsEmpty()&&!this.isPotentialDndColumns()){var e=document.createElement("span");e.innerHTML=this.params.emptyMessage,this.addElementClasses(e,"empty-message"),this.eColumnDropList.appendChild(e)}},t.prototype.addArrow=function(e){if(this.horizontal){var r=this.beans.gridOptionsWrapper.isEnableRtl(),n=u._.createIconNoSpan(r?"smallLeft":"smallRight",this.beans.gridOptionsWrapper);this.addElementClasses(n,"cell-separator"),e.appendChild(n)}},t.STATE_NOT_DRAGGING="notDragging",t.STATE_NEW_COLUMNS_IN="newColumnsIn",t.STATE_REARRANGE_COLUMNS="rearrangeColumns",function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([u.Autowired("focusService")],t.prototype,"focusService",void 0),t}(u.Component),Ts=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ar=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Bi=function(o){function t(e){return o.call(this,e,!1)||this}return Ts(t,o),t.prototype.passBeansUp=function(){o.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=e("groups","Row Groups");o.prototype.init.call(this,{dragAndDropIcon:u.DragAndDropService.ICON_GROUP,icon:u._.createIconNoSpan("rowGroupPanel",this.gridOptionsWrapper,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){return this.gridOptionsWrapper.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="rowGroupColumnsList",e},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary())&&e.isAllowRowGroup()&&!e.isRowGroupActive()},t.prototype.updateColumns=function(e){this.gridOptionsWrapper.isFunctionsPassive()?this.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e,api:this.gridApi,columnApi:this.columnApi}):this.columnModel.setRowGroupColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?u.DragAndDropService.ICON_GROUP:u.DragAndDropService.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},ar([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),ar([u.Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0),ar([u.Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),ar([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),ar([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),ar([u.PostConstruct],t.prototype,"passBeansUp",null),t}(Gi),Mp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),In=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},As=function(o){function t(e){return o.call(this,e,!1)||this}return Mp(t,o),t.prototype.passBeansUp=function(){o.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("pivotColumnsEmptyMessage","Drag here to set column labels"),n=e("pivots","Column Labels");o.prototype.init.call(this,{dragAndDropIcon:u.DragAndDropService.ICON_GROUP,icon:u._.createIconNoSpan("pivotPanel",this.gridOptionsWrapper,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},t.prototype.getAriaLabel=function(){return this.gridOptionsWrapper.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="pivotColumnsList",e},t.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},t.prototype.checkVisibility=function(){var e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsWrapper.getPivotPanelShow()){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":var r=this.columnModel.isPivotActive();this.setDisplayed(e&&r);break;default:this.setDisplayed(!1)}else this.setDisplayed(e)},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary())&&e.isAllowPivot()&&!e.isPivotActive()},t.prototype.updateColumns=function(e){this.gridOptionsWrapper.isFunctionsPassive()?this.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e,api:this.gridApi,columnApi:this.columnApi}):this.columnModel.setPivotColumns(e,"toolPanelUi")},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?u.DragAndDropService.ICON_PIVOT:u.DragAndDropService.ICON_NOT_ALLOWED},t.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},In([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),In([u.Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0),In([u.Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),In([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),In([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),In([u.PostConstruct],t.prototype,"passBeansUp",null),t}(Gi),Dp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ec=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Rp=function(o){function t(){return o.call(this)||this}return Dp(t,o),t.prototype.postConstruct=function(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()},t.prototype.createNorthPanel=function(){var e=document.createElement("div"),r=this.onDropPanelVisible.bind(this);return e.classList.add("ag-column-drop-wrapper"),u._.setAriaRole(e,"presentation"),this.rowGroupComp=new Bi(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new As(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,u.Component.EVENT_DISPLAYED_CHANGED,r),this.addManagedListener(this.pivotComp,u.Component.EVENT_DISPLAYED_CHANGED,r),this.onDropPanelVisible(),e},t.prototype.onDropPanelVisible=function(){var e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)},t.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var e=this.gridOptionsWrapper.getRowGroupPanelShow();if(e===u.Constants.ALWAYS)this.rowGroupComp.setDisplayed(!0);else if(e===u.Constants.ONLY_WHEN_GROUPING){var r=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(r)}else this.rowGroupComp.setDisplayed(!1)}},ec([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),ec([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),Fp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Es=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},kp=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Fp(t,o),t.prototype.execute=function(e){var r=this,n=this.columnModel.isPivotMode(),i=this.filterManager.isAggregateFilterPresent(),l=this.gridOptionsWrapper.getGroupAggFiltering()||(n?function(f){return f.node.leafGroup}:function(f){return!f.node.group}),h=function(f,d){void 0===d&&(d=!1),f.childrenAfterFilter&&(f.childrenAfterAggFilter=f.childrenAfterFilter,d&&f.childrenAfterAggFilter.forEach(function(v){return h(v,d)}),r.setAllChildrenCount(f)),f.sibling&&(f.sibling.childrenAfterAggFilter=f.childrenAfterAggFilter)};e.changedPath.forEachChangedNodeDepthFirst(i?function(f){var d;f.childrenAfterAggFilter=(null===(d=f.childrenAfterFilter)||void 0===d?void 0:d.filter(function(v){var g;return l({node:v})&&r.filterManager.doesRowPassAggregateFilters({rowNode:v})?(h(v,!0),!0):null===(g=v.childrenAfterAggFilter)||void 0===g?void 0:g.length}))||null,r.setAllChildrenCount(f),f.sibling&&(f.sibling.childrenAfterAggFilter=f.childrenAfterAggFilter)}:h,!0)},t.prototype.setAllChildrenCountTreeData=function(e){var r=0;e.childrenAfterAggFilter.forEach(function(n){r++,r+=n.allChildrenCount}),e.setAllChildrenCount(r)},t.prototype.setAllChildrenCountGridGrouping=function(e){var r=0;e.childrenAfterAggFilter.forEach(function(n){n.group?r+=n.allChildrenCount:r++}),e.setAllChildrenCount(r)},t.prototype.setAllChildrenCount=function(e){e.hasChildren()?this.gridOptionsWrapper.isTreeData()?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e):e.setAllChildrenCount(null)},Es([u.Autowired("filterManager")],t.prototype,"filterManager",void 0),Es([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Es([u.Bean("filterAggregatesStage")],t)}(u.BeanStub),tc={moduleName:u.ModuleNames.RowGroupingModule,beans:[qr,kp,ms,bs,Ss,Qu],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:Rp}],dependantModules:[Re]},Lp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rc=function(o){function t(e){return o.call(this,e,!0)||this}return Lp(t,o),t.prototype.passBeansUp=function(){o.prototype.setBeans.call(this,{gridOptionsWrapper:this.gridOptionsWrapper,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("valueColumnsEmptyMessage","Drag here to aggregate"),n=e("values","Values");o.prototype.init.call(this,{dragAndDropIcon:u.DragAndDropService.ICON_AGGREGATE,icon:u._.createIconNoSpan("valuePanel",this.gridOptionsWrapper,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},t.prototype.getAriaLabel=function(){return this.gridOptionsWrapper.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="valueColumnsList",e},t.prototype.getIconName=function(){return this.isPotentialDndColumns()?u.DragAndDropService.ICON_AGGREGATE:u.DragAndDropService.ICON_NOT_ALLOWED},t.prototype.isColumnDroppable=function(e){return!(this.gridOptionsWrapper.isFunctionsReadOnly()||!e.isPrimary())&&e.isAllowValue()&&!e.isValueActive()},t.prototype.updateColumns=function(e){this.gridOptionsWrapper.isFunctionsPassive()?this.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e,api:this.gridApi,columnApi:this.columnApi}):this.columnModel.setValueColumns(e,"toolPanelUi")},t.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},Nn([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Nn([u.Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0),Nn([u.Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Nn([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),Nn([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Nn([u.PostConstruct],t.prototype,"passBeansUp",null),t}(Gi),Ip=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ms=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ds=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return Ip(t,o),t.prototype.postConstruct=function(){this.initialiseTabGuard({})},t.prototype.init=function(e,r,n){this.allowDragging=e,this.params=r,this.eventType=n,this.primaryColsHeaderPanel.init(this.params),this.params.suppressColumnExpandAll&&this.params.suppressColumnFilter&&this.params.suppressColumnSelectAll&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new u.PositionableFeature(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})},t.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},t.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},t.prototype.expandGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)},t.prototype.collapseGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)},t.prototype.setColumnLayout=function(e){this.primaryColsListPanel.setColumnLayout(e)},t.prototype.onFilterChanged=function(e){this.primaryColsListPanel.setFilterText(e.filterText)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},t.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},t.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},t.prototype.onGroupExpanded=function(e){this.primaryColsHeaderPanel.setExpandState(e.state)},t.prototype.onSelectionChange=function(e){this.primaryColsHeaderPanel.setSelectionState(e.state)},t.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',Ms([u.RefSelector("primaryColsHeaderPanel")],t.prototype,"primaryColsHeaderPanel",void 0),Ms([u.RefSelector("primaryColsListPanel")],t.prototype,"primaryColsListPanel",void 0),Ms([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.TabGuardComp),Np=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nc=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Gp=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.childDestroyFuncs=[],e}return Np(t,o),t.prototype.setVisible=function(e){o.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.init=function(e){var r=this,n={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};if(u._.mergeDeep(n,e),this.params=n,this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new $o),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotModePanel)}),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Ds),this.childDestroyFuncs.push(function(){return r.destroyBean(r.primaryColsPanel)}),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new Bi(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.rowGroupDropZonePanel)}),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new rc(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.valuesDropZonePanel)}),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new As(!1)),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotDropZonePanel)}),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var i=this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){r.resetChildrenHeight(),r.setLastVisible()});this.childDestroyFuncs.push(function(){return i()})}this.initialised=!0},t.prototype.setPivotModeSectionVisible=function(e){var r=this;!this.isRowGroupingModuleLoaded()||(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new $o),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(function(){return r.destroyBean(r.pivotModePanel)})),this.setLastVisible())},t.prototype.setRowGroupsSectionVisible=function(e){!this.isRowGroupingModuleLoaded()||(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new Bi(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},t.prototype.setValuesSectionVisible=function(e){!this.isRowGroupingModuleLoaded()||(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new rc(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},t.prototype.setPivotSectionVisible=function(e){!this.isRowGroupingModuleLoaded()||(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new As(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())},t.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(function(e){if(e){var r=e.getGui();e.toggleResizable(!r.classList.contains("ag-last-column-drop")&&!r.classList.contains("ag-hidden"))}})},t.prototype.setLastVisible=function(){var e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach(function(a){return a.classList.remove("ag-last-column-drop")});var n=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=u._.last(n);i&&i.classList.add("ag-last-column-drop"),this.setResizers()},t.prototype.resetChildrenHeight=function(){for(var r=this.getGui().children,n=0;n<r.length;n++){var i=r[n];i.style.removeProperty("height"),i.style.removeProperty("flex")}},t.prototype.isRowGroupingModuleLoaded=function(){return u.ModuleRegistry.assertRegistered(u.ModuleNames.RowGroupingModule,"Row Grouping")},t.prototype.expandColumnGroups=function(e){this.primaryColsPanel.expandGroups(e)},t.prototype.collapseColumnGroups=function(e){this.primaryColsPanel.collapseGroups(e)},t.prototype.setColumnLayout=function(e){this.primaryColsPanel.setColumnLayout(e)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},t.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach(function(e){return e()}),this.childDestroyFuncs.length=0,u._.clearElement(this.getGui())},t.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},t.prototype.destroy=function(){this.destroyChildren(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-column-panel"></div>',nc([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),nc([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),t}(u.Component),Bp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ic=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},oc=function(o){function t(){var e=o.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return e.minWidth=100,e.maxWidth=null,e}return Bp(t,o),t.prototype.setElementToResize=function(e){this.elementToResize=e},t.prototype.postConstruct=function(){var e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizing.bind(this)});this.addDestroyFunc(e),this.setInverted(this.gridOptionsWrapper.isEnableRtl())},t.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth},t.prototype.onResizing=function(e){var n=Math.max(this.minWidth,Math.floor(this.startingWidth-e*(this.inverted?-1:1)));null!=this.maxWidth&&(n=Math.min(this.maxWidth,n)),this.elementToResize.style.width=n+"px"},t.prototype.setInverted=function(e){this.inverted=e},t.prototype.setMaxWidth=function(e){this.maxWidth=e},t.prototype.setMinWidth=function(e){this.minWidth=null!=e?e:100},ic([u.Autowired("horizontalResizeService")],t.prototype,"horizontalResizeService",void 0),ic([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),jp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rs=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ac=function(o){function t(e){var r=o.call(this)||this;return r.toolPanelDef=e,r}return jp(t,o),t.prototype.getToolPanelId=function(){return this.toolPanelDef.id},t.prototype.postConstruct=function(){var e=this.createTemplate();this.setTemplate(e),this.eIconWrapper.insertAdjacentElement("afterbegin",u._.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsWrapper)),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this))},t.prototype.createTemplate=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=this.toolPanelDef;return'<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" class="ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span class="ag-side-button-label">'+e(r.labelKey,r.labelDefault)+"</span>\n                </button>\n            </div>"},t.prototype.onButtonPressed=function(){this.dispatchEvent({type:t.EVENT_TOGGLE_BUTTON_CLICKED})},t.prototype.setSelected=function(e){this.addOrRemoveCssClass("ag-selected",e)},t.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",Rs([u.RefSelector("eToggleButton")],t.prototype,"eToggleButton",void 0),Rs([u.RefSelector("eIconWrapper")],t.prototype,"eIconWrapper",void 0),Rs([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),Wp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sc=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.buttonComps=[],e}return Wp(t,o),t.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},t.prototype.handleKeyDown=function(e){if(e.key===u.KeyCode.TAB&&e.shiftKey){var r=u._.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(r,!0)&&e.preventDefault()}},t.prototype.setToolPanelDefs=function(e){e.forEach(this.addButtonComp.bind(this))},t.prototype.setActiveButton=function(e){this.buttonComps.forEach(function(r){r.setSelected(e===r.getToolPanelId())})},t.prototype.addButtonComp=function(e){var r=this,n=this.createBean(new ac(e));this.buttonComps.push(n),this.appendChild(n),n.addEventListener(ac.EVENT_TOGGLE_BUTTON_CLICKED,function(){r.dispatchEvent({type:t.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})})},t.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),u._.clearElement(this.getGui())},t.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",t.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',qo([u.Autowired("focusService")],t.prototype,"focusService",void 0),qo([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),qo([u.PostConstruct],t.prototype,"postConstruct",null),qo([u.PreDestroy],t.prototype,"clearButtons",null),t}(u.Component),Vp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),lc=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Hp=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return Vp(t,o),t.prototype.setupResize=function(){var e=this.getGui(),r=this.resizeBar=new oc;this.getContext().createBean(r),r.setElementToResize(e),this.appendChild(r)},t.prototype.getToolPanelId=function(){return this.toolPanelId},t.prototype.setToolPanelDef=function(e){var r=e.id,n=e.minWidth,i=e.maxWidth,a=e.width;this.toolPanelId=r,this.width=a;var c=this.userComponentFactory.getToolPanelCompDetails(e,{}).newAgStackInstance();null!=c?(c.then(this.setToolPanelComponent.bind(this)),null!=n&&this.resizeBar.setMinWidth(n),null!=i&&this.resizeBar.setMaxWidth(i)):console.warn("AG Grid: error processing tool panel component "+r+". You need to specify either 'toolPanel' or 'toolPanelFramework'")},t.prototype.setToolPanelComponent=function(e){var r=this;this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(function(){r.destroyBean(e)}),this.width&&(this.getGui().style.width=this.width+"px")},t.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},t.prototype.setResizerSizerSide=function(e){var r=this.gridOptionsWrapper.isEnableRtl(),n="left"===e;this.resizeBar.setInverted(r?n:!n)},t.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},t.TEMPLATE='<div class="ag-tool-panel-wrapper"/>',lc([u.Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),lc([u.PostConstruct],t.prototype,"setupResize",null),t}(u.Component),zp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Up=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.toolPanelWrappers=[],e}return zp(t,o),t.prototype.postConstruct=function(){var e=this;this.sideBarButtonsComp.addEventListener(sc.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.gridOptionsWrapper.addEventListener("sideBar",function(){e.clearDownUi(),e.setSideBarDef()}),this.gridApi.registerSideBarComp(this),this.createManagedBean(new u.ManagedFocusFeature(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},t.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var n=this.focusService,i=this.sideBarButtonsComp,a=this.getGui(),s=i.getGui(),c=this.gridOptionsWrapper.getDocument().activeElement,h=a.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)");if(h)if(s.contains(c))n.focusInto(h,e.shiftKey)&&e.preventDefault();else if(!n.isFocusUnderManagedComponent(h)&&e.shiftKey){var p=n.findFocusableElements(h)[0];if(this.gridOptionsWrapper.getDocument().activeElement===p){var d=s.querySelector(".ag-selected button");d&&(e.preventDefault(),d.focus())}}}},t.prototype.handleKeyDown=function(e){var r=this.gridOptionsWrapper.getDocument();if(this.sideBarButtonsComp.getGui().contains(r.activeElement)){var n=this.sideBarButtonsComp.getGui(),i=Array.prototype.slice.call(n.querySelectorAll(".ag-side-button")),a=r.activeElement,s=i.findIndex(function(h){return h.contains(a)}),l=null;switch(e.key){case u.KeyCode.LEFT:case u.KeyCode.UP:l=Math.max(0,s-1);break;case u.KeyCode.RIGHT:case u.KeyCode.DOWN:l=Math.min(s+1,i.length-1)}if(null!==l){var c=i[l].querySelector("button");c&&(c.focus(),e.preventDefault())}}},t.prototype.onToolPanelButtonClicked=function(e){var r=e.toolPanelId,n=this.openedItem();this.openToolPanel(n===r?void 0:r)},t.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},t.prototype.setSideBarDef=function(){this.setDisplayed(!1);var e=this.gridOptionsWrapper.getSideBar(),r=!!e&&!!e.toolPanels;if(r){this.setDisplayed(r&&!e.hiddenByDefault);var i=e.toolPanels;this.sideBarButtonsComp.setToolPanelDefs(i),this.setupToolPanels(i),this.setSideBarPosition(e.position),e.hiddenByDefault||this.openToolPanel(e.defaultToolPanel)}},t.prototype.setSideBarPosition=function(e){e||(e="right");var r="left"===e,n=r?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",r),this.addOrRemoveCssClass("ag-side-bar-right",!r),this.toolPanelWrappers.forEach(function(i){i.setResizerSizerSide(n)}),this},t.prototype.setupToolPanels=function(e){var r=this;e.forEach(function(n){if(null!=n.id){if("agColumnsToolPanel"===n.toolPanel&&!u.ModuleRegistry.assertRegistered(u.ModuleNames.ColumnToolPanelModule,"Column Tool Panel"))return;if("agFiltersToolPanel"===n.toolPanel&&!u.ModuleRegistry.assertRegistered(u.ModuleNames.FiltersToolPanelModule,"Filters Tool Panel"))return;var a=new Hp;r.getContext().createBean(a),a.setToolPanelDef(n),a.setDisplayed(!1),r.getGui().appendChild(a.getGui()),r.toolPanelWrappers.push(a)}else console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id")})},t.prototype.refresh=function(){this.toolPanelWrappers.forEach(function(e){return e.refresh()})},t.prototype.openToolPanel=function(e){var r=this.openedItem();r!==e&&(this.toolPanelWrappers.forEach(function(a){var s=e===a.getToolPanelId();a.setDisplayed(s)}),r!==this.openedItem()&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e)))},t.prototype.getToolPanelInstance=function(e){var r=this.toolPanelWrappers.filter(function(n){return n.getToolPanelId()===e})[0];if(r)return r.getToolPanelInstance();console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: "+e)},t.prototype.raiseToolPanelVisibleEvent=function(e){var r={type:u.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};this.eventService.dispatchEvent(r)},t.prototype.close=function(){this.openToolPanel(void 0)},t.prototype.isToolPanelShowing=function(){return!!this.openedItem()},t.prototype.openedItem=function(){var e=null;return this.toolPanelWrappers.forEach(function(r){r.isDisplayed()&&(e=r.getToolPanelId())}),e},t.prototype.destroyToolPanelWrappers=function(){var e=this;this.toolPanelWrappers.forEach(function(r){u._.removeFromParent(r.getGui()),e.destroyBean(r)}),this.toolPanelWrappers.length=0},t.prototype.destroy=function(){this.destroyToolPanelWrappers(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',Zo([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Zo([u.Autowired("focusService")],t.prototype,"focusService",void 0),Zo([u.RefSelector("sideBarButtons")],t.prototype,"sideBarButtonsComp",void 0),Zo([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),$p=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),uc=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Kp=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.isColGroupDef=function(r){return r&&void 0!==r.children},e.getId=function(r){return e.isColGroupDef(r)?r.groupId:r.colId},e}return $p(t,o),t.prototype.createColumnTree=function(e){var r=this,n=[],i=function(s,l){if(r.isColGroupDef(s)){var c=s,p=new u.ProvidedColumnGroup(c,void 0!==c.groupId?c.groupId:c.headerName,!1,l),f=[];return c.children.forEach(function(y){var m=i(y,l+1);m&&f.push(m)}),p.setChildren(f),p}var d=s,g=r.columnModel.getPrimaryColumn(d.colId?d.colId:d.field);return g||n.push(d),g},a=[];return e.forEach(function(s){var l=i(s,0);l&&a.push(l)}),n.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",n),a},t.prototype.syncLayoutWithGrid=function(e){var r=this.getLeafPathTrees();e(this.mergeLeafPathTrees(r))},t.prototype.getLeafPathTrees=function(){var e=function(i,a){var s;if(i instanceof u.ProvidedColumnGroup)if(i.isPadding())s=a;else{var l=Object.assign({},i.getColGroupDef());l.groupId=i.getGroupId(),l.children=[a],s=l}else{var c=Object.assign({},i.getColDef());c.colId=i.getColId(),s=c}var h=i.getOriginalParent();return h?e(h,s):s};return this.columnModel.getAllGridColumns().filter(function(i){var a=i.getColDef();return i.isPrimary()&&!a.showRowGroup}).map(function(i){return e(i,i.getColDef())})},t.prototype.mergeLeafPathTrees=function(e){for(var r=this,i=function(h,p){if(!r.isColGroupDef(p))return h;var f=h,d=p;return d.children&&d.groupId&&r.addChildrenToGroup(f,d.groupId,d.children[0])||d.children.forEach(function(g){return i(f,g)}),f},a=[],s=1;s<=e.length;s++){var l=e[s-1],c=e[s];p=c,r.isColGroupDef(h=l)&&r.isColGroupDef(p)&&r.getId(h)===r.getId(p)?e[s]=i(l,c):a.push(l)}var h,p;return a},t.prototype.addChildrenToGroup=function(e,r,n){var i=this;if(!this.isColGroupDef(e))return!0;var p,f,d,v,g,y,s=e,l=n;if(f=l,d=(p=s).children.map(i.getId),v=u._.includes(d,i.getId(f)),y=(g=u._.last(p.children))&&i.getId(g)!==i.getId(f),v&&y)return s.children.push(l),!0;if(s.groupId===r){var c=s.children.map(this.getId);if(!u._.includes(c,this.getId(l)))return s.children.push(l),!0}return s.children.forEach(function(p){return i.addChildrenToGroup(p,r,n)}),!1},uc([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),uc([u.Bean("toolPanelColDefService")],t)}(u.BeanStub),Fs={moduleName:u.ModuleNames.SideBarModule,beans:[Kp],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:oc},{componentName:"AgSideBar",componentClass:Up},{componentName:"AgSideBarButtons",componentClass:sc}],dependantModules:[Re]},Zr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Yp=function(){function o(){}return o.prototype.selectAllChildren=function(t,e,r){var n=this.extractAllLeafColumns(t);this.setAllColumns(n,e,r)},o.prototype.setColumn=function(t,e,r){this.setAllColumns([t],e,r)},o.prototype.setAllColumns=function(t,e,r){this.columnModel.isPivotMode()?this.setAllPivot(t,e,r):this.setAllVisible(t,e,r)},o.prototype.extractAllLeafColumns=function(t){var e=[],r=function(n){n.forEach(function(i){!i.isPassesFilter()||(i.isGroup()?r(i.getChildren()):e.push(i.getColumn()))})};return r(t),e},o.prototype.setAllVisible=function(t,e,r){var n=[];t.forEach(function(i){i.getColDef().lockVisible||i.isVisible()!=e&&n.push({colId:i.getId(),hide:!e})}),n.length>0&&this.columnModel.applyColumnState({state:n},r)},o.prototype.setAllPivot=function(t,e,r){this.gridOptionsWrapper.isFunctionsPassive()?this.setAllPivotPassive(t,e):this.setAllPivotActive(t,e,r)},o.prototype.setAllPivotPassive=function(t,e){var r=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),i=this.columnModel.getRowGroupColumns().slice(),a=!1,s=!1,l=!1;t.forEach(e?function(g){g.isAnyFunctionActive()||(g.isAllowValue()?(n.push(g),s=!0):g.isAllowRowGroup()?(i.push(g),a=!0):g.isAllowPivot()&&(r.push(g),l=!0))}:function(g){!g.isAnyFunctionActive()||(r.indexOf(g)>=0&&(u._.removeFromArray(r,g),a=!0),n.indexOf(g)>=0&&(u._.removeFromArray(n,g),s=!0),i.indexOf(g)>=0&&(u._.removeFromArray(i,g),l=!0))}),a&&this.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:r,api:this.gridApi,columnApi:this.columnApi}),l&&this.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:i,api:this.gridApi,columnApi:this.columnApi}),s&&this.eventService.dispatchEvent({type:u.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:i,api:this.gridApi,columnApi:this.columnApi})},o.prototype.setAllPivotActive=function(t,e,r){var n=this,i=[];t.forEach(e?function(c){if(!c.isAnyFunctionActive())if(c.isAllowValue()){var h="string"==typeof c.getAggFunc()?c.getAggFunc():n.aggFuncService.getDefaultAggFunc(c);i.push({colId:c.getId(),aggFunc:h})}else c.isAllowRowGroup()?i.push({colId:c.getId(),rowGroup:!0}):c.isAllowPivot()&&i.push({colId:c.getId(),pivot:!0})}:function(c){(c.isPivotActive()||c.isRowGroupActive()||c.isValueActive())&&i.push({colId:c.getId(),pivot:!1,rowGroup:!1,aggFunc:null})}),i.length>0&&this.columnModel.applyColumnState({state:i},r)},Zr([u.Autowired("aggFuncService")],o.prototype,"aggFuncService",void 0),Zr([u.Autowired("columnModel")],o.prototype,"columnModel",void 0),Zr([u.Autowired("gridOptionsWrapper")],o.prototype,"gridOptionsWrapper",void 0),Zr([u.Autowired("columnApi")],o.prototype,"columnApi",void 0),Zr([u.Autowired("gridApi")],o.prototype,"gridApi",void 0),Zr([u.Autowired("eventService")],o.prototype,"eventService",void 0),Zr([u.Bean("modelItemUtils")],o)}(),Xp={moduleName:u.ModuleNames.ColumnToolPanelModule,beans:[Yp],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:ss},{componentName:"AgPrimaryColsList",componentClass:Uo},{componentName:"AgPrimaryCols",componentClass:Ds}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:Gp}],dependantModules:[Re,tc,Fs]},nd={getTemplate:function(o){var t=o.alignment;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:t.vertical,Horizontal:t.horizontal,Indent:t.indent,ReadingOrder:t.readingOrder,Rotate:t.rotate,ShrinkToFit:t.shrinkToFit,VerticalText:t.verticalText,WrapText:t.wrapText}}]}}}},id={getTemplate:function(o){var t=o.borders;return{name:"Borders",children:[t.borderBottom,t.borderLeft,t.borderRight,t.borderTop].map(function(a,s){return{name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:0==s?"Bottom":1==s?"Left":2==s?"Right":"Top",LineStyle:a.lineStyle,Weight:a.weight,Color:a.color}}]}}})}}},od={getTemplate:function(o){var t=o.font;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:t.bold,FontName:t.fontName,Italic:t.italic,Color:t.color,Outline:t.outline,Shadow:t.shadow,Size:t.size,StrikeThrough:t.strikeThrough,Underline:t.underline,VerticalAlign:t.verticalAlign}},{prefix:"x:",map:{CharSet:t.charSet,Family:t.family}}]}}}},ad={getTemplate:function(o){var t=o.interior;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:t.color,Pattern:t.pattern,PatternColor:t.patternColor}}]}}}},sd={getTemplate:function(o){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:o.protection.protected,HideFormula:o.protection.hideFormula}}]}}}},ld={getTemplate:function(o){return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:o.numberFormat.format}}]}}}},cc=function(){function o(){}return o.prototype.setBeans=function(t){this.beans=t},o.prototype.getFileName=function(t){var e=this.getDefaultFileExtension();return(null==t||!t.length)&&(t=this.getDefaultFileName()),-1===t.indexOf(".")?t+"."+e:t},o.prototype.getData=function(t){var e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)},o}(),hc=function(){function o(t){this.groupColumns=[];var r=t.valueService,n=t.gridOptionsWrapper,i=t.processCellCallback,a=t.processHeaderCallback,s=t.processGroupHeaderCallback,l=t.processRowGroupCallback;this.columnModel=t.columnModel,this.valueService=r,this.gridOptionsWrapper=n,this.processCellCallback=i,this.processHeaderCallback=a,this.processGroupHeaderCallback=s,this.processRowGroupCallback=l}return o.prototype.prepare=function(t){this.groupColumns=t.filter(function(e){return!!e.getColDef().showRowGroup})},o.prototype.extractHeaderValue=function(t){var e=this.getHeaderName(this.processHeaderCallback,t);return null!=e?e:""},o.prototype.extractRowCellValue=function(t,e,r,n,i){var l,a=this.gridOptionsWrapper.isGroupMultiAutoColumn()?i.rowGroupIndex:0;l=i&&i.group&&(e===a&&-1!==this.groupColumns.indexOf(t)||0===e&&this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode()))?this.createValueForGroupNode(i):this.valueService.getValue(t,i);var c=this.processCell(r,i,t,l,this.processCellCallback,n);return null!=c?c:""},o.prototype.getHeaderName=function(t,e){return t?t({column:e,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()}):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},o.prototype.createValueForGroupNode=function(t){if(this.processRowGroupCallback)return this.processRowGroupCallback({node:t,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()});var e=[t.key];if(!this.gridOptionsWrapper.isGroupMultiAutoColumn())for(;t.parent;)e.push((t=t.parent).key);return e.reverse().join(" -> ")},o.prototype.processCell=function(t,e,r,n,i,a){return i?i({accumulatedRowIndex:t,column:r,node:e,value:n,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),type:a}):null!=n?n:""},o}(),ks=function(){function o(){}return o.download=function(t,e){var r=document.defaultView||window;if(r){var n=document.createElement("a"),i=r.URL.createObjectURL(e);n.setAttribute("href",i),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:r})),document.body.removeChild(n),r.setTimeout(function(){r.URL.revokeObjectURL(i)},0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},o}(),cd=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hd=function(o){function t(e){var r=o.call(this,e)||this;r.isFirstLine=!0,r.result="";var i=e.columnSeparator;return r.suppressQuotes=e.suppressQuotes,r.columnSeparator=i,r}return cd(t,o),t.prototype.addCustomContent=function(e){var r=this;!e||("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach(function(n){r.beginNewLine(),n.forEach(function(i,a){0!==a&&(r.result+=r.columnSeparator),r.result+=r.putInQuotes(i.data.value||""),i.mergeAcross&&r.appendEmptyCells(i.mergeAcross)})}))},t.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},t.prototype.onNewHeaderGroupingRowColumn=function(e,r,n){0!=r&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(n)},t.prototype.appendEmptyCells=function(e){for(var r=1;r<=e;r++)this.result+=this.columnSeparator+this.putInQuotes("")},t.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},t.prototype.onNewHeaderRowColumn=function(e,r){0!=r&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))},t.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},t.prototype.onNewBodyRowColumn=function(e,r,n){0!=r&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractRowCellValue(e,r,r,u.Constants.EXPORT_TYPE_CSV,n))},t.prototype.putInQuotes=function(e){return this.suppressQuotes?e:null==e?'""':("string"==typeof e?r=e:"function"==typeof e.toString?r=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),r=""),'"'+r.replace(/"/g,'""')+'"');var r},t.prototype.parse=function(){return this.result},t.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},t}(hc),fd=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pc=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return fd(t,o),t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},t.prototype.getMergedParams=function(e){var r=this.gridOptionsWrapper.getDefaultExportParams("csv");return Object.assign({},r,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var r=this.getMergedParams(e),n=this.getData(r),i=new Blob(["\ufeff",n],{type:"text/plain"});return ks.download(this.getFileName(r.fileName),i),n},t.prototype.exportDataAsCsv=function(e){return this.export(e)},t.prototype.getDataAsCsv=function(e){var r=this.getMergedParams(e);return this.getData(r)},t.prototype.getDefaultFileName=function(){return"export.csv"},t.prototype.getDefaultFileExtension=function(){return"csv"},t.prototype.createSerializingSession=function(e){var r=this;return new hd({columnModel:r.columnModel,valueService:r.valueService,gridOptionsWrapper:r.gridOptionsWrapper,processCellCallback:e.processCellCallback||void 0,processHeaderCallback:e.processHeaderCallback||void 0,processGroupHeaderCallback:e.processGroupHeaderCallback||void 0,processRowGroupCallback:e.processRowGroupCallback||void 0,suppressQuotes:e.suppressQuotes||!1,columnSeparator:e.columnSeparator||","})},t.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressCsvExport()},Gn([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Gn([u.Autowired("valueService")],t.prototype,"valueService",void 0),Gn([u.Autowired("gridSerializer")],t.prototype,"gridSerializer",void 0),Gn([u.Autowired("gridOptionsWrapper")],t.prototype,"gridOptionsWrapper",void 0),Gn([u.PostConstruct],t.prototype,"postConstruct",null),Gn([u.Bean("csvCreator")],t)}(cc),pd=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Tr=(()=>(function(o){o[o.HEADER_GROUPING=0]="HEADER_GROUPING",o[o.HEADER=1]="HEADER",o[o.BODY=2]="BODY"}(Tr||(Tr={})),Tr))(),dc=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return pd(t,o),t.prototype.serialize=function(e,r){void 0===r&&(r={});var n=this.getColumnsToExport(r.allColumns,r.columnKeys);return u._.compose(this.prepareSession(n),this.prependContent(r),this.exportColumnGroups(r,n),this.exportHeaders(r,n),this.processPinnedTopRows(r,n),this.processRows(r,n),this.processPinnedBottomRows(r,n),this.appendContent(r))(e).parse()},t.prototype.processRow=function(e,r,n,i){var a=this,s=r.shouldRowBeSkipped||function(){return!1},l=this.gridOptionsWrapper,c=l.getContext(),h=l.getApi(),p=l.getColumnApi(),f=l.isGroupRemoveSingleChildren(),d=l.isGroupHideOpenParents(),v=l.isGroupRemoveLowestSingleChildren(),g=this.columnModel.isPivotMode()?i.leafGroup:!i.group,C=1===i.allChildrenCount&&(f||v&&i.leafGroup);(r.skipGroups||r.skipRowGroups)&&r.skipGroups&&u._.doOnce(function(){return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.")},"gridSerializer-skipGroups");var _={rowIndex:i.rowIndex,rowPinned:i.rowPinned};if(!(!g&&(r.skipRowGroups||C||d)||r.onlySelected&&!i.isSelected()||r.rowNodes&&!r.rowNodes.some(function(E){return a.rowPositionUtils.sameRow(E,_)})||r.skipPinnedTop&&"top"===i.rowPinned||r.skipPinnedBottom&&"bottom"===i.rowPinned)&&(-1!==i.level||i.leafGroup)&&!s({node:i,api:h,columnApi:p,context:c})){var O=e.onNewBodyRow();if(n.forEach(function(E,M){O.onColumn(E,M,i)}),r.getCustomContentBelowRow){var A=r.getCustomContentBelowRow({node:i,api:h,columnApi:p,context:c});A&&e.addCustomContent(A)}}},t.prototype.appendContent=function(e){return function(r){var n=e.customFooter||e.appendContent;return n&&(e.customFooter&&u._.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.")},"gridSerializer-customFooter"),r.addCustomContent(n)),r}},t.prototype.prependContent=function(e){return function(r){var n=e.customHeader||e.prependContent;return n&&(e.customHeader&&u._.doOnce(function(){return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.")},"gridSerializer-customHeader"),r.addCustomContent(n)),r}},t.prototype.prepareSession=function(e){return function(r){return r.prepare(e),r}},t.prototype.exportColumnGroups=function(e,r){var n=this;return function(i){if(e.skipColumnGroupHeaders)e.columnGroups&&u._.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.")},"gridSerializer-columnGroups");else{var a=new u.GroupInstanceIdCreator,s=n.displayedGroupCreator.createDisplayedGroups(r,n.columnModel.getGridBalancedTree(),a,null);n.recursivelyAddHeaderGroups(s,i,e.processGroupHeaderCallback)}return i}},t.prototype.exportHeaders=function(e,r){return function(n){if(e.skipHeader||e.skipColumnHeaders)e.skipHeader&&u._.doOnce(function(){return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.")},"gridSerializer-skipHeader");else{var i=n.onNewHeaderRow();r.forEach(function(a,s){i.onColumn(a,s,void 0)})}return n}},t.prototype.processPinnedTopRows=function(e,r){var n=this;return function(i){var a=n.processRow.bind(n,i,e,r);return n.pinnedRowModel.forEachPinnedTopRow(a),i}},t.prototype.processRows=function(e,r){var n=this;return function(i){var a=n.rowModel,s=a.getType(),l=s===u.Constants.ROW_MODEL_TYPE_CLIENT_SIDE,c=s===u.Constants.ROW_MODEL_TYPE_SERVER_SIDE,h=!l&&e.onlySelected,p=n.processRow.bind(n,i,e,r);return n.columnModel.isPivotMode()?l?a.forEachPivotNode(p):a.forEachNode(p):e.onlySelectedAllPages||h?n.selectionService.getSelectedNodes().forEach(p):l||c?a.forEachNodeAfterFilterAndSort(p):a.forEachNode(p),i}},t.prototype.processPinnedBottomRows=function(e,r){var n=this;return function(i){var a=n.processRow.bind(n,i,e,r);return n.pinnedRowModel.forEachPinnedBottomRow(a),i}},t.prototype.getColumnsToExport=function(e,r){void 0===e&&(e=!1);var n=this.columnModel.isPivotMode();return r&&r.length?this.columnModel.getGridColumns(r):e&&!n?(this.gridOptionsWrapper.isTreeData()?this.columnModel.getGridColumns([u.Constants.GROUP_AUTO_COLUMN_ID]):[]).concat(this.columnModel.getAllPrimaryColumns()||[]):this.columnModel.getAllDisplayedColumns()},t.prototype.recursivelyAddHeaderGroups=function(e,r,n){var i=[];e.forEach(function(a){!a.getChildren||a.getChildren().forEach(function(l){return i.push(l)})}),e.length>0&&e[0]instanceof u.ColumnGroup&&this.doAddHeaderHeader(r,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,r,n)},t.prototype.doAddHeaderHeader=function(e,r,n){var i=this,a=e.onNewHeaderGroupingRow(),s=0;r.forEach(function(l){var h,c=l;h=n?n({columnGroup:c,api:i.gridOptionsWrapper.getApi(),columnApi:i.gridOptionsWrapper.getColumnApi(),context:i.gridOptionsWrapper.getContext()}):i.columnModel.getDisplayNameForColumnGroup(c,"header");var p=c.getLeafColumns().reduce(function(f,d,v,g){var y=u._.last(f);return"open"===d.getColumnGroupShow()?(!y||null!=y[1])&&f.push(y=[v]):y&&null==y[1]&&(y[1]=v-1),v===g.length-1&&y&&null==y[1]&&(y[1]=v),f},[]);a.onColumn(h||"",s++,c.getLeafColumns().length-1,p)})},Jr([u.Autowired("displayedGroupCreator")],t.prototype,"displayedGroupCreator",void 0),Jr([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Jr([u.Autowired("rowModel")],t.prototype,"rowModel",void 0),Jr([u.Autowired("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Jr([u.Autowired("selectionService")],t.prototype,"selectionService",void 0),Jr([u.Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Jr([u.Bean("gridSerializer")],t)}(u.BeanStub),vc={moduleName:u.ModuleNames.CsvExportModule,beans:[pc,dc]},Ls=function(){function o(){}return o.createHeader=function(t){void 0===t&&(t={});var n=["version"];return t.version||(t.version="1.0"),t.encoding&&n.push("encoding"),t.standalone&&n.push("standalone"),"<?xml "+n.map(function(a){return a+'="'+t[a]+'"'}).join(" ")+" ?>"},o.createXml=function(t,e){var r=this,n="";t.properties&&(t.properties.prefixedAttributes&&t.properties.prefixedAttributes.forEach(function(a){Object.keys(a.map).forEach(function(s){n+=r.returnAttributeIfPopulated(a.prefix+s,a.map[s],e)})}),t.properties.rawMap&&Object.keys(t.properties.rawMap).forEach(function(a){n+=r.returnAttributeIfPopulated(a,t.properties.rawMap[a],e)}));var i="<"+t.name+n;return t.children||null!=t.textNode?null!=t.textNode?i+">"+t.textNode+"</"+t.name+">\r\n":(i+=">\r\n",t.children&&t.children.forEach(function(a){i+=r.createXml(a,e)}),i+"</"+t.name+">\r\n"):i+"/>\r\n"},o.returnAttributeIfPopulated=function(t,e,r){if(!e&&""!==e&&0!==e)return"";var n=e;return"boolean"==typeof e&&r&&(n=r(e))," "+t+'="'+n+'"'},o}(),vd=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),Je=function(){function o(){}return o.addFolders=function(t){t.forEach(this.addFolder.bind(this))},o.addFolder=function(t){this.folders.push({path:t,created:new Date,isBase64:!1})},o.addFile=function(t,e,r){void 0===r&&(r=!1),this.files.push({path:t,created:new Date,content:e,isBase64:r})},o.getContent=function(t){void 0===t&&(t="application/zip");var e=this.buildFileStream(),r=this.buildUint8Array(e);return this.clearStream(),new Blob([r],{type:t})},o.clearStream=function(){this.folders=[],this.files=[]},o.buildFileStream=function(t){var e,r;void 0===t&&(t="");var n=this.folders.concat(this.files),i=n.length,a="",s=0,l=0;try{for(var c=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),h=c.next();!h.done;h=c.next()){var f=this.getHeader(h.value,s),d=f.fileHeader,v=f.folderHeader,g=f.content;s+=d.length+g.length,l+=v.length,t+=d+g,a+=v}}catch(m){e={error:m}}finally{try{h&&!h.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return t+a+this.buildFolderEnd(i,l,s)},o.getHeader=function(t,e){var r=t.content,n=t.path,i=t.created,a=t.isBase64,l=u._.decToHex,c=(0,u._.utf8_encode)(n),h=c!==n,p=this.convertTime(i),f=this.convertDate(i),d="";if(h){var v=l(1,1)+l(this.getFromCrc32Table(c),4)+c;d="up"+l(v.length,2)+v}var g=r?this.getConvertedContent(r,a):{size:0,content:""},y=g.size,m=g.content,C="\n\0"+(h?"\0\b":"\0\0")+"\0\0"+l(p,2)+l(f,2)+l(y?this.getFromCrc32Table(m):0,4)+l(y,4)+l(y,4)+l(c.length,2)+l(d.length,2);return{fileHeader:"PK\x03\x04"+C+c+d,folderHeader:"PK\x01\x02\x14\0"+C+"\0\0\0\0\0\0"+(r?"\0\0\0\0":"\x10\0\0\0")+l(e,4)+c+d,content:m||""}},o.getConvertedContent=function(t,e){return void 0===e&&(e=!1),e&&(t=t.split(";base64,")[1]),{size:(t=e?atob(t):t).length,content:t}},o.buildFolderEnd=function(t,e,r){var n=u._.decToHex;return"PK\x05\x06\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(r,4)+"\0\0"},o.buildUint8Array=function(t){for(var e=new Uint8Array(t.length),r=0;r<e.length;r++)e[r]=t.charCodeAt(r);return e},o.getFromCrc32Table=function(t){if(!t.length)return 0;for(var e=t.length,r=new Uint8Array(e),n=0;n<e;n++)r[n]=t.charCodeAt(n);var i=-1;for(n=0;n<e;n++)i=i>>>8^vd[255&(i^r[n])];return-1^i},o.convertTime=function(t){var e=t.getHours();return e<<=6,e|=t.getMinutes(),(e<<=5)|t.getSeconds()/2},o.convertDate=function(t){var e=t.getFullYear()-1980;return e<<=4,e|=t.getMonth()+1,(e<<=5)|t.getDate()},o.folders=[],o.files=[],o}(),Is=function(){function o(){}return o.createExcel=function(t,e){var r=this.excelXmlHeader(),a=this.workbook({name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]},{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]},t,e);return""+r+Ls.createXml(a,function(s){return s?"1":"0"})},o.workbook=function(t,e,r,n){var i=[t,e,this.stylesXmlElement(r)].concat(function(o){var t=o.table,e=o.name,n=t.rows,i=t.columns.map(function(s){return function(o){return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:o.width}}]}}}(s)}),a=n.map(function(s){return function(o){return{name:"Row",children:o.cells.map(function(e){return function(o){var t=o.mergeAcross,e=o.styleId,r=o.data,n={};return t&&(n.MergeAcross=t),e&&(n.StyleID=e),{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:n}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:r.type}}]},textNode:r.value}]}}(e)})}}(s)});return{name:"Worksheet",children:[{name:"Table",children:i.concat(a)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:e}}]}}}(n));return Object.assign({},{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}},{children:i})},o.excelXmlHeader=function(){return'<?xml version="1.0" ?>\n        <?mso-application progid="Excel.Sheet" ?>\n        '},o.stylesXmlElement=function(t){var e=this;return{name:"Styles",children:t?t.map(function(r){return e.styleXmlElement(r)}):[]}},o.styleXmlElement=function(t){var e=u._.compose(this.addProperty("alignment",t),this.addProperty("borders",t),this.addProperty("font",t),this.addProperty("interior",t),this.addProperty("protection",t),this.addProperty("numberFormat",t))([]);return Object.assign({},function(o){var t=o.id;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:t,Name:o.name||t}}]}}}(t),{children:e})},o.addProperty=function(t,e){return function(r){return e[t]?r.concat({alignment:nd,borders:id,font:od,interior:ad,numberFormat:ld,protection:sd}[t].getTemplate(e)):r}},o.factoryMode=u.ExcelFactoryMode.SINGLE_SHEET,o}(),gc={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},md=function(o){return Math.round(96*o/72)},Bn=function(o){return Math.ceil(9525*o)},Qo=function(o,t){if(t)return function(o){return Math.round(72*o/96)}("number"==typeof t?t:t({rowIndex:o}))},St=function(o){return""+Ls.createHeader({encoding:"UTF-8",standalone:"yes"})+Ls.createXml(o)},ji=function(o){var r=String.fromCharCode,n=Math.floor(o/26),i=o%26;return n&&26!==o?i?n<26?r(65+n-1)+r(65+i-1):ji(n)+r(65+i-1):ji(n-1)+"Z":r(65+o-1)},Sd=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wi=function(){return Wi=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Wi.apply(this,arguments)},wd=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},yc=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(wd(arguments[t]));return o},mc=function(o){function t(e){var r=o.call(this,e)||this;return r.mixedStyles={},r.mixedStyleCounter=0,r.rows=[],r.config=Object.assign({},e),r.stylesByIds={},r.config.baseExcelStyles.forEach(function(n){r.stylesByIds[n.id]=n}),r.excelStyles=yc(r.config.baseExcelStyles),r}return Sd(t,o),t.prototype.addCustomContent=function(e){var r=this;e.forEach(function(n){var i=r.rows.length+1;r.rows.push({height:Qo(i,r.config.rowHeight),cells:n.map(function(a,s){var l=r.addImage(i,r.columnsToExport[s],a.data.value),c=Wi({},a);return l&&(c.data={},null!=l.value?c.data.value=l.value:(c.data.type="e",c.data.value=null)),c})})})},t.prototype.onNewHeaderGroupingRow=function(){var e=this,r=[];return this.rows.push({cells:r,height:Qo(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(n,i,a,s){var l=e.config.styleLinker(Tr.HEADER_GROUPING,1,"grouping-"+n,void 0,void 0);r.push(Wi(Wi({},e.createMergedCell(e.getStyleId(l),e.getDataTypeForValue("string"),n,a)),{collapsibleRanges:s}))}}},t.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},t.prototype.onNewBodyRow=function(){return this.onNewRow(this.onNewBodyColumn,this.config.rowHeight)},t.prototype.prepare=function(e){var r=this;o.prototype.prepare.call(this,e),this.columnsToExport=yc(e),this.cols=e.map(function(n,i){return r.convertColumnToExcel(n,i)})},t.prototype.parse=function(){for(var e=this.rows.reduce(function(n,i){return Math.max(n,i.cells.length)},0);this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));return this.createExcel({name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}})},t.prototype.isFormula=function(e){return null!=e&&this.config.autoConvertFormulas&&e.toString().startsWith("=")},t.prototype.getStyleById=function(e){return null==e?null:this.stylesByIds[e]||null},t.prototype.convertColumnToExcel=function(e,r){var n=this.config.columnWidth;return n?"number"==typeof n?{width:n}:{width:n({column:e,index:r})}:e?{width:Math.max(e.getActualWidth(),75)}:{}},t.prototype.onNewHeaderColumn=function(e,r){var n=this;return function(i,a){var s=n.extractHeaderValue(i),l=n.config.styleLinker(Tr.HEADER,e,s,i,void 0);r.push(n.createCell(n.getStyleId(l),n.getDataTypeForValue("string"),s))}},t.prototype.onNewRow=function(e,r){var n=[];return this.rows.push({cells:n,height:Qo(this.rows.length+1,r)}),{onColumn:e.bind(this,this.rows.length,n)()}},t.prototype.onNewBodyColumn=function(e,r){var n=this,i=0;return function(a,s,l){if(i>0)i-=1;else{var c=n.extractRowCellValue(a,s,e,u.Constants.EXPORT_TYPE_EXCEL,l),h=n.config.styleLinker(Tr.BODY,e,c,a,l),p=n.getStyleId(h),f=a.getColSpan(l),d=n.addImage(e,a,c);d?r.push(n.createCell(p,n.getDataTypeForValue(d.value),null==d.value?"":d.value)):f>1?(i=f-1,r.push(n.createMergedCell(p,n.getDataTypeForValue(c),c,f-1))):r.push(n.createCell(p,n.getDataTypeForValue(c),c))}}},t.prototype.getStyleId=function(e){if(!e||!e.length)return null;if(1===e.length)return e[0];var r=e.join("-");return this.mixedStyles[r]||this.addNewMixedStyle(e),this.mixedStyles[r].excelID},t.prototype.addNewMixedStyle=function(e){var r=this;this.mixedStyleCounter+=1;var n="mixedStyle"+this.mixedStyleCounter,i={};e.forEach(function(s){r.excelStyles.forEach(function(l){l.id===s&&u._.mergeDeep(i,u._.deepCloneObject(l))})}),i.id=n,i.name=n;var a=e.join("-");this.mixedStyles[a]={excelID:n,key:a,result:i},this.excelStyles.push(i),this.stylesByIds[n]=i},t}(hc),xd=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Od=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return xd(t,o),t.prototype.createExcel=function(e){return Is.createExcel(this.excelStyles,e)},t.prototype.getDataTypeForValue=function(e){return u._.isNumeric(e)?"Number":"String"},t.prototype.getType=function(e,r,n){if(this.isFormula(n))return"Formula";if(r&&r.dataType)switch(r.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn("AG Grid: Unrecognized data type for excel export ["+r.id+".dataType="+r.dataType+"]")}return e},t.prototype.addImage=function(){},t.prototype.createCell=function(e,r,n){var i=this.getStyleById(e),a=this.getType(r,i,n)||r;return{styleId:i?e:void 0,data:{type:a,value:this.getValueTransformed(a,n)}}},t.prototype.getValueTransformed=function(e,r){var s,n=this;switch(e){case"String":return function(s){if(n.config.suppressTextAsCDATA)return u._.escapeString(s);var l="<![CDATA[",c="]]>",h=new RegExp(c,"g");return l+String(s).replace(h,"]]"+c+l+">")+c}(r);case"Number":return Number(r).valueOf()+"";case"Boolean":return(s=r)&&"0"!==s&&"false"!==s?"1":"0";default:return r}},t.prototype.createMergedCell=function(e,r,n,i){return{styleId:this.getStyleById(e)?e:void 0,data:{type:r,value:n},mergeAcross:i}},t}(mc),Ad=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Cc=function(o,t){return{name:"xdr:"+o,children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}},Dd=function(o){var t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(o.recolor&&o.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},Rd=function(o,t){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:o.id,descr:null!=o.altText?o.altText:void 0}},children:[Dd(o)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},_c=function(o){if(o.saturation||o.tint){var t=[];return o.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:1e3*o.saturation}}}),o.tint&&t.push({name:"a:tint",properties:{rawMap:{val:1e3*o.tint}}}),t}},kd=function(o,t){var e;if(o.transparency){var r=Math.min(Math.max(o.transparency,0),100);e=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*r)}}}]}if(o.recolor)switch(e||(e=[]),o.recolor.toLocaleLowerCase()){case"grayscale":e.push({name:"a:grayscl"});break;case"sepia":e.push(function(o,t){return{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:o.color}},children:_c(o)},{name:"a:srgbClr",properties:{rawMap:{val:t.color}},children:_c(t)}]}}({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":e.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId"+t,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:e},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},Ld=function(o,t){var e={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};return o.rotation&&(e.properties={rawMap:{rot:6e4*Math.min(Math.max(o.rotation,0),360)}}),{name:"xdr:spPr",children:[e,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},Nd=function(o,t,e,r){return{name:"xdr:pic",children:[Rd(o,t+1),kd(o,e+1),Ld(o,r)]}},wt=function(o){var t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(o,4);return{name:"a:"+t[0],children:[{name:"a:"+t[1],properties:{rawMap:{val:t[2],lastClr:t[3]}}}]}},z=function(o){var t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(o,4);return{name:"a:"+t[0],properties:{rawMap:{script:t[2],typeface:t[1],panose:t[3]}}}},Vd_getTemplate=function(){var o=u._.utf8_encode;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[z(["latin","Calibri Light",void 0,"020F0302020204030204"]),z(["ea",""]),z(["cs",""]),z(["font",o("\u6e38\u30b4\u30b7\u30c3\u30af Light"),"Jpan"]),z(["font",o("\ub9d1\uc740 \uace0\ub515"),"Hang"]),z(["font",o("\u7b49\u7ebf Light"),"Hans"]),z(["font",o("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),z(["font","Times New Roman","Arab"]),z(["font","Times New Roman","Hebr"]),z(["font","Tahoma","Thai"]),z(["font","Nyala","Ethi"]),z(["font","Vrinda","Beng"]),z(["font","Shruti","Gujr"]),z(["font","MoolBoran","Khmr"]),z(["font","Tunga","Knda"]),z(["font","Raavi","Guru"]),z(["font","Euphemia","Cans"]),z(["font","Plantagenet Cherokee","Cher"]),z(["font","Microsoft Yi Baiti","Yiii"]),z(["font","Microsoft Himalaya","Tibt"]),z(["font","MV Boli","Thaa"]),z(["font","Mangal","Deva"]),z(["font","Gautami","Telu"]),z(["font","Latha","Taml"]),z(["font","Estrangelo Edessa","Syrc"]),z(["font","Kalinga","Orya"]),z(["font","Kartika","Mlym"]),z(["font","DokChampa","Laoo"]),z(["font","Iskoola Pota","Sinh"]),z(["font","Mongolian Baiti","Mong"]),z(["font","Times New Roman","Viet"]),z(["font","Microsoft Uighur","Uigh"]),z(["font","Sylfaen","Geor"]),z(["font","Arial","Armn"]),z(["font","Leelawadee UI","Bugi"]),z(["font","Microsoft JhengHei","Bopo"]),z(["font","Javanese Text","Java"]),z(["font","Segoe UI","Lisu"]),z(["font","Myanmar Text","Mymr"]),z(["font","Ebrima","Nkoo"]),z(["font","Nirmala UI","Olck"]),z(["font","Ebrima","Osma"]),z(["font","Phagspa","Phag"]),z(["font","Estrangelo Edessa","Syrn"]),z(["font","Estrangelo Edessa","Syrj"]),z(["font","Estrangelo Edessa","Syre"]),z(["font","Nirmala UI","Sora"]),z(["font","Microsoft Tai Le","Tale"]),z(["font","Microsoft New Tai Lue","Talu"]),z(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[z(["latin","Calibri",void 0,"020F0502020204030204"]),z(["ea",""]),z(["cs",""]),z(["font",o("\u6e38\u30b4\u30b7\u30c3\u30af"),"Jpan"]),z(["font",o("\ub9d1\uc740 \uace0\ub515"),"Hang"]),z(["font",o("\u7b49\u7ebf"),"Hans"]),z(["font",o("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),z(["font","Arial","Arab"]),z(["font","Arial","Hebr"]),z(["font","Tahoma","Thai"]),z(["font","Nyala","Ethi"]),z(["font","Vrinda","Beng"]),z(["font","Shruti","Gujr"]),z(["font","DaunPenh","Khmr"]),z(["font","Tunga","Knda"]),z(["font","Raavi","Guru"]),z(["font","Euphemia","Cans"]),z(["font","Plantagenet Cherokee","Cher"]),z(["font","Microsoft Yi Baiti","Yiii"]),z(["font","Microsoft Himalaya","Tibt"]),z(["font","MV Boli","Thaa"]),z(["font","Mangal","Deva"]),z(["font","Gautami","Telu"]),z(["font","Latha","Taml"]),z(["font","Estrangelo Edessa","Syrc"]),z(["font","Kalinga","Orya"]),z(["font","Kartika","Mlym"]),z(["font","DokChampa","Laoo"]),z(["font","Iskoola Pota","Sinh"]),z(["font","Mongolian Baiti","Mong"]),z(["font","Arial","Viet"]),z(["font","Microsoft Uighur","Uigh"]),z(["font","Sylfaen","Geor"]),z(["font","Arial","Armn"]),z(["font","Leelawadee UI","Bugi"]),z(["font","Microsoft JhengHei","Bopo"]),z(["font","Javanese Text","Java"]),z(["font","Segoe UI","Lisu"]),z(["font","Myanmar Text","Mymr"]),z(["font","Ebrima","Nkoo"]),z(["font","Nirmala UI","Olck"]),z(["font","Ebrima","Osma"]),z(["font","Phagspa","Phag"]),z(["font","Estrangelo Edessa","Syrn"]),z(["font","Estrangelo Edessa","Syrj"]),z(["font","Estrangelo Edessa","Syre"]),z(["font","Nirmala UI","Sora"]),z(["font","Microsoft Tai Le","Tale"]),z(["font","Microsoft New Tai Lue","Talu"]),z(["font","Ebrima","Tfng"])]}]}},Vi=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Yt=function(o,t,e){return{name:"a:"+o,properties:{rawMap:{val:t}},children:e}},Ns=function(o){var t=Vi(o,6),e=t[0],r=t[1],i=t[3],a=t[4],s=t[5],l=[];return l.push(Yt("satMod",t[2])),i&&l.push(Yt("lumMod",i)),a&&l.push(Yt("tint",a)),s&&l.push(Yt("shade",s)),{name:"a:gs",properties:{rawMap:{pos:e}},children:[{name:"a:schemeClr",properties:{rawMap:{val:r}},children:l}]}},ea=function(o,t){return{name:"a:solidFill",children:[Yt("schemeClr",o,t)]}},Gs=function(o){var t=Vi(o,5),e=t[0],r=t[1],n=t[2],i=t[3],s=Vi(t[4],2),l=s[0],c=s[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:e}},children:[{name:"a:gsLst",children:[Ns(r),Ns(n),Ns(i)]},{name:"a:lin",properties:{rawMap:{ang:l,scaled:c}}}]}},Bs=function(o){var t=Vi(o,4);return{name:"a:ln",properties:{rawMap:{w:t[0],cap:t[1],cmpd:t[2],algn:t[3]}},children:[ea("phClr"),Yt("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},js=function(o){var t=[];if(o){var e=Vi(o,5);t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:e[0],dist:e[1],dir:e[2],algn:e[3],rotWithShape:e[4]}},children:[Yt("srgbClr","000000",[Yt("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},qd=function(o){var t=[];return o.forEach(function(e,r){var n=r.toString(),i={name:"t",textNode:u._.utf8_encode(u._.escapeString(n))};n.trim().length!==n.length&&(i.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[i]})}),t},ov={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},av=["Dashed","DashDot","DashDotDot"],sv={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},lv={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},uv={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},Ar=function(o){return null==o?o:("#"===o.charAt(0)&&(o=o.substr(1)),6===o.length?"FF"+o:o)},ta=function(o,t){if(!o)return"thin";var e=function(o){switch(o){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}}(t),r=ov[o];return"Continuous"===o?e:"medium"===e&&-1!==av.indexOf(r)?"medium"+r:r.charAt(0).toLowerCase()+r.substr(1)},hv=function(o){return lv[o]||"general"},fv=function(o){return uv[o]||void 0},Hi=function(o){return{name:"color",properties:{rawMap:{rgb:Ar(o||"#000000")}}}},dv_getTemplate=function(o){return{name:"borders",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){var t=o.left,e=o.right,r=o.top,n=o.bottom,i=o.diagonal,a=t?[Hi(t.color)]:void 0,s=e?[Hi(e.color)]:void 0,l=r?[Hi(r.color)]:void 0,c=n?[Hi(n.color)]:void 0,h=i?[Hi(i.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:a},{name:"right",properties:{rawMap:{style:e&&e.style}},children:s},{name:"top",properties:{rawMap:{style:r&&r.style}},children:l},{name:"bottom",properties:{rawMap:{style:n&&n.style}},children:c},{name:"diagonal",properties:{rawMap:{style:i&&i.style}},children:h}]}}(t)})}},vv=function(o){var e=["Context","LeftToRight","RightToLeft"].indexOf(o);return Math.max(e,0)},bc_getTemplate=function(o){var t=o.alignment,e=o.borderId,r=o.fillId,n=o.fontId,i=o.numFmtId,a=o.protection,s=o.xfId,l=[];return t&&l.push(function(o){var t=o.horizontal,e=o.indent,r=o.readingOrder,n=o.rotate,i=o.shrinkToFit,a=o.vertical,s=o.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:t&&hv(t),indent:e,readingOrder:r&&vv(r),textRotation:n,shrinkToFit:i,vertical:a&&fv(a),wrapText:s}}}}(t)),a&&l.push(function(o){return{name:"protection",properties:{rawMap:{hidden:!0===o.hideFormula?1:0,locked:!1===o.protected?0:1}}}}(a)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:a?1:void 0,applyBorder:e?1:void 0,applyFill:r?1:void 0,borderId:e,fillId:r,applyFont:n?1:void 0,fontId:n,applyNumberFormat:i?1:void 0,numFmtId:i,xfId:s}},children:l.length?l:void 0}},ra=function(){return ra=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ra.apply(this,arguments)},xc=function(o,t){return-1!==o.indexOf("mixedStyle")&&t>1&&(o+="_"+t),o},Oc=function(){na={base:0},jn=[],zi=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Ui=[{patternType:"none"},{patternType:"gray125"}],$i=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],Sc=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],ia=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],wc=[{builtinId:0,name:"Normal",xfId:0}]},Pv=function(o){var t=o.alignment,e=o.borders,r=o.font,n=o.interior,i=o.numberFormat,a=o.protection,s=o.id,l=0,c=0,h=0,p=0;!s||(s=xc(s,Ws),null==na[s]&&(n&&(l=function(o){var t=function(o){return o?sv[o]||o:"none"}(o.pattern),e=Ar(o.color),r=Ar(o.patternColor),n=Ui.findIndex(function(i){return!(i.patternType!=t||i.fgRgb!=e||i.bgRgb!=r)});return-1===n&&(n=Ui.length,Ui.push({patternType:t,fgRgb:e,bgRgb:r})),n}(n)),e&&(c=function(o){var i,a,s,l,c,h,p,f,t=o.borderBottom,e=o.borderTop,r=o.borderLeft,n=o.borderRight;r&&(s=ta(r.lineStyle,r.weight),p=Ar(r.color)),n&&(l=ta(n.lineStyle,n.weight),f=Ar(n.color)),t&&(i=ta(t.lineStyle,t.weight),c=Ar(t.color)),e&&(a=ta(e.lineStyle,e.weight),h=Ar(e.color));var d=$i.findIndex(function(v){var g=v.left,y=v.right,m=v.top,C=v.bottom;if(!g&&(s||p)||!y&&(l||f)||!m&&(a||h)||!C&&(i||c))return!1;var _=g||{},O=y||{},M=m||{},j=C||{};return!(_.style!=s||_.color!=p||O.style!=l||O.color!=f||M.style!=a||M.color!=h||j.style!=i||j.color!=c)});return-1===d&&(d=$i.length,$i.push({left:{style:s,color:p},right:{style:l,color:f},top:{style:a,color:h},bottom:{style:i,color:c},diagonal:{style:void 0,color:void 0}})),d}(e)),r&&(h=function(o){var t=o.fontName,e=void 0===t?"Calibri":t,r=o.color,n=o.size,i=o.bold,a=o.italic,s=o.outline,l=o.shadow,c=o.strikeThrough,h=o.underline,p=o.family,f=o.verticalAlign,d=e&&u._.utf8_encode(e),v=Ar(r),g=function(o){if(void 0!==o){var e=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(o||"Automatic");return Math.max(e,0)}}(p),y=h?h.toLocaleLowerCase():void 0,m=f?f.toLocaleLowerCase():void 0,C=zi.findIndex(function(_){return!(_.fontName!=d||_.color!=v||_.size!=n||_.bold!=i||_.italic!=a||_.outline!=s||_.shadow!=l||_.strikeThrough!=c||_.underline!=y||_.verticalAlign!=m||_.family!=g)});return-1===C&&(C=zi.length,zi.push({fontName:d,color:v,size:n,bold:i,italic:a,outline:s,shadow:l,strikeThrough:c,underline:y,verticalAlign:m,family:null!=g?g.toString():void 0})),C}(r)),i&&(p=function(o){if(o=u._.utf8_encode(o),gc[o])return gc[o];var t=jn.findIndex(function(e){return e.formatCode===o});return-1===t?jn.push({formatCode:o,numFmtId:t=jn.length+164}):t=jn[t].numFmtId,t}(i.format)),na[s]=ia.length,ia.push({alignment:t,borderId:c||0,fillId:l||0,fontId:h||0,numFmtId:p||0,protection:a,xfId:0})))},Tv_getTemplate=function(o){var t=function(o){return{name:"numFmts",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){return{name:"numFmt",properties:{rawMap:{formatCode:o.formatCode,numFmtId:o.numFmtId}}}}(t)})}}(jn),e=function(o){return{name:"fonts",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){var r=o.color,i=o.fontName,s=o.family,l=o.scheme,c=o.italic,h=o.bold,p=o.strikeThrough,f=o.outline,d=o.shadow,v=o.underline,g=o.verticalAlign,y=[{name:"sz",properties:{rawMap:{val:o.size}}},{name:"color",properties:{rawMap:{theme:o.colorTheme,rgb:void 0===r?"FF000000":r}}},{name:"name",properties:{rawMap:{val:void 0===i?"Calibri":i}}}];return s&&y.push({name:"family",properties:{rawMap:{val:s}}}),l&&y.push({name:"scheme",properties:{rawMap:{val:l}}}),c&&y.push({name:"i"}),h&&y.push({name:"b"}),p&&y.push({name:"strike"}),f&&y.push({name:"outline"}),d&&y.push({name:"shadow"}),v&&y.push({name:"u",properties:{rawMap:{val:v}}}),g&&y.push({name:"vertAlign",properties:{rawMap:{val:g}}}),{name:"font",children:y}}(t)})}}(zi.map(function(l){return ra(ra({},l),{size:null!=l.size?l.size:o})})),r=function(o){return{name:"fills",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){var e=o.fgTheme,r=o.fgTint,n=o.fgRgb,i=o.bgRgb,a=o.bgIndexed,s={name:"patternFill",properties:{rawMap:{patternType:o.patternType}}};return(e||r||n)&&(s.children=[{name:"fgColor",properties:{rawMap:{theme:e,tint:r,rgb:n}}}]),(a||i)&&(s.children||(s.children=[]),s.children.push({name:"bgColor",properties:{rawMap:{indexed:a,rgb:i}}})),{name:"fill",children:[s]}}(t)})}}(Ui),n=dv_getTemplate($i),i=function(o){return{name:"cellStyleXfs",properties:{rawMap:{count:o.length}},children:o.map(function(t){return bc_getTemplate(t)})}}(Sc),a=function(o){return{name:"cellXfs",properties:{rawMap:{count:o.length}},children:o.map(function(t){return bc_getTemplate(t)})}}(ia),s=function(o){return{name:"cellStyles",properties:{rawMap:{count:o.length}},children:o.map(function(t){return function(o){return{name:"cellStyle",properties:{rawMap:{builtinId:o.builtinId,name:o.name,xfId:o.xfId}}}}(t)})}}(wc);return Oc(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,e,r,n,i,a,s,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}},Av=function(o,t){return na[xc(o,t)]||0},Dv_getTemplate=function(o){return{name:"sheets",children:o.map(function(t,e){return function(o,t){var e=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:o,sheetId:e,"r:id":"rId"+e}}}}(t,e)})}},Nv=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Gv=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(Nv(arguments[t]));return o},jv=function(o){return""!==o.data.value||void 0!==o.styleId},Wv_getTemplate=function(o,t,e){var r=o.index,n=o.collapsed,i=o.hidden,a=o.height,s=o.s,l=o.cells,c=void 0===l?[]:l;return function(o,t){for(var e=[],r=0,n=0;n<o.length;n++)(i=o[n]).mergeAcross&&(e.push({pos:n,excelPos:r}),r+=i.mergeAcross),r++;if(e.length)for(n=e.length-1;n>=0;n--){for(var a=[],i=o[e[n].pos],s=1;s<=i.mergeAcross;s++)a.push({ref:""+ji(e[n].excelPos+1+s)+(t+1),styleId:i.styleId,data:{type:"empty",value:null}});a.length&&o.splice.apply(o,Gv([e[n].pos+1,0],a))}}(c,t),{name:"row",properties:{rawMap:{r,collapsed:n,hidden:i?"1":"0",ht:a,customHeight:null!=a?"1":"0",s,customFormat:null!=s?"1":"0"}},children:c.filter(jv).map(function(p,f){return function(o,t,e){var r=o.ref,n=o.data,i=o.styleId,a=n.type,s=n.value,l=a;"f"===a?l="str":a.charAt(0)===a.charAt(0).toUpperCase()&&(l=function(o){var t=o.charAt(0).toLowerCase();return"s"===t?"inlineStr":t}(a));var h,c={name:"c",properties:{rawMap:{r,t:"empty"===l?void 0:l,s:i?Av(i,e):void 0}}};return"empty"===l?c:(h="str"===l&&"f"===a?[{name:"f",textNode:u._.escapeString(u._.utf8_encode(s))}]:"inlineStr"===l?[{name:"is",children:[{name:"t",textNode:u._.escapeString(u._.utf8_encode(s))}]}]:[{name:"v",textNode:s}],Object.assign({},c,{children:h}))}(p,0,e)})}},zv=function(o){return!o||"Portrait"!==o&&"Landscape"!==o?"portrait":o.toLocaleLowerCase()},Uv=function(o){if(null==o)return 1;var e=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(o);return-1===e?1:e+1},eg=function(o){return o.reduce(function(t,e){var r=function(o){return"Center"===o?"C":"Right"===o?"R":"L"}(e.position),n=function(o,t){return t&&(o+="&amp;&quot;",o+=t.fontName||"Calibri",o+=t.bold!==t.italic?t.bold?",Bold":",Italic":t.bold?",Bold Italic":",Regular",o+="&quot;",t.size&&(o+="&amp;"+t.size),t.strikeThrough&&(o+="&amp;S"),t.underline&&(o+="&amp;"+("Double"===t.underline?"E":"U")),t.color&&(o+="&amp;K"+t.color.replace("#","").toUpperCase())),o}(t+"&amp;"+r,e.font);return""+n+u._.escapeString(function(o){return u._.iterateObject({"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"},function(e,r){o=o.replace(e,r)}),o}(e.value))},"")},tg=function(o){var e=[];return["all","first","even"].forEach(function(r){var n=o[r],i="all"===r?"odd":r;!n||!n.header&&!n.footer||u._.iterateObject(n,function(a,s){var l=""+a.charAt(0).toUpperCase()+a.slice(1);s&&e.push({name:""+i+l,properties:{rawMap:{"xml:space":"preserve"}},textNode:eg(s)})})}),e},ig_getTemplate=function(o){var e=o.currentSheet,r=o.margins,n=void 0===r?{}:r,i=o.pageSetup,a=o.headerFooterConfig,s=o.worksheet.table,l=s.rows,c=s.columns,h=c&&c.length?function(o,t){var e=[],r=[];o.forEach(function(a,s){var h,l=a.cells,c=0;a.index=s+1,l.forEach(function(p,f){var d=f+c+1,v=ji(d),g=s+1;if(p.mergeAcross){var y=ji(f+(c+=p.mergeAcross)+1);e.push(""+v+g+":"+y+g)}t[d-1]||(t[d-1]={});var m=p.collapsibleRanges;m&&m.forEach(function(C){r.push([d+C[0],d+C[1]])}),(h=t[d-1]).min=d,h.max=d,p.ref=""+v+g})}),r.sort(function(a,s){return a[0]!==s[0]?a[0]-s[0]:s[1]-a[1]});var n=new Map,i=new Map;return r.filter(function(a){var s=a.toString();return!n.get(s)&&(n.set(s,!0),!0)}).forEach(function(a){var s=t.find(function(c){return c.min==a[0]&&c.max==a[1]}),l=i.get(a[0]);t.push({min:a[0],max:a[1],outlineLevel:l||1,width:(s||{width:100}).width}),i.set(a[0],(l||0)+1)}),e}(l,c):[],p=u._.compose(function(o){return function(t){return o.length&&t.push({name:"cols",children:o.map(function(e){return function(o){var t=o.min,e=o.max,r=o.outlineLevel,n=o.s,i=o.width,a=o.hidden,s=o.bestFit,l=1,c="0";return i>1&&(l=function(o){return Math.ceil((o-12)/7+1)}(i),c="1"),{name:"col",properties:{rawMap:{min:t,max:e,outlineLevel:null!=r?r:void 0,width:l,style:n,hidden:a?"1":"0",bestFit:s?"1":"0",customWidth:c}}}}(e)})}),t}}(c),function(o,t){return function(e){return o.length&&e.push({name:"sheetData",children:o.map(function(r,n){return Wv_getTemplate(r,n,t)})}),e}}(l,e+1),function(o){return function(t){return o.length&&t.push({name:"mergeCells",properties:{rawMap:{count:o.length}},children:o.map(function(e){return function(o){return{name:"mergeCell",properties:{rawMap:{ref:o}}}}(e)})}),t}}(h),function(o){return function(t){var e=o.top,n=o.right,a=o.bottom,l=o.left,h=o.header,f=o.footer;return t.push({name:"pageMargins",properties:{rawMap:{bottom:void 0===a?.75:a,footer:void 0===f?.3:f,header:void 0===h?.3:h,left:void 0===l?.7:l,right:void 0===n?.7:n,top:void 0===e?.75:e}}}),t}}(n),function(o){return function(t){return o&&t.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:zv(o.orientation),paperSize:Uv(o.pageSize)}}}),t}}(i),function(o){return function(t){return o?(t.push({name:"headerFooter",properties:{rawMap:{differentFirst:null!=o.first?1:0,differentOddEven:null!=o.even?1:0}},children:tg(o)}),t):t}}(a),function(o){return function(t){return _e.worksheetImages.get(o)&&t.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),t}}(e));return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:p([])}},oa_getTemplate=function(o){return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:o.map(function(e){return function(o){return{name:"Relationship",properties:{rawMap:{Id:o.Id,Type:o.Type,Target:o.Target}}}}(e)})}},ag=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},_e=function(){function o(){}return o.createExcel=function(t,e,r,n,i){return this.addSheetName(e),function(o,t){1===(Ws=t)&&Oc(),o.forEach(Pv)}(t,this.sheetNames.length),this.createWorksheet(e,r,n,i)},o.buildImageMap=function(t,e,r,n,i){var a=this.sheetNames.length,s=this.images.get(t.id);(!t.position||!t.position.row||!t.position.column)&&(t.position||(t.position={}),t.position=Object.assign({},t.position,{row:e,column:n.indexOf(r)+1}));var l=t;if(function(o,t){var e=o.position,r=e.colSpan,n=e.column;if(o.width)if(r)for(var i=t.slice(n-1,n+r-1),a=0,s=0;s<i.length;s++){var l=i[s].getActualWidth();if(o.width<a+l){o.position.colSpan=s+1,o.totalWidth=o.width,o.width=o.totalWidth-a;break}a+=l}else o.totalWidth=o.width}(l,n),function(o,t){var e=o.position,r=e.rowSpan,n=e.row;if(o.height)if(r)for(var i=0,a=0,s=n;s<n+r;s++){var l=md(Qo(s,t)||20);if(o.height<i+l){o.position.rowSpan=a+1,o.totalHeight=o.height,o.height=o.totalHeight-i;break}i+=l,a++}else o.totalHeight=o.height}(l,i),s){var c=s.find(function(h){return h.sheetId===a});c?c.image.push(l):s.push({sheetId:a,image:[l]})}else this.images.set(l.id,[{sheetId:a,image:[l]}]),this.workbookImageIds.set(l.id,{type:l.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(a,l)},o.buildSheetImageMap=function(t,e){var r=this.worksheetImageIds.get(t);r||this.worksheetImageIds.set(t,r=new Map);var n=this.worksheetImages.get(t);n?(n.push(e),r.get(e.id)||r.set(e.id,{index:r.size,type:e.imageType})):(this.worksheetImages.set(t,[e]),r.set(e.id,{index:0,type:e.imageType}))},o.addSheetName=function(t){for(var e=u._.escapeString(t.name)||"",r="";-1!==this.sheetNames.indexOf(""+e+r);)if(""===r)r="_1";else{var n=parseInt(r.slice(1),10);r="_"+(n+1)}t.name=""+e+r,this.sheetNames.push(t.name)},o.getStringPosition=function(t){return this.sharedStrings.has(t)?this.sharedStrings.get(t):(this.sharedStrings.set(t,this.sharedStrings.size),this.sharedStrings.size-1)},o.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=u.ExcelFactoryMode.SINGLE_SHEET},o.createWorkbook=function(){return St(function(o){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[Dv_getTemplate(o)]}}(this.sheetNames))},o.createStylesheet=function(t){return St(Tv_getTemplate(t))},o.createSharedStrings=function(){return St(function(o){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:o.size,uniqueCount:o.size}},children:qd(o)}}(this.sharedStrings))},o.createCore=function(t){return St(function(o){var e=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:o},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e}]}}(t))},o.createContentTypes=function(t){return St(function(o){var t=new Array(o).fill(void 0).map(function(s,l){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet"+(l+1)+".xml"}}),e=_e.worksheetImages.size,r={};_e.workbookImageIds.forEach(function(s){r[s.type]=!0});var n=new Array(e).fill(void 0).map(function(s,l){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing"+(l+1)+".xml"}}),a=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(Ad(arguments[t]));return o}(Object.keys(r).map(function(s){return{name:"Default",ContentType:"image/"+s,Extension:s}}),[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}],t,[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}],n,[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}]).map(function(s){return function(o){return{name:o.name,properties:{rawMap:{Extension:o.Extension,PartName:o.PartName,ContentType:o.ContentType}}}}(s)});return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:a}}(t))},o.createRels=function(){var t=oa_getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return St(t)},o.createTheme=function(){return St({name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[{name:"a:themeElements",children:[{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[wt(["dk1","sysClr","windowText","000000"]),wt(["lt1","sysClr","window","FFFFFF"]),wt(["dk2","srgbClr","44546A"]),wt(["lt2","srgbClr","E7E6E6"]),wt(["accent1","srgbClr","4472C4"]),wt(["accent2","srgbClr","ED7D31"]),wt(["accent3","srgbClr","A5A5A5"]),wt(["accent4","srgbClr","FFC000"]),wt(["accent5","srgbClr","5B9BD5"]),wt(["accent6","srgbClr","70AD47"]),wt(["hlink","srgbClr","0563C1"]),wt(["folHlink","srgbClr","954F72"])]},Vd_getTemplate(),{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[ea("phClr"),Gs(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),Gs(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[Bs(["6350","flat","sng","ctr"]),Bs(["12700","flat","sng","ctr"]),Bs(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[js(),js(),js(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[ea("phClr"),ea("phClr",[Yt("tint","95000"),Yt("satMod","170000")]),Gs(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]}]},{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]})},o.createWorkbookRels=function(t){var e=new Array(t).fill(void 0).map(function(n,i){return{Id:"rId"+(i+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet"+(i+1)+".xml"}}),r=oa_getTemplate(function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(ag(arguments[t]));return o}(e,[{Id:"rId"+(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId"+(t+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId"+(t+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]));return St(r)},o.createDrawing=function(t){return St(function(o){var t=o.sheetIndex,e=_e.worksheetImages.get(t),r=_e.worksheetImageIds.get(t),n=e.map(function(i,a){var s=function(o){o.fitCell=!!o.fitCell||!o.width||!o.height;var t=o.position,e=void 0===t?{}:t,r=o.fitCell,n=o.width,i=void 0===n?0:n,a=o.height,s=void 0===a?0:a,l=o.totalHeight,c=o.totalWidth,h=e.offsetX,p=void 0===h?0:h,f=e.offsetY,d=void 0===f?0:f,v=e.row,g=void 0===v?1:v,y=e.rowSpan,m=void 0===y?1:y,C=e.column,_=void 0===C?1:C,w=e.colSpan,P=void 0===w?1:w;return{from:{row:g-1,col:_-1,offsetX:Bn(p),offsetY:Bn(d)},to:{row:g-1+(r?1:m-1),col:_-1+(r?1:P-1),offsetX:Bn(i+p),offsetY:Bn(s+d)},height:Bn(l||s),width:Bn(c||i)}}(i);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[Cc("from",s.from),Cc("to",s.to),Nd(i,a,r.get(i.id).index,s),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:n}}({sheetIndex:t}))},o.createDrawingRel=function(t){var e=this,r=this.worksheetImageIds.get(t),n=[];return r.forEach(function(i,a){n.push({Id:"rId"+(i.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image"+(e.workbookImageIds.get(a).index+1)+"."+i.type})}),St(oa_getTemplate(n))},o.createWorksheetDrawingRel=function(t){var e=oa_getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing"+(t+1)+".xml"}]);return St(e)},o.createWorksheet=function(t,e,r,n){return St(ig_getTemplate({worksheet:t,currentSheet:this.sheetNames.length-1,margins:e,pageSetup:r,headerFooterConfig:n}))},o.sharedStrings=new Map,o.sheetNames=[],o.images=new Map,o.worksheetImages=new Map,o.workbookImageIds=new Map,o.worksheetImageIds=new Map,o.factoryMode=u.ExcelFactoryMode.SINGLE_SHEET,o}(),lg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ug=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return lg(t,o),t.prototype.createExcel=function(e){var i=this.config;return _e.createExcel(this.excelStyles,e,i.margins,i.pageSetup,i.headerFooterConfig)},t.prototype.getDataTypeForValue=function(e){return void 0===e?"empty":u._.isNumeric(e)?"n":"s"},t.prototype.getType=function(e,r,n){if(this.isFormula(n))return"f";if(r&&r.dataType)switch(r.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export ["+r.id+".dataType="+r.dataType+"]")}return e},t.prototype.addImage=function(e,r,n){if(this.config.addImageToCell){var i=this.config.addImageToCell(e,r,n);if(i)return _e.buildImageMap(i.image,e,r,this.columnsToExport,this.config.rowHeight),i}},t.prototype.createCell=function(e,r,n){var i=this.getStyleById(e),a=this.getType(r,i,n)||r;return{styleId:i?e:void 0,data:{type:a,value:this.getCellValue(a,n)}}},t.prototype.createMergedCell=function(e,r,n,i){var a=null==n?"":n;return{styleId:this.getStyleById(e)?e:void 0,data:{type:r,value:"s"===r?_e.getStringPosition(a).toString():n},mergeAcross:i}},t.prototype.getCellValue=function(e,r){if(null==r)return _e.getStringPosition("").toString();switch(e){case"s":return""===r?"":_e.getStringPosition(r).toString();case"f":return r.slice(1);case"n":return Number(r).toString();default:return r}},t}(mc),cg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),aa=function(){return aa=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},aa.apply(this,arguments)},Er=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sa=function(o){var t=o.data,e=o.fontSize,r=void 0===e?11:e,n=o.author,i=void 0===n?"AG Grid":n,a=_e.images.size>0;if(Je.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),a){Je.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var s=0;_e.images.forEach(function(p){var f=p[0].image[0];Je.addFile("xl/media/image"+ ++s+"."+f.imageType,f.base64,!0)})}if(!t||0===t.length)return console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),void _e.resetFactory();var l=t.length,c=0;return t.forEach(function(p,f){Je.addFile("xl/worksheets/sheet"+(f+1)+".xml",p),a&&_e.worksheetImages.get(f)&&hg(f,c++)}),Je.addFile("xl/workbook.xml",_e.createWorkbook()),Je.addFile("xl/styles.xml",_e.createStylesheet(r)),Je.addFile("xl/sharedStrings.xml",_e.createSharedStrings()),Je.addFile("xl/theme/theme1.xml",_e.createTheme()),Je.addFile("xl/_rels/workbook.xml.rels",_e.createWorkbookRels(l)),Je.addFile("docProps/core.xml",_e.createCore(i)),Je.addFile("[Content_Types].xml",_e.createContentTypes(l)),Je.addFile("_rels/.rels",_e.createRels()),_e.resetFactory(),Je.getContent(o.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")},hg=function(o,t){var e="xl/drawings",r=e+"/drawing"+(t+1)+".xml",i="xl/worksheets/_rels/sheet"+(o+1)+".xml.rels";Je.addFile(e+"/_rels/drawing"+(t+1)+".xml.rels",_e.createDrawingRel(o)),Je.addFile(r,_e.createDrawing(o)),Je.addFile(i,_e.createWorksheetDrawingRel(t))},fg=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.exportMode="xlsx",e}return cg(t,o),t.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsWrapper:this.gridOptionsWrapper})},t.prototype.getMergedParams=function(e){var r=this.gridOptionsWrapper.getDefaultExportParams("excel");return Object.assign({},r,e)},t.prototype.getData=function(e){return this.setExportMode(e.exportMode||"xlsx"),o.prototype.getData.call(this,e)},t.prototype.export=function(e){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var r=this.getMergedParams(e),n=this.getData(r),a=this.packageFile({data:[n],fontSize:r.fontSize,author:r.author,mimeType:r.mimeType});return a&&ks.download(this.getFileName(r.fileName),a),n},t.prototype.exportDataAsExcel=function(e){return this.export(e)},t.prototype.getDataAsExcel=function(e){var r=this.getMergedParams(e),n=this.getData(r);return e&&"xml"===e.exportMode?n:this.packageFile({data:[n],fontSize:r.fontSize,author:r.author,mimeType:r.mimeType})},t.prototype.setFactoryMode=function(e,r){void 0===r&&(r="xlsx"),("xlsx"===r?_e:Is).factoryMode=e},t.prototype.getFactoryMode=function(e){return("xlsx"===e?_e:Is).factoryMode},t.prototype.getSheetDataForExcel=function(e){var r=this.getMergedParams(e);return this.getData(r)},t.prototype.getMultipleSheetsAsExcel=function(e){return sa(e)},t.prototype.exportMultipleSheetsAsExcel=function(e){return function(o){var t=o.fileName,e=void 0===t?"export.xlsx":t,r=sa(o);r&&ks.download(e,r)}(e)},t.prototype.getDefaultFileName=function(){return"export."+this.getExportMode()},t.prototype.getDefaultFileExtension=function(){return this.getExportMode()},t.prototype.createSerializingSession=function(e){var r=this,n=r.columnModel,i=r.valueService,a=r.gridOptionsWrapper,s="xlsx"===this.getExportMode(),l="ag-grid";null!=e.sheetName&&(l=u._.utf8_encode(e.sheetName.toString().substr(0,31)));var c=aa(aa({},e),{sheetName:l,columnModel:n,valueService:i,gridOptionsWrapper:a,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:this.gridOptions.excelStyles||[],styleLinker:this.styleLinker.bind(this)});return new(s?ug:Od)(c)},t.prototype.styleLinker=function(e,r,n,i,a){if(e===Tr.HEADER)return["header"];if(e===Tr.HEADER_GROUPING)return["header","headerGroup"];var s=this.gridOptions.excelStyles,l=["cell"];if(!s||!s.length)return l;var c=s.map(function(h){return h.id});return this.stylingService.processAllCellClasses(i.getColDef(),{value:n,data:a.data,node:a,colDef:i.getColDef(),rowIndex:r,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext()},function(h){c.indexOf(h)>-1&&l.push(h)}),l.sort(function(h,p){return c.indexOf(h)<c.indexOf(p)?-1:1})},t.prototype.isExportSuppressed=function(){return this.gridOptionsWrapper.isSuppressExcelExport()},t.prototype.setExportMode=function(e){this.exportMode=e},t.prototype.getExportMode=function(){return this.exportMode},t.prototype.packageFile=function(e){return"xml"===this.getExportMode()?new Blob(["\ufeff",e.data[0]],{type:e.mimeType||"application/vnd.ms-excel"}):sa(e)},Er([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Er([u.Autowired("valueService")],t.prototype,"valueService",void 0),Er([u.Autowired("gridOptions")],t.prototype,"gridOptions",void 0),Er([u.Autowired("stylingService")],t.prototype,"stylingService",void 0),Er([u.Autowired("gridSerializer")],t.prototype,"gridSerializer",void 0),Er([u.Autowired("gridOptionsWrapper")],t.prototype,"gridOptionsWrapper",void 0),Er([u.PostConstruct],t.prototype,"postConstruct",null),Er([u.Bean("excelCreator")],t)}(cc),pg={moduleName:u.ModuleNames.ExcelExportModule,beans:[fg,dc,pc],dependantModules:[vc,Re]},dg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ki=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Nt=(()=>(function(o){o[o.EXPANDED=0]="EXPANDED",o[o.COLLAPSED=1]="COLLAPSED",o[o.INDETERMINATE=2]="INDETERMINATE"}(Nt||(Nt={})),Nt))(),vg=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return dg(t,o),t.prototype.preConstruct=function(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')},t.prototype.postConstruct=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this)),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.createExpandIcons(),this.setExpandState(Nt.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},t.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},t.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=u._.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=u._.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=u._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper))},t.prototype.showOrHideOptions=function(){var e=!this.params.suppressFilterSearch,r=!this.params.suppressExpandAll,n=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search..."));var a=this.columnModel.getAllGridColumns().some(function(s){return s.getOriginalParent()&&s.isFilterAllowed()});u._.setDisplayed(this.eFilterTextField.getGui(),e),u._.setDisplayed(this.eExpand,r&&a)},t.prototype.onSearchTextChanged=function(){var e=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=u._.debounce(function(){e.dispatchEvent({type:"searchChanged",searchText:e.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()},t.prototype.onExpandClicked=function(){this.dispatchEvent(this.currentExpandState===Nt.EXPANDED?{type:"collapseAll"}:{type:"expandAll"})},t.prototype.setExpandState=function(e){this.currentExpandState=e,u._.setDisplayed(this.eExpandChecked,this.currentExpandState===Nt.EXPANDED),u._.setDisplayed(this.eExpandUnchecked,this.currentExpandState===Nt.COLLAPSED),u._.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===Nt.INDETERMINATE)},Ki([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Ki([u.RefSelector("eExpand")],t.prototype,"eExpand",void 0),Ki([u.RefSelector("eFilterTextField")],t.prototype,"eFilterTextField",void 0),Ki([u.PreConstruct],t.prototype,"preConstruct",null),Ki([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),gg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Tc=function(o){function t(e){void 0===e&&(e=!1);var r=o.call(this,t.TEMPLATE)||this;return r.expanded=!1,r.hideHeader=e,r}return gg(t,o),t.prototype.postConstruct=function(){this.eExpandChecked=u._.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper),this.eExpandUnchecked=u._.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},t.prototype.setColumn=function(e){var r=this;this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",function(n){n.key===u.KeyCode.ENTER&&r.toggleExpanded()}),this.addManagedListener(this.eventService,u.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),this.eFilterIcon.classList.toggle("ag-hidden",!this.isFilterActive()),this.eExpandChecked.classList.add("ag-hidden"),this.hideHeader?(this.eFilterToolPanelHeader.classList.toggle("ag-hidden",!0),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,u.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},t.prototype.getColumn=function(){return this.column},t.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},t.prototype.addCssClassToTitleBar=function(e){this.eFilterToolPanelHeader.classList.add(e)},t.prototype.addInIcon=function(e,r,n){if(null!=r){var i=u._.createIconNoSpan(e,this.gridOptionsWrapper,n);r.appendChild(i)}},t.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},t.prototype.onFilterChanged=function(){this.eFilterIcon.classList.toggle("ag-hidden",!this.isFilterActive()),this.dispatchEvent({type:u.Column.EVENT_FILTER_CHANGED})},t.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},t.prototype.expand=function(){var r,e=this;if(!this.expanded){this.expanded=!0,u._.setAriaExpanded(this.eFilterToolPanelHeader,!0);var n=u._.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),i=null===(r=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR"))||void 0===r?void 0:r.filterPromise;i&&i.then(function(a){e.underlyingFilter=a,a&&(n.appendChild(a.getGui()),e.agFilterToolPanelBody.appendChild(n),a.afterGuiAttached&&a.afterGuiAttached({container:"toolPanel"}))}),u._.setDisplayed(this.eExpandChecked,!0),u._.setDisplayed(this.eExpandUnchecked,!1)}},t.prototype.collapse=function(){!this.expanded||(this.expanded=!1,u._.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.agFilterToolPanelBody.removeChild(this.agFilterToolPanelBody.children[0]),u._.setDisplayed(this.eExpandChecked,!1),u._.setDisplayed(this.eExpandUnchecked,!0))},t.prototype.refreshFilter=function(){if(this.expanded){var e=this.underlyingFilter;!e||"function"==typeof e.refreshVirtualList&&e.refreshVirtualList()}},t.prototype.onFilterOpened=function(e){"COLUMN_MENU"===e.source&&e.column===this.column&&(!this.expanded||this.collapse())},t.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>',Mr([u.RefSelector("eFilterToolPanelHeader")],t.prototype,"eFilterToolPanelHeader",void 0),Mr([u.RefSelector("eFilterName")],t.prototype,"eFilterName",void 0),Mr([u.RefSelector("agFilterToolPanelBody")],t.prototype,"agFilterToolPanelBody",void 0),Mr([u.RefSelector("eFilterIcon")],t.prototype,"eFilterIcon",void 0),Mr([u.RefSelector("eExpand")],t.prototype,"eExpand",void 0),Mr([u.Autowired("filterManager")],t.prototype,"filterManager",void 0),Mr([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Mr([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),yg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),la=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Wn=function(o){function t(e,r,n,i,a){var s=o.call(this)||this;return s.columnGroup=e,s.childFilterComps=r,s.depth=i,s.expandedCallback=n,s.showingColumn=a,s}return yg(t,o),t.prototype.preConstruct=function(){this.setTemplate(t.TEMPLATE,{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}})},t.prototype.init=function(){var e=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-"+this.depth),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+this.depth+"-header"),this.childFilterComps.forEach(function(r){e.filterGroupComp.addItem(r),r.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+(e.depth+1)+"-header")}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},t.prototype.setupTooltip=function(){var e=this;if(this.showingColumn){var r=function(){var n=e.columnGroup.getColDef().headerTooltip;e.setTooltip(n)};r(),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,r)}},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="filterToolPanelColumnGroup",e},t.prototype.addCssClassToTitleBar=function(e){this.filterGroupComp.addCssClassToTitleBar(e)},t.prototype.refreshFilters=function(){this.childFilterComps.forEach(function(e){e instanceof t?e.refreshFilters():e.refreshFilter()})},t.prototype.isColumnGroup=function(){return this.columnGroup instanceof u.ProvidedColumnGroup},t.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},t.prototype.getChildren=function(){return this.childFilterComps},t.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},t.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},t.prototype.hideGroupItem=function(e,r){this.filterGroupComp.hideItem(e,r)},t.prototype.hideGroup=function(e){this.addOrRemoveCssClass("ag-hidden",e)},t.prototype.forEachToolPanelFilterChild=function(e){this.childFilterComps.forEach(function(r){r instanceof Tc&&e(r)})},t.prototype.addExpandCollapseListeners=function(){var e=this,r=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild(function(i){return i.expand()})},n=this.isColumnGroup()?function(){return e.expandedCallback()}:function(){return e.forEachToolPanelFilterChild(function(i){return i.collapse()})};this.addManagedListener(this.filterGroupComp,u.AgGroupComponent.EVENT_EXPANDED,r),this.addManagedListener(this.filterGroupComp,u.AgGroupComponent.EVENT_COLLAPSED,n)},t.prototype.getColumns=function(){return this.columnGroup instanceof u.ProvidedColumnGroup?this.columnGroup.getLeafColumns():[this.columnGroup]},t.prototype.addFilterChangedListeners=function(){var e=this;this.getColumns().forEach(function(r){e.addManagedListener(r,u.Column.EVENT_FILTER_CHANGED,function(){return e.refreshFilterClass()})}),this.columnGroup instanceof u.ProvidedColumnGroup||this.addManagedListener(this.eventService,u.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},t.prototype.refreshFilterClass=function(){var e=this.getColumns();this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",e.some(function(n){return n.isFilterActive()}))},t.prototype.onFilterOpened=function(e){"COLUMN_MENU"===e.source&&e.column===this.columnGroup&&(!this.isExpanded()||this.collapse())},t.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},t.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},t.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof u.ProvidedColumnGroup?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},t.prototype.getColumnGroupName=function(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")},t.prototype.getColumnName=function(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)},t.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),u._.clearElement(this.getGui())},t.prototype.destroy=function(){this.destroyFilters(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>',la([u.RefSelector("filterGroupComp")],t.prototype,"filterGroupComp",void 0),la([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),la([u.PreConstruct],t.prototype,"preConstruct",null),la([u.PostConstruct],t.prototype,"init",null),t}(u.Component),mg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ua=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Cg=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.filterGroupComps=[],e}return mg(t,o),t.prototype.init=function(e){var r=this;this.initialised=!0;var n={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};u._.mergeDeep(n,e),this.params=n,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_MOVED,function(){return r.onColumnsChanged()}),this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,function(){return r.onColumnsChanged()}),this.addManagedListener(this.eventService,u.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,function(i){"filters"===i.source&&r.refreshFilters()}),this.columnModel.isReady()&&this.onColumnsChanged()},t.prototype.onColumnsChanged=function(){var e=this.columnModel.isPivotMode();this.params.suppressSyncLayoutWithGrid||e?this.buildTreeFromProvidedColumnDefs():this.syncFilterLayout()},t.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this))},t.prototype.buildTreeFromProvidedColumnDefs=function(){var e=this;this.destroyFilters();var r=this.columnModel.getPrimaryColumnTree();this.filterGroupComps=this.recursivelyAddComps(r,0);var n=this.filterGroupComps.length;n&&(this.filterGroupComps.forEach(function(i){return e.appendChild(i)}),this.setFirstAndLastVisible(0,n-1)),u._.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent()},t.prototype.setFiltersLayout=function(e){var r=this;this.destroyFilters();var n=this.toolPanelColDefService.createColumnTree(e);this.filterGroupComps=this.recursivelyAddComps(n,0);var i=this.filterGroupComps.length;i&&(this.filterGroupComps.forEach(function(a){return r.appendChild(a)}),this.setFirstAndLastVisible(0,i-1)),u._.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent()},t.prototype.recursivelyAddComps=function(e,r){var n=this;return u._.flatten(e.map(function(i){if(i instanceof u.ProvidedColumnGroup)return u._.flatten(n.recursivelyAddFilterGroupComps(i,r));var a=i;if(!n.shouldDisplayFilter(a))return[];var l=new Tc(0===r);if(n.getContext().createBean(l),l.setColumn(a),r>0)return l;var c=n.createBean(new Wn(a,[l],n.onGroupExpanded.bind(n),r,!0));return c.addCssClassToTitleBar("ag-filter-toolpanel-header"),c.collapse(),c}))},t.prototype.recursivelyAddFilterGroupComps=function(e,r){if(this.filtersExistInChildren(e.getChildren())){var n=e.getColGroupDef();if(n&&n.suppressFiltersToolPanel)return[];var i=e.isPadding()?r:r+1,a=u._.flatten(this.recursivelyAddComps(e.getChildren(),i));if(e.isPadding())return a;var s=new Wn(e,a,this.onGroupExpanded.bind(this),r,!1);return this.getContext().createBean(s),s.addCssClassToTitleBar("ag-filter-toolpanel-header"),[s]}},t.prototype.filtersExistInChildren=function(e){var r=this;return e.some(function(n){return n instanceof u.ProvidedColumnGroup?r.filtersExistInChildren(n.getChildren()):r.shouldDisplayFilter(n)})},t.prototype.shouldDisplayFilter=function(e){var r=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!r},t.prototype.refresh=function(){},t.prototype.setVisible=function(e){o.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.expandFilterGroups=function(e,r){var n=[],i=function(s){var l=s.getFilterGroupId();(!r||u._.includes(r,l))&&(e&&s.isColumnGroup()?s.expand():s.collapse(),n.push(l)),s.getChildren().forEach(function(h){h instanceof Wn&&i(h)})};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),r){var a=r.filter(function(s){return n.indexOf(s)<0});a.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",a)}},t.prototype.expandFilters=function(e,r){var n=[],i=function(s){if(s instanceof Wn){var l=!1;return s.getChildren().forEach(function(p){i(p)&&(e?(s.expand(),l=!0):s.isColumnGroup()||s.collapse())}),l}var c=s.getColumn().getColId(),h=!r||u._.includes(r,c);return h&&(e?s.expand():s.collapse(),n.push(c)),h};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),r){var a=r.filter(function(s){return n.indexOf(s)<0});a.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",a)}},t.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},t.prototype.fireExpandedEvent=function(){var e=0,r=0,n=function(a){!a.isColumnGroup()||(a.isExpanded()?e++:r++,a.getChildren().forEach(function(s){s instanceof Wn&&n(s)}))};this.filterGroupComps.forEach(n),this.dispatchEvent({type:"groupExpanded",state:e>0&&r>0?Nt.INDETERMINATE:r>0?Nt.COLLAPSED:Nt.EXPANDED})},t.prototype.performFilterSearch=function(e){this.searchFilterText=u._.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)},t.prototype.searchFilters=function(e){var i,a,r=function(s){return!u._.exists(e)||-1!==s.toLowerCase().indexOf(e)},n=function(s,l){if(!(s instanceof Wn))return r(s.getColumnFilterName()||"");var c=s.getChildren(),h=r(s.getFilterGroupName()),p=l||h;if(p){s.hideGroup(!1);for(var f=0;f<c.length;f++)n(c[f],p),s.hideGroupItem(!1,f);return!0}var d=!1;return c.forEach(function(v,g){var y=n(v,l);s.hideGroupItem(!y,g),y&&(d=!0)}),s.hideGroup(!d),d};this.filterGroupComps.forEach(function(s,l){n(s,!1),void 0===i?s.containsCssClass("ag-hidden")||(i=l,a=l):!s.containsCssClass("ag-hidden")&&a!==l&&(a=l)}),this.setFirstAndLastVisible(i,a)},t.prototype.setFirstAndLastVisible=function(e,r){this.filterGroupComps.forEach(function(n,i){n.removeCssClass("ag-first-group-visible"),n.removeCssClass("ag-last-group-visible"),i===e&&n.addCssClass("ag-first-group-visible"),i===r&&n.addCssClass("ag-last-group-visible")})},t.prototype.refreshFilters=function(){this.filterGroupComps.forEach(function(e){return e.refreshFilters()})},t.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),u._.clearElement(this.getGui())},t.prototype.destroy=function(){this.destroyFilters(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-list-panel"></div>',ua([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),ua([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),ua([u.Autowired("toolPanelColDefService")],t.prototype,"toolPanelColDefService",void 0),ua([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),t}(u.Component),_g=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ca=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bg=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.initialised=!1,e.listenerDestroyFuncs=[],e}return _g(t,o),t.prototype.init=function(e){this.initialised&&(this.listenerDestroyFuncs.forEach(function(a){return a()}),this.listenerDestroyFuncs=[]),this.initialised=!0;var r={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};u._.mergeDeep(r,e),this.params=r,this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params),this.params.suppressExpandAll&&this.params.suppressFilterSearch&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},t.prototype.setVisible=function(e){o.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},t.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},t.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},t.prototype.onSearchChanged=function(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)},t.prototype.setFilterLayout=function(e){this.filtersToolPanelListPanel.setFiltersLayout(e)},t.prototype.onGroupExpanded=function(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state)},t.prototype.expandFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)},t.prototype.collapseFilterGroups=function(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)},t.prototype.expandFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!0,e)},t.prototype.collapseFilters=function(e){this.filtersToolPanelListPanel.expandFilters(!1,e)},t.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},t.prototype.refresh=function(){this.init(this.params)},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',ca([u.RefSelector("filtersToolPanelHeaderPanel")],t.prototype,"filtersToolPanelHeaderPanel",void 0),ca([u.RefSelector("filtersToolPanelListPanel")],t.prototype,"filtersToolPanelListPanel",void 0),ca([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),ca([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),t}(u.Component),Sg={moduleName:u.ModuleNames.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:vg},{componentName:"AgFiltersToolPanelList",componentClass:Cg}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:bg}],dependantModules:[Fs,Re]},Qr=function(){function o(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return o.prototype.isValid=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},o.prototype.dilate=function(t){this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t},o.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},o.prototype.render=function(t,e){void 0===e&&(e=o.noParams),t.save(),e.resetTransform&&t.setTransform(1,0,0,1,0,0),t.strokeStyle=e.strokeStyle||"cyan",t.lineWidth=e.lineWidth||1,t.strokeRect(this.x,this.y,this.width,this.height),e.label&&(t.fillStyle=e.fillStyle||"black",t.textBaseline="bottom",t.fillText(e.label,this.x,this.y)),t.restore()},o.noParams={},o}(),Yi=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Xi=function(){function o(t){void 0===t&&(t=[1,0,0,1,0,0]),this.elements=t}return o.prototype.setElements=function(t){var e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},o.prototype.setIdentityElements=function(){var t=this.elements;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},Object.defineProperty(o.prototype,"identity",{get:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"a",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"b",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"c",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"d",{get:function(){return this.elements[3]},set:function(t){this.elements[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"e",{get:function(){return this.elements[4]},set:function(t){this.elements[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"f",{get:function(){return this.elements[5]},set:function(t){this.elements[5]=t},enumerable:!0,configurable:!0}),o.prototype.AxB=function(t,e,r){var n=Yi(t,6),i=n[0],a=n[1],s=n[2],l=n[3],c=n[4],h=n[5],p=Yi(e,6),f=p[0],d=p[1],v=p[2],g=p[3],y=p[4],m=p[5];(r=r||t)[0]=i*f+s*d,r[1]=a*f+l*d,r[2]=i*v+s*g,r[3]=a*v+l*g,r[4]=i*y+s*m+c,r[5]=a*y+l*m+h},o.prototype.multiplySelf=function(t){return this.AxB(this.elements,t.elements),this},o.prototype.multiply=function(t){var e=new Array(6);return this.AxB(this.elements,t.elements,e),new o(e)},o.prototype.preMultiplySelf=function(t){return this.AxB(t.elements,this.elements,this.elements),this},o.prototype.inverse=function(){var t=Yi(this.elements,6),e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],l=1/(e*i-r*n);return new o([i*=l,-(r*=l),-(n*=l),e*=l,n*s-i*a,r*a-e*s])},o.prototype.inverseTo=function(t){var e=Yi(this.elements,6),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=1/(r*a-n*i);return t.setElements([a*=c,-(n*=c),-(i*=c),r*=c,i*l-a*s,n*s-r*l]),this},o.prototype.invertSelf=function(){var t=this.elements,e=Yi(t,6),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=1/(r*a-n*i);return r*=c,n*=c,i*=c,t[0]=a*=c,t[1]=-n,t[2]=-i,t[3]=r,t[4]=i*l-a*s,t[5]=n*s-r*l,this},o.prototype.clone=function(){return new o(this.elements.slice())},o.prototype.transformPoint=function(t,e){var r=this.elements;return{x:t*r[0]+e*r[2]+r[4],y:t*r[1]+e*r[3]+r[5]}},o.prototype.transformBBox=function(t,e,r){void 0===e&&(e=0);var d,v,n=this.elements,i=n[0],a=n[1],s=n[2],l=n[3],c=.5*t.width,h=.5*t.height,p=t.x+c,f=t.y+h;if(e){c-=e,h-=e;var g=Math.sqrt(i*i+s*s),y=Math.sqrt(a*a+l*l);d=Math.abs(c*i)+Math.abs(h*s)+Math.abs(g*e),v=Math.abs(c*a)+Math.abs(h*l)+Math.abs(y*e)}else d=Math.abs(c*i)+Math.abs(h*s),v=Math.abs(c*a)+Math.abs(h*l);return r||(r=new Qr(0,0,0,0)),r.x=p*i+f*s+n[4]-d,r.y=p*a+f*l+n[5]-v,r.width=d+d,r.height=v+v,r},o.prototype.toContext=function(t){if(!this.identity){var e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},o.flyweight=function(t){return t?o.matrix.setElements(t instanceof o?t.elements:t):o.matrix.setIdentityElements(),o.matrix},o.matrix=new o,o}();function Vs(o){var t=o.constructor,e=t.className;if(!e)throw new Error("The "+t+" is missing the 'className' property.");return e+"-"+(t.id=(t.id||0)+1)}var Vn=(()=>(function(o){o[o.All=0]="All",o[o.None=1]="None"}(Vn||(Vn={})),Vn))(),Dr=function(){function o(){this.id=Vs(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new Xi,this.inverseMatrix=new Xi,this._dirtyTransform=!1,this._scalingX=1,this._scalingY=1,this._scalingCenterX=null,this._scalingCenterY=null,this._rotationCenterX=null,this._rotationCenterY=null,this._rotation=0,this._translationX=0,this._translationY=0,this._dirty=!0,this._visible=!0,this.pointerEvents=Vn.All}return o.isNode=function(t){return!!t&&void 0!==t.matrix},o.prototype._setScene=function(t){this._scene=t;for(var e=this.children,r=e.length,n=0;n<r;n++)e[n]._setScene(t)},Object.defineProperty(o.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),o.prototype._setParent=function(t){this._parent=t},Object.defineProperty(o.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),o.prototype.countChildren=function(t){if(void 0===t&&(t=o.MAX_SAFE_INTEGER),t<=0)return 0;for(var e=this.children,r=e.length,n=r,i=0;i<r;i++)n+=e[i].countChildren(t-1);return n},o.prototype.append=function(t){o.isNode(t)&&(t=[t]);for(var e=t.length,r=0;r<e;r++){var n=t[r];if(n.parent)throw new Error(n+" already belongs to another parent: "+n.parent+".");if(n.scene)throw new Error(n+" already belongs a scene: "+n.scene+".");if(this.childSet[n.id])throw new Error("Duplicate "+n.constructor.name+" node: "+n);this._children.push(n),this.childSet[n.id]=!0,n._setParent(this),n._setScene(this.scene)}this.dirty=!0},o.prototype.appendChild=function(t){if(t.parent)throw new Error(t+" already belongs to another parent: "+t.parent+".");if(t.scene)throw new Error(t+" already belongs to a scene: "+t.scene+".");if(this.childSet[t.id])throw new Error("Duplicate "+t.constructor.name+" node: "+t);return this._children.push(t),this.childSet[t.id]=!0,t._setParent(this),t._setScene(this.scene),this.dirty=!0,t},o.prototype.removeChild=function(t){if(t.parent===this){var e=this.children.indexOf(t);if(e>=0)return this._children.splice(e,1),delete this.childSet[t.id],t._setParent(),t._setScene(),this.dirty=!0,t}throw new Error("The node to be removed is not a child of this node.")},o.prototype.insertBefore=function(t,e){var r=t.parent;if(t.parent&&t.parent.removeChild(t),e&&e.parent===this){var n=this.children.indexOf(e);if(!(n>=0))throw new Error(e+" has "+r+" as the parent, but is not in its list of children.");this._children.splice(n,0,t),this.childSet[t.id]=!0,t._setParent(this),t._setScene(this.scene),this.dirty=!0}else this.append(t);return t},Object.defineProperty(o.prototype,"nextSibling",{get:function(){var t=this.parent;if(t){var e=t.children,r=e.indexOf(this);if(r>=0&&r<=e.length-1)return e[r+1]}},enumerable:!0,configurable:!0}),o.prototype.transformPoint=function(t,e){for(var r=Xi.flyweight(this.matrix),n=this.parent;n;)r.preMultiplySelf(n.matrix),n=n.parent;return r.invertSelf().transformPoint(t,e)},o.prototype.inverseTransformPoint=function(t,e){for(var r=Xi.flyweight(this.matrix),n=this.parent;n;)r.preMultiplySelf(n.matrix),n=n.parent;return r.transformPoint(t,e)},Object.defineProperty(o.prototype,"dirtyTransform",{get:function(){return this._dirtyTransform},set:function(t){this._dirtyTransform=t,t&&(this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scalingX",{get:function(){return this._scalingX},set:function(t){this._scalingX!==t&&(this._scalingX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scalingY",{get:function(){return this._scalingY},set:function(t){this._scalingY!==t&&(this._scalingY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scalingCenterX",{get:function(){return this._scalingCenterX},set:function(t){this._scalingCenterX!==t&&(this._scalingCenterX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scalingCenterY",{get:function(){return this._scalingCenterY},set:function(t){this._scalingCenterY!==t&&(this._scalingCenterY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotationCenterX",{get:function(){return this._rotationCenterX},set:function(t){this._rotationCenterX!==t&&(this._rotationCenterX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotationCenterY",{get:function(){return this._rotationCenterY},set:function(t){this._rotationCenterY!==t&&(this._rotationCenterY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotationDeg",{get:function(){return this.rotation/Math.PI*180},set:function(t){this.rotation=t/180*Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"translationX",{get:function(){return this._translationX},set:function(t){this._translationX!==t&&(this._translationX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"translationY",{get:function(){return this._translationY},set:function(t){this._translationY!==t&&(this._translationY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),o.prototype.containsPoint=function(t,e){return!1},o.prototype.pickNode=function(t,e){if(this.visible&&this.pointerEvents!==Vn.None&&this.containsPoint(t,e)){var r=this.children;if(r.length)for(var n=r.length-1;n>=0;n--){var i=r[n].pickNode(t,e);if(i)return i}else if(!this.isContainerNode)return this}},o.prototype.computeBBox=function(){},o.prototype.computeBBoxCenter=function(){var t=this.computeBBox&&this.computeBBox();return t?[t.x+.5*t.width,t.y+.5*t.height]:[0,0]},o.prototype.computeTransformMatrix=function(){var a,s,t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}([0,0],2),e=t[0],r=t[1],n=this.scalingX,i=this.scalingY;1===n&&1===i?(a=0,s=0):(a=null===this.scalingCenterX?e:this.scalingCenterX,s=null===this.scalingCenterY?r:this.scalingCenterY);var p,f,l=this.rotation,c=Math.cos(l),h=Math.sin(l);0===l?(p=0,f=0):(p=null===this.rotationCenterX?e:this.rotationCenterX,f=null===this.rotationCenterY?r:this.rotationCenterY);var d=this.translationX,v=this.translationY,g=a*(1-n)-p,y=s*(1-i)-f;this.dirtyTransform=!1,this.matrix.setElements([c*n,h*n,-h*i,c*i,c*g-h*y+p+d,h*g+c*y+f+v]).inverseTo(this.inverseMatrix)},Object.defineProperty(o.prototype,"dirty",{get:function(){return this._dirty},set:function(t){this._dirty=t,t&&(this.parent?this.parent.dirty=!0:this.scene&&(this.scene.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this.dirty=!0)},enumerable:!0,configurable:!0}),o.MAX_SAFE_INTEGER=Math.pow(2,53)-1,o}(),xg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rr=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.isContainerNode=!0,e._opacity=1,e}return xg(t,o),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){e=Math.min(1,Math.max(0,e)),this._opacity!==e&&(this._opacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.containsPoint=function(e,r){return!0},t.prototype.computeBBox=function(){var e=1/0,r=-1/0,n=1/0,i=-1/0;return this.dirtyTransform&&this.computeTransformMatrix(),this.children.forEach(function(a){if(a.visible){var s=a.computeBBox();if(s){if(!(a instanceof t)){a.dirtyTransform&&a.computeTransformMatrix();for(var l=Xi.flyweight(a.matrix),c=a.parent;c;)l.preMultiplySelf(c.matrix),c=c.parent;l.transformBBox(s,0,s)}var h=s.x,p=s.y;h<e&&(e=h),p<n&&(n=p),h+s.width>r&&(r=h+s.width),p+s.height>i&&(i=p+s.height)}}}),new Qr(e,n,r-e,i-n)},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this.children,n=r.length;e.globalAlpha*=this.opacity;for(var i=0;i<n;i++){var a=r[i];a.visible&&(e.save(),a.render(e),e.restore())}},t.className="Group",t}(Dr);function ha(o,t){var e=Object.create(o);for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var Og=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),sr=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.lastInstanceId=0,e._fillOpacity=1,e._strokeOpacity=1,e._fill=t.defaultStyles.fill,e._stroke=t.defaultStyles.stroke,e._strokeWidth=t.defaultStyles.strokeWidth,e._lineDash=t.defaultStyles.lineDash,e._lineDashOffset=t.defaultStyles.lineDashOffset,e._lineCap=t.defaultStyles.lineCap,e._lineJoin=t.defaultStyles.lineJoin,e._opacity=t.defaultStyles.opacity,e.onShadowChange=function(){e.dirty=!0},e._fillShadow=t.defaultStyles.fillShadow,e._strokeShadow=t.defaultStyles.strokeShadow,e}return Og(t,o),t.createInstance=function(e){var r=Object.create(e);return r._setParent(void 0),r.id=e.id+"-Instance-"+String(++e.lastInstanceId),r},t.prototype.restoreOwnStyles=function(){for(var e=this.constructor.defaultStyles,r=Object.getOwnPropertyNames(e),n=0,i=r.length;n<i;n++){var a=r[n];this[a]=e[a]}},t.prototype.restoreAllStyles=function(){var e=this.constructor.defaultStyles;for(var r in e)this[r]=e[r]},t.prototype.restoreOverriddenStyles=function(){var e=this.constructor.defaultStyles,r=Object.getPrototypeOf(e);for(var n in e)e.hasOwnProperty(n)&&r.hasOwnProperty(n)&&(this[n]=e[n])},Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this._fillOpacity},set:function(e){this._fillOpacity!==e&&(this._fillOpacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeOpacity",{get:function(){return this._strokeOpacity},set:function(e){this._strokeOpacity!==e&&(this._strokeOpacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){this._fill!==e&&(this._fill=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){this._stroke!==e&&(this._stroke=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(e){this._strokeWidth!==e&&(this._strokeWidth=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return Math.floor(this.strokeWidth)%2/2},enumerable:!0,configurable:!0}),t.prototype.align=function(e,r,n){return null!=n?Math.floor(n)+Math.floor(r%1+n%1):Math.floor(r)+e},Object.defineProperty(t.prototype,"lineDash",{get:function(){return this._lineDash},set:function(e){var r=this._lineDash;if(r!==e){if(r&&e&&r.length===e.length){for(var n=!0,i=e.length,a=0;a<i;a++)if(r[a]!==e[a]){n=!1;break}if(n)return}this._lineDash=e,this.dirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineDashOffset",{get:function(){return this._lineDashOffset},set:function(e){this._lineDashOffset!==e&&(this._lineDashOffset=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineCap",{get:function(){return this._lineCap},set:function(e){this._lineCap!==e&&(this._lineCap=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){e=Math.min(1,Math.max(0,e)),this._opacity!==e&&(this._opacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillShadow",{get:function(){return this._fillShadow},set:function(e){var r=this._fillShadow;r!==e&&(r&&r.removeEventListener("change",this.onShadowChange),e&&e.addEventListener("change",this.onShadowChange),this._fillShadow=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeShadow",{get:function(){return this._strokeShadow},set:function(e){var r=this._strokeShadow;r!==e&&(r&&r.removeEventListener("change",this.onShadowChange),e&&e.addEventListener("change",this.onShadowChange),this._strokeShadow=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.fillStroke=function(e){if(this.scene){var r=this.scene.canvas.pixelRatio||1,n=e.globalAlpha;if(this.fill){e.fillStyle=this.fill,e.globalAlpha=n*this.opacity*this.fillOpacity;var i=this.fillShadow;i&&i.enabled&&(e.shadowColor=i.color,e.shadowOffsetX=i.xOffset*r,e.shadowOffsetY=i.yOffset*r,e.shadowBlur=i.blur*r),e.fill()}if(e.shadowColor="rgba(0, 0, 0, 0)",this.stroke&&this.strokeWidth){e.strokeStyle=this.stroke,e.globalAlpha=n*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin);var a=this.strokeShadow;a&&a.enabled&&(e.shadowColor=a.color,e.shadowOffsetX=a.xOffset*r,e.shadowOffsetY=a.yOffset*r,e.shadowBlur=a.blur*r),e.stroke()}}},t.prototype.containsPoint=function(e,r){return this.isPointInPath(e,r)},t.defaultStyles=ha({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0,strokeShadow:void 0}),t}(Dr),Ac=Math.sign?Math.sign:function(o){return 0==(o=+o)||isNaN(o)?o:o>0?1:-1};function Hs(o,t,e,r,n,i,a,s){var l=(e-o)*(s-i)-(r-t)*(a-n);if(0===l)return null;var c=((a-n)*(t-i)-(o-n)*(s-i))/l,h=((e-o)*(t-i)-(r-t)*(o-n))/l;return c>=0&&c<=1&&h>=0&&h<=1?{x:o+c*(e-o),y:t+c*(r-t)}:null}function Eg(o,t,e,r,n,i,a,s,l,c,h,p){for(var f=[],d=c-p,v=h-l,g=l*(p-c)-c*(h-l),y=Ec(o,e,n,a),m=Ec(t,r,i,s),O=function Ag(o,t,e,r){if(0===o)return function Tg(o,t,e){if(0===o)return function Pg(o,t){var e=-t/o;return 0!==o&&e>=0&&e<=1?[e]:[]}(t,e);var r=t*t-4*o*e,n=[];if(0===r){var i=-t/(2*o);i>=0&&i<=1&&n.push(i)}else if(r>0){var a=Math.sqrt(r),s=(-t-a)/(2*o),l=(-t+a)/(2*o);s>=0&&s<=1&&n.push(s),l>=0&&l<=1&&n.push(l)}return n}(t,e,r);var n=t/o,i=e/o,s=(3*i-n*n)/9,l=(9*n*i-r/o*27-2*n*n*n)/54,c=s*s*s+l*l,h=1/3,p=[];if(c>=0){var f=Math.sqrt(c),d=Ac(l+f)*Math.pow(Math.abs(l+f),h),v=Ac(l-f)*Math.pow(Math.abs(l-f),h),g=Math.abs(Math.sqrt(3)*(d-v)/2),y=-h*n+(d+v);if(y>=0&&y<=1&&p.push(y),0===g){var m=-h*n-(d+v)/2;m>=0&&m<=1&&p.push(m)}}else{var C=Math.acos(l/Math.sqrt(-s*s*s)),_=h*n,w=2*Math.sqrt(-s),P=w*Math.cos(h*C)-_,O=w*Math.cos(h*(C+2*Math.PI))-_,A=w*Math.cos(h*(C+4*Math.PI))-_;P>=0&&P<=1&&p.push(P),O>=0&&O<=1&&p.push(O),A>=0&&A<=1&&p.push(A)}return p}(d*y[0]+v*m[0],d*y[1]+v*m[1],d*y[2]+v*m[2],d*y[3]+v*m[3]+g),A=0;A<O.length;A++){var I,E=O[A],M=E*E,R=E*M,B=y[0]*R+y[1]*M+y[2]*E+y[3],j=m[0]*R+m[1]*M+m[2]*E+m[3];(I=l!==h?(B-l)/(h-l):(j-c)/(p-c))>=0&&I<=1&&f.push({x:B,y:j})}return f}function Ec(o,t,e,r){return[3*t-o-3*e+r,3*o-6*t+3*e,-3*o+3*t,o]}var Mg=function(){function o(){this.commands=[],this.params=[],this._closedPath=!1}return o.prototype.moveTo=function(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push("M"),this.params.push(t,e)},o.prototype.lineTo=function(t,e){this.xy?(this.commands.push("L"),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)},o.prototype.rect=function(t,e,r,n){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.closePath()},o.prototype.arcTo=function(t,e,r,n,i,a,s){var l=this.xy;if(l){t<0&&(t=-t),e<0&&(e=-e);var c=l[0],h=l[1],p=(c-a)/2,f=(h-s)/2,d=Math.sin(r),v=Math.cos(r),g=v*p+d*f,y=-d*p+v*f,m=g/t,C=y/e,_=m*m+C*C,w=(c+a)/2,P=(h+s)/2,O=0,A=0;_>=1?(t*=_=Math.sqrt(_),e*=_):(_=Math.sqrt(1/_-1),n===i&&(_=-_),w+=v*(O=_*t*C)-d*(A=-_*e*m),P+=d*O+v*A);var E=Math.atan2((y-A)/e,(g-O)/t),M=Math.atan2((-y-A)/e,(-g-O)/t)-E;this.cubicArc(w,P,t,e,r,E,E+M,1-i)}},o.cubicArc=function(t,e,r,n,i,a,s,l,c,h){if(h){var p=l;l=c,c=p}var f=e.length,d=.5522847498307935,v=Math.sin(l),g=Math.cos(l),y=Math.sin(s),m=Math.cos(s),C=Math.PI/2,_=m*g*i-y*v*a,w=y*g*i+m*v*a,P=-m*v*i-y*g*a,O=-y*v*i+m*g*a;for((c-=l)<0&&(c+=2*Math.PI),t.push("M"),e.push(_+r,w+n);c>=C;){c-=C,t.push("C");var A=P+r;e.push(_+P*d+r,w+O*d+n,_*d+P+r,w*d+O+n,Math.abs(A)<1e-8?0:A,O+n),p=_,_=P,P=-p,p=w,w=O,O=-p}if(c){var E=1.3333333333333333*Math.tan(c/4),M=Math.sin(c),R=Math.cos(c),B=R+E*M,j=M-E*R;t.push("C"),A=_*R+P*M+r,e.push(_+P*E+r,w+O*E+n,_*B+P*j+r,w*B+O*j+n,Math.abs(A)<1e-8?0:A,w*R+O*M+n)}if(h)for(var I=f,F=e.length-2;I<F;I+=2,F-=2)p=e[I],e[I]=e[F],e[F]=p,p=e[I+1],e[I+1]=e[F+1],e[F+1]=p},o.prototype.cubicArc=function(t,e,r,n,i,a,s,l){var c=this.commands,h=this.params,p=c.length;o.cubicArc(c,h,t,e,r,n,i,a,s,l);var f=h[h.length-2],d=h[h.length-1];this.xy?(c[p]="L",this.xy[0]=f,this.xy[1]=d):this.xy=[f,d]},o.prototype.deCasteljau=function(t,e){var r=t.length;if(r<2||r%2==1)throw new Error("Fewer than two points or not an even count.");if(2===r||0===e)return t.slice(0,2);if(1===e)return t.slice(-2);for(var n=[],i=r-2,a=0;a<i;a+=2)n.push((1-e)*t[a]+e*t[a+2],(1-e)*t[a+1]+e*t[a+3]);return this.deCasteljau(n,e)},o.prototype.approximateCurve=function(t,e){var r=this.deCasteljau(t,0);this.moveTo(r[0],r[1]);for(var n=1/e,i=n;i<=1;i+=n){var a=this.deCasteljau(t,i);this.lineTo(a[0],a[1])}},o.prototype.quadraticCurveTo=function(t,e,r,n){this.xy||this.moveTo(t,e),this.cubicCurveTo((this.xy[0]+2*t)/3,(this.xy[1]+2*e)/3,(2*t+r)/3,(2*e+n)/3,r,n)},o.prototype.cubicCurveTo=function(t,e,r,n,i,a){this.xy||this.moveTo(t,e),this.commands.push("C"),this.params.push(t,e,r,n,i,a),this.xy[0]=i,this.xy[1]=a},Object.defineProperty(o.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!0,configurable:!0}),o.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push("Z"),this._closedPath=!0)},o.prototype.clear=function(){this.commands.length=0,this.params.length=0,this.xy=void 0,this._closedPath=!1},o.prototype.isPointInPath=function(t,e){for(var r=this.commands,n=this.params,i=r.length,a=-1e4,s=-1e4,l=NaN,c=NaN,h=0,p=0,f=0,d=0,v=0;d<i;d++)switch(r[d]){case"M":isNaN(l)||Hs(l,c,h,p,a,s,t,e)&&f++,l=h=n[v++],c=p=n[v++];break;case"L":Hs(h,p,h=n[v++],p=n[v++],a,s,t,e)&&f++;break;case"C":f+=Eg(h,p,n[v++],n[v++],n[v++],n[v++],h=n[v++],p=n[v++],a,s,t,e).length;break;case"Z":isNaN(l)||Hs(l,c,h,p,a,s,t,e)&&f++}return f%2==1},o.fromString=function(t){var e=new o;return e.setFromString(t),e},o.parseSvgPath=function(t){return t.trim().split(o.splitCommandsRe).map(function(e){var r=e.match(o.matchParamsRe);return{command:e.substr(0,1),params:r?r.map(parseFloat):[]}})},o.prettifySvgPath=function(t){return o.parseSvgPath(t).map(function(e){return e.command+e.params.join(",")}).join("\n")},o.prototype.setFromString=function(t){var n,i,a,s,l,e=this;function c(){l.match(o.quadraticCommandRe)||(a=n,s=i)}function h(){l.match(o.cubicCommandRe)||(a=n,s=i)}this.clear(),o.parseSvgPath(t).forEach(function(p){var f=p.params,d=f.length,v=0;switch(p.command){case"M":for(e.moveTo(n=f[v++],i=f[v++]);v<d;)e.lineTo(n=f[v++],i=f[v++]);break;case"m":for(e.moveTo(n+=f[v++],i+=f[v++]);v<d;)e.lineTo(n+=f[v++],i+=f[v++]);break;case"L":for(;v<d;)e.lineTo(n=f[v++],i=f[v++]);break;case"l":for(;v<d;)e.lineTo(n+=f[v++],i+=f[v++]);break;case"C":for(;v<d;)e.cubicCurveTo(f[v++],f[v++],a=f[v++],s=f[v++],n=f[v++],i=f[v++]);break;case"c":for(;v<d;)e.cubicCurveTo(n+f[v++],i+f[v++],a=n+f[v++],s=i+f[v++],n+=f[v++],i+=f[v++]);break;case"S":for(h();v<d;)e.cubicCurveTo(n+n-a,i+i-s,a=f[v++],s=f[v++],n=f[v++],i=f[v++]);break;case"s":for(h();v<d;)e.cubicCurveTo(n+n-a,i+i-s,a=n+f[v++],s=i+f[v++],n+=f[v++],i+=f[v++]);break;case"Q":for(;v<d;)e.quadraticCurveTo(a=f[v++],s=f[v++],n=f[v++],i=f[v++]);break;case"q":for(;v<d;)e.quadraticCurveTo(a=n+f[v++],s=i+f[v++],n+=f[v++],i+=f[v++]);break;case"T":for(c();v<d;)e.quadraticCurveTo(a=n+n-a,s=i+i-s,n=f[v++],i=f[v++]);break;case"t":for(c();v<d;)e.quadraticCurveTo(a=n+n-a,s=i+i-s,n+=f[v++],i+=f[v++]);break;case"A":for(;v<d;)e.arcTo(f[v++],f[v++],f[v++]*Math.PI/180,f[v++],f[v++],n=f[v++],i=f[v++]);break;case"a":for(;v<d;)e.arcTo(f[v++],f[v++],f[v++]*Math.PI/180,f[v++],f[v++],n+=f[v++],i+=f[v++]);break;case"Z":case"z":e.closePath();break;case"H":for(;v<d;)e.lineTo(n=f[v++],i);break;case"h":for(;v<d;)e.lineTo(n+=f[v++],i);break;case"V":for(;v<d;)e.lineTo(n,i=f[v++]);break;case"v":for(;v<d;)e.lineTo(n,i+=f[v++])}l=p.command})},o.prototype.toString=function(){for(var t=this.commands,e=this.params,r=t.length,n=[],i=0,a=0;i<r;i++)switch(t[i]){case"M":n.push("M"+e[a++]+","+e[a++]);break;case"L":n.push("L"+e[a++]+","+e[a++]);break;case"C":n.push("C"+e[a++]+","+e[a++]+" "+e[a++]+","+e[a++]+" "+e[a++]+","+e[a++]);break;case"Z":n.push("Z")}return n.join("")},o.prototype.toPrettyString=function(){return o.prettifySvgPath(this.toString())},o.prototype.toSvg=function(){return o.xmlDeclaration+'\n<svg width="100%" height="100%" viewBox="0 0 50 50" version="1.1" xmlns="'+o.xmlns+'">\n    <path d="'+this.toString()+'" style="fill:none;stroke:#000;stroke-width:0.5;"/>\n</svg>'},o.prototype.toDebugSvg=function(){var t=o.prettifySvgPath(this.toString());return o.xmlDeclaration+'\n<svg width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="'+o.xmlns+'">\n    <path d="'+t+'" style="fill:none;stroke:#000;stroke-width:0.5;"/>\n</svg>'},o.prototype.toCubicPaths=function(){var r,n,i,a,s,t=[],e=this.params,l=0;return this.commands.forEach(function(c){switch(c){case"M":r=[n=a=e[l++],i=s=e[l++]],t.push(r);break;case"L":var h=e[l++],p=e[l++];r.push((a+a+h)/3,(s+s+p)/3,(a+h+h)/3,(s+p+p)/3,a=h,s=p);break;case"C":r.push(e[l++],e[l++],e[l++],e[l++],a=e[l++],s=e[l++]);break;case"Z":r.push((a+a+n)/3,(s+s+i)/3,(a+n+n)/3,(s+i+i)/3,a=n,s=i)}}),t},o.cubicPathToString=function(t){var e=t.length;if(!(e%2==0&&(e/2-1)/2>=1))throw new Error("Invalid path.");return"M"+t.slice(0,2).join(",")+"C"+t.slice(2).join(",")},o.splitCommandsRe=/(?=[AaCcHhLlMmQqSsTtVvZz])/g,o.matchParamsRe=/-?[0-9]*\.?\d+/g,o.quadraticCommandRe=/[QqTt]/,o.cubicCommandRe=/[CcSs]/,o.xmlDeclaration='<?xml version="1.0" encoding="UTF-8"?>',o.xmlns="http://www.w3.org/2000/svg",o}(),Dg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zs=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.path=new Mg,e._dirtyPath=!0,e._svgPath="",e}return Dg(t,o),Object.defineProperty(t.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"svgPath",{get:function(){return this._svgPath},set:function(e){this._svgPath!==e&&(this._svgPath=e,this.path.setFromString(e),this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.path.closedPath&&this.path.isPointInPath(n.x,n.y)},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.updatePath=function(){},t.prototype.render=function(e){var r=this.scene;this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e),this.dirtyPath&&(this.updatePath(),this.dirtyPath=!1),r.appendPath(this.path),this.fillStroke(e),this.dirty=!1},t.className="Path",t}(sr),Rg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hn=function(o){function t(){var e=o.call(this)||this;return e._x1=0,e._y1=0,e._x2=0,e._y2=0,e.restoreOwnStyles(),e}return Rg(t,o),Object.defineProperty(t.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1!==e&&(this._x1=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1!==e&&(this._y1=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2!==e&&(this._x2=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2!==e&&(this._y2=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){return new Qr(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this.x1,n=this.y1,i=this.x2,a=this.y2;if(r===i){var s=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=s,i=s}else if(n===a){var l=Math.round(n)+Math.floor(this.strokeWidth)%2/2;n=l,a=l}e.beginPath(),e.moveTo(r,n),e.lineTo(i,a),this.fillStroke(e),this.dirty=!1},t.className="Line",t.defaultStyles=ha(sr.defaultStyles,{fill:void 0,strokeWidth:1}),t}(sr),Mc=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Fr=function(){function o(){this.type="band",this.index=new Map,this.ordinalRange=[],this._domain=[],this._range=[0,1],this._bandwidth=1,this._paddingInner=0,this._paddingOuter=0,this._round=!1,this._align=.5}return Object.defineProperty(o.prototype,"domain",{get:function(){return this._domain},set:function(t){var e=this._domain;e.length=0,this.index=new Map;var r=this.index;t.forEach(function(n){void 0===r.get(n)&&r.set(n,e.push(n)-1)}),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"range",{get:function(){return this._range},set:function(t){this._range[0]=t[0],this._range[1]=t[1],this.rescale()},enumerable:!0,configurable:!0}),o.prototype.ticks=function(){return this._domain},o.prototype.convert=function(t){var e=this.index.get(t);if(void 0===e)return NaN;var r=this.ordinalRange[e];return void 0===r?NaN:r},Object.defineProperty(o.prototype,"bandwidth",{get:function(){return this._bandwidth},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"padding",{get:function(){return this._paddingInner},set:function(t){t=Math.max(0,Math.min(1,t)),this._paddingInner=t,this._paddingOuter=t,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(t){this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(t){this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"round",{get:function(){return this._round},set:function(t){this._round=t,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"align",{get:function(){return this._align},set:function(t){this._align=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),o.prototype.rescale=function(){var t,e=this._domain.length;if(e){var r=Mc(this._range,2),n=r[0],i=r[1],a=i<n;a&&(n=(t=Mc([i,n],2))[0],i=t[1]);var s=(i-n)/Math.max(1,e-this._paddingInner+2*this._paddingOuter);this._round&&(s=Math.floor(s)),n+=(i-n-s*(e-this._paddingInner))*this._align,this._bandwidth=s*(1-this._paddingInner),this._round&&(n=Math.round(n),this._bandwidth=Math.round(this._bandwidth));for(var l=[],c=0;c<e;c++)l.push(n+s*c);this.ordinalRange=a?l.reverse():l}},o}(),Dc=function(){function o(t,e){this.next=null,this.scene=t.scene,this.parent=t,this.datum=e}return o.prototype.appendChild=function(t){if(null===this.next)return this.parent.insertBefore(t,null);if(!Dr.isNode(this.next))throw new Error(this.next+" is not a Node.");return this.parent.insertBefore(t,this.next)},o.prototype.insertBefore=function(t,e){return this.parent.insertBefore(t,e)},o}(),fa=function(){function o(t,e){this.groups=t,this.parents=e}return o.select=function(t){return new o([["function"==typeof t?t():t]],[void 0])},o.selectAll=function(t){return new o([null==t?[]:t],[void 0])},o.prototype.append=function(t){return this.select(function(e){return e.appendChild(new t)})},o.prototype.appendFn=function(t){return this.select(function(e,r,n,i){return e.appendChild(t(e,r,n,i))})},o.prototype.select=function(t){for(var e=this.groups,r=e.length,n=[],i=0;i<r;i++)for(var a=e[i],s=a.length,l=n[i]=new Array(s),c=0;c<s;c++){var h=a[c];if(h){var p=t(h,h.datum,c,a);p&&(p.datum=h.datum),l[c]=p}}return new o(n,this.parents)},o.prototype.selectByClass=function(t){return this.select(function(e){if(Dr.isNode(e))for(var r=e.children,n=r.length,i=0;i<n;i++){var a=r[i];if(a instanceof t)return a}})},o.prototype.selectByTag=function(t){return this.select(function(e){if(Dr.isNode(e))for(var r=e.children,n=r.length,i=0;i<n;i++){var a=r[i];if(a.tag===t)return a}})},o.prototype.selectAllByClass=function(t){return this.selectAll(function(e){var r=[];if(Dr.isNode(e))for(var n=e.children,i=n.length,a=0;a<i;a++){var s=n[a];s instanceof t&&r.push(s)}return r})},o.prototype.selectAllByTag=function(t){return this.selectAll(function(e){var r=[];if(Dr.isNode(e))for(var n=e.children,i=n.length,a=0;a<i;a++){var s=n[a];s.tag===t&&r.push(s)}return r})},o.prototype.selectNone=function(){return[]},o.prototype.selectAll=function(t){t||(t=this.selectNone);for(var e=[],r=[],n=this.groups,i=n.length,a=0;a<i;a++)for(var s=n[a],l=s.length,c=0;c<l;c++){var h=s[c];h&&(e.push(t(h,h.datum,c,s)),r.push(h))}return new o(e,r)},o.prototype.each=function(t){for(var e=this.groups,r=e.length,n=0;n<r;n++)for(var i=e[n],a=i.length,s=0;s<a;s++){var l=i[s];l&&t(l,l.datum,s,i)}return this},o.prototype.remove=function(){return this.each(function(t){if(Dr.isNode(t)){var e=t.parent;e&&e.removeChild(t)}})},o.prototype.merge=function(t){for(var e=this.groups,r=t.groups,n=e.length,a=Math.min(n,r.length),s=new Array(n),l=0;l<a;l++)for(var c=e[l],h=r[l],p=c.length,f=s[l]=new Array(p),d=0;d<p;d++)f[d]=c[d]||h[d]||void 0;for(;l<n;l++)s[l]=e[l];return new o(s,this.parents)},o.prototype.node=function(){for(var t=this.groups,e=t.length,r=0;r<e;r++)for(var n=t[r],i=n.length,a=0;a<i;a++){var s=n[a];if(s)return s}return null},o.prototype.attr=function(t,e){return this.each(function(r){r[t]=e}),this},o.prototype.attrFn=function(t,e){return this.each(function(r,n,i,a){r[t]=e(r,n,i,a)}),this},o.prototype.call=function(t){return t(this),this},Object.defineProperty(o.prototype,"size",{get:function(){var t=0;return this.each(function(){return t++}),t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){var t=[];return this.each(function(e,r){return t.push(r)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"enter",{get:function(){return new o(this.enterGroups?this.enterGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"exit",{get:function(){return new o(this.exitGroups?this.exitGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),o.prototype.setDatum=function(t){return this.each(function(e){e.datum=t})},Object.defineProperty(o.prototype,"datum",{get:function(){var t=this.node();return t?t.datum:null},enumerable:!0,configurable:!0}),o.prototype.setData=function(t,e){if("function"!=typeof t){var r=t;t=function(){return r}}for(var n=this.groups,i=this.parents,a=n.length,s=new Array(a),l=new Array(a),c=new Array(a),h=0;h<a;h++){var p=n[h],f=i[h];if(!f)throw new Error("Group #"+h+" has no parent: "+p);var d=p.length,v=t(f,f.datum,h,i),g=v.length,y=l[h]=new Array(g),m=s[h]=new Array(g),C=c[h]=new Array(d);e?this.bindKey(f,p,y,m,C,v,e):this.bindIndex(f,p,y,m,C,v);for(var _=0,w=0;_<g;_++){var P=y[_];if(P){_>=w&&(w=_+1);for(var O=void 0;!(O=m[w])&&w<g;)w++;P.next=O||null}}}var A=new o(s,i);return A.enterGroups=l,A.exitGroups=c,A},o.prototype.bindIndex=function(t,e,r,n,i,a){for(var s=e.length,l=a.length,c=0;c<l;c++)(h=e[c])?(h.datum=a[c],n[c]=h):r[c]=new Dc(t,a[c]);for(;c<s;c++){var h;(h=e[c])&&(i[c]=h)}},o.prototype.bindKey=function(t,e,r,n,i,a,s){for(var l=e.length,c=a.length,h=new Array(l),p={},f=0;f<l;f++)(d=e[f])&&((v=h[f]=o.keyPrefix+s(d,d.datum,f,e))in p?i[f]=d:p[v]=d);for(f=0;f<c;f++){var v;(d=p[v=o.keyPrefix+s(t,a[f],f,a)])?(n[f]=d,d.datum=a[f],p[v]=void 0):r[f]=new Dc(t,a[f])}for(f=0;f<l;f++){var d;(d=e[f])&&p[h[f]]===d&&(i[f]=d)}},o.keyPrefix="$",o}(),lr=function(){function o(t,e,r){void 0===t&&(t=window.document),void 0===e&&(e=600),void 0===r&&(r=300),this._container=void 0,this._pixelRatio=NaN,this._width=100,this._height=100,this.document=t,this.element=t.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.style.userSelect="none",this.element.style.display="block",this.setPixelRatio(),this.resize(e,r)}return Object.defineProperty(o.prototype,"container",{get:function(){return this._container},set:function(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)},enumerable:!0,configurable:!0}),o.prototype.remove=function(){var t=this.element.parentNode;null!=t&&t.removeChild(this.element)},o.prototype.destroy=function(){this.element.remove(),this._canvas=void 0,Object.freeze(this)},o.prototype.toImage=function(){var t=this.document.createElement("img");return t.src=this.getDataURL(),t},o.prototype.getDataURL=function(t){return this.element.toDataURL(t)},o.prototype.download=function(t){t=((t||"").trim()||"image")+".png";var r=this.getDataURL("image/png"),n=this.document,i=n.createElement("a");i.href=r,i.download=t,i.style.display="none",n.body.appendChild(i),i.click(),n.body.removeChild(i)},Object.defineProperty(o.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!0,configurable:!0}),o.prototype.setPixelRatio=function(t){var e=t||window.devicePixelRatio;e!==this.pixelRatio&&(o.overrideScale(this.context,e),this._pixelRatio=e,this.resize(this.width,this.height))},Object.defineProperty(o.prototype,"pixelated",{get:function(){return"pixelated"===this.element.style.imageRendering},set:function(t){this.element.style.imageRendering=t?"pixelated":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),o.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.element,i=r.context,a=r.pixelRatio;n.width=Math.round(t*a),n.height=Math.round(e*a),n.style.width=t+"px",n.style.height=e+"px",i.resetTransform(),this._width=t,this._height=e}},Object.defineProperty(o,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d")},enumerable:!0,configurable:!0}),Object.defineProperty(o,"svgText",{get:function(){if(this._svgText)return this._svgText;var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";var r=document.createElementNS(t,"text");return r.setAttribute("x","0"),r.setAttribute("y","30"),r.setAttribute("text","black"),e.appendChild(r),document.body.appendChild(e),this._svgText=r,r},enumerable:!0,configurable:!0}),Object.defineProperty(o,"has",{get:function(){if(this._has)return this._has;var t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,r=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!r,getTransform:void 0!==this.textMeasuringContext.getTransform})},enumerable:!0,configurable:!0}),o.measureText=function(t,e,r,n){var i=this.textMeasuringContext;return i.font=e,i.textBaseline=r,i.textAlign=n,i.measureText(t)},o.getTextSize=function(t,e){if(this.has.textMetrics){var r=this.textMeasuringContext;r.font=e;var n=r.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)},o.measureSvgText=function(t,e){var r=this.textSizeCache,n=r[e];if(n){var i=n[t];if(i)return i}else r[e]={};var a=this.svgText;a.style.font=e,a.textContent=t;var s=a.getBBox(),l={width:s.width,height:s.height};return r[e][t]=l,l},o.overrideScale=function(t,e){var r=0,n={save:function(){this.$save(),r++},restore:function(){r>0&&(this.$restore(),r--)},setTransform:function(a,s,l,c,h,p){this.$setTransform(a*e,s*e,l*e,c*e,h*e,p*e)},resetTransform:function(){this.$setTransform(e,0,0,e,0,0),this.save(),r=0}};for(var i in n)n.hasOwnProperty(i)&&(t["$"+i]||(t["$"+i]=t[i]),t[i]=n[i])},o.textSizeCache={},o}(),Fg=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Lg=function(){function o(t,e,r){var n=this;void 0===t&&(t=window.document),this.id=Vs(this),this._dirty=!1,this.animationFrameId=0,this._root=null,this.debug={renderFrameIndex:!1,renderBoundingBoxes:!1},this._frameIndex=0,this.render=function(){var i,s=n.ctx,l=n.root,c=n.pendingSize;n.animationFrameId=0,c&&((i=n.canvas).resize.apply(i,function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(Fg(arguments[t]));return o}(c)),n.pendingSize=void 0),!l||l.visible?(s.clearRect(0,0,n.width,n.height),l&&(s.save(),l.visible&&l.render(s),s.restore()),n._frameIndex++,n.debug.renderFrameIndex&&(s.fillStyle="white",s.fillRect(0,0,40,15),s.fillStyle="black",s.fillText(n.frameIndex.toString(),2,10)),n.dirty=!1):n.dirty=!1},this.canvas=new lr(t,e,r),this.ctx=this.canvas.context}return Object.defineProperty(o.prototype,"container",{get:function(){return this.canvas.container},set:function(t){this.canvas.container=t},enumerable:!0,configurable:!0}),o.prototype.download=function(t){this.canvas.download(t)},o.prototype.getDataURL=function(t){return this.canvas.getDataURL(t)},Object.defineProperty(o.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!0,configurable:!0}),o.prototype.resize=function(t,e){t=Math.round(t),e=Math.round(e),(t!==this.width||e!==this.height)&&(this.pendingSize=[t,e],this.dirty=!0)},Object.defineProperty(o.prototype,"dirty",{get:function(){return this._dirty},set:function(t){t&&!this._dirty&&(this.animationFrameId=requestAnimationFrame(this.render)),this._dirty=t},enumerable:!0,configurable:!0}),o.prototype.cancelRender=function(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0,this._dirty=!1)},Object.defineProperty(o.prototype,"root",{get:function(){return this._root},set:function(t){t!==this._root&&(this._root&&this._root._setScene(),this._root=t,t&&(null===t.parent&&t.scene&&t.scene!==this&&(t.scene.root=null),t._setScene(this)),this.dirty=!0)},enumerable:!0,configurable:!0}),o.prototype.appendPath=function(t){var e=this.ctx,r=t.commands,n=t.params,i=r.length,a=0;e.beginPath();for(var s=0;s<i;s++)switch(r[s]){case"M":e.moveTo(n[a++],n[a++]);break;case"L":e.lineTo(n[a++],n[a++]);break;case"C":e.bezierCurveTo(n[a++],n[a++],n[a++],n[a++],n[a++],n[a++]);break;case"Z":e.closePath()}},Object.defineProperty(o.prototype,"frameIndex",{get:function(){return this._frameIndex},enumerable:!0,configurable:!0}),o.className="Scene",o}(),pa=function(){return pa=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},pa.apply(this,arguments)},qi=function(){function o(){this.allPropertyListeners=new Map,this.allEventListeners=new Map}return o.prototype.addPropertyListener=function(t,e,r){void 0===r&&(r=this);var n=this.allPropertyListeners,i=n.get(t);i||n.set(t,i=new Map),i.has(e)||i.set(e,new Set);var s=i.get(e);s&&s.add(r)},o.prototype.removePropertyListener=function(t,e,r){void 0===r&&(r=this);var i=this.allPropertyListeners.get(t);if(i)if(e){var a=i.get(e);a&&(a.delete(r),a.size||i.delete(e))}else i.clear()},o.prototype.notifyPropertyListeners=function(t,e,r){var n=this,a=this.allPropertyListeners.get(t);a&&a.forEach(function(s,l){s.forEach(function(c){return l.call(c,{type:t,source:n,value:r,oldValue:e})})})},o.prototype.addEventListener=function(t,e,r){void 0===r&&(r=this);var n=this.allEventListeners,i=n.get(t);i||n.set(t,i=new Map),i.has(e)||i.set(e,new Set);var s=i.get(e);s&&s.add(r)},o.prototype.removeEventListener=function(t,e,r){void 0===r&&(r=this);var i=this.allEventListeners.get(t);if(i)if(e){var a=i.get(e);a&&(a.delete(r),a.size||i.delete(e))}else i.clear()},o.prototype.notifyEventListeners=function(t){var e=this,r=this.allEventListeners;t.forEach(function(n){var i=r.get(n);i&&i.forEach(function(a,s){a.forEach(function(l){return s.call(l,{type:n,source:e})})})})},o.prototype.fireEvent=function(t){var e=this,r=this.allEventListeners.get(t.type);r&&r.forEach(function(n,i){n.forEach(function(a){return i.call(a,pa(pa({},t),{source:e}))})})},o.privateKeyPrefix="_",o}();function zn(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return o.indexOf("debugger"),function(r,n){var i=qi.privateKeyPrefix+n,a=i+"Events";r[n]||(o&&(r[a]=o),Object.defineProperty(r,n,{set:function(s){var l=this[i];if(s!==l||"object"==typeof s&&null!==s){this[i]=s,this.notifyPropertyListeners(n,l,s);var c=this[a];c&&this.notifyEventListeners(c)}},get:function(){return this[i]},enumerable:!0,configurable:!0}))}}var Ig=function(){function o(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===r&&(r=t),void 0===n&&(n=e),this.top=t,this.right=e,this.bottom=r,this.left=n}return o.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},o}();function st(o){return"number"==typeof o&&Number.isFinite(o)}function Us(o){return o instanceof Date&&!isNaN(+o)}function Rc(o){return"string"==typeof o}function Wg(o){return function Bg(o){return st(o)||function Gg(o){return!!o&&o.hasOwnProperty("valueOf")&&st(o.valueOf())}(o)}(o)||Us(o)}function en(o,t){return o=+o,t=+t,function(e){return o*(1-e)+t*e}}var Fc=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ur=function(){function o(t,e,r,n){void 0===n&&(n=1),this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,r||0)),this.a=Math.min(1,Math.max(0,n||0))}return o.fromString=function(t){if(t.indexOf("#")>=0)return o.fromHexString(t);var e=o.nameToHex[t];if(e)return o.fromHexString(e);if(t.indexOf("rgb")>=0)return o.fromRgbaString(t);throw new Error("Invalid color string: '"+t+"'")},o.parseHex=function(t){var e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(var r=0;r<t.length;r+=2)e.push(parseInt(""+t[r]+t[r+1],16));break;case 3:case 4:e=t.split("").map(function(n){return parseInt(n,16)}).map(function(n){return n+16*n})}if(e.length>=3&&e.every(function(n){return n>=0}))return 3===e.length&&e.push(255),e},o.fromHexString=function(t){var e=o.parseHex(t);if(e){var r=Fc(e,4);return new o(r[0]/255,r[1]/255,r[2]/255,r[3]/255)}throw new Error("Malformed hexadecimal color string: '"+t+"'")},o.stringToRgba=function(t){for(var e=Fc([NaN,NaN],2),r=e[0],n=e[1],i=0;i<t.length;i++){var a=t[i];if(r||"("!==a){if(")"===a){n=i;break}}else r=i}var s=r&&n&&t.substring(r+1,n);if(s){var l=s.split(","),c=[];for(i=0;i<l.length;i++){var h=l[i],p=parseFloat(h);if(isNaN(p))return;h.indexOf("%")>=0?(p=Math.max(0,Math.min(100,p)),p/=100):3===i?p=Math.max(0,Math.min(1,p)):(p=Math.max(0,Math.min(255,p)),p/=255),c.push(p)}return c}},o.fromRgbaString=function(t){var e=o.stringToRgba(t);if(e){if(3===e.length)return new o(e[0],e[1],e[2]);if(4===e.length)return new o(e[0],e[1],e[2],e[3])}throw new Error("Malformed rgb/rgba color string: '"+t+"'")},o.fromArray=function(t){if(4===t.length)return new o(t[0],t[1],t[2],t[3]);if(3===t.length)return new o(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},o.fromHSB=function(t,e,r,n){void 0===n&&(n=1);var i=o.HSBtoRGB(t,e,r);return new o(i[0],i[1],i[2],n)},o.padHex=function(t){return 1===t.length?"0"+t:t},o.prototype.toHexString=function(){var t="#"+o.padHex(Math.round(255*this.r).toString(16))+o.padHex(Math.round(255*this.g).toString(16))+o.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=o.padHex(Math.round(255*this.a).toString(16))),t},o.prototype.toRgbaString=function(t){void 0===t&&(t=3);var e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],r=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*r)/r),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},o.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},o.prototype.toHSB=function(){return o.RGBtoHSB(this.r,this.g,this.b)},o.RGBtoHSB=function(t,e,r){var n=Math.min(t,e,r),i=Math.max(t,e,r),s=NaN;if(n!==i){var l=i-n,c=(i-t)/l,h=(i-e)/l,p=(i-r)/l;s=t===i?p-h:e===i?2+c-p:4+h-c,(s/=6)<0&&(s+=1)}return[360*s,0!==i?(i-n)/i:0,i]},o.HSBtoRGB=function(t,e,r){isNaN(t)&&(t=0),t=(t%360+360)%360/360;var n=0,i=0,a=0;if(0===e)n=i=a=r;else{var s=6*(t-Math.floor(t)),l=s-Math.floor(s),c=r*(1-e),h=r*(1-e*l),p=r*(1-e*(1-l));switch(s>>0){case 0:n=r,i=p,a=c;break;case 1:n=h,i=r,a=c;break;case 2:n=c,i=r,a=p;break;case 3:n=c,i=h,a=r;break;case 4:n=p,i=c,a=r;break;case 5:n=r,i=c,a=h}}return[n,i,a]},o.prototype.derive=function(t,e,r,n){var i=o.RGBtoHSB(this.r,this.g,this.b),a=i[2];0==a&&r>1&&(a=.05);var s=((i[0]+t)%360+360)%360,l=Math.max(Math.min(i[1]*e,1),0);a=Math.max(Math.min(a*r,1),0);var c=Math.max(Math.min(this.a*n,1),0),h=o.HSBtoRGB(s,l,a);return h.push(c),o.fromArray(h)},o.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},o.prototype.darker=function(){return this.derive(0,1,.7,1)},o.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),o}();function kc(o,t){if("string"==typeof o)try{o=ur.fromString(o)}catch(a){o=ur.fromArray([0,0,0])}if("string"==typeof t)try{t=ur.fromString(t)}catch(a){t=ur.fromArray([0,0,0])}var e=en(o.r,t.r),r=en(o.g,t.g),n=en(o.b,t.b),i=en(o.a,t.a);return function(a){return ur.fromArray([e(a),r(a),n(a),i(a)]).toRgbaString()}}function $s(o,t){var e=typeof t;if(null==t||"boolean"===e)return function(o){return function(){return o}}(t);if("number"===e)return en(o,t);if("string"===e)try{return kc(o,t=ur.fromString(t))}catch(n){}return t instanceof ur?kc(o,t):t instanceof Date?function Hg(o,t){var e=new Date,r=+o,n=+t;return function(i){return e.setTime(r*(1-i)+n*i),e}}(o,t):Array.isArray(t)?function zg(o,t){var a,e=t?t.length:0,r=o?Math.min(e,o.length):0,n=new Array(r),i=new Array(e);for(a=0;a<r;++a)n[a]=$s(o[a],t[a]);for(;a<e;++a)i[a]=t[a];return function(s){for(a=0;a<r;++a)i[a]=n[a](s);return i}}(o,t):"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function Ug(o,t){var n,e={},r={};for(n in(null===o||"object"!=typeof o)&&(o={}),(null===t||"object"!=typeof t)&&(t={}),t)n in o?e[n]=$s(o[n],t[n]):r[n]=t[n];return function(i){for(n in e)r[n]=e[n](i);return r}}(o,t):en(o,t)}var Un=function(o){return o};function Lc(o){var t,e=o[0],r=o[o.length-1];return e>r&&(t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}([r,e],2),e=t[0],r=t[1]),function(n){return Math.max(e,Math.min(r,n))}}var Ic=function(){function o(){this.unknown=void 0,this._clamp=Un,this._domain=[0,1],this._range=[0,1],this.transform=Un,this.untransform=Un,this._interpolate=$s,this.rescale()}return Object.defineProperty(o.prototype,"clamp",{get:function(){return this._clamp!==Un},set:function(t){this._clamp=t?Lc(this.domain):Un},enumerable:!0,configurable:!0}),o.prototype.setDomain=function(t){this._domain=Array.prototype.map.call(t,function(e){return+e}),this._clamp!==Un&&(this._clamp=Lc(this.domain)),this.rescale()},o.prototype.getDomain=function(){return this._domain.slice()},Object.defineProperty(o.prototype,"domain",{get:function(){return this.getDomain()},set:function(t){this.setDomain(t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"range",{get:function(){return this._range.slice()},set:function(t){this._range=Array.prototype.slice.call(t),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"interpolate",{get:function(){return this._interpolate},set:function(t){this._interpolate=t,this.rescale()},enumerable:!0,configurable:!0}),o.prototype.rescale=function(){this.piecewise=this.bimap,this.output=void 0,this.input=void 0},o.prototype.normalize=function(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:function(o){return function(){return o}}(isNaN(e)?NaN:.5)},o.prototype.bimap=function(t,e,r){var l,c,n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(l=this.normalize(i,n),c=r(s,a)):(l=this.normalize(n,i),c=r(a,s)),function(h){return c(l(h))}},o.prototype.convert=function(t){return t=+t,isNaN(t)?this.unknown:(this.output||(this.output=this.piecewise(this.domain.map(this.transform),this.range,this.interpolate)),this.output(this.transform(this._clamp(t))))},o.prototype.invert=function(t){return this.input||(this.input=this.piecewise(this.range,this.domain.map(this.transform),en)),this._clamp(this.untransform(this.input(t)))},o}(),Yg=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();var Ks=Math.sqrt(50),Ys=Math.sqrt(10),Xs=Math.sqrt(2);function da(o,t,e){var r=Math.abs(t-o)/Math.max(0,e),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/n;return i>=Ks?n*=10:i>=Ys?n*=5:i>=Xs&&(n*=2),t<o?-n:n}function qs(o,t,e){var r=(t-o)/Math.max(0,e),n=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,n);return n>=0?(i>=Ks?10:i>=Ys?5:i>=Xs?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(i>=Ks?10:i>=Ys?5:i>=Xs?2:1)}var Qs,el,Vc,Hc,qg=function(o){function t(e,r){var n=o.call(this)||this;if(r)for(var i=0,a=r.length;i<a;i++)n[i]=r[i];return n.fractionDigits=e,n}return Yg(t,o),t}(Array),Nc={"":function Jg(o,t){var e=o.toPrecision(t);e:for(var r=e.length,n=1,i=-1,a=0;n<r;++n)switch(e[n]){case".":i=a=n;break;case"0":0===i&&(i=n),a=n;break;case"e":break e;default:i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(a+1):e},"%":function(o,t){return(100*o).toFixed(t)},b:function(o){return Math.round(o).toString(2)},c:function(o){return String(o)},d:function ry(o){return Math.abs(o=Math.round(o))>=1e21?o.toLocaleString("en").replace(/,/g,""):o.toString(10)},e:function(o,t){return o.toExponential(t)},f:function(o,t){return o.toFixed(t)},g:function(o,t){return o.toPrecision(t)},o:function(o){return Math.round(o).toString(8)},p:function(o,t){return jc(100*o,t)},r:jc,s:function ty(o,t){void 0===t&&(t=0);var e=va(o,t);if(!e)return String(o);var r=e[0],n=e[1],i=n-(Qs=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,a=r.length;if(i===a)return r;if(i>a)return r+new Array(i-a+1).join("0");if(i>0)return r.slice(0,i)+"."+r.slice(i);var s=va(o,Math.max(0,t+i-1));return"0."+new Array(1-i).join("0")+s[0]},X:function(o){return Math.round(o).toString(16).toUpperCase()},x:function(o){return Math.round(o).toString(16)}},Gc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],Zs=function o(t){t instanceof o?(this.fill=t.fill,this.align=t.align,this.sign=t.sign,this.symbol=t.symbol,this.zero=t.zero,this.width=t.width,this.comma=t.comma,this.precision=t.precision,this.trim=t.trim,this.type=t.type,this.string=t.string):(this.fill=void 0===t.fill?" ":String(t.fill),this.align=void 0===t.align?">":String(t.align),this.sign=void 0===t.sign?"-":String(t.sign),this.symbol=void 0===t.symbol?"":String(t.symbol),this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":String(t.type),this.string=t.string)},Qg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,Bc=/(#\{(.*?)\})/g;function Js(o){if(o instanceof Zs)return new Zs(o);var t=!1,e=o.replace(Bc,function(){return t||(o=arguments[2],t=!0),"#{}"}),r=Qg.exec(o);if(!r)throw new Error("Invalid format: "+o);return new Zs({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10],string:t?e:void 0})}function jc(o,t){var e=va(o,t);if(!e)return String(o);var r=e[0],n=e[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}function va(o,t){var e=t?o.toExponential(t-1):o.toExponential(),r=e.indexOf("e");if(!(r<0)){var n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}}function Wc(o){return o}function $n(o){var t=va(Math.abs(o));return t?t[1]:NaN}!function ay(o){el=function cy(o){var t=void 0===o.grouping||void 0===o.thousands?Wc:function ny(o,t){return function(e,r){for(var n=[],i=e.length,a=0,s=o[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),n.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=o[a=(a+1)%o.length];return n.reverse().join(t)}}(Array.prototype.map.call(o.grouping,Number),String(o.thousands)),e=void 0===o.currency?"":String(o.currency[0]),r=void 0===o.currency?"":String(o.currency[1]),n=void 0===o.decimal?".":String(o.decimal),i=void 0===o.numerals?Wc:function iy(o){return function(t){return t.replace(/[0-9]/g,function(e){return o[+e]})}}(Array.prototype.map.call(o.numerals,String)),a=void 0===o.percent?"%":String(o.percent),s=void 0===o.minus?"\u2212":String(o.minus),l=void 0===o.nan?"NaN":String(o.nan);function c(p){var f=Js(p),d=f.fill,v=f.align,g=f.sign,y=f.symbol,m=f.zero,C=f.width,_=f.comma,w=f.precision,P=f.trim,O=f.type;"n"===O?(_=!0,O="g"):Nc[O]||(void 0===w&&(w=12),P=!0,O="g"),(m||"0"===d&&"="===v)&&(m=!0,d="0",v="=");var A="$"===y?e:"#"===y&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",E="$"===y?r:/[%p]/.test(O)?a:"",M=Nc[O],R=/[defgprs%]/.test(O);return w=void 0===w?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),function B(j){var N,I=A,F=E;if("c"===O)F=M(+j)+F,N="";else{var V=+j,Y=j<0||1/V<0;if(N=isNaN(V)?l:M(Math.abs(V),w),P&&(N=function oy(o){e:for(var t=o.length,e=1,r=-1,n=0;e<t;++e)switch(o[e]){case".":r=n=e;break;case"0":0===r&&(r=e),n=e;break;default:if(!+o[e])break e;r>0&&(r=0)}return r>0?o.slice(0,r)+o.slice(n+1):o}(N)),Y&&0==+N&&"+"!==g&&(Y=!1),I=(Y?"("===g?g:s:"-"===g||"("===g?"":g)+I,F=("s"===O?Gc[8+Qs/3]:"")+F+(Y&&"("===g?")":""),R)for(var H=0,q=N.length;H<q;H++){var U=N.charCodeAt(H);if(48>U||U>57){F=(46===U?n+N.slice(H+1):N.slice(H))+F,N=N.slice(0,H);break}}}_&&!m&&(N=t(N,1/0));var te=I.length+N.length+F.length,re=te<C?new Array(C-te+1).join(d):"";switch(_&&m&&(N=t(re+N,re.length?C-F.length:1/0),re=""),v){case"<":N=I+N+F+re;break;case"=":N=I+re+N+F;break;case"^":N=re.slice(0,te=re.length>>1)+I+N+F+re.slice(te);break;default:N=re+I+N+F}var Q=f.string;return Q?Q.replace(Bc,function(){return i(N)}):i(N)}}return{format:c,formatPrefix:function h(p,f){var d=Js(p);d.type="f";var v=c(d),g=3*Math.max(-8,Math.min(8,Math.floor($n(f)/3))),y=Math.pow(10,-g),m=Gc[8+g/3];return function(C){return v(y*+C)+m}}}}(o),Vc=el.format,Hc=el.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var hy=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tl=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="linear",e}return hy(t,o),t.prototype.ticks=function(e){void 0===e&&(e=10);var r=this._domain;return function Xg(o,t,e){var r=da(o,t,e);return function Zg(o,t,e){void 0===e&&(e=1);for(var r=Math.abs(e),n=r>0&&r<1?Math.abs(Math.floor(Math.log(r)/Math.LN10)):0,i=Math.pow(10,n),a=Math.max(0,Math.ceil((t-o)/e))||0,s=new qg(n),l=0;l<a;l++)s[l]=Math.round((o+e*l)*i)/i;return s}(o=Math.ceil(o/r)*r,t=Math.floor(t/r)*r+r/2,r)}(r[0],r[r.length-1],e)},t.prototype.nice=function(e){void 0===e&&(e=10);var l,r=this.domain,n=0,i=r.length-1,a=r[n],s=r[i];s<a&&(l=a,a=s,s=l,l=n,n=i,i=l),(l=qs(a,s,e))>0?l=qs(a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l,e):l<0&&(l=qs(a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l,e)),l>0?(r[n]=Math.floor(a/l)*l,r[i]=Math.ceil(s/l)*l,this.domain=r):l<0&&(r[n]=Math.ceil(a*l)/l,r[i]=Math.floor(s*l)/l,this.domain=r)},t.prototype.tickFormat=function(e,r){var n=this.domain;return function ey(o,t,e,r){var a,n=da(o,t,e),i=Js(null==r?",f":r);switch(i.type){case"s":var s=Math.max(Math.abs(o),Math.abs(t));return null==i.precision&&!isNaN(a=function ly(o,t){var e=Math.floor($n(t)/3);return e=Math.min(8,e),e=Math.max(-8,e),Math.max(0,3*e-$n(Math.abs(o)))}(n,s))&&(i.precision=a),Hc(i,s);case"":case"e":case"g":case"p":case"r":null==i.precision&&!isNaN(a=function uy(o,t){return o=Math.abs(o),t=Math.abs(t)-o,Math.max(0,$n(t)-$n(o))+1}(n,Math.max(Math.abs(o),Math.abs(t))))&&(i.precision=a-+("e"===i.type));break;case"f":case"%":null==i.precision&&!isNaN(a=function sy(o){return Math.max(0,-$n(Math.abs(o)))}(n))&&(i.precision=a-2*+("%"===i.type))}return Vc(i)}(n[0],n[n.length-1],null==e?10:e,r)},t}(Ic),fy=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rl=new Date,nl=new Date,py=function(){function o(t,e){this._floor=t,this._offset=e}return o.prototype.floor=function(t){return t=new Date(+t),this._floor(t),t},o.prototype.ceil=function(t){return t=new Date(+t-1),this._floor(t),this._offset(t,1),this._floor(t),t},o.prototype.round=function(t){var e=this.floor(t),r=this.ceil(t),n=+t;return n-e.getTime()<r.getTime()-n?e:r},o.prototype.offset=function(t,e){return void 0===e&&(e=1),t=new Date(+t),this._offset(t,Math.floor(e)),t},o.prototype.range=function(t,e,r){void 0===r&&(r=1);var i,n=[];if(t=this.ceil(t),r=Math.floor(r),t>e||r<=0)return n;do{i=new Date(+t),n.push(i),this._offset(t,r),this._floor(t)}while(i<t&&t<e);return n},o.prototype.filter=function(t){var e=this;return new o(function(i){if(i instanceof Date)for(e._floor(i);!t(i);)i.setTime(i.getTime()-1),e._floor(i);return i},function(i,a){if(i instanceof Date)if(a<0)for(;++a<=0;)do{e._offset(i,-1)}while(!t(i));else for(;--a>=0;)do{e._offset(i,1)}while(!t(i));return i})},o}(),Gt=function(o){function t(e,r,n,i){var a=o.call(this,e,r)||this;return a._count=n,a._field=i,a}return fy(t,o),t.prototype.count=function(e,r){return rl.setTime(+e),nl.setTime(+r),this._floor(rl),this._floor(nl),Math.floor(this._count(rl,nl))},t.prototype.every=function(e){var n,r=this;if(e=Math.floor(e),isFinite(e)&&e>0)if(e>1){var i=this._field;n=this.filter(i?function(a){return i(a)%e==0}:function(a){return r.count(0,a)%e==0})}else n=this;return n},t}(py),yy=new Gt(function dy(o){return o},function vy(o,t){o.setTime(o.getTime()+t)},function gy(o,t){return t.getTime()-o.getTime()}),cr=1e3,Xt=6e4,tn=60*Xt,rn=24*tn,il=7*rn,zc=30*rn,ol=365*rn,by=new Gt(function my(o){o.setTime(o.getTime()-o.getMilliseconds())},function Cy(o,t){o.setTime(o.getTime()+t*cr)},function _y(o,t){return(t.getTime()-o.getTime())/cr}),Py=new Gt(function Sy(o){o.setTime(o.getTime()-o.getMilliseconds()-o.getSeconds()*cr)},function wy(o,t){o.setTime(o.getTime()+t*Xt)},function xy(o,t){return(t.getTime()-o.getTime())/Xt},function Oy(o){return o.getMinutes()}),Dy=new Gt(function Ty(o){o.setTime(o.getTime()-o.getMilliseconds()-o.getSeconds()*cr-o.getMinutes()*Xt)},function Ay(o,t){o.setTime(o.getTime()+t*tn)},function Ey(o,t){return(t.getTime()-o.getTime())/tn},function My(o){return o.getHours()}),al=new Gt(function Ry(o){o.setHours(0,0,0,0)},function Fy(o,t){o.setDate(o.getDate()+t)},function ky(o,t){var e=t.getTimezoneOffset()-o.getTimezoneOffset();return(t.getTime()-o.getTime()-e*Xt)/rn},function Ly(o){return o.getDate()-1});function nn(o){return new Gt(function t(n){n.setDate(n.getDate()-(n.getDay()+7-o)%7),n.setHours(0,0,0,0)},function e(n,i){n.setDate(n.getDate()+7*i)},function r(n,i){return(i.getTime()-n.getTime()-(i.getTimezoneOffset()-n.getTimezoneOffset())*Xt)/il})}var Uc=nn(0),sl=nn(1),ll=(nn(2),nn(3),nn(4));nn(5),nn(6);var jy=new Gt(function Iy(o){o.setDate(1),o.setHours(0,0,0,0)},function Ny(o,t){o.setMonth(o.getMonth()+t)},function Gy(o,t){return t.getMonth()-o.getMonth()+12*(t.getFullYear()-o.getFullYear())},function By(o){return o.getMonth()}),Zi=new Gt(function Wy(o){o.setMonth(0,1),o.setHours(0,0,0,0)},function Vy(o,t){o.setFullYear(o.getFullYear()+t)},function Hy(o,t){return t.getFullYear()-o.getFullYear()},function zy(o){return o.getFullYear()});var $c=new Gt(function Yy(o){o.setUTCHours(0,0,0,0)},function Xy(o,t){o.setUTCDate(o.getUTCDate()+t)},function qy(o,t){return(t.getTime()-o.getTime())/rn},function Zy(o){return o.getUTCDate()-1}),ga=new Gt(function Jy(o){o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function Qy(o,t){o.setUTCFullYear(o.getUTCFullYear()+t)},function em(o,t){return t.getUTCFullYear()-o.getUTCFullYear()},function tm(o){return o.getUTCFullYear()});function on(o){return new Gt(function t(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-o)%7),n.setHours(0,0,0,0)},function e(n,i){n.setUTCDate(n.getUTCDate()+7*i)},function r(n,i){return(i.getTime()-n.getTime())/il})}var rm=on(0),ul=on(1),cl=(on(2),on(3),on(4));function nm(o){if(o.y>=0&&o.y<100){var t=new Date(-1,o.m,o.d,o.H,o.M,o.S,o.L);return t.setFullYear(o.y),t}return new Date(o.y,o.m,o.d,o.H,o.M,o.S,o.L)}function ya(o){if(o.y>=0&&o.y<100){var t=new Date(Date.UTC(-1,o.m,o.d,o.H,o.M,o.S,o.L));return t.setUTCFullYear(o.y),t}return new Date(Date.UTC(o.y,o.m,o.d,o.H,o.M,o.S,o.L))}function Ji(o){for(var t={},e=0,r=o.length;e<r;e++)t[o[e].toLowerCase()]=e;return t}function Qi(o){return{y:o,m:0,d:1,H:0,M:0,S:0,L:0}}on(5),on(6);var hl,$e=/^\s*\d+/,im=/^%/,om=/[\\^$*+?|[\]().{}]/g,am=function(o){return o.replace(om,"\\$&")},eo=function(o){return new RegExp("^(?:"+o.map(am).join("|")+")","i")},Yc={"-":"",_:" ",0:"0"};function be(o,t,e){var r=o<0?"-":"",n=String(r?-o:o),i=n.length;return r+(i<e?new Array(e-i+1).join(t)+n:n)}!function lm(o){hl=function sm(o){var t=o.dateTime,e=o.date,r=o.time,n=o.periods,i=o.days,a=o.shortDays,s=o.months,l=o.shortMonths,c=eo(n),h=Ji(n),p=eo(i),f=Ji(i),d=eo(a),v=Ji(a),g=eo(s),y=Ji(s),m=eo(l),C=Ji(l),_={a:function V(b){return a[b.getDay()]},A:function Y(b){return i[b.getDay()]},b:function Q(b){return l[b.getMonth()]},B:function se(b){return s[b.getMonth()]},c:void 0,d:te,e:te,f:function M(b,x){return R(b,x)+"000"},H:function F(b,x){return be(b.getHours(),x,2)},I:function I(b,x){return be(b.getHours()%12||12,x,2)},j:function re(b,x){return be(1+al.count(Zi.floor(b),b),x,3)},L:R,m:function de(b,x){return be(b.getMonth()+1,x,2)},M:function j(b,x){return be(b.getMinutes(),x,2)},p:function N(b){return n[b.getHours()>=12?1:0]},Q:Fo,s:ko,S:function B(b,x){return be(b.getSeconds(),x,2)},u:function $(b){var x=b.getDay();return 0===x?7:x},U:function J(b,x){return be(Uc.count(Zi.floor(b),b),x,2)},V:function H(b,x){var T=b.getDay();b=T>=4||0===T?ll.floor(b):ll.ceil(b);var S=Zi.floor(b);return be(ll.count(S,b)+(4===S.getDay()?1:0),x,2)},w:function q(b){return b.getDay()},W:function U(b,x){return be(sl.count(Zi.floor(b),b),x,2)},x:void 0,X:void 0,y:function we(b,x){return be(b.getFullYear()%100,x,2)},Y:function Ae(b,x){return be(b.getFullYear()%1e4,x,4)},Z:function me(b){var x=b.getTimezoneOffset();return(x>0?"-":(x*=-1,"+"))+be(Math.floor(x/60),"0",2)+be(x%60,"0",2)},"%":Ro},w={a:function nr(b){return a[b.getUTCDay()]},A:function Ut(b){return i[b.getUTCDay()]},b:function We(b){return l[b.getUTCMonth()]},B:function Me(b){return s[b.getUTCMonth()]},c:void 0,d:fe,e:fe,f:function ge(b,x){return Ee(b,x)+"000"},H:function Z(b,x){return be(b.getUTCHours(),x,2)},I:function De(b,x){return be(b.getUTCHours()%12||12,x,2)},j:function K(b,x){return be(1+$c.count(ga.floor(b),b),x,3)},L:Ee,m:function pe(b,x){return be(b.getUTCMonth()+1,x,2)},M:function Ue(b,x){return be(b.getUTCMinutes(),x,2)},p:function Pe(b){return n[b.getUTCHours()>=12?1:0]},Q:Fo,s:ko,S:function xe(b,x){return be(b.getUTCSeconds(),x,2)},u:function kt(b){var x=b.getUTCDay();return 0===x?7:x},U:function Oi(b,x){return be(rm.count(ga.floor(b),b),x,2)},V:function Pi(b,x){var T=b.getUTCDay();b=T>=4||0===T?cl.floor(b):cl.ceil(b);var S=ga.floor(b);return be(cl.count(S,b)+(4===S.getUTCDay()?1:0),x,4)},w:function Ti(b){return b.getUTCDay()},W:function Ai(b,x){return be(ul.count(ga.floor(b),b),x,2)},x:void 0,X:void 0,y:function Ei(b,x){return be(b.getUTCFullYear()%100,x,2)},Y:function Mi(b,x){return be(b.getUTCFullYear()%1e4,x,4)},Z:function Do(){return"+0000"},"%":Ro},P={a:function Fu(b,x,T){var S=d.exec(x.slice(T));return S?(b.w=v[S[0].toLowerCase()],T+S[0].length):-1},A:function ku(b,x,T){var S=p.exec(x.slice(T));return S?(b.w=f[S[0].toLowerCase()],T+S[0].length):-1},b:function ju(b,x,T){var S=m.exec(x.slice(T));return S?(b.m=C[S[0].toLowerCase()],T+S[0].length):-1},B:function Wu(b,x,T){var S=g.exec(x.slice(T));return S?(b.m=y[S[0].toLowerCase()],T+S[0].length):-1},c:function Hu(b,x,T){return E(b,t,x,T)},d:Io,e:Io,f:function Tu(b,x,T){var S=$e.exec(x.slice(T,T+6));return S?(b.L=Math.floor(parseFloat(S[0])/1e3),T+S[0].length):-1},H:Lo,I:Lo,j:function Ru(b,x,T){var S=$e.exec(x.slice(T,T+3));return S?(b.m=0,b.d=+S[0],T+S[0].length):-1},L:function Au(b,x,T){var S=$e.exec(x.slice(T,T+3));return S?(b.L=+S[0],T+S[0].length):-1},m:function Vu(b,x,T){var S=$e.exec(x.slice(T,T+2));return S?(b.m=parseFloat(S[0])-1,T+S[0].length):-1},M:function Mu(b,x,T){var S=$e.exec(x.slice(T,T+2));return S?(b.M=+S[0],T+S[0].length):-1},p:function Du(b,x,T){var S=c.exec(x.slice(T));return S?(b.p=h[S[0].toLowerCase()],T+S[0].length):-1},Q:function $u(b,x,T){var S=$e.exec(x.slice(T));return S?(b.Q=+S[0],T+S[0].length):-1},s:function Ku(b,x,T){var S=$e.exec(x.slice(T));return S?(b.Q=1e3*+S[0],T+S[0].length):-1},S:function Eu(b,x,T){var S=$e.exec(x.slice(T,T+2));return S?(b.S=+S[0],T+S[0].length):-1},u:function Lu(b,x,T){var S=$e.exec(x.slice(T,T+1));return S?(b.u=+S[0],T+S[0].length):-1},U:function Iu(b,x,T){var S=$e.exec(x.slice(T,T+2));return S?(b.U=+S[0],T+S[0].length):-1},V:function Nu(b,x,T){var S=$e.exec(x.slice(T,T+2));return S?(b.V=+S[0],T+S[0].length):-1},w:function Bu(b,x,T){var S=$e.exec(x.slice(T,T+1));return S?(b.w=+S[0],T+S[0].length):-1},W:function Gu(b,x,T){var S=$e.exec(x.slice(T,T+2));return S?(b.W=+S[0],T+S[0].length):-1},x:function zu(b,x,T){return E(b,e,x,T)},X:function Uu(b,x,T){return E(b,r,x,T)},y:function Yu(b,x,T){var S=$e.exec(x.slice(T,T+2));return S?(b.y=+S[0]+(+S[0]>68?1900:2e3),T+S[0].length):-1},Y:function Xu(b,x,T){var S=$e.exec(x.slice(T,T+4));return S?(b.y=+S[0],T+S[0].length):-1},Z:function qu(b,x,T){var S=/^(Z)|^([+-]\d\d)(?::?(\d\d))?/.exec(x.slice(T,T+6));return S?(b.Z=S[1]?0:-(S[2]+(S[3]||"00")),T+S[0].length):-1},"%":function Zu(b,x,T){var S=im.exec(x.slice(T,T+1));return S?T+S[0].length:-1}};function O(b,x){return function(T){var S=Qi(1900);if(E(S,b,T+="",0)==T.length){if("Q"in S)return new Date(S.Q);if("p"in S&&(S.H=S.H%12+12*S.p),"V"in S){if(S.V<1||S.V>53)return;if("w"in S||(S.w=1),"Z"in S){var Ce=(ee=ya(Qi(S.y))).getUTCDay();ee=Ce>4||0===Ce?ul.ceil(ee):ul.floor(ee),ee=$c.offset(ee,7*(S.V-1)),S.y=ee.getUTCFullYear(),S.m=ee.getUTCMonth(),S.d=ee.getUTCDate()+(S.w+6)%7}else{var ee;Ce=(ee=x(Qi(S.y))).getDay(),ee=Ce>4||0===Ce?sl.ceil(ee):sl.floor(ee),ee=al.offset(ee,7*(S.V-1)),S.y=ee.getFullYear(),S.m=ee.getMonth(),S.d=ee.getDate()+(S.w+6)%7}}else("W"in S||"U"in S)&&("w"in S||(S.w="u"in S?S.u%7:"W"in S?1:0),Ce="Z"in S?ya(Qi(S.y)).getUTCDay():x(Qi(S.y)).getDay(),S.m=0,S.d="W"in S?(S.w+6)%7+7*S.W-(Ce+5)%7:S.w+7*S.U-(Ce+6)%7);return"Z"in S?(S.H+=S.Z/100|0,S.M+=S.Z%100,ya(S)):x(S)}}}function A(b,x){return function(T){var S=[],Ze=b.length,ee=-1,Ce=0;for(T instanceof Date||(T=new Date(+T));++ee<Ze;)if(37===b.charCodeAt(ee)){S.push(b.slice(Ce,ee));var Ve=b.charAt(++ee),Ct=Yc[Ve];null!=Ct?Ve=b.charAt(++ee):Ct="e"===Ve?" ":"0";var $t=x[Ve];$t&&(Ve=$t(T,Ct)),S.push(Ve),Ce=ee+1}return S.push(b.slice(Ce,ee)),S.join("")}}function E(b,x,T,S){for(var Ze=0,ee=x.length,Ce=T.length;Ze<ee;){if(S>=Ce)return-1;var Ve=x.charCodeAt(Ze++);if(37===Ve){var Ct=x.charAt(Ze++),$t=P[Ct in Yc?x.charAt(Ze++):Ct];if(!$t||(S=$t(b,T,S))<0)return-1}else if(Ve!=T.charCodeAt(S++))return-1}return S}function R(b,x){return be(b.getMilliseconds(),x,3)}function te(b,x){return be(b.getDate(),x,2)}function Ee(b,x){return be(b.getUTCMilliseconds(),x,3)}function fe(b,x){return be(b.getUTCDate(),x,2)}function Ro(b){return"%"}function Fo(b){return b.getTime()}function ko(b){return Math.floor(b.getTime()/1e3)}function Lo(b,x,T){var S=$e.exec(x.slice(T,T+2));return S?(b.H=+S[0],T+S[0].length):-1}function Io(b,x,T){var S=$e.exec(x.slice(T,T+2));return S?(b.d=+S[0],T+S[0].length):-1}return _.x=A(e,_),_.X=A(r,_),_.c=A(t,_),w.x=A(e,w),w.X=A(r,w),w.c=A(t,w),{format:function(b){var x=A(b,_);return x.toString=function(){return b},x},parse:function(b){var x=O(b,nm);return x.toString=function(){return b},x},utcFormat:function(b){var x=A(b,w);return x.toString=function(){return b},x},utcParse:function(b){var x=O(b,ya);return x.toString=function(){return b},x}}}(o)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var um=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fl=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Xc=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="time",e.year=Zi,e.month=jy,e.week=Uc,e.day=al,e.hour=Dy,e.minute=Py,e.second=by,e.millisecond=yy,e.format=hl.format,e.tickIntervals=[[e.second,1,cr],[e.second,5,5e3],[e.second,15,15e3],[e.second,30,3e4],[e.minute,1,Xt],[e.minute,5,5*Xt],[e.minute,15,15*Xt],[e.minute,30,30*Xt],[e.hour,1,tn],[e.hour,3,3*tn],[e.hour,6,6*tn],[e.hour,12,12*tn],[e.day,1,rn],[e.day,2,2*rn],[e.week,1,il],[e.month,1,zc],[e.month,3,3*zc],[e.year,1,ol]],e.formatMillisecond=e.format(".%L"),e.formatSecond=e.format(":%S"),e.formatMinute=e.format("%I:%M"),e.formatHour=e.format("%I %p"),e.formatDay=e.format("%a %d"),e.formatWeek=e.format("%b %d"),e.formatMonth=e.format("%B"),e.formatYear=e.format("%Y"),e._domain=[new Date(2e3,0,1),new Date(2e3,0,2)],e}return um(t,o),t.prototype.defaultTickFormat=function(e){return(this.second.floor(e)<e?this.formatMillisecond:this.minute.floor(e)<e?this.formatSecond:this.hour.floor(e)<e?this.formatMinute:this.day.floor(e)<e?this.formatHour:this.month.floor(e)<e?this.week.floor(e)<e?this.formatDay:this.formatWeek:this.year.floor(e)<e?this.formatMonth:this.formatYear)(e)},t.prototype.tickInterval=function(e,r,n,i){var a;if("number"==typeof e){var s=e,l=this.tickIntervals,c=Math.abs(n-r)/s,h=function $y(o,t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=o.length);for(var i=function Ky(o){return function(t,e){return function Uy(o,t){return o<t?-1:o>t?1:o>=t?0:NaN}(o(t),e)}}(e);r<n;){var a=r+n>>>1;i(o[a],t)<0?r=a+1:n=a}return r}(l,c,function(p){return p[2]});h===l.length?(i=da(r/ol,n/ol,s),e=this.year):h?(e=(a=fl(l[c/l[h-1][2]<l[h][2]/c?h-1:h],2))[0],i=a[1]):(i=Math.max(da(r,n,e),1),e=this.millisecond)}return null==i?e:e.every(i)},Object.defineProperty(t.prototype,"domain",{get:function(){return o.prototype.getDomain.call(this).map(function(e){return new Date(e)})},set:function(e){o.prototype.setDomain.call(this,Array.prototype.map.call(e,function(r){return r instanceof Date?+r:+new Date(+r)}))},enumerable:!0,configurable:!0}),t.prototype.invert=function(e){return new Date(o.prototype.invert.call(this,e))},t.prototype.ticks=function(e){void 0===e&&(e=10);var r=o.prototype.getDomain.call(this),n=r[0],i=r[r.length-1],a=i<n;if(a){var s=n;n=i,i=s}var l=this.tickInterval(e,n,i),c=l?l.range(n,i+1):[];return a?c.reverse():c},t.prototype.tickFormat=function(e,r){return null==r?this.defaultTickFormat.bind(this):this.format(r)},t.prototype.nice=function(e){void 0===e&&(e=10);var r=o.prototype.getDomain.call(this),n=this.tickInterval(e,r[0],r[r.length-1]);n&&(this.domain=this._nice(r,n))},t.prototype._nice=function(e,r){var n,i,a=0,s=(e=e.slice()).length-1,l=e[a],c=e[s];return c<l&&(a=(n=fl([s,a],2))[0],s=n[1],l=(i=fl([c,l],2))[0],c=i[1]),e[a]=r.floor(l),e[s]=r.ceil(c),e},t}(Ic);function cm(o){return o}function to(o,t,e){for(var a,s,l,r=e||cm,n=o.length,i=-1;++i<n;)if(t(a=o[i]))for(s=l=a;++i<n;)t(a=o[i])&&(s>a&&(s=a),l<a&&(l=a));return void 0===s||void 0===l?void 0:[r(s),r(l)]}var qc=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fm=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="category",e.stroke="rgb(204, 214, 235)",e.strokeWidth=1,e}return qc(t,o),t}(qi),pl=function(o){function t(){var e=o.call(this)||this;e.id=Vs(e),e.seriesRect={x:0,y:0,width:0,height:0},e._context=void 0,e._container=void 0,e._data=void 0,e.padding=new Ig(3),e.xKey="x",e.yKey="y",e.dataType=void 0,e.xData=[],e.yData=[],e.min=void 0,e.max=void 0,e.yScale=new tl,e.axis=new fm,e.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},e._width=100,e._height=100,e.smallestInterval=void 0,e.layoutId=0,e.defaultDateFormatter=hl.format("%m/%d/%y, %H:%M:%S"),e._onMouseMove=e.onMouseMove.bind(e),e._onMouseOut=e.onMouseOut.bind(e);var r=new Rr;e.rootGroup=r;var n=document.createElement("div");n.setAttribute("class","ag-sparkline-wrapper");var i=new Lg(document);if(e.scene=i,e.canvasElement=i.canvas.element,i.root=r,i.container=n,i.resize(e.width,e.height),e.seriesRect.width=e.width,e.seriesRect.height=e.height,-1===t.tooltipDocuments.indexOf(document)){var a=document.createElement("style");a.innerHTML="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n",document.head.insertBefore(a,document.head.querySelector("style")),t.tooltipDocuments.push(document)}return e.setupDomEventListeners(e.scene.canvas.element),e}return qc(t,o),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(e){this._context!==e&&(this._context=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(e){if(this._container!==e){var r=this.canvasElement.parentNode;null!=r&&r.removeChild(this.canvasElement),e&&e.appendChild(this.canvasElement),this._container=e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data!==e&&(this._data=e,this.processData())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.scene.resize(e,this.height),this.scheduleLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.scene.resize(this.width,e),this.scheduleLayout())},enumerable:!0,configurable:!0}),t.prototype.update=function(){},t.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},t.prototype.updateYScaleDomain=function(){},t.prototype.updateYScaleRange=function(){this.yScale.range=[this.seriesRect.height,0]},t.prototype.updateXScale=function(){this.xScale=this.getXScale(this.axis.type),this.updateXScaleRange(),this.updateXScaleDomain()},t.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},t.prototype.updateXScaleDomain=function(){var i,r=this.xData,n=this.xScale;n instanceof tl?i=to(r,st):n instanceof Xc&&(i=to(r,Wg)),this.xScale.domain=i?i.slice():r},t.prototype.getXScale=function(e){switch(void 0===e&&(e="category"),e){case"number":return new tl;case"time":return new Xc;default:return new Fr}},t.prototype.updateAxisLine=function(){},t.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},t.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},t.prototype.generateNodeData=function(){return[]},t.prototype.getNodeData=function(){return[]},t.prototype.updateNodes=function(){},t.prototype.updateXCrosshairLine=function(){},t.prototype.updateYCrosshairLine=function(){},t.prototype.highlightDatum=function(e){this.updateNodes()},t.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},t.prototype.onMouseMove=function(e){var r=this.pickClosestSeriesNodeDatum(e.offsetX,e.offsetY);if(r){var n=this.highlightedDatum;this.highlightedDatum=r,(this.highlightedDatum&&!n||this.highlightedDatum&&n&&this.highlightedDatum!==n)&&(this.highlightDatum(r),this.updateCrosshairs()),this.tooltip.enabled&&this.handleTooltip(e,r)}},t.prototype.onMouseOut=function(e){this.dehighlightDatum(),this.tooltip.toggle(!1)},t.prototype.processData=function(){var e=this,r=this,n=r.data,i=r.yData,a=r.xData;if(n&&!this.invalidData(this.data)){i.length=0,a.length=0;var s=n.length,l=this.getDataType(n);this.dataType=l;var d,c=this.axis.type,h="number"!==c&&"time"!==c?"category":c,p="number"===h||"time"===h,f=function(A,E){null==e.smallestInterval&&(e.smallestInterval={x:1/0,y:1/0});var M=e.smallestInterval.x,R=Math.abs(A-E);R>0&&R<M&&(e.smallestInterval.x=R)};if("number"===l)for(var v=0;v<s;v++){var y=n[v],m=this.getDatum(v,h),C=this.getDatum(y,"number");p&&f(m,d),a.push(m),i.push(C),d=m}else if("array"===l)for(v=0;v<s;v++){var _=n[v];if(Array.isArray(_)){if(y=_[1],m=this.getDatum(_[0],h),C=this.getDatum(y,"number"),null==m)continue;p&&f(m,d),a.push(m),i.push(C),d=m}}else if("object"===l){var P=this.yKey,O=this.xKey;for(v=0;v<s;v++)if("object"==typeof(_=n[v])&&!Array.isArray(_)){if(y=_[P],m=this.getDatum(_[O],h),C=this.getDatum(y,"number"),null==m)continue;p&&f(m,d),a.push(m),i.push(C),d=m}}this.updateAxes(),this.update()}},t.prototype.getDataType=function(e){var r,n;try{for(var i=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(null!=s){if(st(s))return"number";if(Array.isArray(s))return"array";if("object"==typeof s)return"object"}}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.getDatum=function(e,r){if("number"===r&&st(e)||"time"===r&&(st(e)||Us(e)))return e;if("category"===r){if(Rc(e)||Us(e)||st(e))return{toString:function(){return String(e)}};if(function jg(o){return!!o&&o.hasOwnProperty("toString")&&Rc(o.toString())}(e))return e}},Object.defineProperty(t.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!0,configurable:!0}),t.prototype.scheduleLayout=function(){var e=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame(function(){e.setSparklineDimensions(),!e.invalidData(e.data)&&(e.updateXScaleRange(),e.updateYScaleRange(),e.updateAxisLine(),e.update(),e.layoutId=0)})},t.prototype.setSparklineDimensions=function(){var e=this,i=e.padding,a=e.seriesRect,s=e.rootGroup,c=e.height-i.top-i.bottom;a.width=e.width-i.left-i.right,a.height=c,a.x=i.left,a.y=i.top,s.translationX=a.x,s.translationY=a.y},t.prototype.pickClosestSeriesNodeDatum=function(e,r){for(var i,n=1/0,a=this.rootGroup.transformPoint(e,r),s=this.getNodeData(),l=0;l<s.length;l++){var c=s[l];if(!c.point)return;var h=this.getDistance(a,c.point);if(!(h<=n))return i;n=h,i=c}return i},t.prototype.getDistance=function(e,r){return Math.abs(e.x-r.x)},t.prototype.handleTooltip=function(e,r){var n=r.seriesDatum,a=e.clientX,s=e.clientY;null==this.tooltip.container&&(this.tooltip.container=this.canvasElement);var l={pageX:a,pageY:s},p=this.tooltip.enabled;if(this.tooltip.renderer){var f=this.tooltip.renderer({context:this.context,datum:n,yValue:n.y,xValue:n.x});p="string"!=typeof f&&void 0!==f.enabled?f.enabled:p}var d=p&&void 0!==n.y&&this.getTooltipHtml(r);d&&this.tooltip.show(l,d)},t.prototype.formatNumericDatum=function(e){return String(Math.round(10*e)/10)},t.prototype.formatDatum=function(e){var r=this.axis.type||"category";return"number"===r&&"number"==typeof e?this.formatNumericDatum(e):"time"===r&&(e instanceof Date||st(e))?this.defaultDateFormatter(e):String(e)},t.prototype.setupDomEventListeners=function(e){e.addEventListener("mousemove",this._onMouseMove),e.addEventListener("mouseout",this._onMouseOut)},t.prototype.cleanupDomEventListeners=function(e){e.removeEventListener("mousemove",this._onMouseMove),e.removeEventListener("mouseout",this._onMouseOut)},t.prototype.invalidData=function(e){return!e||!Array.isArray(e)||0===e.length},t.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},t.tooltipDocuments=[],t}(qi),pm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Kn(o,t){if("string"==typeof o)return o;t=t||{};var f,d,e=o.content,r=void 0===e?t.content||"":e,n=o.title,i=void 0===n?t.title||void 0:n,a=o.color,s=void 0===a?t.color:a,l=o.backgroundColor,c=void 0===l?t.backgroundColor:l,h=o.opacity,p=void 0===h?t.opacity||1:h;if(s?(f=i?'<span class="'+an.class+'-title"; style="color: '+s+'">'+i+"</span>":"",d='<span class="'+an.class+'-content" style="color: '+s+'">'+r+"</span>"):(f=i?'<span class="'+an.class+'-title">'+i+"</span>":"",d='<span class="'+an.class+'-content">'+r+"</span>"),c){var v=ur.fromString(c.toLowerCase()),P=ur.fromArray([v.r,v.g,v.b,p]).toRgbaString();return'<div class="'+an.class+'" style="background-color: '+P+'">\n                    '+f+"\n                    "+d+"\n                </div>"}return'<div class="'+an.class+'">\n                    '+f+"\n                    "+d+"\n                </div>"}var an=function(o){function t(){var e=o.call(this)||this;return e.element=document.createElement("div"),e.enabled=!0,e.container=void 0,e.xOffset=10,e.yOffset=0,e.renderer=void 0,document.body.appendChild(e.element),e}return pm(t,o),t.prototype.isVisible=function(){var e=this.element;if(e.classList)return!e.classList.contains(t.class+"-wrapper-hidden");var r=e.getAttribute("class");return!!r&&r.split(" ").indexOf(t.class+"-wrapper-hidden")<0},t.prototype.updateClass=function(e){var r=[t.class+"-wrapper"];!0!==e&&r.push(t.class+"-wrapper-hidden"),this.element.setAttribute("class",r.join(" "))},t.prototype.show=function(e,r){this.toggle(!1);var n=this.element;if(void 0!==r)n.innerHTML=r;else if(!n.innerHTML)return;var i=e.pageX+this.xOffset,a=e.pageY+this.yOffset,s=n.getBoundingClientRect(),l=window.innerWidth-s.width;if(this.container){var c=this.container.getBoundingClientRect();l=c.left+(c.width-s.width)}i>l&&(i=e.pageX-n.clientWidth-this.xOffset),n.style.left=Math.round(i)+"px",n.style.top=Math.round(a)+"px",this.toggle(!0)},t.prototype.toggle=function(e){this.updateClass(e)},t.prototype.destroy=function(){var e=this.element.parentNode;e&&e.removeChild(this.element)},t.class="ag-sparkline-tooltip",t}(qi),dm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),dl=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._x=0,e._y=0,e._size=3,e}return dm(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(e){this._size!==e&&(this._size=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t}(sr),vm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zc=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return vm(t,o),t.prototype.isPointInPath=function(e,r){return!1},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.x,i=r.y,s=r.size/2;e.beginPath(),e.arc(n,i,s,0,2*Math.PI,!1),this.fillStroke(e),this.dirty=!1},t.className="Circle",t}(dl),gm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ym=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return gm(t,o),t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.x,i=r.y,s=r.size/2;e.beginPath(),e.moveTo(n,i-=s),e.lineTo(n+=s,i+=s),e.lineTo(n-=s,i+=s),e.lineTo(n-=s,i-=s),e.lineTo(n+=s,i-=s),e.closePath(),this.fillStroke(e),this.dirty=!1},t.className="Diamond",t}(dl),mm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cm=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return mm(t,o),t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.x,i=r.y,a=r.size,s=a/2;e.beginPath(),e.moveTo(n-=s,i-=s),e.lineTo(n+=a,i),e.lineTo(n,i+=a),e.lineTo(n-=a,i),e.lineTo(n,i-=a),e.closePath(),this.fillStroke(e),this.dirty=!1},t.className="Square",t}(dl);function Jc(o){switch(o){case"circle":default:return Zc;case"square":return Cm;case"diamond":return ym}}function ma(o,t){void 0===t&&(t="solid");var e={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},r={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return"round"===o||"square"===o?null==r[t]?(console.warn("'"+t+"' is not a valid 'lineDash' option."),r.solid):r[t]:null==e[t]?(console.warn("'"+t+"' is not a valid 'lineDash' option."),e.solid):e[t]}var _m=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),bm=function o(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},Sm=function o(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},wm=function o(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},xm=function(o){function t(){var e=o.call(this)||this;return e.fill="rgba(124, 181, 236, 0.25)",e.strokePath=new zs,e.fillPath=new zs,e.xCrosshairLine=new Hn,e.yCrosshairLine=new Hn,e.areaSparklineGroup=new Rr,e.fillPathData=[],e.strokePathData=[],e.xAxisLine=new Hn,e.markers=new Rr,e.markerSelection=fa.select(e.markers).selectAll(),e.markerSelectionData=[],e.marker=new bm,e.line=new Sm,e.crosshairs=new wm,e.rootGroup.append(e.areaSparklineGroup),e.areaSparklineGroup.append([e.fillPath,e.xAxisLine,e.strokePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return _m(t,o),t.prototype.getNodeData=function(){return this.markerSelectionData},t.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.scheduleLayout()},t.prototype.update=function(){var e=this.generateNodeData();if(e){var r=e.nodeData,n=e.fillData,i=e.strokeData;this.markerSelectionData=r,this.fillPathData=n,this.strokePathData=i,this.updateSelection(r),this.updateNodes(),this.updateStroke(i),this.updateFill(n)}},t.prototype.updateYScaleDomain=function(){var n=this.yScale,i=to(this.yData,st),a=0,s=1;void 0!==i&&(a=this.min=i[0],s=this.max=i[1]),n.domain=[a=a<0?a:0,s=s<0?0:s]},t.prototype.generateNodeData=function(){var e=this,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale;if(e.data){for(var d,v,g,y,l=a instanceof Fr?a.bandwidth/2:0,c=n.length,h=[],p=[],f=[],m=s.convert(0),C=0;C<c;C++){var _=n[C],w=i[C],P=a.convert(w)+l,O=s.convert(_);C+1<c&&(y=a.convert(i[C+1])+l),f.push({seriesDatum:{x:w,y:_},point:{x:P,y:O}}),void 0===_&&void 0!==g?(p.push({seriesDatum:void 0,point:{x:g,y:m}}),void 0!==y&&p.push({seriesDatum:void 0,point:{x:y,y:m}})):void 0!==_&&(p.push({seriesDatum:{x:w,y:_},point:{x:P,y:O}}),h.push({seriesDatum:{x:w,y:_},point:{x:P,y:O}}),d=void 0!==d?d:P,v=P),g=P}return p.push({seriesDatum:void 0,point:{x:v,y:m}},{seriesDatum:void 0,point:{x:d,y:m}}),{nodeData:h,fillData:p,strokeData:f}}},t.prototype.updateAxisLine=function(){var e=this,r=e.xScale,n=e.yScale,i=e.axis,a=e.xAxisLine;a.x1=r.range[0],a.x2=r.range[1],a.y1=a.y2=0,a.stroke=i.stroke,a.strokeWidth=i.strokeWidth;var s=n.convert(0);a.translationY=s},t.prototype.updateSelection=function(e){var n=Jc(this.marker.shape),i=this.markerSelection.setData(e),a=i.enter.append(n);i.exit.remove(),this.markerSelection=i.merge(a)},t.prototype.updateNodes=function(){var e=this,r=this,n=r.highlightedDatum,i=r.highlightStyle,a=r.marker,s=i.size,l=i.fill,c=i.stroke,h=i.strokeWidth,p=a.formatter;this.markerSelection.each(function(f,d,v){var g=d.point,y=d.seriesDatum;if(g){var O,m=d===n,C=m&&void 0!==l?l:a.fill,_=m&&void 0!==c?c:a.stroke,w=m&&void 0!==h?h:a.strokeWidth,P=m&&void 0!==s?s:a.size;p&&(O=p({datum:d,xValue:y.x,yValue:y.y,min:y.y===e.min,max:y.y===e.max,first:0===v,last:v===e.markerSelectionData.length-1,fill:C,stroke:_,strokeWidth:w,size:P,highlighted:m})),f.size=O&&null!=O.size?O.size:P,f.fill=O&&null!=O.fill?O.fill:C,f.stroke=O&&null!=O.stroke?O.stroke:_,f.strokeWidth=O&&null!=O.strokeWidth?O.strokeWidth:w,f.translationX=g.x,f.translationY=g.y,f.visible=O&&null!=O.enabled?O.enabled:a.enabled&&f.size>0}})},t.prototype.updateStroke=function(e){var r=this,n=r.strokePath,a=r.line;if(!(r.yData.length<2)){var s=n.path,l=e.length,c=!0;s.clear();for(var h=0;h<l;h++){var p=e[h],f=p.point,v=f.x,g=f.y;null==p.seriesDatum.y?c=!0:c?(s.moveTo(v,g),c=!1):s.lineTo(v,g)}n.lineJoin=n.lineCap="round",n.fill=void 0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth}},t.prototype.updateFill=function(e){var r=this,n=r.fillPath,i=r.yData,a=r.fill,s=n.path,l=e.length;if(s.clear(),!(i.length<2)){for(var c=0;c<l;c++){var h=e[c].point,p=h.x,f=h.y;c>0?s.lineTo(p,f):s.moveTo(p,f)}s.closePath(),n.lineJoin="round",n.stroke=void 0,n.fill=a}},t.prototype.updateXCrosshairLine=function(){var e=this,r=e.yScale,n=e.xCrosshairLine,i=e.highlightedDatum,a=e.crosshairs.xLine;if(a.enabled&&null!=i){n.y1=r.range[0],n.y2=r.range[1],n.x1=n.x2=0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth||1,n.lineCap="round"===a.lineCap||"square"===a.lineCap?a.lineCap:void 0;var s=a.lineDash;n.lineDash=Array.isArray(s)?s:ma(n.lineCap,a.lineDash),n.translationX=i.point.x}else n.strokeWidth=0},t.prototype.updateYCrosshairLine=function(){var e=this,r=e.xScale,n=e.yCrosshairLine,i=e.highlightedDatum,a=e.crosshairs.yLine;if(a.enabled&&null!=i){n.x1=r.range[0],n.x2=r.range[1],n.y1=n.y2=0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth||1,n.lineCap="round"===a.lineCap||"square"===a.lineCap?a.lineCap:void 0;var s=a.lineDash;n.lineDash=Array.isArray(s)?s:ma(n.lineCap,a.lineDash),n.translationY=i.point.y}else n.strokeWidth=0},t.prototype.getTooltipHtml=function(e){var r=this.dataType,n=e.seriesDatum,i=n.y,a=n.x,c={content:this.formatNumericDatum(i),title:"array"===r||"object"===r?this.formatDatum(a):void 0};return this.tooltip.renderer?Kn(this.tooltip.renderer({context:this.context,datum:n,yValue:i,xValue:a}),c):Kn(c)},t.className="AreaSparkline",t}(pl),Om=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pm=function o(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},Tm=function o(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},Am=function o(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},Em=function(o){function t(){var e=o.call(this)||this;return e.linePath=new zs,e.xCrosshairLine=new Hn,e.yCrosshairLine=new Hn,e.lineSparklineGroup=new Rr,e.markers=new Rr,e.markerSelection=fa.select(e.markers).selectAll(),e.markerSelectionData=[],e.marker=new Pm,e.line=new Tm,e.crosshairs=new Am,e.rootGroup.append(e.lineSparklineGroup),e.lineSparklineGroup.append([e.linePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return Om(t,o),t.prototype.getNodeData=function(){return this.markerSelectionData},t.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.scheduleLayout()},t.prototype.update=function(){var e=this.generateNodeData();!e||(this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateLine())},t.prototype.updateYScaleDomain=function(){var n=this.yScale,i=to(this.yData,st),a=0,s=1;if(void 0!==i&&(a=this.min=i[0],s=this.max=i[1]),a===s){var l=Math.abs(.01*a);a-=l,s+=l}n.domain=[a,s]},t.prototype.generateNodeData=function(){var e=this,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale;if(e.data){for(var l=a instanceof Fr?a.bandwidth/2:0,c=[],h=0;h<n.length;h++){var p=n[h],f=i[h];if(null!=p){var d=a.convert(f)+l,v=s.convert(p);c.push({seriesDatum:{x:f,y:p},point:{x:d,y:v}})}}return c}},t.prototype.updateSelection=function(e){var n=Jc(this.marker.shape),i=this.markerSelection.setData(e),a=i.enter.append(n);i.exit.remove(),this.markerSelection=i.merge(a)},t.prototype.updateNodes=function(){var e=this,r=this,n=r.highlightedDatum,i=r.highlightStyle,a=r.marker,s=i.size,l=i.fill,c=i.stroke,h=i.strokeWidth,p=a.formatter;this.markerSelection.each(function(f,d,v){var w,g=d===n,y=g&&void 0!==l?l:a.fill,m=g&&void 0!==c?c:a.stroke,C=g&&void 0!==h?h:a.strokeWidth,_=g&&void 0!==s?s:a.size,P=d.seriesDatum,O=d.point;p&&(w=p({datum:d,xValue:P.x,yValue:P.y,min:P.y===e.min,max:P.y===e.max,first:0===v,last:v===e.markerSelectionData.length-1,fill:y,stroke:m,strokeWidth:C,size:_,highlighted:g})),f.size=w&&null!=w.size?w.size:_,f.fill=w&&null!=w.fill?w.fill:y,f.stroke=w&&null!=w.stroke?w.stroke:m,f.strokeWidth=w&&null!=w.strokeWidth?w.strokeWidth:C,f.translationX=O.x,f.translationY=O.y,f.visible=w&&null!=w.enabled?w.enabled:a.enabled&&f.size>0})},t.prototype.updateLine=function(){var e=this,r=e.linePath,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale,l=e.line;if(!(n.length<2)){var c=r.path,h=n.length,p=a instanceof Fr?a.bandwidth/2:0,f=!0;c.clear();for(var d=0;d<h;d++){var g=n[d],y=a.convert(i[d])+p,m=s.convert(g);null==g?f=!0:f?(c.moveTo(y,m),f=!1):c.lineTo(y,m)}r.fill=void 0,r.stroke=l.stroke,r.strokeWidth=l.strokeWidth}},t.prototype.updateXCrosshairLine=function(){var e=this,r=e.yScale,n=e.xCrosshairLine,i=e.highlightedDatum,a=e.crosshairs.xLine;if(a.enabled&&null!=i){n.y1=r.range[0],n.y2=r.range[1],n.x1=n.x2=0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth||1,n.lineCap="round"===a.lineCap||"square"===a.lineCap?a.lineCap:void 0;var s=a.lineDash;n.lineDash=Array.isArray(s)?s:ma(n.lineCap,a.lineDash),n.translationX=i.point.x}else n.strokeWidth=0},t.prototype.updateYCrosshairLine=function(){var e=this,r=e.xScale,n=e.yCrosshairLine,i=e.highlightedDatum,a=e.crosshairs.yLine;if(a.enabled&&null!=i){n.x1=r.range[0],n.x2=r.range[1],n.y1=n.y2=0,n.stroke=a.stroke,n.strokeWidth=a.strokeWidth||1,n.lineCap="round"===a.lineCap||"square"===a.lineCap?a.lineCap:void 0;var s=a.lineDash;n.lineDash=Array.isArray(s)?s:ma(n.lineCap,a.lineDash),n.translationY=i.point.y}else n.strokeWidth=0},t.prototype.getTooltipHtml=function(e){var r=this.dataType,n=e.seriesDatum,i=n.y,a=n.x,c={content:this.formatNumericDatum(i),title:"array"===r||"object"===r?this.formatDatum(a):void 0};return this.tooltip.renderer?Kn(this.tooltip.renderer({context:this.context,datum:n,yValue:i,xValue:a}),c):Kn(c)},t.className="LineSparkline",t}(pl),Mm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dm=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._x=0,e._y=0,e._width=0,e._height=0,e._crisp=!1,e}return Mm(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"crisp",{get:function(){return this._crisp},set:function(e){this._crisp!==e&&(this._crisp=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.x,i=r.y,a=r.width,s=r.height,l=r.crisp;if(e.beginPath(),l){var h=this.alignment,p=this.align;e.rect(p(h,n),p(h,i),p(h,n,a),p(h,i,s))}else e.rect(n,i,a,s);this.fillStroke(e),this.dirty=!1},t.className="Column",t}(sr),Rm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Qc(o,t,e,r){return[e||"",r||"",o+"px",t].join(" ").trim()}!function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._x=0,e._y=0,e.lineBreakRegex=/\r?\n/g,e.lines=[],e._text="",e._dirtyFont=!0,e._fontSize=10,e._fontFamily="sans-serif",e._textAlign=t.defaultStyles.textAlign,e._textBaseline=t.defaultStyles.textBaseline,e._lineHeight=14,e}Rm(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.splitText=function(){this.lines=this._text.split(this.lineBreakRegex)},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){var r=String(e);this._text!==r&&(this._text=r,this.splitText(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.dirtyFont&&(this.dirtyFont=!1,this._font=Qc(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)),this._font},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirtyFont",{get:function(){return this._dirtyFont},set:function(e){this._dirtyFont!==e&&(this._dirtyFont=e,e&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){isFinite(e)||(e=10),this._fontSize!==e&&(this._fontSize=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this._fontFamily!==e&&(this._fontFamily=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){this._textAlign!==e&&(this._textAlign=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){return lr.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()},t.prototype.getPreciseBBox=function(){var e=lr.measureText(this.text,this.font,this.textBaseline,this.textAlign);return new Qr(this.x-e.actualBoundingBoxLeft,this.y-e.actualBoundingBoxAscent,e.width,e.actualBoundingBoxAscent+e.actualBoundingBoxDescent)},t.prototype.getApproximateBBox=function(){var e=lr.getTextSize(this.text,this.font),n=this.x,i=this.y;switch(this.textAlign){case"end":case"right":n-=e.width;break;case"center":n-=e.width/2}switch(this.textBaseline){case"alphabetic":i-=.7*e.height;break;case"middle":i-=.45*e.height;break;case"ideographic":case"bottom":i-=e.height;break;case"hanging":i-=.2*e.height}return new Qr(n,i,e.width,e.height)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return!!i&&i.containsPoint(n.x,n.y)},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){if(this.lines.length&&this.scene){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.fill,i=r.stroke,a=r.strokeWidth;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;var s=this.scene.canvas.pixelRatio||1,l=e.globalAlpha;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;var c=this,h=c.fillShadow,p=c.text,f=c.x,d=c.y;h&&h.enabled&&(e.shadowColor=h.color,e.shadowOffsetX=h.xOffset*s,e.shadowOffsetY=h.yOffset*s,e.shadowBlur=h.blur*s),e.fillText(p,f,d)}if(i&&a){e.strokeStyle=i,e.lineWidth=a,e.globalAlpha=l*this.opacity*this.strokeOpacity;var v=this,g=v.lineDash,y=v.lineDashOffset,m=v.lineCap,C=v.lineJoin,_=v.strokeShadow;p=v.text,f=v.x,d=v.y,g&&e.setLineDash(g),y&&(e.lineDashOffset=y),m&&(e.lineCap=m),C&&(e.lineJoin=C),_&&_.enabled&&(e.shadowColor=_.color,e.shadowOffsetX=_.xOffset*s,e.shadowOffsetY=_.yOffset*s,e.shadowBlur=_.blur*s),e.strokeText(p,f,d)}this.dirty=!1}},t.className="Text",t.defaultStyles=ha(sr.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"})}(sr);var Fm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},km=function(o){function t(){var e=o.call(this)||this;return e.enabled=!0,e.fontSize=8,e.fontFamily="Verdana, sans-serif",e.color="rgba(70, 70, 70, 1)",e}return Fm(t,o),t.prototype.getFont=function(){return Qc(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)},Yn([zn("change","dataChange")],t.prototype,"enabled",void 0),Yn([zn("change")],t.prototype,"fontSize",void 0),Yn([zn("change")],t.prototype,"fontFamily",void 0),Yn([zn("change")],t.prototype,"fontStyle",void 0),Yn([zn("change")],t.prototype,"fontWeight",void 0),Yn([zn("change")],t.prototype,"color",void 0),t}(qi),Lm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Im=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._x=0,e._y=0,e.lineBreakRegex=/\r?\n/g,e.lines=[],e._text="",e._dirtyFont=!0,e._fontSize=10,e._fontFamily="sans-serif",e._textAlign=t.defaultStyles.textAlign,e._textBaseline=t.defaultStyles.textBaseline,e._lineHeight=14,e}return Lm(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.splitText=function(){this.lines=this._text.split(this.lineBreakRegex)},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){var r=String(e);this._text!==r&&(this._text=r,this.splitText(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.dirtyFont&&(this.dirtyFont=!1,this._font=function Nm(o,t,e,r){return[e||"",r||"",o+"px",t].join(" ").trim()}(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)),this._font},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirtyFont",{get:function(){return this._dirtyFont},set:function(e){this._dirtyFont!==e&&(this._dirtyFont=e,e&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){isFinite(e)||(e=10),this._fontSize!==e&&(this._fontSize=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this._fontFamily!==e&&(this._fontFamily=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){this._textAlign!==e&&(this._textAlign=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){return lr.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()},t.prototype.getPreciseBBox=function(){var e=lr.measureText(this.text,this.font,this.textBaseline,this.textAlign);return new Qr(this.x-e.actualBoundingBoxLeft,this.y-e.actualBoundingBoxAscent,e.width,e.actualBoundingBoxAscent+e.actualBoundingBoxDescent)},t.prototype.getApproximateBBox=function(){var e=lr.getTextSize(this.text,this.font),n=this.x,i=this.y;switch(this.textAlign){case"end":case"right":n-=e.width;break;case"center":n-=e.width/2}switch(this.textBaseline){case"alphabetic":i-=.7*e.height;break;case"middle":i-=.45*e.height;break;case"ideographic":case"bottom":i-=e.height;break;case"hanging":i-=.2*e.height}return new Qr(n,i,e.width,e.height)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return!!i&&i.containsPoint(n.x,n.y)},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){if(this.lines.length&&this.scene){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.fill,i=r.stroke,a=r.strokeWidth;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;var s=this.scene.canvas.pixelRatio||1,l=e.globalAlpha;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;var c=this,h=c.fillShadow,p=c.text,f=c.x,d=c.y;h&&h.enabled&&(e.shadowColor=h.color,e.shadowOffsetX=h.xOffset*s,e.shadowOffsetY=h.yOffset*s,e.shadowBlur=h.blur*s),e.fillText(p,f,d)}if(i&&a){e.strokeStyle=i,e.lineWidth=a,e.globalAlpha=l*this.opacity*this.strokeOpacity;var v=this,g=v.lineDash,y=v.lineDashOffset,m=v.lineCap,C=v.lineJoin,_=v.strokeShadow;p=v.text,f=v.x,d=v.y,g&&e.setLineDash(g),y&&(e.lineDashOffset=y),m&&(e.lineCap=m),C&&(e.lineJoin=C),_&&_.enabled&&(e.shadowColor=_.color,e.shadowOffsetX=_.xOffset*s,e.shadowOffsetY=_.yOffset*s,e.shadowBlur=_.blur*s),e.strokeText(p,f,d)}this.dirty=!1}},t.className="Text",t.defaultStyles=ha(sr.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),t}(sr),eh=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ca=(()=>(function(o){o[o.Rect=0]="Rect",o[o.Label=1]="Label"}(Ca||(Ca={})),Ca))(),qt=(()=>(function(o){o.InsideBase="insideBase",o.InsideEnd="insideEnd",o.Center="center",o.OutsideEnd="outsideEnd"}(qt||(qt={})),qt))(),Gm=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.formatter=void 0,e.placement=qt.InsideEnd,e}return eh(t,o),t}(km),th=function(o){function t(){var e=o.call(this)||this;return e.fill="rgb(124, 181, 236)",e.stroke="silver",e.strokeWidth=0,e.paddingInner=.1,e.paddingOuter=.2,e.valueAxisDomain=void 0,e.formatter=void 0,e.axisLine=new Hn,e.bandWidth=0,e.sparklineGroup=new Rr,e.rectGroup=new Rr,e.labelGroup=new Rr,e.rectSelection=fa.select(e.rectGroup).selectAll(),e.labelSelection=fa.select(e.labelGroup).selectAll(),e.nodeSelectionData=[],e.label=new Gm,e.rootGroup.append(e.sparklineGroup),e.sparklineGroup.append([e.rectGroup,e.axisLine,e.labelGroup]),e.axisLine.lineCap="round",e.label.enabled=!1,e}return eh(t,o),t.prototype.getNodeData=function(){return this.nodeSelectionData},t.prototype.update=function(){this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){var e=this.generateNodeData();!e||(this.nodeSelectionData=e,this.updateRectSelection(e),this.updateLabelSelection(e))},t.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},t.prototype.calculateStep=function(e){var r,n,i=this,a=i.xScale,s=i.paddingInner,l=i.paddingOuter,p=(a.domain[1]-a.domain[0])/(null!=(n=null===(r=i.smallestInterval)||void 0===r?void 0:r.x)?n:1)+1,d=Math.min(p,50);return e/Math.max(1,2*l+(d-1)*s+d)},t.prototype.updateYScaleDomain=function(){var e=this,r=e.yScale,i=e.valueAxisDomain,a=to(e.yData,st),s=0,l=1;void 0!==a&&(s=this.min=a[0],l=this.max=a[1]),s=s<0?s:0,l=l<0?0:l,i&&(i[1]<l&&(i[1]=l),i[0]>s&&(i[0]=s)),r.domain=i||[s,l]},t.prototype.updateRectSelection=function(e){var r=this.rectSelection.setData(e),n=r.enter.append(Dm);r.exit.remove(),this.rectSelection=r.merge(n)},t.prototype.updateRectNodes=function(){var e=this,r=this,n=r.highlightedDatum,i=r.formatter,a=r.fill,s=r.stroke,l=r.strokeWidth,c=this.highlightStyle,h=c.fill,p=c.stroke,f=c.strokeWidth;this.rectSelection.each(function(d,v,g){var w,y=v===n,m=y&&void 0!==h?h:a,C=y&&void 0!==p?p:s,_=y&&void 0!==f?f:l,P=v.x,O=v.y,A=v.width,E=v.height,M=v.seriesDatum;i&&(w=i({datum:v,xValue:M.x,yValue:M.y,width:A,height:E,min:M.y===e.min,max:M.y===e.max,first:0===g,last:g===e.nodeSelectionData.length-1,fill:m,stroke:C,strokeWidth:_,highlighted:y})),d.fill=w&&w.fill||m,d.stroke=w&&w.stroke||C,d.strokeWidth=w&&w.strokeWidth||_,d.x=d.y=0,d.width=A,d.height=E,d.visible=d.height>0,d.translationX=P,d.translationY=O})},t.prototype.updateLabelSelection=function(e){var r=this.labelSelection.setData(e),n=r.enter.append(Im).each(function(i){i.tag=Ca.Label,i.pointerEvents=Vn.None});r.exit.remove(),this.labelSelection=r.merge(n)},t.prototype.updateLabelNodes=function(){var e=this.label,r=e.enabled,n=e.fontStyle,i=e.fontWeight,a=e.fontSize,s=e.fontFamily,l=e.color;this.labelSelection.each(function(c,h){var p=h.label;p&&r?(c.fontStyle=n,c.fontWeight=i,c.fontSize=a,c.fontFamily=s,c.textAlign=p.textAlign,c.textBaseline=p.textBaseline,c.text=p.text,c.x=p.x,c.y=p.y,c.fill=l,c.visible=!0):c.visible=!1})},t.prototype.getTooltipHtml=function(e){var r=this.dataType,n=e.seriesDatum,i=n.y,a=n.x,c={content:this.formatNumericDatum(i),title:"array"===r||"object"===r?this.formatDatum(a):void 0};return this.tooltip.renderer?Kn(this.tooltip.renderer({context:this.context,datum:n,yValue:i,xValue:a}),c):Kn(c)},t.prototype.formatLabelValue=function(e){return e.toFixed(e%1!=0?1:0)},t}(pl),Bm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),jm=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Bm(t,o),t.prototype.updateYScaleRange=function(){this.yScale.range=[0,this.seriesRect.width]},t.prototype.updateXScaleRange=function(){var e=this,r=e.xScale,n=e.seriesRect,i=e.paddingOuter,a=e.paddingInner;if(r instanceof Fr)r.range=[0,n.height],r.paddingInner=a,r.paddingOuter=i;else{var s=this.calculateStep(n.height),l=s*i;this.bandWidth=s*(1-a),r.range=[l,n.height-l-this.bandWidth]}},t.prototype.updateAxisLine=function(){var e=this,r=e.yScale,n=e.axis,i=e.axisLine,a=e.seriesRect,s=n.strokeWidth;i.x1=0,i.x2=0,i.y1=0,i.y2=a.height,i.stroke=n.stroke,i.strokeWidth=s+(s%2==1?1:0);var l=r.convert(0);i.translationX=l},t.prototype.generateNodeData=function(){var e=this,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale,l=e.fill,c=e.stroke,h=e.strokeWidth,p=e.label;if(e.data){for(var f=p.fontStyle,d=p.fontWeight,v=p.fontSize,g=p.fontFamily,y=p.color,m=p.formatter,C=p.placement,_=[],w=s.convert(0),P=0,O=n.length;P<O;P++){var A=n[P],E=i[P],M=void 0===A;M&&(A=0);var V,R=a.convert(E),B=Math.min(s.convert(A),w),j=Math.max(s.convert(A),w),I=a instanceof Fr?a.bandwidth:this.bandWidth,F=j-B,N={x:w,y:R};V=m?m({value:A}):void 0!==A&&st(A)?this.formatLabelValue(A):"";var Y=R+I/2,$=void 0,H=void 0,q=void 0!==A&&A>=0;if(C===qt.Center)$=B+F/2,H="center";else if(C===qt.OutsideEnd)$=B+(q?F+4:-4),H=q?"start":"end";else if(C===qt.InsideEnd){$=B+(q?F-4:4),H=q?"end":"start";var re=lr.getTextSize(V,g).width||20;(q&&$<w+re||!q&&$>w-re)&&($=w+4*(q?1:-1),H=q?"start":"end")}else $=w+4*(q?1:-1),H=q?"start":"end";_.push({x:B,y:R,width:F,height:I,fill:l,stroke:c,strokeWidth:h,seriesDatum:{x:E,y:M?void 0:A},point:N,label:{x:$,y:Y,text:V,fontStyle:f,fontWeight:d,fontSize:v,fontFamily:g,textAlign:H,textBaseline:"middle",fill:y}})}return _}},t.prototype.getDistance=function(e,r){return Math.abs(e.y-r.y)},t.className="BarSparkline",t}(th),Wm=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vm=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Wm(t,o),t.prototype.updateYScaleRange=function(){this.yScale.range=[this.seriesRect.height,0]},t.prototype.updateXScaleRange=function(){var e=this,r=e.xScale,n=e.seriesRect,i=e.paddingOuter,a=e.paddingInner;if(r instanceof Fr)r.range=[0,n.width],r.paddingInner=a,r.paddingOuter=i;else{var s=this.calculateStep(n.width),l=s*i;this.bandWidth=s*(1-a),r.range=[l,n.width-l-this.bandWidth]}},t.prototype.updateAxisLine=function(){var e=this,r=e.yScale,n=e.axis,i=e.axisLine,a=e.seriesRect,s=n.strokeWidth;i.x1=0,i.x2=a.width,i.y1=0,i.y2=0,i.stroke=n.stroke,i.strokeWidth=s+(s%2==1?1:0);var l=r.convert(0);i.translationY=l},t.prototype.generateNodeData=function(){var e=this,n=e.yData,i=e.xData,a=e.xScale,s=e.yScale,l=e.fill,c=e.stroke,h=e.strokeWidth,p=e.label;if(e.data){for(var f=p.fontStyle,d=p.fontWeight,v=p.fontSize,g=p.fontFamily,y=p.color,m=p.formatter,C=p.placement,_=[],w=s.convert(0),P=0,O=n.length;P<O;P++){var A=n[P],E=i[P],M=void 0===A;M&&(A=0);var V,R=Math.min(s.convert(A),w),B=a.convert(E),j=Math.max(s.convert(A),w),I=a instanceof Fr?a.bandwidth:this.bandWidth,F=j-R,N={x:B+I/2,y:w};V=m?m({value:A}):void 0!==A&&st(A)?this.formatLabelValue(A):"";var Y=B+I/2,$=void 0,H=void 0,q=void 0!==A&&A>=0;if(C===qt.Center)$=R+F/2,H="middle";else if(C===qt.OutsideEnd)$=R+(q?-2:F+2),H=q?"bottom":"top";else if(C===qt.InsideEnd){$=R+(q?2:F-2),H=q?"top":"bottom";var re=lr.getTextSize(V,g).height||10;(q&&$>w-re||!q&&$<w+re)&&($=w+2*(q?-1:1),H=q?"bottom":"top")}else $=w+2*(q?-1:1),H=q?"bottom":"top";_.push({x:B,y:R,width:I,height:F,fill:l,stroke:c,strokeWidth:h,seriesDatum:{x:E,y:M?void 0:A},point:N,label:{x:Y,y:$,text:V,fontStyle:f,fontWeight:d,fontSize:v,fontFamily:g,textAlign:"center",textBaseline:H,fill:y}})}return _}},t.className="ColumnSparkline",t}(th),Hm=function(){function o(){}return o.create=function(t,e){var r=function zm(o){switch(void 0===o&&(o="line"),o){case"column":return new Vm;case"bar":return new jm;case"area":return new xm;default:return new Em}}((t=Object.create(t)).type);return e&&(r.tooltip=e),function $m(o,t){ie(o,"context",t.context,t),ie(o,"width",t.width,t),ie(o,"height",t.height,t),ie(o,"container",t.container,t),ie(o,"xKey",t.xKey,t),ie(o,"yKey",t.yKey,t),t.padding&&function Xm(o,t){ie(o,"top",t.top,t),ie(o,"right",t.right,t),ie(o,"bottom",t.bottom,t),ie(o,"left",t.left,t)}(o.padding,t.padding),t.axis&&function Zm(o,t){ie(o,"type",t.type,t),ie(o,"stroke",t.stroke,t),ie(o,"strokeWidth",t.strokeWidth,t)}(o.axis,t.axis),t.highlightStyle&&function Jm(o,t){ie(o,"fill",t.fill,t),ie(o,"size",t.size,t),ie(o,"stroke",t.stroke,t),ie(o,"strokeWidth",t.strokeWidth,t)}(o.highlightStyle,t.highlightStyle),t.tooltip&&o.tooltip&&function Qm(o,t){ie(o,"enabled",t.enabled,t),ie(o,"container",t.container,t),ie(o,"xOffset",t.xOffset,t),ie(o,"yOffset",t.yOffset,t),ie(o,"renderer",t.renderer,t)}(o.tooltip,t.tooltip)}(r,t),function Um(o,t){switch(t.type){case"bar":case"column":!function rh(o,t){ie(o,"valueAxisDomain",t.valueAxisDomain,t),ie(o,"fill",t.fill,t),ie(o,"stroke",t.stroke,t),ie(o,"strokeWidth",t.strokeWidth,t),ie(o,"paddingInner",t.paddingInner,t),ie(o,"paddingOuter",t.paddingOuter,t),ie(o,"formatter",t.formatter,t),t.label&&function qm(o,t){ie(o,"enabled",t.enabled,t),ie(o,"fontStyle",t.fontStyle,t),ie(o,"fontWeight",t.fontWeight,t),ie(o,"fontSize",t.fontSize,t),ie(o,"fontFamily",t.fontFamily,t),ie(o,"textAlign",t.textAlign,t),ie(o,"textBaseline",t.textBaseline,t),ie(o,"color",t.color,t),ie(o,"formatter",t.formatter,t),ie(o,"placement",t.placement,t)}(o.label,t.label)}(o,t);break;case"area":!function Ym(o,t){ie(o,"fill",t.fill,t),t.marker&&nh(o.marker,t.marker),t.line&&ih(o.line,t.line),t.crosshairs&&oh(o.crosshairs,t.crosshairs)}(o,t);break;default:!function Km(o,t){t.marker&&nh(o.marker,t.marker),t.line&&ih(o.line,t.line),t.crosshairs&&oh(o.crosshairs,t.crosshairs)}(o,t)}}(r,t),t.data&&(r.data=t.data),r},o}();function nh(o,t){ie(o,"enabled",t.enabled,t),ie(o,"size",t.size,t),ie(o,"shape",t.shape,t),ie(o,"fill",t.fill,t),ie(o,"stroke",t.stroke,t),ie(o,"strokeWidth",t.strokeWidth,t),ie(o,"formatter",t.formatter,t)}function ih(o,t){ie(o,"stroke",t.stroke,t),ie(o,"strokeWidth",t.strokeWidth,t)}function oh(o,t){o.xLine&&t.xLine&&ah(o.xLine,t.xLine),o.yLine&&t.yLine&&ah(o.yLine,t.yLine)}function ah(o,t){ie(o,"enabled",t.enabled,t),ie(o,"stroke",t.stroke,t),ie(o,"strokeWidth",t.strokeWidth,t),ie(o,"lineDash",t.lineDash,t),ie(o,"lineCap",t.lineCap,t)}var sh={},lh=function(o,t,e){if(st(t))return!0;var r="AG Charts: "+o+" must be a number, the value you provided is not a valid number. Using the default of "+e+"px.";return function eC(o,t){sh[t]||(o(),sh[t]=!0)}(function(){return console.warn(r)},o+" not a number"),!1},tC={xOffset:lh,yOffset:lh};function ie(o,t,e,r){if(t in r)if(t in o){var n=tC[t];(!n||n(t,e,o[t]))&&o[t]!==e&&(o[t]=e)}else console.warn("Property "+t+" does not exist on the target object.")}var rC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vl=function(){return vl=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},vl.apply(this,arguments)},gl=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},nC=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return rC(t,o),t.prototype.init=function(e){var r=this,n=!0,a=this.resizeObserverService.observeResize(this.getGui(),function(){var s=r.getGui(),l=s.clientWidth,c=s.clientHeight;if(0!==l&&0!==c)if(n){var h=vl({data:e.value,width:l,height:c,context:{data:e.data}},e.sparklineOptions);r.sparkline=Hm.create(h,r.sparklineTooltipSingleton.getSparklineTooltip()),r.eSparkline.appendChild(r.sparkline.canvasElement),n=!1}else r.sparkline.width=l,r.sparkline.height=c});this.addDestroyFunc(function(){return a()})},t.prototype.refresh=function(e){return!!this.sparkline&&(this.sparkline.data=e.value,!0)},t.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>',gl([u.RefSelector("eSparkline")],t.prototype,"eSparkline",void 0),gl([u.Autowired("resizeObserverService")],t.prototype,"resizeObserverService",void 0),gl([u.Autowired("sparklineTooltipSingleton")],t.prototype,"sparklineTooltipSingleton",void 0),t}(u.Component),iC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yl=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},oC=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return iC(t,o),t.prototype.postConstruct=function(){this.tooltip=new an},t.prototype.getSparklineTooltip=function(){return this.tooltip},t.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},yl([u.PostConstruct],t.prototype,"postConstruct",null),yl([u.PreDestroy],t.prototype,"destroyTooltip",null),yl([u.Bean("sparklineTooltipSingleton")],t)}(u.BeanStub),aC={moduleName:u.ModuleNames.SparklinesModule,beans:[oC],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:nC}],dependantModules:[Re]},sC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},lC=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return sC(t,o),t.prototype.getData=function(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsWrapper.isRowModelDefault())return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsWrapper.isRowModelServerSide()&&e.pivoting&&this.updatePivotKeysForSSRM();var n=this.extractRowsFromGridRowModel(e);return n.chartData=this.aggregateRowsByDimension(e,n.chartData),n},t.prototype.extractRowsFromGridRowModel=function(e){var h,r=this,n=[],i={},a={},s={},l={},c=[];if(e.crossFiltering)l=this.getFilteredRowNodes(),h=(c=this.getAllRowNodes()).length;else{var p=this.gridRowModel.getRowCount()-1;h=(e.endRow>=0?Math.min(e.endRow,p):p)-e.startRow+1}for(var d=function(C){var _={},w=e.crossFiltering?c[C]:v.gridRowModel.getRow(C+e.startRow);e.dimensionCols.forEach(function(P){var O=P.colId,A=r.columnModel.getGridColumn(O);if(A){var E=r.valueService.getValue(A,w);if(e.grouping){var M=E&&E.toString?String(E.toString()):"",R=t.getGroupLabels(w,M);_[O]={labels:R,toString:function(){return this.labels.filter(function(j){return!!j}).reverse().join(" - ")}},w.group&&(a[R.toString()]=C);var B=R.slice(1,R.length).toString();B&&(s[B]=a[B])}else _[O]=E}else _[ba.DEFAULT_CATEGORY]=C+1}),e.valueCols.forEach(function(P){var O=[],A=P.getColDef().pivotKeys;A&&(O=A.slice());var E=P.getColDef().headerName;E&&O.push(E),O.length>0&&(i[P.getId()]=O);var M=P.getColId();if(e.crossFiltering){var R=M+"-filtered-out",j=null!=(B=r.valueService.getValue(P,w))&&"function"==typeof B.toNumber?B.toNumber():B;l[w.id]?(_[M]=j,_[R]=e.aggFunc||e.isScatter?void 0:0):(_[M]=e.aggFunc||e.isScatter?void 0:0,_[R]=j)}else{var B=r.valueService.getValue(P,w);_[M]=null!=B&&"function"==typeof B.toNumber?B.toNumber():B}}),w.footer&&(_.footer=!0),n.push(_)},v=this,g=0;g<h;g++)d(g);if(e.grouping){var y=u._.values(s);n=n.filter(function(C,_){return!C.footer&&!u._.includes(y,_)})}return{chartData:n,columnNames:i}},t.prototype.aggregateRowsByDimension=function(e,r){var n=this,i=e.dimensionCols;if(!e.aggFunc||0===i.length)return r;var a=u._.last(i),s=a&&a.colId,l={},c=[];return r.forEach(function(h){var p=l;i.forEach(function(f){var d=f.colId,v=h[d];if(d===s){var g=p[v];g||(g={__children:[]},i.forEach(function(y){var m=y.colId;g[m]=h[m]}),p[v]=g,c.push(g)),g.__children.push(h)}else p[v]||(p[v]={}),p=p[v]})}),u.ModuleRegistry.assertRegistered(u.ModuleNames.RowGroupingModule,"Charting Aggregation")&&c.forEach(function(h){return e.valueCols.forEach(function(p){if(e.crossFiltering)e.valueCols.forEach(function(v){var g=v.getColId(),y=h.__children.filter(function(P){return void 0!==P[g]}).map(function(P){return P[g]}),m=n.aggregationStage.aggregateValues(y,e.aggFunc);h[v.getId()]=m&&void 0!==m.value?m.value:m;var C=g+"-filtered-out",_=h.__children.filter(function(P){return void 0!==P[C]}).map(function(P){return P[C]}),w=n.aggregationStage.aggregateValues(_,e.aggFunc);h[C]=w&&void 0!==w.value?w.value:w});else{var f=h.__children.map(function(v){return v[p.getId()]}),d=0;u.ModuleRegistry.assertRegistered(u.ModuleNames.RowGroupingModule,"Charting Aggregation")&&(d=n.aggregationStage.aggregateValues(f,e.aggFunc)),h[p.getId()]=d&&void 0!==d.value?d.value:d}})}),c},t.prototype.updatePivotKeysForSSRM=function(){var e=this.columnModel.getSecondaryColumns();if(e){var r=this.extractPivotKeySeparator(e);e.forEach(function(n){var i=n.getColId().split(r);n.getColDef().pivotKeys=i.slice(0,i.length-1)})}},t.prototype.extractPivotKeySeparator=function(e){if(0===e.length)return"";var r=function(i,a){var s=i.getGroupId();return i.getParent()?r(i.getParent(),s):a.split(s)[1][0]},n=e[0];return r(n.getParent(),n.getColId())},t.getGroupLabels=function(e,r){for(var n=[r];e&&0!==e.level;)(e=e.parent)&&n.push(e.key);return n},t.prototype.getFilteredRowNodes=function(){var e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(function(r){e[r.id]=r}),e},t.prototype.getAllRowNodes=function(){var e=[];return this.gridRowModel.forEachNode(function(r){e.push(r)}),this.sortRowNodes(e)},t.prototype.sortRowNodes=function(e){var r=this.sortController.getSortOptions();return r&&0!=r.length?this.rowNodeSorter.doFullSort(e,r):e},Xn([u.Autowired("rowModel")],t.prototype,"gridRowModel",void 0),Xn([u.Autowired("valueService")],t.prototype,"valueService",void 0),Xn([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Xn([u.Autowired("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),Xn([u.Autowired("sortController")],t.prototype,"sortController",void 0),Xn([u.Optional("aggregationStage")],t.prototype,"aggregationStage",void 0),t}(u.BeanStub),uC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},cC=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},_a=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(cC(arguments[t]));return o},ba=function(o){function t(e){var r=o.call(this)||this;return r.unlinked=!1,r.chartData=[],r.valueColState=[],r.dimensionColState=[],r.columnNames={},r.grouping=!1,r.crossFiltering=!1,r.suppressComboChartWarnings=!1,r.chartId=e.chartId,r.chartType=e.chartType,r.pivotChart=e.pivotChart,r.chartThemeName=e.chartThemeName,r.aggFunc=e.aggFunc,r.referenceCellRange=e.cellRange,r.suppliedCellRange=e.cellRange,r.suppressChartRanges=e.suppressChartRanges,r.unlinked=!!e.unlinkChart,r.crossFiltering=!!e.crossFiltering,r.seriesChartTypes=e.seriesChartTypes||[],r.initComboCharts(e),r}return uC(t,o),t.prototype.initComboCharts=function(e){("customCombo"===e.chartType||this.seriesChartTypes&&this.seriesChartTypes.length>0)&&(this.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},t.prototype.init=function(){this.datasource=this.createManagedBean(new lC),this.updateCellRanges()},t.prototype.updateCellRanges=function(e){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var r=this.getAllChartColumns(),n=r.dimensionCols,i=r.valueCols,a=this.getAllColumnsFromRanges();e&&this.updateColumnState(e),this.setDimensionCellRange(n,a,e),this.setValueCellRange(i,a,e),e||(this.resetColumnState(),this.syncDimensionCellRange()),this.updateSeriesChartTypes(),this.updateData()},t.prototype.updateSeriesChartTypes=function(){if(this.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(function(e){var r=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=!r&&e.secondaryAxis,e}),"customCombo"===this.chartType)return void this.updateSeriesChartTypesForCustomCombo();this.updateChartSeriesTypesForBuiltInCombos()}},t.prototype.updateSeriesChartTypesForCustomCombo=function(){var e=this;!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(function(a){return t.SUPPORTED_COMBO_CHART_TYPES.includes(a.chartType)||(console.warn("AG Grid: invalid chartType '"+a.chartType+"' supplied in 'seriesChartTypes', converting to 'line' instead."),a.chartType="line"),a});var i=this.valueColState.map(function(a){return(!e.savedCustomSeriesChartTypes||0===e.savedCustomSeriesChartTypes.length)&&(e.savedCustomSeriesChartTypes=e.seriesChartTypes),e.savedCustomSeriesChartTypes.find(function(l){return l.colId===a.colId})||(a.selected&&!e.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '"+a.colId+"', defaulting to 'line'."),{colId:a.colId,chartType:"line",secondaryAxis:!1})});this.seriesChartTypes=i,this.savedCustomSeriesChartTypes=i,this.suppressComboChartWarnings=!0},t.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var e="columnLineCombo"===this.chartType?"groupedColumn":"stackedArea",r="columnLineCombo"===this.chartType?"line":"groupedColumn",n=this.valueColState.filter(function(a){return a.selected}),i=Math.ceil(n.length/2);this.seriesChartTypes=n.map(function(a,s){return{colId:a.colId,chartType:s>=i?r:e,secondaryAxis:!1}})},t.prototype.updateData=function(){var e=this.getRowIndexes(),r=e.startRow,n=e.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var i={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:r,endRow:n,isScatter:u._.includes(["scatter","bubble"],this.chartType)},a=this.datasource.getData(i),l=a.columnNames;this.chartData=a.chartData,this.columnNames=l},t.prototype.isGrouping=function(){var e=this.gridOptionsWrapper.isTreeData(),r=e?null:this.columnModel.getRowGroupColumns(),n=e||r&&r.length>0,i=this.getSelectedDimension().colId,s=this.columnModel.getGroupDisplayColumns().map(function(l){return l.getColId()}).some(function(l){return l===i});return!!n&&s},t.prototype.getSelectedValueCols=function(){return this.valueColState.filter(function(e){return e.selected}).map(function(e){return e.column})},t.prototype.getSelectedDimension=function(){return this.dimensionColState.filter(function(e){return e.selected})[0]},t.prototype.getColDisplayName=function(e){return this.columnModel.getDisplayNameForColumn(e,"chart")},t.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},t.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},t.prototype.createCellRange=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:r,startColumn:e===u.CellRangeType.DIMENSION?r[0]:this.referenceCellRange.startColumn,type:e}},t.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return u._.convertToSet(this.columnModel.getAllDisplayedColumns());var e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push.apply(e,_a(this.dimensionCellRange.columns)),this.valueCellRange&&e.push.apply(e,_a(this.valueCellRange.columns)),u._.convertToSet(e)},t.prototype.getRowIndexes=function(){var e=0,r=0,n=this.rangeService,i=this.valueCellRange;if(n&&i){e=n.getRangeStartRow(i).rowIndex;var a=n.getRangeEndRow(i);r=a.rowPinned===u.Constants.PINNED_BOTTOM?-1:a.rowIndex}return{startRow:e,endRow:r}},t.prototype.getAllChartColumns=function(){var e=this,r=this.columnModel.getAllDisplayedColumns(),n=new Set,i=new Set;return r.forEach(function(a){var s=a.getColDef(),l=s.chartDataType;if(l)switch(l){case"category":case"time":return void n.add(a);case"series":return void i.add(a);case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '"+l+"' supplied, instead use 'category', 'series' or 'excluded'")}"ag-Grid-AutoColumn"!==s.colId?a.isPrimary()?(e.isNumberCol(a)?i:n).add(a):i.add(a):n.add(a)}),{dimensionCols:n,valueCols:i}},t.prototype.isNumberCol=function(e){if("ag-Grid-AutoColumn"===e.getColId())return!1;var r=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!r)return!1;var n=this.valueService.getValue(e,r);return null==n&&(n=this.extractLeafData(r,e)),null!=n&&"function"==typeof n.toNumber&&(n=n.toNumber()),"number"==typeof n},t.prototype.extractLeafData=function(e,r){if(!e.allLeafChildren)return null;for(var n=0;n<e.allLeafChildren.length;n++){var a=this.valueService.getValue(r,e.allLeafChildren[n]);if(null!=a)return a}return null},t.prototype.resetColumnState=function(){var e=this,r=this.getAllChartColumns(),n=r.dimensionCols,i=r.valueCols,a=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var l=!1,c=1,h=this.suppliedCellRange.columns[0];n.forEach(function(d){var v="ag-Grid-AutoColumn"===d.getColId(),g=!1;e.crossFiltering&&e.aggFunc?h.getColId()===d.getColId()&&(g=!0):g=!!v||!l&&a.has(d),e.dimensionColState.push({column:d,colId:d.getColId(),displayName:e.getColDisplayName(d),selected:g,order:c++}),g&&(l=!0)});var p={colId:t.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!l,order:0};this.dimensionColState.unshift(p);var f=this.referenceCellRange.columns.filter(function(d){return i.has(d)});i.forEach(function(d){s&&u._.includes(e.referenceCellRange.columns,d)&&(d=f.shift()),e.valueColState.push({column:d,colId:d.getColId(),displayName:e.getColDisplayName(d),selected:a.has(d),order:c++})})},t.prototype.updateColumnState=function(e){var r=function(c){return c.colId===e.colId},i=this.dimensionColState,a=this.valueColState;i.filter(r).length>0?i.forEach(function(c){return c.selected=r(c)}):a.filter(r).forEach(function(c){return c.selected=e.selected});var s=_a(i,a),l=[];s.forEach(function(c,h){h===e.order&&l.push(e.colId),c.colId!==e.colId&&l.push(c.colId)}),s.forEach(function(c){var h=l.indexOf(c.colId);c.order=h>=0?l.indexOf(c.colId):s.length-1}),this.reorderColState()},t.prototype.reorderColState=function(){var e=function(r,n){return r.order-n.order};this.dimensionColState.sort(e),this.valueColState.sort(e)},t.prototype.setDimensionCellRange=function(e,r,n){var i=this;if(this.dimensionCellRange=void 0,n||this.dimensionColState.length){var a=n;if(this.crossFiltering&&this.aggFunc){var s=this.suppliedCellRange.columns[0];a=this.dimensionColState.filter(function(l){return l.colId===s.getColId()})[0]}else(!a||!e.has(a.column))&&(a=this.dimensionColState.filter(function(l){return l.selected})[0]);a&&a.colId!==t.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(u.CellRangeType.DIMENSION,a.column))}else e.forEach(function(l){i.dimensionCellRange||!r.has(l)||(i.dimensionCellRange=i.createCellRange(u.CellRangeType.DIMENSION,l))})},t.prototype.setValueCellRange=function(e,r,n){this.valueCellRange=void 0;var i=[];if(e.forEach(function(s){n&&n.colId===s.getColId()?n.selected&&i.push(n.column):r.has(s)&&i.push(s)}),i.length>0){var a=[];this.valueColState.length>0?a=this.valueColState.map(function(s){return s.colId}):r.forEach(function(s){return a.push(s.getColId())}),i.sort(function(s,l){return a.indexOf(s.getColId())-a.indexOf(l.getColId())}),this.valueCellRange=this.createCellRange.apply(this,_a([u.CellRangeType.VALUE],i))}},t.prototype.syncDimensionCellRange=function(){var e=this.getSelectedDimension();e&&e.column&&(this.dimensionCellRange=this.createCellRange(u.CellRangeType.DIMENSION,e.column))},t.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},t.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",t.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],qn([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),qn([u.Autowired("valueService")],t.prototype,"valueService",void 0),qn([u.Autowired("rangeService")],t.prototype,"rangeService",void 0),qn([u.Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),qn([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),qn([u.PostConstruct],t.prototype,"init",null),t}(u.BeanStub),Sa=function(){return Sa=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Sa.apply(this,arguments)},rt=function(){function o(){this.allPropertyListeners=new Map,this.allEventListeners=new Map}return o.prototype.addPropertyListener=function(t,e,r){void 0===r&&(r=this);var n=this.allPropertyListeners,i=n.get(t);i||n.set(t,i=new Map),i.has(e)||i.set(e,new Set);var s=i.get(e);s&&s.add(r)},o.prototype.removePropertyListener=function(t,e,r){void 0===r&&(r=this);var i=this.allPropertyListeners.get(t);if(i)if(e){var a=i.get(e);a&&(a.delete(r),a.size||i.delete(e))}else i.clear()},o.prototype.notifyPropertyListeners=function(t,e,r){var n=this,a=this.allPropertyListeners.get(t);a&&a.forEach(function(s,l){s.forEach(function(c){return l.call(c,{type:t,source:n,value:r,oldValue:e})})})},o.prototype.addEventListener=function(t,e,r){void 0===r&&(r=this);var n=this.allEventListeners,i=n.get(t);i||n.set(t,i=new Map),i.has(e)||i.set(e,new Set);var s=i.get(e);s&&s.add(r)},o.prototype.removeEventListener=function(t,e,r){void 0===r&&(r=this);var i=this.allEventListeners.get(t);if(i)if(e){var a=i.get(e);a&&(a.delete(r),a.size||i.delete(e))}else i.clear()},o.prototype.notifyEventListeners=function(t){var e=this,r=this.allEventListeners;t.forEach(function(n){var i=r.get(n);i&&i.forEach(function(a,s){a.forEach(function(l){return s.call(l,{type:n,source:e})})})})},o.prototype.fireEvent=function(t){var e=this,r=this.allEventListeners.get(t.type);r&&r.forEach(function(n,i){n.forEach(function(a){return i.call(a,Sa(Sa({},t),{source:e}))})})},o.privateKeyPrefix="_",o}();function G(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return o.indexOf("debugger"),function(r,n){var i=rt.privateKeyPrefix+n,a=i+"Events";r[n]||(o&&(r[a]=o),Object.defineProperty(r,n,{set:function(s){var l=this[i];if(s!==l||"object"==typeof s&&null!==s){this[i]=s,this.notifyPropertyListeners(n,l,s);var c=this[a];c&&this.notifyEventListeners(c)}},get:function(){return this[i]},enumerable:!0,configurable:!0}))}}var hC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wa=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xa=function(o){function t(e,r,n,i){void 0===e&&(e=0),void 0===r&&(r=e),void 0===n&&(n=e),void 0===i&&(i=r);var a=o.call(this)||this;return a.top=e,a.right=r,a.bottom=n,a.left=i,a}return hC(t,o),t.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},wa([G("layoutChange")],t.prototype,"top",void 0),wa([G("layoutChange")],t.prototype,"right",void 0),wa([G("layoutChange")],t.prototype,"bottom",void 0),wa([G("layoutChange")],t.prototype,"left",void 0),t}(rt),Ie=function(){function o(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return o.prototype.isValid=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},o.prototype.dilate=function(t){this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t},o.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},o.prototype.render=function(t,e){void 0===e&&(e=o.noParams),t.save(),e.resetTransform&&t.setTransform(1,0,0,1,0,0),t.strokeStyle=e.strokeStyle||"cyan",t.lineWidth=e.lineWidth||1,t.strokeRect(this.x,this.y,this.width,this.height),e.label&&(t.fillStyle=e.fillStyle||"black",t.textBaseline="bottom",t.fillText(e.label,this.x,this.y)),t.restore()},o.noParams={},o}(),ro=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},kr=function(){function o(t){void 0===t&&(t=[1,0,0,1,0,0]),this.elements=t}return o.prototype.setElements=function(t){var e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},o.prototype.setIdentityElements=function(){var t=this.elements;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},Object.defineProperty(o.prototype,"identity",{get:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"a",{get:function(){return this.elements[0]},set:function(t){this.elements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"b",{get:function(){return this.elements[1]},set:function(t){this.elements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"c",{get:function(){return this.elements[2]},set:function(t){this.elements[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"d",{get:function(){return this.elements[3]},set:function(t){this.elements[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"e",{get:function(){return this.elements[4]},set:function(t){this.elements[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"f",{get:function(){return this.elements[5]},set:function(t){this.elements[5]=t},enumerable:!0,configurable:!0}),o.prototype.AxB=function(t,e,r){var n=ro(t,6),i=n[0],a=n[1],s=n[2],l=n[3],c=n[4],h=n[5],p=ro(e,6),f=p[0],d=p[1],v=p[2],g=p[3],y=p[4],m=p[5];(r=r||t)[0]=i*f+s*d,r[1]=a*f+l*d,r[2]=i*v+s*g,r[3]=a*v+l*g,r[4]=i*y+s*m+c,r[5]=a*y+l*m+h},o.prototype.multiplySelf=function(t){return this.AxB(this.elements,t.elements),this},o.prototype.multiply=function(t){var e=new Array(6);return this.AxB(this.elements,t.elements,e),new o(e)},o.prototype.preMultiplySelf=function(t){return this.AxB(t.elements,this.elements,this.elements),this},o.prototype.inverse=function(){var t=ro(this.elements,6),e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],l=1/(e*i-r*n);return new o([i*=l,-(r*=l),-(n*=l),e*=l,n*s-i*a,r*a-e*s])},o.prototype.inverseTo=function(t){var e=ro(this.elements,6),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=1/(r*a-n*i);return t.setElements([a*=c,-(n*=c),-(i*=c),r*=c,i*l-a*s,n*s-r*l]),this},o.prototype.invertSelf=function(){var t=this.elements,e=ro(t,6),r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],l=e[5],c=1/(r*a-n*i);return r*=c,n*=c,i*=c,t[0]=a*=c,t[1]=-n,t[2]=-i,t[3]=r,t[4]=i*l-a*s,t[5]=n*s-r*l,this},o.prototype.clone=function(){return new o(this.elements.slice())},o.prototype.transformPoint=function(t,e){var r=this.elements;return{x:t*r[0]+e*r[2]+r[4],y:t*r[1]+e*r[3]+r[5]}},o.prototype.transformBBox=function(t,e,r){void 0===e&&(e=0);var d,v,n=this.elements,i=n[0],a=n[1],s=n[2],l=n[3],c=.5*t.width,h=.5*t.height,p=t.x+c,f=t.y+h;if(e){c-=e,h-=e;var g=Math.sqrt(i*i+s*s),y=Math.sqrt(a*a+l*l);d=Math.abs(c*i)+Math.abs(h*s)+Math.abs(g*e),v=Math.abs(c*a)+Math.abs(h*l)+Math.abs(y*e)}else d=Math.abs(c*i)+Math.abs(h*s),v=Math.abs(c*a)+Math.abs(h*l);return r||(r=new Ie(0,0,0,0)),r.x=p*i+f*s+n[4]-d,r.y=p*a+f*l+n[5]-v,r.width=d+d,r.height=v+v,r},o.prototype.toContext=function(t){if(!this.identity){var e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},o.flyweight=function(t){return t?o.matrix.setElements(t instanceof o?t.elements:t):o.matrix.setIdentityElements(),o.matrix},o.matrix=new o,o}();function Zn(o){var t=o.constructor,e=t.className;if(!e)throw new Error("The "+t+" is missing the 'className' property.");return e+"-"+(t.id=(t.id||0)+1)}var dt=(()=>(function(o){o[o.All=0]="All",o[o.None=1]="None"}(dt||(dt={})),dt))(),hr=function(){function o(){this.id=Zn(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new kr,this.inverseMatrix=new kr,this._dirtyTransform=!1,this._scalingX=1,this._scalingY=1,this._scalingCenterX=null,this._scalingCenterY=null,this._rotationCenterX=null,this._rotationCenterY=null,this._rotation=0,this._translationX=0,this._translationY=0,this._dirty=!0,this._visible=!0,this.dirtyZIndex=!1,this._zIndex=0,this.pointerEvents=dt.All}return o.isNode=function(t){return!!t&&void 0!==t.matrix},o.prototype._setScene=function(t){this._scene=t;for(var e=this.children,r=e.length,n=0;n<r;n++)e[n]._setScene(t)},Object.defineProperty(o.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),o.prototype._setParent=function(t){this._parent=t},Object.defineProperty(o.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),o.prototype.countChildren=function(t){if(void 0===t&&(t=o.MAX_SAFE_INTEGER),t<=0)return 0;for(var e=this.children,r=e.length,n=r,i=0;i<r;i++)n+=e[i].countChildren(t-1);return n},o.prototype.append=function(t){o.isNode(t)&&(t=[t]);for(var e=t.length,r=0;r<e;r++){var n=t[r];if(n.parent)throw new Error(n+" already belongs to another parent: "+n.parent+".");if(n.scene)throw new Error(n+" already belongs a scene: "+n.scene+".");if(this.childSet[n.id])throw new Error("Duplicate "+n.constructor.name+" node: "+n);this._children.push(n),this.childSet[n.id]=!0,n._setParent(this),n._setScene(this.scene)}this.dirty=!0},o.prototype.appendChild=function(t){if(t.parent)throw new Error(t+" already belongs to another parent: "+t.parent+".");if(t.scene)throw new Error(t+" already belongs to a scene: "+t.scene+".");if(this.childSet[t.id])throw new Error("Duplicate "+t.constructor.name+" node: "+t);return this._children.push(t),this.childSet[t.id]=!0,t._setParent(this),t._setScene(this.scene),this.dirty=!0,t},o.prototype.removeChild=function(t){if(t.parent===this){var e=this.children.indexOf(t);if(e>=0)return this._children.splice(e,1),delete this.childSet[t.id],t._setParent(),t._setScene(),this.dirty=!0,t}throw new Error("The node to be removed is not a child of this node.")},o.prototype.insertBefore=function(t,e){var r=t.parent;if(t.parent&&t.parent.removeChild(t),e&&e.parent===this){var n=this.children.indexOf(e);if(!(n>=0))throw new Error(e+" has "+r+" as the parent, but is not in its list of children.");this._children.splice(n,0,t),this.childSet[t.id]=!0,t._setParent(this),t._setScene(this.scene),this.dirty=!0}else this.append(t);return t},Object.defineProperty(o.prototype,"nextSibling",{get:function(){var t=this.parent;if(t){var e=t.children,r=e.indexOf(this);if(r>=0&&r<=e.length-1)return e[r+1]}},enumerable:!0,configurable:!0}),o.prototype.transformPoint=function(t,e){for(var r=kr.flyweight(this.matrix),n=this.parent;n;)r.preMultiplySelf(n.matrix),n=n.parent;return r.invertSelf().transformPoint(t,e)},o.prototype.inverseTransformPoint=function(t,e){for(var r=kr.flyweight(this.matrix),n=this.parent;n;)r.preMultiplySelf(n.matrix),n=n.parent;return r.transformPoint(t,e)},Object.defineProperty(o.prototype,"dirtyTransform",{get:function(){return this._dirtyTransform},set:function(t){this._dirtyTransform=t,t&&(this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scalingX",{get:function(){return this._scalingX},set:function(t){this._scalingX!==t&&(this._scalingX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scalingY",{get:function(){return this._scalingY},set:function(t){this._scalingY!==t&&(this._scalingY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scalingCenterX",{get:function(){return this._scalingCenterX},set:function(t){this._scalingCenterX!==t&&(this._scalingCenterX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"scalingCenterY",{get:function(){return this._scalingCenterY},set:function(t){this._scalingCenterY!==t&&(this._scalingCenterY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotationCenterX",{get:function(){return this._rotationCenterX},set:function(t){this._rotationCenterX!==t&&(this._rotationCenterX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotationCenterY",{get:function(){return this._rotationCenterY},set:function(t){this._rotationCenterY!==t&&(this._rotationCenterY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rotationDeg",{get:function(){return this.rotation/Math.PI*180},set:function(t){this.rotation=t/180*Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"translationX",{get:function(){return this._translationX},set:function(t){this._translationX!==t&&(this._translationX=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"translationY",{get:function(){return this._translationY},set:function(t){this._translationY!==t&&(this._translationY=t,this.dirtyTransform=!0)},enumerable:!0,configurable:!0}),o.prototype.containsPoint=function(t,e){return!1},o.prototype.pickNode=function(t,e){if(this.visible&&this.pointerEvents!==dt.None&&this.containsPoint(t,e)){var r=this.children;if(r.length)for(var n=r.length-1;n>=0;n--){var i=r[n].pickNode(t,e);if(i)return i}else if(!this.isContainerNode)return this}},o.prototype.computeBBox=function(){},o.prototype.computeBBoxCenter=function(){var t=this.computeBBox&&this.computeBBox();return t?[t.x+.5*t.width,t.y+.5*t.height]:[0,0]},o.prototype.computeTransformMatrix=function(){var a,s,t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}([0,0],2),e=t[0],r=t[1],n=this.scalingX,i=this.scalingY;1===n&&1===i?(a=0,s=0):(a=null===this.scalingCenterX?e:this.scalingCenterX,s=null===this.scalingCenterY?r:this.scalingCenterY);var p,f,l=this.rotation,c=Math.cos(l),h=Math.sin(l);0===l?(p=0,f=0):(p=null===this.rotationCenterX?e:this.rotationCenterX,f=null===this.rotationCenterY?r:this.rotationCenterY);var d=this.translationX,v=this.translationY,g=a*(1-n)-p,y=s*(1-i)-f;this.dirtyTransform=!1,this.matrix.setElements([c*n,h*n,-h*i,c*i,c*g-h*y+p+d,h*g+c*y+f+v]).inverseTo(this.inverseMatrix)},Object.defineProperty(o.prototype,"dirty",{get:function(){return this._dirty},set:function(t){this._dirty=t,t&&(this.parent?this.parent.dirty=!0:this.scene&&(this.scene.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.dirtyZIndex=!0),this.dirty=!0)},enumerable:!0,configurable:!0}),o.MAX_SAFE_INTEGER=Math.pow(2,53)-1,o}();function Oa(o,t){var e=Object.create(o);for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function no(o,t){return!1!==t.clone&&t.isMergeableObject(o)?xt(function dC(o){return Array.isArray(o)?[]:{}}(o),o,t):o}function vC(o,t,e){return o.concat(t).map(function(r){return no(r,e)})}function uh(o){return Object.keys(o).concat(function yC(o){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o).filter(function(t){return o.propertyIsEnumerable(t)}):[]}(o))}function ch(o,t){try{return t in o}catch(e){return!1}}function hh(o){return function _C(o){return!!o&&"object"==typeof o}(o)&&!function bC(o){var t=Object.prototype.toString.call(o);return"[object RegExp]"===t||"[object Date]"===t}(o)}function xt(o,t,e){(e=e||{}).arrayMerge=e.arrayMerge||vC,e.isMergeableObject=e.isMergeableObject||hh,e.cloneUnlessOtherwiseSpecified=no;var r=Array.isArray(t);return r===Array.isArray(o)?r?e.arrayMerge(o,t,e):function CC(o,t,e){var r={};return e.isMergeableObject(o)&&uh(o).forEach(function(n){r[n]=no(o[n],e)}),uh(t).forEach(function(n){(function mC(o,t){return ch(o,t)&&!(Object.hasOwnProperty.call(o,t)&&Object.propertyIsEnumerable.call(o,t))})(o,n)||(r[n]=ch(o,n)&&e.isMergeableObject(t[n])?function gC(o,t){if(!t.customMerge)return xt;var e=t.customMerge(o);return"function"==typeof e?e:xt}(n,e)(o[n],t[n],e):no(t[n],e))}),r}(o,t,e):no(t,e)}var wC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Lr=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.lastInstanceId=0,e._fillOpacity=1,e._strokeOpacity=1,e._fill=t.defaultStyles.fill,e._stroke=t.defaultStyles.stroke,e._strokeWidth=t.defaultStyles.strokeWidth,e._lineDash=t.defaultStyles.lineDash,e._lineDashOffset=t.defaultStyles.lineDashOffset,e._lineCap=t.defaultStyles.lineCap,e._lineJoin=t.defaultStyles.lineJoin,e._opacity=t.defaultStyles.opacity,e.onShadowChange=function(){e.dirty=!0},e._fillShadow=t.defaultStyles.fillShadow,e._strokeShadow=t.defaultStyles.strokeShadow,e}return wC(t,o),t.createInstance=function(e){var r=Object.create(e);return r._setParent(void 0),r.id=e.id+"-Instance-"+String(++e.lastInstanceId),r},t.prototype.restoreOwnStyles=function(){for(var e=this.constructor.defaultStyles,r=Object.getOwnPropertyNames(e),n=0,i=r.length;n<i;n++){var a=r[n];this[a]=e[a]}},t.prototype.restoreAllStyles=function(){var e=this.constructor.defaultStyles;for(var r in e)this[r]=e[r]},t.prototype.restoreOverriddenStyles=function(){var e=this.constructor.defaultStyles,r=Object.getPrototypeOf(e);for(var n in e)e.hasOwnProperty(n)&&r.hasOwnProperty(n)&&(this[n]=e[n])},Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this._fillOpacity},set:function(e){this._fillOpacity!==e&&(this._fillOpacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeOpacity",{get:function(){return this._strokeOpacity},set:function(e){this._strokeOpacity!==e&&(this._strokeOpacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){this._fill!==e&&(this._fill=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){this._stroke!==e&&(this._stroke=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(e){this._strokeWidth!==e&&(this._strokeWidth=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return Math.floor(this.strokeWidth)%2/2},enumerable:!0,configurable:!0}),t.prototype.align=function(e,r,n){return null!=n?Math.floor(n)+Math.floor(r%1+n%1):Math.floor(r)+e},Object.defineProperty(t.prototype,"lineDash",{get:function(){return this._lineDash},set:function(e){var r=this._lineDash;if(r!==e){if(r&&e&&r.length===e.length){for(var n=!0,i=e.length,a=0;a<i;a++)if(r[a]!==e[a]){n=!1;break}if(n)return}this._lineDash=e,this.dirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineDashOffset",{get:function(){return this._lineDashOffset},set:function(e){this._lineDashOffset!==e&&(this._lineDashOffset=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineCap",{get:function(){return this._lineCap},set:function(e){this._lineCap!==e&&(this._lineCap=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){e=Math.min(1,Math.max(0,e)),this._opacity!==e&&(this._opacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillShadow",{get:function(){return this._fillShadow},set:function(e){var r=this._fillShadow;r!==e&&(r&&r.removeEventListener("change",this.onShadowChange),e&&e.addEventListener("change",this.onShadowChange),this._fillShadow=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeShadow",{get:function(){return this._strokeShadow},set:function(e){var r=this._strokeShadow;r!==e&&(r&&r.removeEventListener("change",this.onShadowChange),e&&e.addEventListener("change",this.onShadowChange),this._strokeShadow=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.fillStroke=function(e){if(this.scene){var r=this.scene.canvas.pixelRatio||1,n=e.globalAlpha;if(this.fill){e.fillStyle=this.fill,e.globalAlpha=n*this.opacity*this.fillOpacity;var i=this.fillShadow;i&&i.enabled&&(e.shadowColor=i.color,e.shadowOffsetX=i.xOffset*r,e.shadowOffsetY=i.yOffset*r,e.shadowBlur=i.blur*r),e.fill()}if(e.shadowColor="rgba(0, 0, 0, 0)",this.stroke&&this.strokeWidth){e.strokeStyle=this.stroke,e.globalAlpha=n*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin);var a=this.strokeShadow;a&&a.enabled&&(e.shadowColor=a.color,e.shadowOffsetX=a.xOffset*r,e.shadowOffsetY=a.yOffset*r,e.shadowBlur=a.blur*r),e.stroke()}}},t.prototype.containsPoint=function(e,r){return this.isPointInPath(e,r)},t.defaultStyles=Oa({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0,strokeShadow:void 0}),t}(hr),sn=function(){function o(t,e,r){void 0===t&&(t=window.document),void 0===e&&(e=600),void 0===r&&(r=300),this._container=void 0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=t,this.element=t.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.style.userSelect="none",this.element.style.display="block",this.setPixelRatio(),this.resize(e,r)}return Object.defineProperty(o.prototype,"container",{get:function(){return this._container},set:function(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)},enumerable:!0,configurable:!0}),o.prototype.remove=function(){var t=this.element.parentNode;null!=t&&t.removeChild(this.element)},o.prototype.destroy=function(){this.element.remove(),this._canvas=void 0,Object.freeze(this)},o.prototype.toImage=function(){var t=this.document.createElement("img");return t.src=this.getDataURL(),t},o.prototype.getDataURL=function(t){return this.element.toDataURL(t)},o.prototype.download=function(t){t=((t||"").trim()||"image")+".png";var r=this.getDataURL("image/png"),n=this.document,i=n.createElement("a");i.href=r,i.download=t,i.style.display="none",n.body.appendChild(i),i.click(),n.body.removeChild(i)},Object.defineProperty(o.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!0,configurable:!0}),o.prototype.setPixelRatio=function(t){var e=t||window.devicePixelRatio;e!==this.pixelRatio&&(o.overrideScale(this.context,e),this._pixelRatio=e,this.resize(this.width,this.height))},Object.defineProperty(o.prototype,"pixelated",{get:function(){return"pixelated"===this.element.style.imageRendering},set:function(t){this.element.style.imageRendering=t?"pixelated":"auto"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),o.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.element,i=r.context,a=r.pixelRatio;n.width=Math.round(t*a),n.height=Math.round(e*a),n.style.width=t+"px",n.style.height=e+"px",i.resetTransform(),this._width=t,this._height=e}},Object.defineProperty(o,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d")},enumerable:!0,configurable:!0}),Object.defineProperty(o,"svgText",{get:function(){if(this._svgText)return this._svgText;var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";var r=document.createElementNS(t,"text");return r.setAttribute("x","0"),r.setAttribute("y","30"),r.setAttribute("text","black"),e.appendChild(r),document.body.appendChild(e),this._svgText=r,r},enumerable:!0,configurable:!0}),Object.defineProperty(o,"has",{get:function(){if(this._has)return this._has;var t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,r=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!r,getTransform:void 0!==this.textMeasuringContext.getTransform})},enumerable:!0,configurable:!0}),o.measureText=function(t,e,r,n){var i=this.textMeasuringContext;return i.font=e,i.textBaseline=r,i.textAlign=n,i.measureText(t)},o.getTextSize=function(t,e){if(this.has.textMetrics){var r=this.textMeasuringContext;r.font=e;var n=r.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)},o.measureSvgText=function(t,e){var r=this.textSizeCache,n=r[e];if(n){var i=n[t];if(i)return i}else r[e]={};var a=this.svgText;a.style.font=e,a.textContent=t;var s=a.getBBox(),l={width:s.width,height:s.height};return r[e][t]=l,l},o.overrideScale=function(t,e){var r=0,n={save:function(){this.$save(),r++},restore:function(){r>0&&(this.$restore(),r--)},setTransform:function(a,s,l,c,h,p){this.$setTransform(a*e,s*e,l*e,c*e,h*e,p*e)},resetTransform:function(){this.$setTransform(e,0,0,e,0,0),this.save(),r=0}};for(var i in n)n.hasOwnProperty(i)&&(t["$"+i]||(t["$"+i]=t[i]),t[i]=n[i])},o.textSizeCache={},o}(),xC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nt=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._x=0,e._y=0,e.lineBreakRegex=/\r?\n/g,e.lines=[],e._text="",e._dirtyFont=!0,e._fontSize=10,e._fontFamily="sans-serif",e._textAlign=t.defaultStyles.textAlign,e._textBaseline=t.defaultStyles.textBaseline,e._lineHeight=14,e}return xC(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.splitText=function(){this.lines=this._text.split(this.lineBreakRegex)},Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){var r=String(e);this._text!==r&&(this._text=r,this.splitText(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this.dirtyFont&&(this.dirtyFont=!1,this._font=fh(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)),this._font},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirtyFont",{get:function(){return this._dirtyFont},set:function(e){this._dirtyFont!==e&&(this._dirtyFont=e,e&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){isFinite(e)||(e=10),this._fontSize!==e&&(this._fontSize=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this._fontFamily!==e&&(this._fontFamily=e,this.dirtyFont=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){this._textAlign!==e&&(this._textAlign=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){return sn.has.textMetrics?this.getPreciseBBox():this.getApproximateBBox()},t.prototype.getPreciseBBox=function(){var e=sn.measureText(this.text,this.font,this.textBaseline,this.textAlign);return new Ie(this.x-e.actualBoundingBoxLeft,this.y-e.actualBoundingBoxAscent,e.width,e.actualBoundingBoxAscent+e.actualBoundingBoxDescent)},t.prototype.getApproximateBBox=function(){var e=sn.getTextSize(this.text,this.font),n=this.x,i=this.y;switch(this.textAlign){case"end":case"right":n-=e.width;break;case"center":n-=e.width/2}switch(this.textBaseline){case"alphabetic":i-=.7*e.height;break;case"middle":i-=.45*e.height;break;case"ideographic":case"bottom":i-=e.height;break;case"hanging":i-=.2*e.height}return new Ie(n,i,e.width,e.height)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return!!i&&i.containsPoint(n.x,n.y)},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){if(this.lines.length&&this.scene){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this,n=r.fill,i=r.stroke,a=r.strokeWidth;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;var s=this.scene.canvas.pixelRatio||1,l=e.globalAlpha;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;var c=this,h=c.fillShadow,p=c.text,f=c.x,d=c.y;h&&h.enabled&&(e.shadowColor=h.color,e.shadowOffsetX=h.xOffset*s,e.shadowOffsetY=h.yOffset*s,e.shadowBlur=h.blur*s),e.fillText(p,f,d)}if(i&&a){e.strokeStyle=i,e.lineWidth=a,e.globalAlpha=l*this.opacity*this.strokeOpacity;var v=this,g=v.lineDash,y=v.lineDashOffset,m=v.lineCap,C=v.lineJoin,_=v.strokeShadow;p=v.text,f=v.x,d=v.y,g&&e.setLineDash(g),y&&(e.lineDashOffset=y),m&&(e.lineCap=m),C&&(e.lineJoin=C),_&&_.enabled&&(e.shadowColor=_.color,e.shadowOffsetX=_.xOffset*s,e.shadowOffsetY=_.yOffset*s,e.shadowBlur=_.blur*s),e.strokeText(p,f,d)}this.dirty=!1}},t.className="Text",t.defaultStyles=Oa(Lr.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),t}(Lr);function fh(o,t,e,r){return[e||"",r||"",o+"px",t].join(" ").trim()}var OC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ph=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ml=function(o){function t(){var e=o.call(this)||this;e.node=new nt,e.enabled=!1,e.padding=new xa(10);var r=e.node;return r.textAlign="center",r.textBaseline="top",r.pointerEvents=dt.None,e}return OC(t,o),Object.defineProperty(t.prototype,"text",{get:function(){return this.node.text},set:function(e){this.node.text!==e&&(this.node.text=e,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this.node.fontStyle},set:function(e){this.node.fontStyle!==e&&(this.node.fontStyle=e,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.node.fontWeight},set:function(e){this.node.fontWeight!==e&&(this.node.fontWeight=e,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.node.fontSize},set:function(e){this.node.fontSize!==e&&(this.node.fontSize=e,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.node.fontFamily},set:function(e){this.node.fontFamily!==e&&(this.node.fontFamily=e,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.node.fill},set:function(e){this.node.fill!==e&&(this.node.fill=e,this.fireEvent({type:"change"}))},enumerable:!0,configurable:!0}),ph([G("change")],t.prototype,"enabled",void 0),ph([G("change")],t.prototype,"padding",void 0),t}(rt),PC=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function Pa(o,t,e){var r=io(o,t,e);return function TC(o,t,e){void 0===e&&(e=1);for(var r=Math.abs(e),n=r>0&&r<1?Math.abs(Math.floor(Math.log(r)/Math.LN10)):0,i=Math.pow(10,n),a=Math.max(0,Math.ceil((t-o)/e))||0,s=new dh(n),l=0;l<a;l++)s[l]=Math.round((o+e*l)*i)/i;return s}(o=Math.ceil(o/r)*r,t=Math.floor(t/r)*r+r/2,r)}var Cl=Math.sqrt(50),_l=Math.sqrt(10),bl=Math.sqrt(2);function io(o,t,e){var r=Math.abs(t-o)/Math.max(0,e),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/n;return i>=Cl?n*=10:i>=_l?n*=5:i>=bl&&(n*=2),t<o?-n:n}function Sl(o,t,e){var r=(t-o)/Math.max(0,e),n=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,n);return n>=0?(i>=Cl?10:i>=_l?5:i>=bl?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(i>=Cl?10:i>=_l?5:i>=bl?2:1)}var dh=function(o){function t(e,r){var n=o.call(this)||this;if(r)for(var i=0,a=r.length;i<a;i++)n[i]=r[i];return n.fractionDigits=e,n}return PC(t,o),t}(Array);function ln(o,t){return o=+o,t=+t,function(e){return o*(1-e)+t*e}}var vh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},fr=function(){function o(t,e,r,n){void 0===n&&(n=1),this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,r||0)),this.a=Math.min(1,Math.max(0,n||0))}return o.fromString=function(t){if(t.indexOf("#")>=0)return o.fromHexString(t);var e=o.nameToHex[t];if(e)return o.fromHexString(e);if(t.indexOf("rgb")>=0)return o.fromRgbaString(t);throw new Error("Invalid color string: '"+t+"'")},o.parseHex=function(t){var e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(var r=0;r<t.length;r+=2)e.push(parseInt(""+t[r]+t[r+1],16));break;case 3:case 4:e=t.split("").map(function(n){return parseInt(n,16)}).map(function(n){return n+16*n})}if(e.length>=3&&e.every(function(n){return n>=0}))return 3===e.length&&e.push(255),e},o.fromHexString=function(t){var e=o.parseHex(t);if(e){var r=vh(e,4);return new o(r[0]/255,r[1]/255,r[2]/255,r[3]/255)}throw new Error("Malformed hexadecimal color string: '"+t+"'")},o.stringToRgba=function(t){for(var e=vh([NaN,NaN],2),r=e[0],n=e[1],i=0;i<t.length;i++){var a=t[i];if(r||"("!==a){if(")"===a){n=i;break}}else r=i}var s=r&&n&&t.substring(r+1,n);if(s){var l=s.split(","),c=[];for(i=0;i<l.length;i++){var h=l[i],p=parseFloat(h);if(isNaN(p))return;h.indexOf("%")>=0?(p=Math.max(0,Math.min(100,p)),p/=100):3===i?p=Math.max(0,Math.min(1,p)):(p=Math.max(0,Math.min(255,p)),p/=255),c.push(p)}return c}},o.fromRgbaString=function(t){var e=o.stringToRgba(t);if(e){if(3===e.length)return new o(e[0],e[1],e[2]);if(4===e.length)return new o(e[0],e[1],e[2],e[3])}throw new Error("Malformed rgb/rgba color string: '"+t+"'")},o.fromArray=function(t){if(4===t.length)return new o(t[0],t[1],t[2],t[3]);if(3===t.length)return new o(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},o.fromHSB=function(t,e,r,n){void 0===n&&(n=1);var i=o.HSBtoRGB(t,e,r);return new o(i[0],i[1],i[2],n)},o.padHex=function(t){return 1===t.length?"0"+t:t},o.prototype.toHexString=function(){var t="#"+o.padHex(Math.round(255*this.r).toString(16))+o.padHex(Math.round(255*this.g).toString(16))+o.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=o.padHex(Math.round(255*this.a).toString(16))),t},o.prototype.toRgbaString=function(t){void 0===t&&(t=3);var e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],r=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*r)/r),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},o.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},o.prototype.toHSB=function(){return o.RGBtoHSB(this.r,this.g,this.b)},o.RGBtoHSB=function(t,e,r){var n=Math.min(t,e,r),i=Math.max(t,e,r),s=NaN;if(n!==i){var l=i-n,c=(i-t)/l,h=(i-e)/l,p=(i-r)/l;s=t===i?p-h:e===i?2+c-p:4+h-c,(s/=6)<0&&(s+=1)}return[360*s,0!==i?(i-n)/i:0,i]},o.HSBtoRGB=function(t,e,r){isNaN(t)&&(t=0),t=(t%360+360)%360/360;var n=0,i=0,a=0;if(0===e)n=i=a=r;else{var s=6*(t-Math.floor(t)),l=s-Math.floor(s),c=r*(1-e),h=r*(1-e*l),p=r*(1-e*(1-l));switch(s>>0){case 0:n=r,i=p,a=c;break;case 1:n=h,i=r,a=c;break;case 2:n=c,i=r,a=p;break;case 3:n=c,i=h,a=r;break;case 4:n=p,i=c,a=r;break;case 5:n=r,i=c,a=h}}return[n,i,a]},o.prototype.derive=function(t,e,r,n){var i=o.RGBtoHSB(this.r,this.g,this.b),a=i[2];0==a&&r>1&&(a=.05);var s=((i[0]+t)%360+360)%360,l=Math.max(Math.min(i[1]*e,1),0);a=Math.max(Math.min(a*r,1),0);var c=Math.max(Math.min(this.a*n,1),0),h=o.HSBtoRGB(s,l,a);return h.push(c),o.fromArray(h)},o.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},o.prototype.darker=function(){return this.derive(0,1,.7,1)},o.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),o}();function gh(o,t){if("string"==typeof o)try{o=fr.fromString(o)}catch(a){o=fr.fromArray([0,0,0])}if("string"==typeof t)try{t=fr.fromString(t)}catch(a){t=fr.fromArray([0,0,0])}var e=ln(o.r,t.r),r=ln(o.g,t.g),n=ln(o.b,t.b),i=ln(o.a,t.a);return function(a){return fr.fromArray([e(a),r(a),n(a),i(a)]).toRgbaString()}}function wl(o,t){var e=typeof t;if(null==t||"boolean"===e)return function(o){return function(){return o}}(t);if("number"===e)return ln(o,t);if("string"===e)try{return gh(o,t=fr.fromString(t))}catch(n){}return t instanceof fr?gh(o,t):t instanceof Date?function kC(o,t){var e=new Date,r=+o,n=+t;return function(i){return e.setTime(r*(1-i)+n*i),e}}(o,t):Array.isArray(t)?function LC(o,t){var a,e=t?t.length:0,r=o?Math.min(e,o.length):0,n=new Array(r),i=new Array(e);for(a=0;a<r;++a)n[a]=wl(o[a],t[a]);for(;a<e;++a)i[a]=t[a];return function(s){for(a=0;a<r;++a)i[a]=n[a](s);return i}}(o,t):"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function IC(o,t){var n,e={},r={};for(n in(null===o||"object"!=typeof o)&&(o={}),(null===t||"object"!=typeof t)&&(t={}),t)n in o?e[n]=wl(o[n],t[n]):r[n]=t[n];return function(i){for(n in e)r[n]=e[n](i);return r}}(o,t):ln(o,t)}function yh(o,t){return o<t?-1:o>t?1:o>=t?0:NaN}var Jn=function(o){return o};function Qn(o){var t,e=o[0],r=o[o.length-1];return e>r&&(t=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}([r,e],2),e=t[0],r=t[1]),function(n){return Math.max(e,Math.min(r,n))}}var Pl,Tl,Al,wh,Qe=function(){function o(){this.unknown=void 0,this.clamper=Qn,this._clamp=Jn,this._domain=[0,1],this._range=[0,1],this.transform=Jn,this.untransform=Jn,this._interpolate=wl,this.rescale()}return Object.defineProperty(o.prototype,"clamp",{get:function(){return this._clamp!==Jn},set:function(t){this._clamp=t?this.clamper(this.domain):Jn},enumerable:!0,configurable:!0}),o.prototype.setDomain=function(t){this._domain=Array.prototype.map.call(t,function(e){return+e}),this._clamp!==Jn&&(this._clamp=this.clamper(this.domain)),this.rescale()},o.prototype.getDomain=function(){return this._domain.slice()},Object.defineProperty(o.prototype,"domain",{get:function(){return this.getDomain()},set:function(t){this.setDomain(t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"range",{get:function(){return this._range.slice()},set:function(t){this._range=Array.prototype.slice.call(t),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"interpolate",{get:function(){return this._interpolate},set:function(t){this._interpolate=t,this.rescale()},enumerable:!0,configurable:!0}),o.prototype.rescale=function(){this.piecewise=Math.min(this.domain.length,this.range.length)>2?this.polymap:this.bimap,this.output=void 0,this.input=void 0},o.prototype.normalize=function(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:function(o){return function(){return o}}(isNaN(e)?NaN:.5)},o.prototype.bimap=function(t,e,r){var l,c,n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(l=this.normalize(i,n),c=r(s,a)):(l=this.normalize(n,i),c=r(a,s)),function(h){return c(l(h))}},o.prototype.polymap=function(t,e,r){var n=this,i=Math.min(t.length,e.length)-1;t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());var a=Array.from({length:i},function(l,c){return n.normalize(t[c],t[c+1])}),s=Array.from({length:i},function(l,c){return r(e[c],e[c+1])});return function(l){var c=function NC(o,t,e,r,n){for(void 0===r&&(r=0),void 0===n&&(n=o.length);r<n;){var i=r+n>>>1;e(o[i],t)>0?n=i:r=i+1}return r}(t,l,yh,1,i)-1;return s[c](a[c](l))}},o.prototype.convert=function(t,e){if(t=+t,isNaN(t))return this.unknown;this.output||(this.output=this.piecewise(this.domain.map(this.transform),this.range,this.interpolate));var r=e?e(this.domain):this._clamp;return this.output(this.transform(r(t)))},o.prototype.invert=function(t){return this.input||(this.input=this.piecewise(this.range,this.domain.map(this.transform),ln)),this._clamp(this.untransform(this.input(t)))},o}(),mh={"":function VC(o,t){var e=o.toPrecision(t);e:for(var r=e.length,n=1,i=-1,a=0;n<r;++n)switch(e[n]){case".":i=a=n;break;case"0":0===i&&(i=n),a=n;break;case"e":break e;default:i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(a+1):e},"%":function(o,t){return(100*o).toFixed(t)},b:function(o){return Math.round(o).toString(2)},c:function(o){return String(o)},d:function $C(o){return Math.abs(o=Math.round(o))>=1e21?o.toLocaleString("en").replace(/,/g,""):o.toString(10)},e:function(o,t){return o.toExponential(t)},f:function(o,t){return o.toFixed(t)},g:function(o,t){return o.toPrecision(t)},o:function(o){return Math.round(o).toString(8)},p:function(o,t){return bh(100*o,t)},r:bh,s:function UC(o,t){void 0===t&&(t=0);var e=Ta(o,t);if(!e)return String(o);var r=e[0],n=e[1],i=n-(Pl=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,a=r.length;if(i===a)return r;if(i>a)return r+new Array(i-a+1).join("0");if(i>0)return r.slice(0,i)+"."+r.slice(i);var s=Ta(o,Math.max(0,t+i-1));return"0."+new Array(1-i).join("0")+s[0]},X:function(o){return Math.round(o).toString(16).toUpperCase()},x:function(o){return Math.round(o).toString(16)}},Ch=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"],xl=function o(t){t instanceof o?(this.fill=t.fill,this.align=t.align,this.sign=t.sign,this.symbol=t.symbol,this.zero=t.zero,this.width=t.width,this.comma=t.comma,this.precision=t.precision,this.trim=t.trim,this.type=t.type,this.string=t.string):(this.fill=void 0===t.fill?" ":String(t.fill),this.align=void 0===t.align?">":String(t.align),this.sign=void 0===t.sign?"-":String(t.sign),this.symbol=void 0===t.symbol?"":String(t.symbol),this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":String(t.type),this.string=t.string)},HC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,_h=/(#\{(.*?)\})/g;function Ol(o){if(o instanceof xl)return new xl(o);var t=!1,e=o.replace(_h,function(){return t||(o=arguments[2],t=!0),"#{}"}),r=HC.exec(o);if(!r)throw new Error("Invalid format: "+o);return new xl({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10],string:t?e:void 0})}function bh(o,t){var e=Ta(o,t);if(!e)return String(o);var r=e[0],n=e[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}function Ta(o,t){var e=t?o.toExponential(t-1):o.toExponential(),r=e.indexOf("e");if(!(r<0)){var n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}}function Sh(o){return o}function ei(o){var t=Ta(Math.abs(o));return t?t[1]:NaN}!function qC(o){Tl=function e0(o){var t=void 0===o.grouping||void 0===o.thousands?Sh:function KC(o,t){return function(e,r){for(var n=[],i=e.length,a=0,s=o[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),n.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=o[a=(a+1)%o.length];return n.reverse().join(t)}}(Array.prototype.map.call(o.grouping,Number),String(o.thousands)),e=void 0===o.currency?"":String(o.currency[0]),r=void 0===o.currency?"":String(o.currency[1]),n=void 0===o.decimal?".":String(o.decimal),i=void 0===o.numerals?Sh:function YC(o){return function(t){return t.replace(/[0-9]/g,function(e){return o[+e]})}}(Array.prototype.map.call(o.numerals,String)),a=void 0===o.percent?"%":String(o.percent),s=void 0===o.minus?"\u2212":String(o.minus),l=void 0===o.nan?"NaN":String(o.nan);function c(p){var f=Ol(p),d=f.fill,v=f.align,g=f.sign,y=f.symbol,m=f.zero,C=f.width,_=f.comma,w=f.precision,P=f.trim,O=f.type;"n"===O?(_=!0,O="g"):mh[O]||(void 0===w&&(w=12),P=!0,O="g"),(m||"0"===d&&"="===v)&&(m=!0,d="0",v="=");var A="$"===y?e:"#"===y&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",E="$"===y?r:/[%p]/.test(O)?a:"",M=mh[O],R=/[defgprs%]/.test(O);return w=void 0===w?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),function B(j){var N,I=A,F=E;if("c"===O)F=M(+j)+F,N="";else{var V=+j,Y=j<0||1/V<0;if(N=isNaN(V)?l:M(Math.abs(V),w),P&&(N=function XC(o){e:for(var t=o.length,e=1,r=-1,n=0;e<t;++e)switch(o[e]){case".":r=n=e;break;case"0":0===r&&(r=e),n=e;break;default:if(!+o[e])break e;r>0&&(r=0)}return r>0?o.slice(0,r)+o.slice(n+1):o}(N)),Y&&0==+N&&"+"!==g&&(Y=!1),I=(Y?"("===g?g:s:"-"===g||"("===g?"":g)+I,F=("s"===O?Ch[8+Pl/3]:"")+F+(Y&&"("===g?")":""),R)for(var H=0,q=N.length;H<q;H++){var U=N.charCodeAt(H);if(48>U||U>57){F=(46===U?n+N.slice(H+1):N.slice(H))+F,N=N.slice(0,H);break}}}_&&!m&&(N=t(N,1/0));var te=I.length+N.length+F.length,re=te<C?new Array(C-te+1).join(d):"";switch(_&&m&&(N=t(re+N,re.length?C-F.length:1/0),re=""),v){case"<":N=I+N+F+re;break;case"=":N=I+re+N+F;break;case"^":N=re.slice(0,te=re.length>>1)+I+N+F+re.slice(te);break;default:N=re+I+N+F}var Q=f.string;return Q?Q.replace(_h,function(){return i(N)}):i(N)}}return{format:c,formatPrefix:function h(p,f){var d=Ol(p);d.type="f";var v=c(d),g=3*Math.max(-8,Math.min(8,Math.floor(ei(f)/3))),y=Math.pow(10,-g),m=Ch[8+g/3];return function(C){return v(y*+C)+m}}}}(o),Al=Tl.format,wh=Tl.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var t0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ne=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="linear",e}return t0(t,o),t.prototype.ticks=function(e){void 0===e&&(e=10);var r=this._domain;return Pa(r[0],r[r.length-1],e)},t.prototype.nice=function(e){void 0===e&&(e=10);var l,r=this.domain,n=0,i=r.length-1,a=r[n],s=r[i];s<a&&(l=a,a=s,s=l,l=n,n=i,i=l),(l=Sl(a,s,e))>0?l=Sl(a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l,e):l<0&&(l=Sl(a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l,e)),l>0?(r[n]=Math.floor(a/l)*l,r[i]=Math.ceil(s/l)*l,this.domain=r):l<0&&(r[n]=Math.ceil(a*l)/l,r[i]=Math.floor(s*l)/l,this.domain=r)},t.prototype.tickFormat=function(e,r){var n=this.domain;return function zC(o,t,e,r){var a,n=io(o,t,e),i=Ol(null==r?",f":r);switch(i.type){case"s":var s=Math.max(Math.abs(o),Math.abs(t));return null==i.precision&&!isNaN(a=function JC(o,t){var e=Math.floor(ei(t)/3);return e=Math.min(8,e),e=Math.max(-8,e),Math.max(0,3*e-ei(Math.abs(o)))}(n,s))&&(i.precision=a),wh(i,s);case"":case"e":case"g":case"p":case"r":null==i.precision&&!isNaN(a=function QC(o,t){return o=Math.abs(o),t=Math.abs(t)-o,Math.max(0,ei(t)-ei(o))+1}(n,Math.max(Math.abs(o),Math.abs(t))))&&(i.precision=a-+("e"===i.type));break;case"f":case"%":null==i.precision&&!isNaN(a=function ZC(o){return Math.max(0,-ei(Math.abs(o)))}(n))&&(i.precision=a-2*+("%"===i.type))}return Al(i)}(n[0],n[n.length-1],null==e?10:e,r)},t}(Qe);function El(o,t){for(var e=0;e<o.length;e++){var r=o[e];if(t(r,e,o))return r}}function n0(o){return o}function Bt(o,t,e){for(var a,s,l,r=e||n0,n=o.length,i=-1;++i<n;)if(t(a=o[i]))for(s=l=a;++i<n;)t(a=o[i])&&(s>a&&(s=a),l<a&&(l=a));return void 0===s||void 0===l?void 0:[r(s),r(l)]}function Ir(o){return"number"==typeof o&&Number.isFinite(o)}function xh(o){return"string"==typeof o}function Ml(o){return xh(o)||function l0(o){return!!o&&o.hasOwnProperty("toString")&&xh(o.toString())}(o)}function it(o){return function a0(o){return Ir(o)||function o0(o){return!!o&&o.hasOwnProperty("valueOf")&&Ir(o.valueOf())}(o)}(o)||function s0(o){return o instanceof Date&&!isNaN(+o)}(o)}var u0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ge=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.isContainerNode=!0,e._opacity=1,e}return u0(t,o),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){e=Math.min(1,Math.max(0,e)),this._opacity!==e&&(this._opacity=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.containsPoint=function(e,r){return!0},t.prototype.computeBBox=function(){var e=1/0,r=-1/0,n=1/0,i=-1/0;return this.dirtyTransform&&this.computeTransformMatrix(),this.children.forEach(function(a){if(a.visible){var s=a.computeBBox();if(s){if(!(a instanceof t)){a.dirtyTransform&&a.computeTransformMatrix();for(var l=kr.flyweight(a.matrix),c=a.parent;c;)l.preMultiplySelf(c.matrix),c=c.parent;l.transformBBox(s,0,s)}var h=s.x,p=s.y;h<e&&(e=h),p<n&&(n=p),h+s.width>r&&(r=h+s.width),p+s.height>i&&(i=p+s.height)}}}),new Ie(e,n,r-e,i-n)},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this.children,n=r.length;e.globalAlpha*=this.opacity,this.dirtyZIndex&&(this.dirtyZIndex=!1,r.sort(function(s,l){return s.zIndex-l.zIndex}));for(var i=0;i<n;i++){var a=r[i];a.visible&&(e.save(),a.render(e),e.restore())}},t.className="Group",t}(hr),Oh=function(){function o(t,e){this.next=null,this.scene=t.scene,this.parent=t,this.datum=e}return o.prototype.appendChild=function(t){if(null===this.next)return this.parent.insertBefore(t,null);if(!hr.isNode(this.next))throw new Error(this.next+" is not a Node.");return this.parent.insertBefore(t,this.next)},o.prototype.insertBefore=function(t,e){return this.parent.insertBefore(t,e)},o}(),je=function(){function o(t,e){this.groups=t,this.parents=e}return o.select=function(t){return new o([["function"==typeof t?t():t]],[void 0])},o.selectAll=function(t){return new o([null==t?[]:t],[void 0])},o.prototype.append=function(t){return this.select(function(e){return e.appendChild(new t)})},o.prototype.appendFn=function(t){return this.select(function(e,r,n,i){return e.appendChild(t(e,r,n,i))})},o.prototype.select=function(t){for(var e=this.groups,r=e.length,n=[],i=0;i<r;i++)for(var a=e[i],s=a.length,l=n[i]=new Array(s),c=0;c<s;c++){var h=a[c];if(h){var p=t(h,h.datum,c,a);p&&(p.datum=h.datum),l[c]=p}}return new o(n,this.parents)},o.prototype.selectByClass=function(t){return this.select(function(e){if(hr.isNode(e))for(var r=e.children,n=r.length,i=0;i<n;i++){var a=r[i];if(a instanceof t)return a}})},o.prototype.selectByTag=function(t){return this.select(function(e){if(hr.isNode(e))for(var r=e.children,n=r.length,i=0;i<n;i++){var a=r[i];if(a.tag===t)return a}})},o.prototype.selectAllByClass=function(t){return this.selectAll(function(e){var r=[];if(hr.isNode(e))for(var n=e.children,i=n.length,a=0;a<i;a++){var s=n[a];s instanceof t&&r.push(s)}return r})},o.prototype.selectAllByTag=function(t){return this.selectAll(function(e){var r=[];if(hr.isNode(e))for(var n=e.children,i=n.length,a=0;a<i;a++){var s=n[a];s.tag===t&&r.push(s)}return r})},o.prototype.selectNone=function(){return[]},o.prototype.selectAll=function(t){t||(t=this.selectNone);for(var e=[],r=[],n=this.groups,i=n.length,a=0;a<i;a++)for(var s=n[a],l=s.length,c=0;c<l;c++){var h=s[c];h&&(e.push(t(h,h.datum,c,s)),r.push(h))}return new o(e,r)},o.prototype.each=function(t){for(var e=this.groups,r=e.length,n=0;n<r;n++)for(var i=e[n],a=i.length,s=0;s<a;s++){var l=i[s];l&&t(l,l.datum,s,i)}return this},o.prototype.remove=function(){return this.each(function(t){if(hr.isNode(t)){var e=t.parent;e&&e.removeChild(t)}})},o.prototype.merge=function(t){for(var e=this.groups,r=t.groups,n=e.length,a=Math.min(n,r.length),s=new Array(n),l=0;l<a;l++)for(var c=e[l],h=r[l],p=c.length,f=s[l]=new Array(p),d=0;d<p;d++)f[d]=c[d]||h[d]||void 0;for(;l<n;l++)s[l]=e[l];return new o(s,this.parents)},o.prototype.node=function(){for(var t=this.groups,e=t.length,r=0;r<e;r++)for(var n=t[r],i=n.length,a=0;a<i;a++){var s=n[a];if(s)return s}return null},o.prototype.attr=function(t,e){return this.each(function(r){r[t]=e}),this},o.prototype.attrFn=function(t,e){return this.each(function(r,n,i,a){r[t]=e(r,n,i,a)}),this},o.prototype.call=function(t){return t(this),this},Object.defineProperty(o.prototype,"size",{get:function(){var t=0;return this.each(function(){return t++}),t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){var t=[];return this.each(function(e,r){return t.push(r)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"enter",{get:function(){return new o(this.enterGroups?this.enterGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"exit",{get:function(){return new o(this.exitGroups?this.exitGroups:[[]],this.parents)},enumerable:!0,configurable:!0}),o.prototype.setDatum=function(t){return this.each(function(e){e.datum=t})},Object.defineProperty(o.prototype,"datum",{get:function(){var t=this.node();return t?t.datum:null},enumerable:!0,configurable:!0}),o.prototype.setData=function(t,e){if("function"!=typeof t){var r=t;t=function(){return r}}for(var n=this.groups,i=this.parents,a=n.length,s=new Array(a),l=new Array(a),c=new Array(a),h=0;h<a;h++){var p=n[h],f=i[h];if(!f)throw new Error("Group #"+h+" has no parent: "+p);var d=p.length,v=t(f,f.datum,h,i),g=v.length,y=l[h]=new Array(g),m=s[h]=new Array(g),C=c[h]=new Array(d);e?this.bindKey(f,p,y,m,C,v,e):this.bindIndex(f,p,y,m,C,v);for(var _=0,w=0;_<g;_++){var P=y[_];if(P){_>=w&&(w=_+1);for(var O=void 0;!(O=m[w])&&w<g;)w++;P.next=O||null}}}var A=new o(s,i);return A.enterGroups=l,A.exitGroups=c,A},o.prototype.bindIndex=function(t,e,r,n,i,a){for(var s=e.length,l=a.length,c=0;c<l;c++)(h=e[c])?(h.datum=a[c],n[c]=h):r[c]=new Oh(t,a[c]);for(;c<s;c++){var h;(h=e[c])&&(i[c]=h)}},o.prototype.bindKey=function(t,e,r,n,i,a,s){for(var l=e.length,c=a.length,h=new Array(l),p={},f=0;f<l;f++)(d=e[f])&&((v=h[f]=o.keyPrefix+s(d,d.datum,f,e))in p?i[f]=d:p[v]=d);for(f=0;f<c;f++){var v;(d=p[v=o.keyPrefix+s(t,a[f],f,a)])?(n[f]=d,d.datum=a[f],p[v]=void 0):r[f]=new Oh(t,a[f])}for(f=0;f<l;f++){var d;(d=e[f])&&p[h[f]]===d&&(i[f]=d)}},o.keyPrefix="$",o}(),c0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),jt=function(o){function t(){var e=o.call(this)||this;return e._x1=0,e._y1=0,e._x2=0,e._y2=0,e.restoreOwnStyles(),e}return c0(t,o),Object.defineProperty(t.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1!==e&&(this._x1=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1!==e&&(this._y1=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2!==e&&(this._x2=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2!==e&&(this._y2=e,this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){return new Ie(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},t.prototype.isPointInPath=function(e,r){return!1},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this.x1,n=this.y1,i=this.x2,a=this.y2;if(r===i){var s=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=s,i=s}else if(n===a){var l=Math.round(n)+Math.floor(this.strokeWidth)%2/2;n=l,a=l}e.beginPath(),e.moveTo(r,n),e.lineTo(i,a),this.fillStroke(e),this.dirty=!1},t.className="Line",t.defaultStyles=Oa(Lr.defaultStyles,{fill:void 0,strokeWidth:1}),t}(Lr),Ph=Math.sign?Math.sign:function(o){return 0==(o=+o)||isNaN(o)?o:o>0?1:-1};function Dl(o,t,e,r,n,i,a,s){var l=(e-o)*(s-i)-(r-t)*(a-n);if(0===l)return null;var c=((a-n)*(t-i)-(o-n)*(s-i))/l,h=((e-o)*(t-i)-(r-t)*(o-n))/l;return c>=0&&c<=1&&h>=0&&h<=1?{x:o+c*(e-o),y:t+c*(r-t)}:null}function d0(o,t,e,r,n,i,a,s,l,c,h,p){for(var f=[],d=c-p,v=h-l,g=l*(p-c)-c*(h-l),y=Th(o,e,n,a),m=Th(t,r,i,s),O=function p0(o,t,e,r){if(0===o)return function f0(o,t,e){if(0===o)return function h0(o,t){var e=-t/o;return 0!==o&&e>=0&&e<=1?[e]:[]}(t,e);var r=t*t-4*o*e,n=[];if(0===r){var i=-t/(2*o);i>=0&&i<=1&&n.push(i)}else if(r>0){var a=Math.sqrt(r),s=(-t-a)/(2*o),l=(-t+a)/(2*o);s>=0&&s<=1&&n.push(s),l>=0&&l<=1&&n.push(l)}return n}(t,e,r);var n=t/o,i=e/o,s=(3*i-n*n)/9,l=(9*n*i-r/o*27-2*n*n*n)/54,c=s*s*s+l*l,h=1/3,p=[];if(c>=0){var f=Math.sqrt(c),d=Ph(l+f)*Math.pow(Math.abs(l+f),h),v=Ph(l-f)*Math.pow(Math.abs(l-f),h),g=Math.abs(Math.sqrt(3)*(d-v)/2),y=-h*n+(d+v);if(y>=0&&y<=1&&p.push(y),0===g){var m=-h*n-(d+v)/2;m>=0&&m<=1&&p.push(m)}}else{var C=Math.acos(l/Math.sqrt(-s*s*s)),_=h*n,w=2*Math.sqrt(-s),P=w*Math.cos(h*C)-_,O=w*Math.cos(h*(C+2*Math.PI))-_,A=w*Math.cos(h*(C+4*Math.PI))-_;P>=0&&P<=1&&p.push(P),O>=0&&O<=1&&p.push(O),A>=0&&A<=1&&p.push(A)}return p}(d*y[0]+v*m[0],d*y[1]+v*m[1],d*y[2]+v*m[2],d*y[3]+v*m[3]+g),A=0;A<O.length;A++){var I,E=O[A],M=E*E,R=E*M,B=y[0]*R+y[1]*M+y[2]*E+y[3],j=m[0]*R+m[1]*M+m[2]*E+m[3];(I=l!==h?(B-l)/(h-l):(j-c)/(p-c))>=0&&I<=1&&f.push({x:B,y:j})}return f}function Th(o,t,e,r){return[3*t-o-3*e+r,3*o-6*t+3*e,-3*o+3*t,o]}var Ah=function(){function o(){this.commands=[],this.params=[],this._closedPath=!1}return o.prototype.draw=function(t){var e=this.commands,r=this.params,n=e.length,i=0;t.beginPath();for(var a=0;a<n;a++)switch(e[a]){case"M":t.moveTo(r[i++],r[i++]);break;case"L":t.lineTo(r[i++],r[i++]);break;case"C":t.bezierCurveTo(r[i++],r[i++],r[i++],r[i++],r[i++],r[i++]);break;case"Z":t.closePath()}},o.prototype.moveTo=function(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push("M"),this.params.push(t,e)},o.prototype.lineTo=function(t,e){this.xy?(this.commands.push("L"),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)},o.prototype.rect=function(t,e,r,n){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.closePath()},o.prototype.arcTo=function(t,e,r,n,i,a,s){var l=this.xy;if(l){t<0&&(t=-t),e<0&&(e=-e);var c=l[0],h=l[1],p=(c-a)/2,f=(h-s)/2,d=Math.sin(r),v=Math.cos(r),g=v*p+d*f,y=-d*p+v*f,m=g/t,C=y/e,_=m*m+C*C,w=(c+a)/2,P=(h+s)/2,O=0,A=0;_>=1?(t*=_=Math.sqrt(_),e*=_):(_=Math.sqrt(1/_-1),n===i&&(_=-_),w+=v*(O=_*t*C)-d*(A=-_*e*m),P+=d*O+v*A);var E=Math.atan2((y-A)/e,(g-O)/t),M=Math.atan2((-y-A)/e,(-g-O)/t)-E;this.cubicArc(w,P,t,e,r,E,E+M,1-i)}},o.cubicArc=function(t,e,r,n,i,a,s,l,c,h){if(h){var p=l;l=c,c=p}var f=e.length,d=.5522847498307935,v=Math.sin(l),g=Math.cos(l),y=Math.sin(s),m=Math.cos(s),C=Math.PI/2,_=m*g*i-y*v*a,w=y*g*i+m*v*a,P=-m*v*i-y*g*a,O=-y*v*i+m*g*a;for((c-=l)<0&&(c+=2*Math.PI),t.push("M"),e.push(_+r,w+n);c>=C;){c-=C,t.push("C");var A=P+r;e.push(_+P*d+r,w+O*d+n,_*d+P+r,w*d+O+n,Math.abs(A)<1e-8?0:A,O+n),p=_,_=P,P=-p,p=w,w=O,O=-p}if(c){var E=1.3333333333333333*Math.tan(c/4),M=Math.sin(c),R=Math.cos(c),B=R+E*M,j=M-E*R;t.push("C"),A=_*R+P*M+r,e.push(_+P*E+r,w+O*E+n,_*B+P*j+r,w*B+O*j+n,Math.abs(A)<1e-8?0:A,w*R+O*M+n)}if(h)for(var I=f,F=e.length-2;I<F;I+=2,F-=2)p=e[I],e[I]=e[F],e[F]=p,p=e[I+1],e[I+1]=e[F+1],e[F+1]=p},o.prototype.cubicArc=function(t,e,r,n,i,a,s,l){var c=this.commands,h=this.params,p=c.length;o.cubicArc(c,h,t,e,r,n,i,a,s,l);var f=h[h.length-2],d=h[h.length-1];this.xy?(c[p]="L",this.xy[0]=f,this.xy[1]=d):this.xy=[f,d]},o.prototype.deCasteljau=function(t,e){var r=t.length;if(r<2||r%2==1)throw new Error("Fewer than two points or not an even count.");if(2===r||0===e)return t.slice(0,2);if(1===e)return t.slice(-2);for(var n=[],i=r-2,a=0;a<i;a+=2)n.push((1-e)*t[a]+e*t[a+2],(1-e)*t[a+1]+e*t[a+3]);return this.deCasteljau(n,e)},o.prototype.approximateCurve=function(t,e){var r=this.deCasteljau(t,0);this.moveTo(r[0],r[1]);for(var n=1/e,i=n;i<=1;i+=n){var a=this.deCasteljau(t,i);this.lineTo(a[0],a[1])}},o.prototype.quadraticCurveTo=function(t,e,r,n){this.xy||this.moveTo(t,e),this.cubicCurveTo((this.xy[0]+2*t)/3,(this.xy[1]+2*e)/3,(2*t+r)/3,(2*e+n)/3,r,n)},o.prototype.cubicCurveTo=function(t,e,r,n,i,a){this.xy||this.moveTo(t,e),this.commands.push("C"),this.params.push(t,e,r,n,i,a),this.xy[0]=i,this.xy[1]=a},Object.defineProperty(o.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!0,configurable:!0}),o.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push("Z"),this._closedPath=!0)},o.prototype.clear=function(){this.commands.length=0,this.params.length=0,this.xy=void 0,this._closedPath=!1},o.prototype.isPointInPath=function(t,e){for(var r=this.commands,n=this.params,i=r.length,a=-1e4,s=-1e4,l=NaN,c=NaN,h=0,p=0,f=0,d=0,v=0;d<i;d++)switch(r[d]){case"M":isNaN(l)||Dl(l,c,h,p,a,s,t,e)&&f++,l=h=n[v++],c=p=n[v++];break;case"L":Dl(h,p,h=n[v++],p=n[v++],a,s,t,e)&&f++;break;case"C":f+=d0(h,p,n[v++],n[v++],n[v++],n[v++],h=n[v++],p=n[v++],a,s,t,e).length;break;case"Z":isNaN(l)||Dl(l,c,h,p,a,s,t,e)&&f++}return f%2==1},o.fromString=function(t){var e=new o;return e.setFromString(t),e},o.parseSvgPath=function(t){return t.trim().split(o.splitCommandsRe).map(function(e){var r=e.match(o.matchParamsRe);return{command:e.substr(0,1),params:r?r.map(parseFloat):[]}})},o.prettifySvgPath=function(t){return o.parseSvgPath(t).map(function(e){return e.command+e.params.join(",")}).join("\n")},o.prototype.setFromString=function(t){var n,i,a,s,l,e=this;function c(){l.match(o.quadraticCommandRe)||(a=n,s=i)}function h(){l.match(o.cubicCommandRe)||(a=n,s=i)}this.clear(),o.parseSvgPath(t).forEach(function(p){var f=p.params,d=f.length,v=0;switch(p.command){case"M":for(e.moveTo(n=f[v++],i=f[v++]);v<d;)e.lineTo(n=f[v++],i=f[v++]);break;case"m":for(e.moveTo(n+=f[v++],i+=f[v++]);v<d;)e.lineTo(n+=f[v++],i+=f[v++]);break;case"L":for(;v<d;)e.lineTo(n=f[v++],i=f[v++]);break;case"l":for(;v<d;)e.lineTo(n+=f[v++],i+=f[v++]);break;case"C":for(;v<d;)e.cubicCurveTo(f[v++],f[v++],a=f[v++],s=f[v++],n=f[v++],i=f[v++]);break;case"c":for(;v<d;)e.cubicCurveTo(n+f[v++],i+f[v++],a=n+f[v++],s=i+f[v++],n+=f[v++],i+=f[v++]);break;case"S":for(h();v<d;)e.cubicCurveTo(n+n-a,i+i-s,a=f[v++],s=f[v++],n=f[v++],i=f[v++]);break;case"s":for(h();v<d;)e.cubicCurveTo(n+n-a,i+i-s,a=n+f[v++],s=i+f[v++],n+=f[v++],i+=f[v++]);break;case"Q":for(;v<d;)e.quadraticCurveTo(a=f[v++],s=f[v++],n=f[v++],i=f[v++]);break;case"q":for(;v<d;)e.quadraticCurveTo(a=n+f[v++],s=i+f[v++],n+=f[v++],i+=f[v++]);break;case"T":for(c();v<d;)e.quadraticCurveTo(a=n+n-a,s=i+i-s,n=f[v++],i=f[v++]);break;case"t":for(c();v<d;)e.quadraticCurveTo(a=n+n-a,s=i+i-s,n+=f[v++],i+=f[v++]);break;case"A":for(;v<d;)e.arcTo(f[v++],f[v++],f[v++]*Math.PI/180,f[v++],f[v++],n=f[v++],i=f[v++]);break;case"a":for(;v<d;)e.arcTo(f[v++],f[v++],f[v++]*Math.PI/180,f[v++],f[v++],n+=f[v++],i+=f[v++]);break;case"Z":case"z":e.closePath();break;case"H":for(;v<d;)e.lineTo(n=f[v++],i);break;case"h":for(;v<d;)e.lineTo(n+=f[v++],i);break;case"V":for(;v<d;)e.lineTo(n,i=f[v++]);break;case"v":for(;v<d;)e.lineTo(n,i+=f[v++])}l=p.command})},o.prototype.toString=function(){for(var t=this.commands,e=this.params,r=t.length,n=[],i=0,a=0;i<r;i++)switch(t[i]){case"M":n.push("M"+e[a++]+","+e[a++]);break;case"L":n.push("L"+e[a++]+","+e[a++]);break;case"C":n.push("C"+e[a++]+","+e[a++]+" "+e[a++]+","+e[a++]+" "+e[a++]+","+e[a++]);break;case"Z":n.push("Z")}return n.join("")},o.prototype.toPrettyString=function(){return o.prettifySvgPath(this.toString())},o.prototype.toSvg=function(){return o.xmlDeclaration+'\n<svg width="100%" height="100%" viewBox="0 0 50 50" version="1.1" xmlns="'+o.xmlns+'">\n    <path d="'+this.toString()+'" style="fill:none;stroke:#000;stroke-width:0.5;"/>\n</svg>'},o.prototype.toDebugSvg=function(){var t=o.prettifySvgPath(this.toString());return o.xmlDeclaration+'\n<svg width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="'+o.xmlns+'">\n    <path d="'+t+'" style="fill:none;stroke:#000;stroke-width:0.5;"/>\n</svg>'},o.prototype.toCubicPaths=function(){var r,n,i,a,s,t=[],e=this.params,l=0;return this.commands.forEach(function(c){switch(c){case"M":r=[n=a=e[l++],i=s=e[l++]],t.push(r);break;case"L":var h=e[l++],p=e[l++];r.push((a+a+h)/3,(s+s+p)/3,(a+h+h)/3,(s+p+p)/3,a=h,s=p);break;case"C":r.push(e[l++],e[l++],e[l++],e[l++],a=e[l++],s=e[l++]);break;case"Z":r.push((a+a+n)/3,(s+s+i)/3,(a+n+n)/3,(s+i+i)/3,a=n,s=i)}}),t},o.cubicPathToString=function(t){var e=t.length;if(!(e%2==0&&(e/2-1)/2>=1))throw new Error("Invalid path.");return"M"+t.slice(0,2).join(",")+"C"+t.slice(2).join(",")},o.splitCommandsRe=/(?=[AaCcHhLlMmQqSsTtVvZz])/g,o.matchParamsRe=/-?[0-9]*\.?\d+/g,o.quadraticCommandRe=/[QqTt]/,o.cubicCommandRe=/[CcSs]/,o.xmlDeclaration='<?xml version="1.0" encoding="UTF-8"?>',o.xmlns="http://www.w3.org/2000/svg",o}(),v0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),lt=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.path=new Ah,e._dirtyPath=!0,e._svgPath="",e}return v0(t,o),Object.defineProperty(t.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"svgPath",{get:function(){return this._svgPath},set:function(e){this._svgPath!==e&&(this._svgPath=e,this.path.setFromString(e),this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.path.closedPath&&this.path.isPointInPath(n.x,n.y)},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.updatePath=function(){},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e),this.dirtyPath&&(this.updatePath(),this.dirtyPath=!1),this.path.draw(e),this.fillStroke(e),this.dirty=!1},t.className="Path",t}(Lr),Zt=2*Math.PI;function Ot(o){return o%=Zt,(o+=Zt)%Zt}function Be(o){return o/180*Math.PI}function Eh(o,t,e){return void 0===e&&(e=1e-10),Math.abs(o-t)<e}function Rl(o,t){void 0===t&&(t=2);var e=Math.floor(Math.log(Math.abs(o))/Math.LN10);return e>=0||!isFinite(e)?o.toFixed(t):o.toFixed(Math.abs(e)-1+t)}var C0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),un=(()=>(function(o){o[o.Open=0]="Open",o[o.Chord=1]="Chord",o[o.Round=2]="Round"}(un||(un={})),un))(),Fl=function(o){function t(){var e=o.call(this)||this;return e._centerX=0,e._centerY=0,e._radiusX=10,e._radiusY=10,e._startAngle=0,e._endAngle=2*Math.PI,e._counterClockwise=!1,e._type=un.Open,e.restoreOwnStyles(),e}return C0(t,o),Object.defineProperty(t.prototype,"centerX",{get:function(){return this._centerX},set:function(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this._centerY},set:function(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radiusX",{get:function(){return this._radiusX},set:function(e){this._radiusX!==e&&(this._radiusX=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radiusY",{get:function(){return this._radiusY},set:function(e){this._radiusY!==e&&(this._radiusY=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){return this._startAngle},set:function(e){this._startAngle!==e&&(this._startAngle=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this._endAngle},set:function(e){this._endAngle!==e&&(this._endAngle=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPie",{get:function(){return Eh(Ot(this.startAngle),Ot(this.endAngle))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"counterClockwise",{get:function(){return this._counterClockwise},set:function(e){this._counterClockwise!==e&&(this._counterClockwise=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),t.prototype.updatePath=function(){var e=this.path;e.clear(),e.cubicArc(this.centerX,this.centerY,this.radiusX,this.radiusY,0,this.startAngle,this.endAngle,this.counterClockwise?1:0),this.type===un.Chord?e.closePath():this.type===un.Round&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())},t.prototype.computeBBox=function(){return new Ie(this.centerX-this.radiusX,this.centerY-this.radiusY,2*this.radiusX,2*this.radiusY)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r),i=this.computeBBox();return this.type!==un.Open&&i.containsPoint(n.x,n.y)&&this.path.isPointInPath(n.x,n.y)},t.className="Arc",t.defaultStyles=Oa(Lr.defaultStyles,{lineWidth:1,fillStyle:null}),t}(lt),Mh={};function Aa(o,t){Mh[t]||(o(),Mh[t]=!0)}var Dh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},pr=(()=>(function(o){o[o.Tick=0]="Tick",o[o.GridLine=1]="GridLine"}(pr||(pr={})),pr))(),b0=function o(){this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0},Rh=function(){function o(){this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.onFormatChange=void 0}return Object.defineProperty(o.prototype,"format",{get:function(){return this._format},set:function(t){this._format!==t&&(this._format=t,this.onFormatChange&&this.onFormatChange(t))},enumerable:!0,configurable:!0}),o}(),S0=function(){function o(t){this.id=Zn(this),this.lineNode=new jt,this.group=new Ge,this.line={width:1,color:"rgba(195, 195, 195, 1)"},this.tick=new b0,this.label=new Rh,this.translation={x:0,y:0},this.rotation=0,this._labelAutoRotated=!1,this._calculatedTickCount=void 0,this.requestedRange=[0,1],this._visibleRange=[0,1],this._title=void 0,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this._radialGrid=!1,this.fractionDigits=0,this.thickness=0,this.scale=t,this.groupSelection=je.select(this.group).selectAll(),this.label.onFormatChange=this.onLabelFormatChange.bind(this),this.group.append(this.lineNode)}return Object.defineProperty(o.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this.requestedRange=t.range.slice(),this.onLabelFormatChange()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ticks",{get:function(){return this._ticks},set:function(t){this._ticks=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"labelAutoRotated",{get:function(){return this._labelAutoRotated},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"calculatedTickCount",{get:function(){var t;return null!=(t=this._calculatedTickCount)?t:this.tick.count},enumerable:!0,configurable:!0}),o.prototype.calculateTickCount=function(t){},o.prototype.getMeta=function(){},o.prototype.updateRange=function(){var t=this,e=t.requestedRange,r=t.visibleRange,i=(e[1]-e[0])/(r[1]-r[0]),s=e[0]-i*r[0];t.scale.range=[s,s+i]},o.prototype.inRange=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=0),0===this.inRangeEx(t,e,r)},o.prototype.inRangeEx=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0);var n=this.range,i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return t+e<i-r?-1:t>a+r?1:0},Object.defineProperty(o.prototype,"range",{get:function(){return this.requestedRange.slice()},set:function(t){this.requestedRange=t.slice(),this.updateRange()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"visibleRange",{get:function(){return this._visibleRange.slice()},set:function(t){if(t&&2===t.length){var e=Dh(t,2),r=e[0],n=e[1];r=Math.max(0,r),n=Math.min(1,n),r=Math.min(r,n),n=Math.max(r,n),this._visibleRange=[r,n],this.updateRange()}},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"domain",{get:function(){return this.scale.domain.slice()},set:function(t){this.scale.domain=t.slice(),this.onLabelFormatChange(this.label.format)},enumerable:!0,configurable:!0}),o.prototype.onLabelFormatChange=function(t){if(t&&this.scale&&this.scale.tickFormat)try{this.labelFormatter=this.scale.tickFormat(this.calculatedTickCount,t)}catch(e){this.labelFormatter=void 0,Aa(function(){return console.warn("AG Charts - the axis label format string "+t+" is invalid. No formatting will be applied")},"invalid axis label format string "+t)}else this.labelFormatter=void 0},Object.defineProperty(o.prototype,"title",{get:function(){return this._title},set:function(t){var e=this._title;e!==t&&(e&&this.group.removeChild(e.node),t&&(t.node.rotation=-Math.PI/2,this.group.appendChild(t.node)),this._title=t,this.positionTitle())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gridLength",{get:function(){return this._gridLength},set:function(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.groupSelection=this.groupSelection.remove().setData([])),this._gridLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"radialGrid",{get:function(){return this._radialGrid},set:function(t){this._radialGrid!==t&&(this._radialGrid=t,this.groupSelection=this.groupSelection.remove().setData([]))},enumerable:!0,configurable:!0}),o.prototype.update=function(){var t=this,e=this,r=e.group,n=e.scale,i=e.tick,a=e.label,s=e.gridStyle,l=e.requestedRange,c=Math.min(l[0],l[1]),h=Math.max(l[0],l[1]),p=Be(this.rotation),f=a.rotation?Ot(Be(a.rotation)):0,d=a.parallel,v=0;r.translationX=this.translation.x,r.translationY=this.translation.y,r.rotation=p;var g=(n.bandwidth||0)/2,y=a.mirrored?1:-1,m=Ot(p),C=!f&&m>=0&&m<=Math.PI?-1:1,_=Ot(p-Math.PI/2),w=!f&&_>=0&&_<=Math.PI?-1:1,P=this.ticks||n.ticks(this.calculatedTickCount),O=this.groupSelection.setData(P);O.exit.remove();var A=O.enter.append(Ge);A.append(jt).each(function(Z){return Z.tag=pr.Tick}),this.gridLength&&(this.radialGrid?A.append(Fl).each(function(Z){return Z.tag=pr.GridLine}):A.append(jt).each(function(Z){return Z.tag=pr.GridLine})),A.append(nt);var E=O.merge(A),M=!1;if(E.attrFn("translationY",function(Z,Pe){return Math.round(n.convert(Pe)+g)}).attrFn("visible",function(Z){var Pe=Math.floor(c),fe=Math.ceil(h),K=Pe!==fe&&Z.translationY>=Pe&&Z.translationY<=fe;return M=K||M,K}),this.group.visible=M,M){this.fractionDigits=P.fractionDigits>=0?P.fractionDigits:0;var R=new Map,B=0,j=!1,I=!1,F=h-c,N=E.selectByClass(nt).each(function(Z,Pe,fe){Z.fontStyle=a.fontStyle,Z.fontWeight=a.fontWeight,Z.fontSize=a.fontSize,Z.fontFamily=a.fontFamily,Z.fill=a.color,Z.text=t.formatTickDatum(Pe,fe),Z.visible=Z.parent.visible,!0===Z.visible&&(R.set(fe,Z.computeBBox()),""!==Z.text&&null!=Z.text&&(B++,0===fe&&Z.translationY===n.range[0]?j=!0:fe===P.length-1&&Z.translationY===n.range[1]&&(I=!0)))}),V=y*(i.size+a.padding),Y=F/B,$=function(Z,Pe){var fe,K,pe=0,We=!1,Me=Z.size-1;try{for(var Ut=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z.entries()),kt=Ut.next();!kt.done;kt=Ut.next()){var Oi=Dh(kt.value,2),Pi=Oi[0],Ti=Oi[1],Ai=0===Pi&&j||Pi===Me&&I?2:1,Ei=Pe?Ti.width/Ai:Ti.height/Ai,Mi=Ei<=0?0:Ei+12;pe+=Mi,Mi>Y&&(We=!0)}}catch(Do){fe={error:Do}}finally{try{kt&&!kt.done&&(K=Ut.return)&&K.call(Ut)}finally{if(fe)throw fe.error}}return{totalLength:pe,rotate:We}},J=d,H=$(R,J),q=H.totalLength,U=H.rotate;this._labelAutoRotated=!1,void 0===a.rotation&&!0===a.autoRotate&&U&&(v=Ot(Be(a.autoRotateAngle)),this._labelAutoRotated=!0),(f||v)&&(J=d?f===Math.PI||v===Math.PI:f===Math.PI/2||f===Math.PI+Math.PI/2||v===Math.PI/2||v===Math.PI+Math.PI/2,q=$(R,J).totalLength);var te=d?C*Math.PI/2:-1===w?Math.PI:0,re=d&&!f?y*C==-1?"hanging":"bottom":"middle",Q=f>0&&f<=Math.PI||v>0&&v<=Math.PI?-1:1,se=d?f||v?y*Q==-1?"end":"start":"center":y*w==-1?"end":"start";if(N.each(function(Z){""!==Z.text&&null!=Z.text?(Z.textBaseline=re,Z.textAlign=se,Z.x=V,Z.rotationCenterX=V,Z.rotation=te+f+v):Z.visible=!1}),q>F){var de=n instanceof Qe,Ae=Math.floor(F/(q/B)),me=Ae>2?Math.ceil(B/Ae):B,ge=0;N.each(function(Z,Pe,fe){!0===Z.visible&&(Z.visible=!((!de||void 0!==t.tick.count||0!==fe&&fe!==B-1)&&ge%me!=0),ge++,Z.visible||R.delete(fe))})}if(E.selectByTag(pr.Tick).each(function(Z,Pe,fe){Z.strokeWidth=i.width,Z.stroke=i.color,Z.visible=R.has(fe)}).attr("x1",y*i.size).attr("x2",0).attr("y1",0).attr("y2",0),this.gridLength&&s.length){var Ee=s.length,xe=void 0;if(this.radialGrid){var Ue=function g0(o){return o%=Zt,(o+=Zt)!==Zt&&(o%=Zt),o}(Be(this.gridLength));xe=E.selectByTag(pr.GridLine).each(function(Z,Pe,fe){var K=Math.round(n.convert(Pe)+g);Z.centerX=0,Z.centerY=n.range[0]-K,Z.endAngle=Ue,Z.radiusX=K,Z.radiusY=K,Z.visible=R.has(fe)})}else xe=E.selectByTag(pr.GridLine).each(function(Z,Pe,fe){Z.x1=0,Z.x2=-y*t.gridLength,Z.y1=0,Z.y2=0,Z.visible=Math.abs(Z.parent.translationY-n.range[0])>1&&R.has(fe)});xe.each(function(Z,Pe,fe){var K=s[fe%Ee];Z.stroke=K.stroke,Z.strokeWidth=i.width,Z.lineDash=K.lineDash,Z.fill=void 0})}this.groupSelection=E;var De=this.lineNode;De.x1=0,De.x2=0,De.y1=l[0],De.y2=l[1],De.strokeWidth=this.line.width,De.stroke=this.line.color,De.visible=P.length>0,this.positionTitle()}else this.groupSelection=E},o.prototype.positionTitle=function(){var e=this.title;if(e){var n=!1;if(e.enabled&&this.lineNode.visible){n=!0;var i=this,l=i.requestedRange,c=i.label.mirrored?1:-1,h=Ot(i.rotation),p=e.padding.bottom,f=e.node,d=this.computeBBox({excludeTitle:!0}),v=-1===c&&h>Math.PI&&h<2*Math.PI?-1:1;f.rotation=v*c*Math.PI/2,f.x=v*c*(l[0]+l[1])/2,f.y=-1===c?v*(-p-d.width+Math.max(d.x+d.width,0)):-p-d.width-Math.min(d.x,0),f.textBaseline=1===v?"bottom":"top"}e.node.visible=n}},o.prototype.formatTickDatum=function(t,e){var r=this,n=r.label,i=r.labelFormatter,a=r.fractionDigits,s=this.getMeta();return n.formatter?n.formatter({value:a>=0?t:String(t),index:e,fractionDigits:a,formatter:i,axis:s}):i?i(t):"number"==typeof t&&a>=0?t.toFixed(a):String(t)},o.prototype.formatDatum=function(t){return String(t)},o.prototype.computeBBox=function(t){var r=this.title,n=this.lineNode,i=this.groupSelection.selectByClass(nt),a=1/0,s=-1/0,l=1/0,c=-1/0;if(i.each(function(v){v.computeTransformMatrix();var g=kr.flyweight(v.matrix),y=v.parent;y.computeTransformMatrix(),g.preMultiplySelf(y.matrix);var m=v.computeBBox();if(m){var C=g.transformBBox(m);a=Math.min(a,C.x),s=Math.max(s,C.x+C.width),l=Math.min(l,C.y),c=Math.max(c,C.y+C.height)}}),r&&r.enabled&&n.visible&&(!t||!t.excludeTitle)){var h=r.node;h.computeTransformMatrix();var p=kr.flyweight(h.matrix),f=h.computeBBox();if(f){var d=p.transformBBox(f);a=Math.min(a,d.x),s=Math.max(s,d.x+d.width),l=Math.min(l,d.y),c=Math.max(c,d.y+d.height)}}return a=Math.min(a,0),s=Math.max(s,0),l=Math.min(l,n.y1,n.y2),c=Math.max(c,n.y1,n.y2),new Ie(a,l,s-a,c-l)},o}(),w0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ye=(()=>(function(o){o.X="x",o.Y="y"}(ye||(ye={})),ye))();function Fh(o){return o===ye.X?ye.Y:ye.X}var oe=(()=>(function(o){o.Top="top",o.Right="right",o.Bottom="bottom",o.Left="left",o.Angle="angle",o.Radius="radius"}(oe||(oe={})),oe))(),Ea=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.keys=[],e.direction=ye.Y,e.boundSeries=[],e._position=oe.Left,e}return w0(t,o),Object.defineProperty(t.prototype,"type",{get:function(){return this.constructor.type||""},enumerable:!0,configurable:!0}),t.prototype.getMeta=function(){return{id:this.id,direction:this.direction,boundSeries:this.boundSeries}},t.prototype.useCalculatedTickCount=function(){return this.scale instanceof Ne},t.prototype.calculateTickCount=function(e){if(this.useCalculatedTickCount()){var i=Math.pow(Math.log(e)/Math.log(600),2);this._calculatedTickCount=this.tick.count||Math.max(2,Math.floor(e/(70*i)))}},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){if(this._position!==e)switch(this._position=e,e){case oe.Top:this.direction=ye.X,this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case oe.Right:this.direction=ye.Y,this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case oe.Bottom:this.direction=ye.X,this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case oe.Left:this.direction=ye.Y,this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}},enumerable:!0,configurable:!0}),t}(S0),x0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),kh=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i};function Lh(o){var t,e=o[0],r=o[o.length-1];return e>r&&(t=kh([r,e],2),e=t[0],r=t[1]),function(n){return n>=e&&n<=r?n:NaN}}var ti=function(o){function t(){var e=o.call(this,new Ne)||this;return e._nice=!0,e._min=NaN,e._max=NaN,e.scale.clamper=Lh,e}return x0(t,o),Object.defineProperty(t.prototype,"nice",{get:function(){return this._nice},set:function(e){this._nice!==e&&(this._nice=e,e&&this.scale.nice&&this.scale.nice("number"==typeof this.calculatedTickCount?this.calculatedTickCount:void 0))},enumerable:!0,configurable:!0}),t.prototype.setDomain=function(e,r){var n=this,i=n.scale,a=n.min,s=n.max;if(e.length>2&&(e=Bt(e,it,Number)||[0,1]),e=[isNaN(a)?e[0]:a,isNaN(s)?e[1]:s],r){var l=kh(function AC(o,t){var e=Math.floor(o[0]),r=o[1];e=function EC(o,t,e){var r=Math.abs(t-o)/(e-1),n=Math.floor(Math.log10(r)),i=Math.pow(10,n);return Math.floor(o/i)*i}(e,r,t);var n=function DC(o,t,e){return function RC(o){var t=Math.floor(Math.log10(o)),e=Math.pow(10,t),r=o/e*10;return r>0&&r<=1?e/10:r>1&&r<=2?2*e/10:r>1&&r<=5?5*e/10:r>5&&r<=10?10*e/10:r>10&&r<=20?20*e/10:r>20&&r<=40?40*e/10:r>40&&r<=50?50*e/10:r>50&&r<=100?100*e/10:r}((t-o)/(e-1))}(e,r,t),a=[e,r=e+(t-1)*n],s=function MC(o,t,e){for(var r=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(r):0,i=Math.pow(10,n),a=new dh(n),s=0;s<e;s++)a[s]=Math.round((o+t*s)*i)/i;return a}(e,n,t);return[a,s]}(e,r),2),h=l[1];return i.domain=l[0],void(this.ticks=h)}i.domain=e,this.onLabelFormatChange(this.label.format),this.scale.clamp=!0,this.nice&&this.scale.nice&&this.scale.nice("number"==typeof this.calculatedTickCount?this.calculatedTickCount:void 0)},Object.defineProperty(t.prototype,"domain",{get:function(){return this.scale.domain},set:function(e){this.setDomain(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){this._min!==e&&(this._min=e,isNaN(e)||(this.scale.domain=[e,this.scale.domain[1]]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){this._max!==e&&(this._max=e,isNaN(e)||(this.scale.domain=[this.scale.domain[0],e]))},enumerable:!0,configurable:!0}),t.prototype.formatDatum=function(e){return"number"==typeof e?e.toFixed(2):(Aa(function(){return console.warn("AG Charts - Data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers.")},"number axis config used with Date objects"),String(e))},t.className="NumberAxis",t.type="number",t}(Ea),Ih=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Jt=function(){function o(){this.type="band",this.index=new Map,this.ordinalRange=[],this._domain=[],this._range=[0,1],this._bandwidth=1,this._paddingInner=0,this._paddingOuter=0,this._round=!1,this._align=.5}return Object.defineProperty(o.prototype,"domain",{get:function(){return this._domain},set:function(t){var e=this._domain;e.length=0,this.index=new Map;var r=this.index;t.forEach(function(n){void 0===r.get(n)&&r.set(n,e.push(n)-1)}),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"range",{get:function(){return this._range},set:function(t){this._range[0]=t[0],this._range[1]=t[1],this.rescale()},enumerable:!0,configurable:!0}),o.prototype.ticks=function(){return this._domain},o.prototype.convert=function(t){var e=this.index.get(t);if(void 0===e)return NaN;var r=this.ordinalRange[e];return void 0===r?NaN:r},Object.defineProperty(o.prototype,"bandwidth",{get:function(){return this._bandwidth},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"padding",{get:function(){return this._paddingInner},set:function(t){t=Math.max(0,Math.min(1,t)),this._paddingInner=t,this._paddingOuter=t,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(t){this._paddingInner=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(t){this._paddingOuter=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"round",{get:function(){return this._round},set:function(t){this._round=t,this.rescale()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"align",{get:function(){return this._align},set:function(t){this._align=Math.max(0,Math.min(1,t)),this.rescale()},enumerable:!0,configurable:!0}),o.prototype.rescale=function(){var t,e=this._domain.length;if(e){var r=Ih(this._range,2),n=r[0],i=r[1],a=i<n;a&&(n=(t=Ih([i,n],2))[0],i=t[1]);var s=(i-n)/Math.max(1,e-this._paddingInner+2*this._paddingOuter);this._round&&(s=Math.floor(s)),n+=(i-n-s*(e-this._paddingInner))*this._align,this._bandwidth=s*(1-this._paddingInner),this._round&&(n=Math.round(n),this._bandwidth=Math.round(this._bandwidth));for(var l=[],c=0;c<e;c++)l.push(n+s*c);this.ordinalRange=a?l.reverse():l}},o}(),O0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),cn=function(o){function t(){var e=o.call(this,new Jt)||this;return e.scale.paddingInner=.2,e.scale.paddingOuter=.3,e}return O0(t,o),Object.defineProperty(t.prototype,"paddingInner",{get:function(){return this.scale.paddingInner},set:function(e){this.scale.paddingInner=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingOuter",{get:function(){return this.scale.paddingOuter},set:function(e){this.scale.paddingOuter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"domain",{get:function(){return this.scale.domain.slice()},set:function(e){this.scale.domain=e.filter(function(r,n,i){return i.indexOf(r)===n})},enumerable:!0,configurable:!0}),t.className="CategoryAxis",t.type="category",t}(Ea),Nh=function(){function o(t,e,r){void 0===t&&(t=""),void 0===r&&(r=0),this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=r}return o.prototype.getLeftSibling=function(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0},o.prototype.getLeftmostSibling=function(){return this.number>0&&this.parent?this.parent.children[0]:void 0},o.prototype.nextLeft=function(){return this.children?this.children[0]:this.thread},o.prototype.nextRight=function(){return this.children?this.children[this.children.length-1]:this.thread},o.prototype.getSiblings=function(){var t=this;return this.parent?this.parent.children.filter(function(e,r){return r!==t.number}):[]},o}();function A0(o,t,e){var n=e/(t.number-o.number);t.change-=n,t.shift+=e,o.change+=n,t.prelim+=e,t.mod+=e}function E0(o,t,e){return t.getSiblings().indexOf(o.ancestor)>=0?o.ancestor:e}function Gh(o,t){var e=o.children;if(e.length){var r=e[0];e.forEach(function(a){Gh(a,t),r=function D0(o,t,e){var r=o.getLeftSibling();if(r){for(var n=o,i=o,a=r,s=i.getLeftmostSibling(),l=i.mod,c=n.mod,h=a.mod,p=s.mod;a.nextRight()&&i.nextLeft();){a=a.nextRight(),i=i.nextLeft(),s=s.nextLeft(),(n=n.nextRight()).ancestor=o;var f=a.prelim+h-(i.prelim+l)+e;f>0&&(A0(E0(a,o,t),o,f),l+=f,c+=f),h+=a.mod,l+=i.mod,p+=s.mod,c+=n.mod}a.nextRight()&&!n.nextRight()?(n.thread=a.nextRight(),n.mod+=h-c):(i.nextLeft()&&!s.nextLeft()&&(s.thread=i.nextLeft(),s.mod+=l-p),t=o)}return t}(a,r,t)}),function M0(o){var t=o.children;if(t)for(var e=0,r=0,n=t.length-1;n>=0;n--){var i=t[n];i.prelim+=e,i.mod+=e,e+=i.shift+(r+=i.change)}}(o);var n=(e[0].prelim+e[e.length-1].prelim)/2;(i=o.getLeftSibling())?(o.prelim=i.prelim+t,o.mod=o.prelim-n):o.prelim=n}else{var i=o.getLeftSibling();o.prelim=i?i.prelim+t:0}}var Bh=function(){function o(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}return o.prototype.update=function(t,e){var r=e(t),n=r.x,i=r.y;n>this.right&&(this.right=n),n<this.left&&(this.left=n),i>this.bottom&&(this.bottom=i),i<this.top&&(this.top=i)},o}();function jh(o,t,e){o.x=o.prelim+t,o.y=o.depth,e.update(o),o.children.forEach(function(r){return jh(r,t+o.mod,e)})}function Wh(o){var t=o.children,e=0;t.forEach(function(r){Wh(r),r.children.length?e+=r.leafCount:e++}),o.leafCount=e,t.length?(o.subtreeLeft=t[0].subtreeLeft,o.subtreeRight=t[o.children.length-1].subtreeRight,o.x=(o.subtreeLeft+o.subtreeRight)/2):(o.subtreeLeft=o.x,o.subtreeRight=o.x)}function R0(o){var t=new F0;return Gh(o,1),jh(o,-o.prelim,t),Wh(o),t}var F0=function(){function o(){this.dimensions=new Bh,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}return o.prototype.update=function(t){this.dimensions.update(t,function(e){return{x:e.x,y:e.y}}),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)},o.prototype.resize=function(t,e,r,n,i){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=!1);var a=this.leafCount-1,s=this.depth,l=this.dimensions,c=1,h=1;t>0&&a&&(c=t/a/((l.right-l.left)/a),i&&(c=-c)),e>0&&s&&(h=e/s/((l.bottom-l.top)/s));var g=new Bh;this.nodes.forEach(function(C){C.screenX=C.x*c,C.screenY=C.y*h,g.update(C,function(_){return{x:_.screenX,y:_.screenY}})});var y=-g.left,m=-g.top;this.nodes.forEach(function(C){C.screenX+=y+r,C.screenY+=m+n})},o}(),Vh=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),k0=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.grid=!1,e}return Vh(t,o),t}(Rh),ri=function(o){function t(){var e=o.call(this,new Jt)||this;e.tickScale=new Jt,e.longestSeparatorLength=0,e.translation={x:0,y:0},e.rotation=0,e.line={width:1,color:"rgba(195, 195, 195, 1)"},e.label=new k0,e.labelColor="rgba(87, 87, 87, 1)";var n=e.group,i=e.tickScale,a=e.scale;return a.paddingOuter=.1,a.paddingInner=2*a.paddingOuter,e.requestedRange=a.range.slice(),e.scale=a,i.paddingInner=1,i.paddingOuter=0,e.gridLineSelection=je.select(n).selectAll(),e.axisLineSelection=je.select(n).selectAll(),e.separatorSelection=je.select(n).selectAll(),e.labelSelection=je.select(n).selectAll(),e}return Vh(t,o),Object.defineProperty(t.prototype,"domain",{get:function(){return this.scale.domain},set:function(e){var r=e.filter(function(a,s,l){return l.indexOf(a)===s});this.scale.domain=r;var n=function P0(o,t){void 0===t&&(t=!0);var e=new Nh,r=0;return t&&o.forEach(function(n){return r=Math.max(r,n.labels.length)}),o.forEach(function(n){if(t)for(;n.labels.length<r;)n.labels.unshift("");!function T0(o,t){var e=t.labels.slice().reverse(),r=e.length-1;e.forEach(function(n,i){var a=o.children,s=El(a,function(h){return h.label===n}),l=i!==r;if(s&&l)o=s;else{var c=new Nh(n,o);c.number=a.length,a.push(c),l&&(o=c)}})}(e,n)}),e}(r);this.tickTreeLayout=R0(n);var i=r.slice();i.push(""),this.tickScale.domain=i,this.resizeTickTree()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return this.requestedRange.slice()},set:function(e){this.requestedRange=e.slice(),this.updateRange()},enumerable:!0,configurable:!0}),t.prototype.updateRange=function(){var e=this,r=e.requestedRange,n=e.visibleRange,a=(r[1]-r[0])/(n[1]-n[0]),l=r[0]-a*n[0];this.tickScale.range=e.scale.range=[l,l+a],this.resizeTickTree()},t.prototype.resizeTickTree=function(){var e=this.scale,r=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,i=this.lineHeight;n&&n.resize(Math.abs(r[1]-r[0]),n.depth*i,(Math.min(r[0],r[1])||0)+(e.bandwidth||0)/2,-n.depth*i,r[1]-r[0]<0)},Object.defineProperty(t.prototype,"lineHeight",{get:function(){return 1.5*this.label.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridLength",{get:function(){return this._gridLength},set:function(e){(this._gridLength&&!e||!this._gridLength&&e)&&(this.gridLineSelection=this.gridLineSelection.remove().setData([]),this.labelSelection=this.labelSelection.remove().setData([])),this._gridLength=e},enumerable:!0,configurable:!0}),t.prototype.update=function(){var e=this,r=this,n=r.group,i=r.scale,a=r.label,s=r.tickScale,l=r.requestedRange,c=i.range[0],h=i.range[1],f=Math.abs(h-c)/i.domain.length||0,d=a.parallel,v=Be(this.rotation),g=Math.abs(Math.cos(v))<1e-8,y=this.label.rotation?Ot(Be(this.label.rotation)):0;n.translationX=this.translation.x,n.translationY=this.translation.y,n.rotation=v;var m=this.title;m&&(m.node.visible=!1);var C=this.lineHeight,_=this.tickTreeLayout,w=i.ticks(),P=_?_.nodes:[],O=!!_&&_.depth>1,A=s.ticks(),E=a.mirrored?1:-1,M=Ot(v),R=!y&&M>=0&&M<=Math.PI?-1:1,B=Ot(v-Math.PI/2),j=!y&&B>=0&&B<=Math.PI?-1:1,I=this.gridLineSelection.setData(this.gridLength?A:[]);I.exit.remove();var F=I.enter.append(jt),N=I.merge(F),V=this.labelSelection.setData(P);V.exit.remove();var Y=V.enter.append(nt),$=V.merge(Y),J=a.formatter,H=new Map,q=0;$.each(function(K,pe,We){K.fontStyle=a.fontStyle,K.fontWeight=a.fontWeight,K.fontSize=a.fontSize,K.fontFamily=a.fontFamily,K.fill=a.color,K.textBaseline=-1===R?"bottom":"hanging",K.textAlign="center",K.translationX=pe.screenY-.25*a.fontSize,K.translationY=pe.screenX,0===We?m&&m.enabled&&w.length>0?(K.visible=!0,K.text=m.text,K.fontSize=m.fontSize,K.fontStyle=m.fontStyle,K.fontWeight=m.fontWeight,K.fontFamily=m.fontFamily,K.textBaseline="hanging"):K.visible=!1:(K.text=J?J({value:String(pe.label),index:We}):String(pe.label),K.visible=pe.screenX>=l[0]&&pe.screenX<=l[1]);var Me=K.computeBBox();H.set(K.id,Me),Me.width>q&&(q=Me.width)});var U=E*a.padding,te=d?R*Math.PI/2:-1===j?Math.PI:0,re=this.label.grid,Q=[];$.each(function(K,pe,We){if(K.x=U,K.rotationCenterX=U,pe.children.length){K.translationX-=q-C+e.label.padding;var nr=pe.leafCount*f;(Me=H.get(K.id))&&Me.width>nr?K.visible=!1:K.rotation=g?te:-Math.PI/2}else{var Me;K.rotation=y,K.textAlign="end",K.textBaseline="middle",(Me=H.get(K.id))&&Me.height>f&&(K.visible=!1)}if(pe.parent&&O){var Ut=pe.children.length?pe.screenX-pe.leafCount*f/2:pe.screenX-f/2;if(pe.children.length){var kt=-q-2*e.label.padding+pe.screenY;Q.push({y:Ut,x1:kt+C,x2:kt,toString:function(){return String(We)}})}else(pe.number!==pe.children.length-1||re)&&Q.push({y:Ut,x1:0,x2:-q-2*e.label.padding,toString:function(){return String(We)}})}});var se=0;Q.forEach(function(K){return se=Math.min(se,K.x2)}),this.longestSeparatorLength=Math.abs(se),Q.push({y:Math.max(c,h),x1:0,x2:se,toString:function(){return String(Q.length)}});var de=this.separatorSelection.setData(Q);de.exit.remove();var we=de.enter.append(jt),Ae=de.merge(we);this.separatorSelection=Ae,Ae.each(function(K,pe,We){K.x1=pe.x1,K.x2=pe.x2,K.y1=pe.y,K.y2=pe.y,K.visible=pe.y>=l[0]-1e-7&&pe.y<=l[1]+1e-7,K.stroke=e.tick.color,K.fill=void 0,K.strokeWidth=1}),this.gridLineSelection=N,this.labelSelection=$;for(var ge=_?_.depth+1:1,Ee=[],xe=0;xe<ge;xe++)Ee.push(xe);var Ue=this.axisLineSelection.setData(Ee);Ue.exit.remove();var De=Ue.enter.append(jt),Z=Ue.merge(De);if(this.axisLineSelection=Z,Z.each(function(K,pe,We){var Me=We>0?-q-2*e.label.padding-(We-1)*C:0;K.x1=Me,K.x2=Me,K.y1=l[0],K.y2=l[1],K.strokeWidth=e.line.width,K.stroke=e.line.color,K.visible=w.length>0&&(0===We||re&&O)}),this.gridLength){var Pe=this.gridStyle,fe=Pe.length;N.each(function(K,pe,We){var Me=Math.round(s.convert(pe));K.x1=0,K.x2=-E*e.gridLength,K.y1=Me,K.y2=Me,K.visible=Me>=l[0]&&Me<=l[1]&&Math.abs(K.parent.translationY-c)>1;var nr=Pe[We%fe];K.stroke=nr.stroke,K.strokeWidth=e.tick.width,K.lineDash=nr.lineDash,K.fill=void 0})}},t.prototype.computeBBox=function(e){var r=!e||!e.excludeTitle,n=1/0,i=-1/0,a=1/0,s=-1/0;return this.labelSelection.each(function(l,c,h){if(h>0||r){l.computeTransformMatrix();var p=kr.flyweight(l.matrix),f=l.computeBBox();if(f){var d=p.transformBBox(f);n=Math.min(n,d.x),i=Math.max(i,d.x+d.width),a=Math.min(a,d.y),s=Math.max(s,d.y+d.height)}}}),new Ie(n,a,Math.max(i-n,this.longestSeparatorLength),s-a)},t.className="GroupedCategoryAxis",t.type="groupedCategory",t}(Ea),L0=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),kl=new Date,Ll=new Date,Hh=function(){function o(t,e){this._floor=t,this._offset=e}return o.prototype.floor=function(t){return t=new Date(+t),this._floor(t),t},o.prototype.ceil=function(t){return t=new Date(+t-1),this._floor(t),this._offset(t,1),this._floor(t),t},o.prototype.round=function(t){var e=this.floor(t),r=this.ceil(t),n=+t;return n-e.getTime()<r.getTime()-n?e:r},o.prototype.offset=function(t,e){return void 0===e&&(e=1),t=new Date(+t),this._offset(t,Math.floor(e)),t},o.prototype.range=function(t,e,r){void 0===r&&(r=1);var i,n=[];if(t=this.ceil(t),r=Math.floor(r),t>e||r<=0)return n;do{i=new Date(+t),n.push(i),this._offset(t,r),this._floor(t)}while(i<t&&t<e);return n},o.prototype.filter=function(t){var e=this;return new o(function(i){if(i>=i)for(;e._floor(i),!t(i);)i.setTime(i.getTime()-1);return i},function(i,a){if(i>=i)if(a<0)for(;++a<=0;)do{e._offset(i,-1)}while(!t(i));else for(;--a>=0;)do{e._offset(i,1)}while(!t(i));return i})},o}(),ut=function(o){function t(e,r,n,i){var a=o.call(this,e,r)||this;return a._count=n,a._field=i,a}return L0(t,o),t.prototype.count=function(e,r){return kl.setTime(+e),Ll.setTime(+r),this._floor(kl),this._floor(Ll),Math.floor(this._count(kl,Ll))},t.prototype.every=function(e){var n,r=this;if(e=Math.floor(e),isFinite(e)&&e>0)if(e>1){var i=this._field;n=this.filter(i?function(a){return i(a)%e==0}:function(a){return r.count(0,a)%e==0})}else n=this;return n},t}(Hh),B0=new ut(function I0(o){return o},function N0(o,t){o.setTime(o.getTime()+t)},function G0(o,t){return t.getTime()-o.getTime()}),dr=1e3,Pt=6e4,vr=60*Pt,hn=24*vr,Il=7*hn,zh=30*hn,Nl=365*hn,H0=new ut(function j0(o){o.setTime(o.getTime()-o.getMilliseconds())},function W0(o,t){o.setTime(o.getTime()+t*dr)},function V0(o,t){return(t.getTime()-o.getTime())/dr}),Y0=new ut(function z0(o){o.setTime(o.getTime()-o.getMilliseconds()-o.getSeconds()*dr)},function U0(o,t){o.setTime(o.getTime()+t*Pt)},function $0(o,t){return(t.getTime()-o.getTime())/Pt},function K0(o){return o.getMinutes()}),Q0=new ut(function X0(o){o.setTime(o.getTime()-o.getMilliseconds()-o.getSeconds()*dr-o.getMinutes()*Pt)},function q0(o,t){o.setTime(o.getTime()+t*vr)},function Z0(o,t){return(t.getTime()-o.getTime())/vr},function J0(o){return o.getHours()}),Gl=new ut(function e_(o){o.setHours(0,0,0,0)},function t_(o,t){o.setDate(o.getDate()+t)},function r_(o,t){var e=t.getTimezoneOffset()-o.getTimezoneOffset();return(t.getTime()-o.getTime()-e*Pt)/hn},function n_(o){return o.getDate()-1});function fn(o){return new ut(function t(n){n.setDate(n.getDate()-(n.getDay()+7-o)%7),n.setHours(0,0,0,0)},function e(n,i){n.setDate(n.getDate()+7*i)},function r(n,i){return(i.getTime()-n.getTime()-(i.getTimezoneOffset()-n.getTimezoneOffset())*Pt)/Il})}var Uh=fn(0),Bl=fn(1),jl=(fn(2),fn(3),fn(4));fn(5),fn(6);var l_=new ut(function i_(o){o.setDate(1),o.setHours(0,0,0,0)},function o_(o,t){o.setMonth(o.getMonth()+t)},function a_(o,t){return t.getMonth()-o.getMonth()+12*(t.getFullYear()-o.getFullYear())},function s_(o){return o.getMonth()}),oo=new ut(function u_(o){o.setMonth(0,1),o.setHours(0,0,0,0)},function c_(o,t){o.setFullYear(o.getFullYear()+t)},function h_(o,t){return t.getFullYear()-o.getFullYear()},function f_(o){return o.getFullYear()}),$h=new ut(function p_(o){o.setUTCHours(0,0,0,0)},function d_(o,t){o.setUTCDate(o.getUTCDate()+t)},function v_(o,t){return(t.getTime()-o.getTime())/hn},function g_(o){return o.getUTCDate()-1}),Ma=new ut(function y_(o){o.setUTCMonth(0,1),o.setUTCHours(0,0,0,0)},function m_(o,t){o.setUTCFullYear(o.getUTCFullYear()+t)},function C_(o,t){return t.getUTCFullYear()-o.getUTCFullYear()},function __(o){return o.getUTCFullYear()});function pn(o){return new ut(function t(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-o)%7),n.setHours(0,0,0,0)},function e(n,i){n.setUTCDate(n.getUTCDate()+7*i)},function r(n,i){return(i.getTime()-n.getTime())/Il})}var b_=pn(0),Wl=pn(1),Vl=(pn(2),pn(3),pn(4));function S_(o){if(o.y>=0&&o.y<100){var t=new Date(-1,o.m,o.d,o.H,o.M,o.S,o.L);return t.setFullYear(o.y),t}return new Date(o.y,o.m,o.d,o.H,o.M,o.S,o.L)}function Da(o){if(o.y>=0&&o.y<100){var t=new Date(Date.UTC(-1,o.m,o.d,o.H,o.M,o.S,o.L));return t.setUTCFullYear(o.y),t}return new Date(Date.UTC(o.y,o.m,o.d,o.H,o.M,o.S,o.L))}function ao(o){for(var t={},e=0,r=o.length;e<r;e++)t[o[e].toLowerCase()]=e;return t}function so(o){return{y:o,m:0,d:1,H:0,M:0,S:0,L:0}}pn(5),pn(6);var Hl,Ke=/^\s*\d+/,w_=/^%/,x_=/[\\^$*+?|[\]().{}]/g,O_=function(o){return o.replace(x_,"\\$&")},lo=function(o){return new RegExp("^(?:"+o.map(O_).join("|")+")","i")},Yh={"-":"",_:" ",0:"0"};function Se(o,t,e){var r=o<0?"-":"",n=String(r?-o:o),i=n.length;return r+(i<e?new Array(e-i+1).join(t)+n:n)}!function T_(o){Hl=function P_(o){var t=o.dateTime,e=o.date,r=o.time,n=o.periods,i=o.days,a=o.shortDays,s=o.months,l=o.shortMonths,c=lo(n),h=ao(n),p=lo(i),f=ao(i),d=lo(a),v=ao(a),g=lo(s),y=ao(s),m=lo(l),C=ao(l),_={a:function V(b){return a[b.getDay()]},A:function Y(b){return i[b.getDay()]},b:function Q(b){return l[b.getMonth()]},B:function se(b){return s[b.getMonth()]},c:void 0,d:te,e:te,f:function M(b,x){return R(b,x)+"000"},H:function F(b,x){return Se(b.getHours(),x,2)},I:function I(b,x){return Se(b.getHours()%12||12,x,2)},j:function re(b,x){return Se(1+Gl.count(oo.floor(b),b),x,3)},L:R,m:function de(b,x){return Se(b.getMonth()+1,x,2)},M:function j(b,x){return Se(b.getMinutes(),x,2)},p:function N(b){return n[b.getHours()>=12?1:0]},Q:Fo,s:ko,S:function B(b,x){return Se(b.getSeconds(),x,2)},u:function $(b){var x=b.getDay();return 0===x?7:x},U:function J(b,x){return Se(Uh.count(oo.floor(b),b),x,2)},V:function H(b,x){var T=b.getDay();b=T>=4||0===T?jl.floor(b):jl.ceil(b);var S=oo.floor(b);return Se(jl.count(S,b)+(4===S.getDay()?1:0),x,2)},w:function q(b){return b.getDay()},W:function U(b,x){return Se(Bl.count(oo.floor(b),b),x,2)},x:void 0,X:void 0,y:function we(b,x){return Se(b.getFullYear()%100,x,2)},Y:function Ae(b,x){return Se(b.getFullYear()%1e4,x,4)},Z:function me(b){var x=b.getTimezoneOffset();return(x>0?"-":(x*=-1,"+"))+Se(Math.floor(x/60),"0",2)+Se(x%60,"0",2)},"%":Ro},w={a:function nr(b){return a[b.getUTCDay()]},A:function Ut(b){return i[b.getUTCDay()]},b:function We(b){return l[b.getUTCMonth()]},B:function Me(b){return s[b.getUTCMonth()]},c:void 0,d:fe,e:fe,f:function ge(b,x){return Ee(b,x)+"000"},H:function Z(b,x){return Se(b.getUTCHours(),x,2)},I:function De(b,x){return Se(b.getUTCHours()%12||12,x,2)},j:function K(b,x){return Se(1+$h.count(Ma.floor(b),b),x,3)},L:Ee,m:function pe(b,x){return Se(b.getUTCMonth()+1,x,2)},M:function Ue(b,x){return Se(b.getUTCMinutes(),x,2)},p:function Pe(b){return n[b.getUTCHours()>=12?1:0]},Q:Fo,s:ko,S:function xe(b,x){return Se(b.getUTCSeconds(),x,2)},u:function kt(b){var x=b.getUTCDay();return 0===x?7:x},U:function Oi(b,x){return Se(b_.count(Ma.floor(b),b),x,2)},V:function Pi(b,x){var T=b.getUTCDay();b=T>=4||0===T?Vl.floor(b):Vl.ceil(b);var S=Ma.floor(b);return Se(Vl.count(S,b)+(4===S.getUTCDay()?1:0),x,4)},w:function Ti(b){return b.getUTCDay()},W:function Ai(b,x){return Se(Wl.count(Ma.floor(b),b),x,2)},x:void 0,X:void 0,y:function Ei(b,x){return Se(b.getUTCFullYear()%100,x,2)},Y:function Mi(b,x){return Se(b.getUTCFullYear()%1e4,x,4)},Z:function Do(){return"+0000"},"%":Ro},P={a:function Fu(b,x,T){var S=d.exec(x.slice(T));return S?(b.w=v[S[0].toLowerCase()],T+S[0].length):-1},A:function ku(b,x,T){var S=p.exec(x.slice(T));return S?(b.w=f[S[0].toLowerCase()],T+S[0].length):-1},b:function ju(b,x,T){var S=m.exec(x.slice(T));return S?(b.m=C[S[0].toLowerCase()],T+S[0].length):-1},B:function Wu(b,x,T){var S=g.exec(x.slice(T));return S?(b.m=y[S[0].toLowerCase()],T+S[0].length):-1},c:function Hu(b,x,T){return E(b,t,x,T)},d:Io,e:Io,f:function Tu(b,x,T){var S=Ke.exec(x.slice(T,T+6));return S?(b.L=Math.floor(parseFloat(S[0])/1e3),T+S[0].length):-1},H:Lo,I:Lo,j:function Ru(b,x,T){var S=Ke.exec(x.slice(T,T+3));return S?(b.m=0,b.d=+S[0],T+S[0].length):-1},L:function Au(b,x,T){var S=Ke.exec(x.slice(T,T+3));return S?(b.L=+S[0],T+S[0].length):-1},m:function Vu(b,x,T){var S=Ke.exec(x.slice(T,T+2));return S?(b.m=parseFloat(S[0])-1,T+S[0].length):-1},M:function Mu(b,x,T){var S=Ke.exec(x.slice(T,T+2));return S?(b.M=+S[0],T+S[0].length):-1},p:function Du(b,x,T){var S=c.exec(x.slice(T));return S?(b.p=h[S[0].toLowerCase()],T+S[0].length):-1},Q:function $u(b,x,T){var S=Ke.exec(x.slice(T));return S?(b.Q=+S[0],T+S[0].length):-1},s:function Ku(b,x,T){var S=Ke.exec(x.slice(T));return S?(b.Q=1e3*+S[0],T+S[0].length):-1},S:function Eu(b,x,T){var S=Ke.exec(x.slice(T,T+2));return S?(b.S=+S[0],T+S[0].length):-1},u:function Lu(b,x,T){var S=Ke.exec(x.slice(T,T+1));return S?(b.u=+S[0],T+S[0].length):-1},U:function Iu(b,x,T){var S=Ke.exec(x.slice(T,T+2));return S?(b.U=+S[0],T+S[0].length):-1},V:function Nu(b,x,T){var S=Ke.exec(x.slice(T,T+2));return S?(b.V=+S[0],T+S[0].length):-1},w:function Bu(b,x,T){var S=Ke.exec(x.slice(T,T+1));return S?(b.w=+S[0],T+S[0].length):-1},W:function Gu(b,x,T){var S=Ke.exec(x.slice(T,T+2));return S?(b.W=+S[0],T+S[0].length):-1},x:function zu(b,x,T){return E(b,e,x,T)},X:function Uu(b,x,T){return E(b,r,x,T)},y:function Yu(b,x,T){var S=Ke.exec(x.slice(T,T+2));return S?(b.y=+S[0]+(+S[0]>68?1900:2e3),T+S[0].length):-1},Y:function Xu(b,x,T){var S=Ke.exec(x.slice(T,T+4));return S?(b.y=+S[0],T+S[0].length):-1},Z:function qu(b,x,T){var S=/^(Z)|^([+-]\d\d)(?::?(\d\d))?/.exec(x.slice(T,T+6));return S?(b.Z=S[1]?0:-(S[2]+(S[3]||"00")),T+S[0].length):-1},"%":function Zu(b,x,T){var S=w_.exec(x.slice(T,T+1));return S?T+S[0].length:-1}};function O(b,x){return function(T){var S=so(1900);if(E(S,b,T+="",0)==T.length){if("Q"in S)return new Date(S.Q);if("p"in S&&(S.H=S.H%12+12*S.p),"V"in S){if(S.V<1||S.V>53)return;if("w"in S||(S.w=1),"Z"in S){var Ce=(ee=Da(so(S.y))).getUTCDay();ee=Ce>4||0===Ce?Wl.ceil(ee):Wl.floor(ee),ee=$h.offset(ee,7*(S.V-1)),S.y=ee.getUTCFullYear(),S.m=ee.getUTCMonth(),S.d=ee.getUTCDate()+(S.w+6)%7}else{var ee;Ce=(ee=x(so(S.y))).getDay(),ee=Ce>4||0===Ce?Bl.ceil(ee):Bl.floor(ee),ee=Gl.offset(ee,7*(S.V-1)),S.y=ee.getFullYear(),S.m=ee.getMonth(),S.d=ee.getDate()+(S.w+6)%7}}else("W"in S||"U"in S)&&("w"in S||(S.w="u"in S?S.u%7:"W"in S?1:0),Ce="Z"in S?Da(so(S.y)).getUTCDay():x(so(S.y)).getDay(),S.m=0,S.d="W"in S?(S.w+6)%7+7*S.W-(Ce+5)%7:S.w+7*S.U-(Ce+6)%7);return"Z"in S?(S.H+=S.Z/100|0,S.M+=S.Z%100,Da(S)):x(S)}}}function A(b,x){return function(T){var S=[],Ze=b.length,ee=-1,Ce=0;for(T instanceof Date||(T=new Date(+T));++ee<Ze;)if(37===b.charCodeAt(ee)){S.push(b.slice(Ce,ee));var Ve=b.charAt(++ee),Ct=Yh[Ve];null!=Ct?Ve=b.charAt(++ee):Ct="e"===Ve?" ":"0";var $t=x[Ve];$t&&(Ve=$t(T,Ct)),S.push(Ve),Ce=ee+1}return S.push(b.slice(Ce,ee)),S.join("")}}function E(b,x,T,S){for(var Ze=0,ee=x.length,Ce=T.length;Ze<ee;){if(S>=Ce)return-1;var Ve=x.charCodeAt(Ze++);if(37===Ve){var Ct=x.charAt(Ze++),$t=P[Ct in Yh?x.charAt(Ze++):Ct];if(!$t||(S=$t(b,T,S))<0)return-1}else if(Ve!=T.charCodeAt(S++))return-1}return S}function R(b,x){return Se(b.getMilliseconds(),x,3)}function te(b,x){return Se(b.getDate(),x,2)}function Ee(b,x){return Se(b.getUTCMilliseconds(),x,3)}function fe(b,x){return Se(b.getUTCDate(),x,2)}function Ro(b){return"%"}function Fo(b){return b.getTime()}function ko(b){return Math.floor(b.getTime()/1e3)}function Lo(b,x,T){var S=Ke.exec(x.slice(T,T+2));return S?(b.H=+S[0],T+S[0].length):-1}function Io(b,x,T){var S=Ke.exec(x.slice(T,T+2));return S?(b.d=+S[0],T+S[0].length):-1}return _.x=A(e,_),_.X=A(r,_),_.c=A(t,_),w.x=A(e,w),w.X=A(r,w),w.c=A(t,w),{format:function(b){var x=A(b,_);return x.toString=function(){return b},x},parse:function(b){var x=O(b,S_);return x.toString=function(){return b},x},utcFormat:function(b){var x=A(b,w);return x.toString=function(){return b},x},utcParse:function(b){var x=O(b,Da);return x.toString=function(){return b},x}}}(o)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var A_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zl=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},E_=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="time",e.year=oo,e.month=l_,e.week=Uh,e.day=Gl,e.hour=Q0,e.minute=Y0,e.second=H0,e.millisecond=B0,e.format=Hl.format,e.tickIntervals=[[e.second,1,dr],[e.second,5,5e3],[e.second,15,15e3],[e.second,30,3e4],[e.minute,1,Pt],[e.minute,5,5*Pt],[e.minute,15,15*Pt],[e.minute,30,30*Pt],[e.hour,1,vr],[e.hour,3,3*vr],[e.hour,6,6*vr],[e.hour,12,12*vr],[e.day,1,hn],[e.day,2,2*hn],[e.week,1,Il],[e.month,1,zh],[e.month,3,3*zh],[e.year,1,Nl]],e.formatMillisecond=e.format(".%L"),e.formatSecond=e.format(":%S"),e.formatMinute=e.format("%I:%M"),e.formatHour=e.format("%I %p"),e.formatDay=e.format("%a %d"),e.formatWeek=e.format("%b %d"),e.formatMonth=e.format("%B"),e.formatYear=e.format("%Y"),e._domain=[new Date(2e3,0,1),new Date(2e3,0,2)],e}return A_(t,o),t.prototype.defaultTickFormat=function(e){return(this.second.floor(e)<e?this.formatMillisecond:this.minute.floor(e)<e?this.formatSecond:this.hour.floor(e)<e?this.formatMinute:this.day.floor(e)<e?this.formatHour:this.month.floor(e)<e?this.week.floor(e)<e?this.formatDay:this.formatWeek:this.year.floor(e)<e?this.formatMonth:this.formatYear)(e)},t.prototype.tickInterval=function(e,r,n,i){var a;if("number"==typeof e){var s=e,l=this.tickIntervals,c=Math.abs(n-r)/s,h=function GC(o,t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=o.length);for(var i=function BC(o){return function(t,e){return yh(o(t),e)}}(e);r<n;){var a=r+n>>>1;i(o[a],t)<0?r=a+1:n=a}return r}(l,c,function(p){return p[2]});h===l.length?(i=io(r/Nl,n/Nl,s),e=this.year):h?(e=(a=zl(l[c/l[h-1][2]<l[h][2]/c?h-1:h],2))[0],i=a[1]):(i=Math.max(io(r,n,e),1),e=this.millisecond)}return null==i?e:e.every(i)},Object.defineProperty(t.prototype,"domain",{get:function(){return o.prototype.getDomain.call(this).map(function(e){return new Date(e)})},set:function(e){o.prototype.setDomain.call(this,Array.prototype.map.call(e,function(r){return r instanceof Date?+r:+new Date(+r)}))},enumerable:!0,configurable:!0}),t.prototype.invert=function(e){return new Date(o.prototype.invert.call(this,e))},t.prototype.ticks=function(e){void 0===e&&(e=10);var r=o.prototype.getDomain.call(this),n=r[0],i=r[r.length-1],a=i<n;if(a){var s=n;n=i,i=s}var l=this.tickInterval(e,n,i),c=l?l.range(n,i+1):[];return a?c.reverse():c},t.prototype.tickFormat=function(e,r){return null==r?this.defaultTickFormat.bind(this):this.format(r)},t.prototype.nice=function(e){void 0===e&&(e=10);var r=o.prototype.getDomain.call(this),n=this.tickInterval(e,r[0],r[r.length-1]);n&&(this.domain=this._nice(r,n))},t.prototype._nice=function(e,r){var n,i,a=0,s=(e=e.slice()).length-1,l=e[a],c=e[s];return c<l&&(a=(n=zl([s,a],2))[0],s=n[1],l=(i=zl([c,l],2))[0],c=i[1]),e[a]=r.floor(l),e[s]=r.ceil(c),e},t}(Qe),M_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),uo=function(o){function t(){var e=o.call(this,new E_)||this;e.datumFormat="%m/%d/%y, %H:%M:%S",e._nice=!0;var r=e.scale;return r.clamp=!0,e.scale=r,e.datumFormatter=r.tickFormat(e.calculatedTickCount,e.datumFormat),e}return M_(t,o),Object.defineProperty(t.prototype,"nice",{get:function(){return this._nice},set:function(e){this._nice!==e&&(this._nice=e,e&&this.scale.nice&&this.scale.nice(10))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"domain",{get:function(){return this.scale.domain},set:function(e){e.length>2&&(e=(Bt(e,it,Number)||[0,1e3]).map(function(r){return new Date(r)})),this.scale.domain=e,this.nice&&this.scale.nice&&this.scale.nice(10)},enumerable:!0,configurable:!0}),t.prototype.onLabelFormatChange=function(e){e?o.prototype.onLabelFormatChange.call(this,e):this.labelFormatter=this.scale.tickFormat(this.calculatedTickCount,void 0)},t.prototype.formatDatum=function(e){return this.datumFormatter(e)},t.className="TimeAxis",t.type="time",t}(Ea),D_=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Xh=function(){function o(t,e,r){var n=this;void 0===t&&(t=window.document),this.id=Zn(this),this._dirty=!1,this.animationFrameId=0,this._root=null,this.debug={renderFrameIndex:!1,renderBoundingBoxes:!1},this._frameIndex=0,this.render=function(){var i,s=n.ctx,l=n.root,c=n.pendingSize;n.animationFrameId=0,c&&((i=n.canvas).resize.apply(i,function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(D_(arguments[t]));return o}(c)),n.pendingSize=void 0),!l||l.visible?(s.clearRect(0,0,n.width,n.height),l&&(s.save(),l.visible&&l.render(s),s.restore()),n._frameIndex++,n.debug.renderFrameIndex&&(s.fillStyle="white",s.fillRect(0,0,40,15),s.fillStyle="black",s.fillText(n.frameIndex.toString(),2,10)),n.dirty=!1):n.dirty=!1},this.canvas=new sn(t,e,r),this.ctx=this.canvas.context}return Object.defineProperty(o.prototype,"container",{get:function(){return this.canvas.container},set:function(t){this.canvas.container=t},enumerable:!0,configurable:!0}),o.prototype.download=function(t){this.canvas.download(t)},o.prototype.getDataURL=function(t){return this.canvas.getDataURL(t)},Object.defineProperty(o.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!0,configurable:!0}),o.prototype.resize=function(t,e){t=Math.round(t),e=Math.round(e),(t!==this.width||e!==this.height)&&(this.pendingSize=[t,e],this.dirty=!0)},Object.defineProperty(o.prototype,"dirty",{get:function(){return this._dirty},set:function(t){t?this._dirty||(this.animationFrameId=requestAnimationFrame(this.render)):this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=0),this._dirty=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){return this._root},set:function(t){t!==this._root&&(this._root&&this._root._setScene(),this._root=t,t&&(null===t.parent&&t.scene&&t.scene!==this&&(t.scene.root=null),t._setScene(this)),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"frameIndex",{get:function(){return this._frameIndex},enumerable:!0,configurable:!0}),o.className="Scene",o}(),k_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),L_=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.angle=0,e}return k_(t,o),t.prototype.createGradient=function(e,r){var n=this.stops,i=this.angle%360*Math.PI/180,a=Math.cos(i),s=Math.sin(i),l=r.width,c=r.height,h=r.x+.5*l,p=r.y+.5*c;if(l>0&&c>0){var f=Math.sqrt(c*c+l*l)*Math.abs(Math.cos(i-Math.atan(c/l)))/2,d=e.createLinearGradient(h+a*f,p+s*f,h-a*f,p-s*f);return n.forEach(function(v){d.addColorStop(v.offset,v.color)}),d}return"black"},t}(function o(){this.stops=[]}),I_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ni=(()=>(function(o){o[o.Content=0]="Content",o[o.Border=1]="Border"}(ni||(ni={})),ni))(),gr=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._x=0,e._y=0,e._width=10,e._height=10,e._radius=0,e._crisp=!1,e._gradient=!1,e.effectiveStrokeWidth=Lr.defaultStyles.strokeWidth,e._sizing=ni.Content,e}return I_(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius!==e&&(this._radius=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"crisp",{get:function(){return this._crisp},set:function(e){this._crisp!==e&&(this._crisp=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gradient",{get:function(){return this._gradient},set:function(e){this._gradient!==e&&(this._gradient=e,this.updateGradientInstance(),this.dirty=!0)},enumerable:!0,configurable:!0}),t.prototype.updateGradientInstance=function(){if(this.gradient){var e=this.fill;if(e){var r=new L_;r.angle=270,r.stops=[{offset:0,color:fr.fromString(e).brighter().toString()},{offset:1,color:fr.fromString(e).darker().toString()}],this.gradientInstance=r}}else this.gradientInstance=void 0},Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){this._fill!==e&&(this._fill=e,this.updateGradientInstance(),this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(e){this._strokeWidth!==e&&(this._strokeWidth=e,this.crisp||this.sizing===ni.Border?this.dirtyPath=!0:(this.effectiveStrokeWidth=e,this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizing",{get:function(){return this._sizing},set:function(e){this._sizing!==e&&(this._sizing=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),t.prototype.updatePath=function(){var e=this.sizing===ni.Border,r=this.path;r.clear();var l,n=this.x,i=this.y,a=this.width,s=this.height;if(e){var c=a/2,h=s/2;l=Math.min(this.strokeWidth,c,h),n=Math.min(n+l/2,n+c),i=Math.min(i+l/2,i+h),a=Math.max(a-l,0),s=Math.max(s-l,0)}else l=this.strokeWidth;if(this.effectiveStrokeWidth=l,this.crisp&&!e){var f=this.alignment,d=this.align;r.rect(d(f,n),d(f,i),d(f,n,a),d(f,i,s))}else r.rect(n,i,a,s)},t.prototype.computeBBox=function(){var e=this;return new Ie(e.x,e.y,e.width,e.height)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.computeBBox().containsPoint(n.x,n.y)},t.prototype.isPointInStroke=function(e,r){return!1},t.prototype.fillStroke=function(e){if(this.scene){var r=this.scene.canvas.pixelRatio||1;if(this.fill){e.fillStyle=this.gradientInstance?this.gradientInstance.createGradient(e,this.computeBBox()):this.fill,e.globalAlpha=this.opacity*this.fillOpacity;var n=this.fillShadow;n&&n.enabled&&(e.shadowColor=n.color,e.shadowOffsetX=n.xOffset*r,e.shadowOffsetY=n.yOffset*r,e.shadowBlur=n.blur*r),e.fill()}if(e.shadowColor="rgba(0, 0, 0, 0)",this.stroke&&this.effectiveStrokeWidth){e.strokeStyle=this.stroke,e.globalAlpha=this.opacity*this.strokeOpacity,e.lineWidth=this.effectiveStrokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin);var i=this.strokeShadow;i&&i.enabled&&(e.shadowColor=i.color,e.shadowOffsetX=i.xOffset*r,e.shadowOffsetY=i.yOffset*r,e.shadowBlur=i.blur*r),e.stroke()}}},t.className="Rect",t}(lt),N_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),dn=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._x=0,e._y=0,e._size=12,e}return N_(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(e){this._size!==e&&(this._size=Math.abs(e),this.dirtyPath=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){var e=this,i=e.size,a=i/2;return new Ie(e.x-a,e.y-a,i,i)},t}(lt),G_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ra=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return G_(t,o),t.prototype.updatePath=function(){var e=this,r=e.path,n=e.x,i=e.y,a=this.size/2,l=this.alignment,c=this.align;r.clear(),r.moveTo(c(l,n-a),c(l,i-a)),r.lineTo(c(l,n+a),c(l,i-a)),r.lineTo(c(l,n+a),c(l,i+a)),r.lineTo(c(l,n-a),c(l,i+a)),r.closePath()},t.className="Square",t}(dn),B_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),j_=function(o){function t(){var e=o.call(this)||this;e.label=new nt,e._marker=new Ra,e._markerSize=15,e._spacing=8;var r=e.label;return r.textBaseline="middle",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.fill="black",r.y=sn.has.textMetrics?1:0,e.append([e.marker,r]),e.update(),e}return B_(t,o),Object.defineProperty(t.prototype,"text",{get:function(){return this.label.text},set:function(e){this.label.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this.label.fontStyle},set:function(e){this.label.fontStyle=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.label.fontWeight},set:function(e){this.label.fontWeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.label.fontSize},set:function(e){this.label.fontSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.label.fontFamily},set:function(e){this.label.fontFamily=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.label.fill},set:function(e){this.label.fill=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){return this._marker},set:function(e){this._marker!==e&&(this.removeChild(this._marker),this._marker=e,this.appendChild(e),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerSize",{get:function(){return this._markerSize},set:function(e){this._markerSize!==e&&(this._markerSize=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerFill",{get:function(){return this.marker.fill},set:function(e){this.marker.fill=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerStroke",{get:function(){return this.marker.stroke},set:function(e){this.marker.stroke=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerStrokeWidth",{get:function(){return this.marker.strokeWidth},set:function(e){this.marker.strokeWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerFillOpacity",{get:function(){return this.marker.fillOpacity},set:function(e){this.marker.fillOpacity=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerStrokeOpacity",{get:function(){return this.marker.strokeOpacity},set:function(e){this.marker.strokeOpacity=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.marker.opacity},set:function(e){this.marker.opacity=e,this.label.opacity=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spacing",{get:function(){return this._spacing},set:function(e){this._spacing!==e&&(this._spacing=e,this.update())},enumerable:!0,configurable:!0}),t.prototype.update=function(){var r=this.markerSize;this.marker.size=r,this.label.x=r/2+this.spacing},t.className="MarkerLabel",t}(Ge),W_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qh=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return W_(t,o),t.prototype.updatePath=function(){var e=this,r=e.x,n=e.y,i=e.path,s=e.size/2;i.clear(),i.cubicArc(r,n,s,s,0,0,2*Math.PI,0),i.closePath()},t.className="Circle",t}(dn),V_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),H_=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return V_(t,o),t.prototype.updatePath=function(){var r=this.x,n=this.y,a=this.path,l=this.size/4.2;a.clear(),a.moveTo(r-=l,n),a.lineTo(r-=l,n-=l),a.lineTo(r+=l,n-=l),a.lineTo(r+=l,n+=l),a.lineTo(r+=l,n-=l),a.lineTo(r+=l,n+=l),a.lineTo(r-=l,n+=l),a.lineTo(r+=l,n+=l),a.lineTo(r-=l,n+=l),a.lineTo(r-=l,n-=l),a.lineTo(r-=l,n+=l),a.lineTo(r-=l,n-=l),a.closePath()},t.className="Cross",t}(dn),z_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),U_=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return z_(t,o),t.prototype.updatePath=function(){var r=this.x,n=this.y,a=this.path,l=this.size/2;a.clear(),a.moveTo(r,n-=l),a.lineTo(r+=l,n+=l),a.lineTo(r-=l,n+=l),a.lineTo(r-=l,n-=l),a.lineTo(r+=l,n-=l),a.closePath()},t.className="Diamond",t}(dn),$_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),K_=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return $_(t,o),t.prototype.rad=function(e){return e/180*Math.PI},t.prototype.updatePath=function(){var e=this,r=e.x,n=e.path,a=e.rad,s=e.size/4,l=this.y+s/2;n.clear(),n.cubicArc(r-s,l-s,s,s,0,a(130),a(330),0),n.cubicArc(r+s,l-s,s,s,0,a(220),a(50),0),n.lineTo(r,l+s),n.closePath()},t.className="Heart",t}(dn),Y_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),X_=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Y_(t,o),t.prototype.updatePath=function(){var r=this.x,n=this.y,a=this.path,l=this.size/3,c=l/2;a.clear(),a.moveTo(r-=c,n-=c),a.lineTo(r,n-=l),a.lineTo(r+=l,n),a.lineTo(r,n+=l),a.lineTo(r+=l,n),a.lineTo(r,n+=l),a.lineTo(r-=l,n),a.lineTo(r,n+=l),a.lineTo(r-=l,n),a.lineTo(r,n-=l),a.lineTo(r-=l,n),a.lineTo(r,n-=l),a.closePath()},t.className="Plus",t}(dn),q_=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Z_=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return q_(t,o),t.prototype.updatePath=function(){var r=this.x,n=this.y,a=this.path,l=1.1*this.size;a.clear(),a.moveTo(r,n-=.48*l),a.lineTo(r+=.5*l,n+=.87*l),a.lineTo(r-=l,n),a.closePath()},t.className="Triangle",t}(dn);function ii(o){if(void 0===o&&(o=Ra),"string"==typeof o)switch(o){case"circle":return qh;case"cross":return H_;case"diamond":return U_;case"heart":return K_;case"plus":return X_;case"triangle":return Z_;default:return Ra}return"function"==typeof o?o:Ra}var Fa=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ye=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Nr=(()=>(function(o){o[o.Vertical=0]="Vertical",o[o.Horizontal=1]="Horizontal"}(Nr||(Nr={})),Nr))(),Gr=(()=>(function(o){o.Top="top",o.Right="right",o.Bottom="bottom",o.Left="left"}(Gr||(Gr={})),Gr))(),J_=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.color="black",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e}return Fa(t,o),Ye([G("change")],t.prototype,"color",void 0),Ye([G("layoutChange")],t.prototype,"fontStyle",void 0),Ye([G("layoutChange")],t.prototype,"fontWeight",void 0),Ye([G("layoutChange")],t.prototype,"fontSize",void 0),Ye([G("layoutChange")],t.prototype,"fontFamily",void 0),Ye([G()],t.prototype,"formatter",void 0),t}(rt),Q_=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.size=15,e.padding=8,e.strokeWidth=1,e}return Fa(t,o),Ye([G("layoutChange")],t.prototype,"size",void 0),Ye([G("layoutChange")],t.prototype,"shape",void 0),Ye([G("layoutChange")],t.prototype,"padding",void 0),Ye([G("change")],t.prototype,"strokeWidth",void 0),t}(rt),eb=function(o){function t(){var e=o.call(this)||this;e.marker=new Q_,e.label=new J_,e.paddingX=16,e.paddingY=8;var r=function(){return e.fireEvent({type:"change"})};e.marker.addEventListener("change",r),e.label.addEventListener("change",r);var n=function(){return e.fireEvent({type:"layoutChange"})};return e.marker.addEventListener("layoutChange",n),e.label.addEventListener("layoutChange",n),e}return Fa(t,o),Ye([G("layoutChange")],t.prototype,"paddingX",void 0),Ye([G("layoutChange")],t.prototype,"paddingY",void 0),t}(rt),tb=function(o){function t(){var e=o.call(this)||this;return e.id=Zn(e),e.group=new Ge,e.itemSelection=je.select(e.group).selectAll(),e.oldSize=[0,0],e.item=new eb,e.data=[],e.enabled=!0,e.orientation=Nr.Vertical,e.position=Gr.Right,e.spacing=20,e._size=[0,0],e.addPropertyListener("data",e.onDataChange),e.addPropertyListener("enabled",e.onEnabledChange),e.addPropertyListener("position",e.onPositionChange),e.item.marker.addPropertyListener("shape",e.onMarkerShapeChange,e),e.addEventListener("change",e.update),e.item.addEventListener("change",function(){return e.fireEvent({type:"change"})}),e.item.addEventListener("layoutChange",function(){return e.fireEvent({type:"layoutChange"})}),e}return Fa(t,o),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),t.prototype.onDataChange=function(e){this.group.visible=e.value.length>0&&this.enabled},t.prototype.onEnabledChange=function(e){this.group.visible=e.value&&this.data.length>0},t.prototype.onPositionChange=function(e){switch(e.value){case"right":case"left":this.orientation=Nr.Vertical;break;case"bottom":case"top":this.orientation=Nr.Horizontal}},t.prototype.onMarkerShapeChange=function(){this.itemSelection=this.itemSelection.setData([]),this.itemSelection.exit.remove(),this.group.scene&&(this.group.scene.dirty=!1)},t.prototype.performLayout=function(e,r){var n=this.item,i=n.marker,a=n.paddingX,s=n.paddingY,l=this.itemSelection.setData(this.data,function($,J){var H=ii(i.shape||J.marker.shape);return J.id+"-"+J.itemId+"-"+H.name});l.exit.remove();var c=l.enter.append(j_).each(function($,J){var H=ii(i.shape||J.marker.shape);$.marker=new H}),h=this.itemSelection=l.merge(c),p=h.size,f=[],d=this.item.marker,v=this.item.label;h.each(function($,J){$.markerSize=d.size,$.spacing=d.padding,$.fontStyle=v.fontStyle,$.fontWeight=v.fontWeight,$.fontSize=v.fontSize,$.fontFamily=v.fontFamily;var H=J.label.text;H.length>25&&(H=H.substring(0,25-"...".length)+"..."),$.text=H,f.push($.computeBBox())});var m=f.length&&f[0].height,C=0,_=0,w=0,P=0;switch(e=Math.max(1,e),r=Math.max(1,r),this.orientation){case Nr.Horizontal:if(!(isFinite(e)&&e>0))return!1;C=0;var O=0;do{var A=0;O=0,_=0,C++;for(var E=0;E<p;)(M=f[E]).width>_&&(_=M.width),++E%C==0&&(A+=_,_=0,O++);E%C!=0&&(A+=_,O++),w=A+(O-1)*a}while(w>e&&O>1);P=m*C+(C-1)*s;break;case Nr.Vertical:if(!(isFinite(r)&&r>0))return!1;C=2*p;do{C=(C>>1)+C%2,_=0,A=0;var R=0,B=0;for(E=0;E<p;){var M=f[E];B||(R+=M.height),M.width>_&&(_=M.width),++E%C==0&&(A+=_,_=0,B++)}E%C!=0&&(A+=_,B++),w=A+(B-1)*a,P=R+(C-1)*s}while(P>r&&C>1)}var j=(e-w)/2,I=(r-P)/2,F=0,N=0;_=0,h.each(function($,J,H){$.translationX=Math.floor(j+F),$.translationY=Math.floor(I+N);var q=f[H];q.width>_&&(_=q.width),(H+1)%C==0?(F+=_+a,N=0,_=0):N+=q.height+s}),this.update();var V=this._size,Y=this.oldSize;V[0]=w,V[1]=P,(V[0]!==Y[0]||V[1]!==Y[1])&&(Y[0]=V[0],Y[1]=V[1])},t.prototype.update=function(){var e=this;this.itemSelection.each(function(r,n){var i=n.marker;r.markerFill=i.fill,r.markerStroke=i.stroke,r.markerStrokeWidth=e.item.marker.strokeWidth,r.markerFillOpacity=i.fillOpacity,r.markerStrokeOpacity=i.strokeOpacity,r.opacity=n.enabled?1:.5,r.color=e.item.label.color})},t.prototype.getDatumForPoint=function(e,r){var n=this.group.pickNode(e,r);if(n&&n.parent)return n.parent.datum},t.className="Legend",Ye([G("layoutChange")],t.prototype,"data",void 0),Ye([G("layoutChange")],t.prototype,"enabled",void 0),Ye([G("layoutChange")],t.prototype,"orientation",void 0),Ye([G("layoutChange")],t.prototype,"position",void 0),Ye([G("layoutChange")],t.prototype,"spacing",void 0),t}(rt),Ul=function(){function o(){}return o.init=function(){var t=this,e=window.ResizeObserver;e?this.resizeObserver=new e(function(n){var i,a;try{for(var s=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),l=s.next();!l.done;l=s.next()){var c=l.value,h=c.contentRect,p=h.width,f=h.height;t.checkSize(t.elements.get(c.target),c.target,p,f)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}}):window.setInterval(function(){t.elements.forEach(function(n,i){t.checkClientSize(i,n)})},100),this.ready=!0},o.checkSize=function(t,e,r,n){t&&(!t.size||r!==t.size.width||n!==t.size.height)&&(t.size={width:r,height:n},t.cb(t.size,e))},o.observe=function(t,e){this.ready||this.init(),this.unobserve(t),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})},o.unobserve=function(t){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t)},o.checkClientSize=function(t,e){this.checkSize(e,t,t.clientWidth?t.clientWidth:0,t.clientHeight?t.clientHeight:0)},o.elements=new Map,o.ready=!1,o}();function nb(o,t,e,r,n,i,a){var c=o-(o<r?r:o>r+i?r+i:o),h=t-(t<n?n:t>n+a?n+a:t);return Math.sqrt(c*c+h*h)<=e}function ib(o,t,e,r,n,i,a,s){return o+e>n&&o<n+a&&t+r>i&&t<i+s}function ob(o,t,e,r,n,i,a,s){return n+a<o+e&&n>o&&i>t&&i+s<t+r}var Zh=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ka=function(){return ka=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ka.apply(this,arguments)},oi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i};function et(o,t){if("string"==typeof o)return o;t=t||{};var e=o.content,n=o.title,i=void 0===n?t.title||void 0:n,a=o.color,l=o.backgroundColor;return(i?'<div class="'+Tt.defaultTooltipClass+'-title"\n        style="color: '+(void 0===a?t.color||"white":a)+"; background-color: "+(void 0===l?t.backgroundColor||"#888":l)+'">'+i+"</div>":"")+'<div class="'+Tt.defaultTooltipClass+'-content">'+(void 0===e?t.content||"":e)+"</div>"}var ub=function(o){function t(e,r){var n=o.call(this)||this;n.enabled=!0,n.class=Tt.defaultTooltipClass,n.delay=0,n.tracking=!0,n.showTimeout=0,n.constrained=!1,n.chart=e,n.class="";var i=r.body,a=r.createElement("div");if(n.element=i.appendChild(a),window.IntersectionObserver){var s=n.chart.scene.canvas.element,l=new IntersectionObserver(function(c){var h,p;try{for(var f=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),d=f.next();!d.done;d=f.next()){var v=d.value;v.target===s&&0===v.intersectionRatio&&n.toggle(!1)}}catch(g){h={error:g}}finally{try{d&&!d.done&&(p=f.return)&&p.call(f)}finally{if(h)throw h.error}}},{root:i});l.observe(s),n.observer=l}return n}return Zh(t,o),t.prototype.destroy=function(){var e=this.element.parentNode;e&&e.removeChild(this.element),this.observer&&this.observer.unobserve(this.chart.scene.canvas.element)},t.prototype.isVisible=function(){var e=this.element;if(e.classList)return!e.classList.contains(Tt.defaultTooltipClass+"-hidden");var r=e.getAttribute("class");return!!r&&r.split(" ").indexOf(Tt.defaultTooltipClass+"-hidden")<0},t.prototype.updateClass=function(e,r){var n=[Tt.defaultTooltipClass,this.class];!0!==e&&n.push(Tt.defaultTooltipClass+"-hidden"),!0!==r&&n.push(Tt.defaultTooltipClass+"-arrow"),this.element.setAttribute("class",n.join(" "))},t.prototype.show=function(e,r,n){var i=this;void 0===n&&(n=!1);var a=this.element;if(void 0!==r)a.innerHTML=r;else if(!a.innerHTML)return;var s=e.pageX-a.clientWidth/2,l=e.pageY-a.clientHeight-8;if(this.constrained=!1,this.chart.container){var c=a.getBoundingClientRect(),p=window.innerWidth-c.width-1;s<0?(s=0,this.updateClass(!0,this.constrained=!0)):s>p&&(s=p,this.updateClass(!0,this.constrained=!0)),l<window.pageYOffset&&(l=e.pageY+20,this.updateClass(!0,this.constrained=!0))}if(a.style.left=Math.round(s)+"px",a.style.top=Math.round(l)+"px",this.delay>0&&!n)return this.toggle(!1),void(this.showTimeout=window.setTimeout(function(){i.toggle(!0)},this.delay));this.toggle(!0)},t.prototype.toggle=function(e){e||(window.clearTimeout(this.showTimeout),this.chart.lastPick&&!this.delay&&(this.chart.dehighlightDatum(),this.chart.lastPick=void 0)),this.updateClass(e,this.constrained)},oi([G()],t.prototype,"enabled",void 0),oi([G()],t.prototype,"class",void 0),oi([G()],t.prototype,"delay",void 0),oi([G()],t.prototype,"tracking",void 0),t}(rt),Tt=function(o){function t(e){void 0===e&&(e=window.document);var r=o.call(this)||this;r.id=Zn(r),r.background=new gr,r.legend=new tb,r.legendAutoPadding=new xa,r.captionAutoPadding=0,r._container=void 0,r._data=[],r._autoSize=!1,r.padding=new xa(20),r._axes=[],r._series=[],r._axesChanged=!1,r._seriesChanged=!1,r.layoutCallbackId=0,r._performLayout=function(){r.layoutCallbackId=0,r.background.width=r.width,r.background.height=r.height,r.performLayout(),r.layoutPending||r.fireEvent({type:"layoutDone"})},r.dataCallbackId=0,r.nodeData=new Map,r.updateCallbackId=0,r.legendBBox=new Ie(0,0,0,0),r._onMouseDown=r.onMouseDown.bind(r),r._onMouseMove=r.onMouseMove.bind(r),r._onMouseUp=r.onMouseUp.bind(r),r._onMouseOut=r.onMouseOut.bind(r),r._onClick=r.onClick.bind(r),r.pointerInsideLegend=!1,r.pointerOverLegendDatum=!1;var n=new Ge,i=r.background;i.fill="white",n.appendChild(i);var a=r._element=e.createElement("div");a.setAttribute("class","ag-chart-wrapper");var s=new Xh(e);r.scene=s,r.autoSize=!0,s.root=n,s.container=a,r.padding.addEventListener("layoutChange",r.scheduleLayout,r);var l=r.legend;if(l.addEventListener("layoutChange",r.scheduleLayout,r),l.item.label.addPropertyListener("formatter",r.updateLegend,r),l.addPropertyListener("position",r.onLegendPositionChange,r),r.tooltip=new ub(r,e),r.tooltip.addPropertyListener("class",function(){return r.tooltip.toggle()}),t.tooltipDocuments.indexOf(e)<0){var c=e.createElement("style");c.innerHTML='\n.ag-chart-tooltip {\n    display: table;\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n.ag-chart-tooltip-hidden {\n    top: -10000px !important;\n}\n\n.ag-chart-tooltip-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.ag-chart-tooltip-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n.ag-chart-tooltip-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n',e.head.insertBefore(c,e.head.querySelector("style")),t.tooltipDocuments.push(e)}return r.setupDomListeners(s.canvas.element),r.addPropertyListener("title",r.onCaptionChange),r.addPropertyListener("subtitle",r.onCaptionChange),r.addEventListener("layoutChange",r.scheduleLayout),r}return Zh(t,o),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(e){if(this._container!==e){var r=this.element.parentNode;null!=r&&r.removeChild(this.element),e&&e.appendChild(this.element),this._container=e}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.series.forEach(function(r){return r.data=e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.scene.width},set:function(e){this.autoSize=!1,this.width!==e&&(this.scene.resize(e,this.height),this.fireEvent({type:"layoutChange"}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scene.height},set:function(e){this.autoSize=!1,this.height!==e&&(this.scene.resize(this.width,e),this.fireEvent({type:"layoutChange"}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSize",{get:function(){return this._autoSize},set:function(e){if(this._autoSize!==e){this._autoSize=e;var r=this.element.style;if(e){var n=this;Ul.observe(this.element,function(i){(i.width!==n.width||i.height!==n.height)&&(n.scene.resize(i.width,i.height),n.fireEvent({type:"layoutChange"}))}),r.display="block",r.width="100%",r.height="100%"}else Ul.unobserve(this.element),r.display="inline-block",r.width="auto",r.height="auto"}},enumerable:!0,configurable:!0}),t.prototype.download=function(e){this.scene.download(e)},t.prototype.destroy=function(){this.tooltip.destroy(),Ul.unobserve(this.element),this.container=void 0,this.cleanupDomListeners(this.scene.canvas.element),this.scene.container=void 0},t.prototype.onLegendPositionChange=function(){this.legendAutoPadding.clear(),this.layoutPending=!0},t.prototype.onCaptionChange=function(e){var r=e.value,n=e.oldValue;n&&(n.removeEventListener("change",this.scheduleLayout,this),this.scene.root.removeChild(n.node)),r&&(r.addEventListener("change",this.scheduleLayout,this),this.scene.root.appendChild(r.node))},Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},set:function(e){var r=this;this._axes.forEach(function(n){return r.detachAxis(n)}),this._axes=e.filter(function(n){return!n.linkedTo}).concat(e.filter(function(n){return n.linkedTo})),this._axes.forEach(function(n){return r.attachAxis(n)}),this.axesChanged=!0},enumerable:!0,configurable:!0}),t.prototype.attachAxis=function(e){this.scene.root.insertBefore(e.group,this.seriesRoot)},t.prototype.detachAxis=function(e){this.scene.root.removeChild(e.group)},Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(e){var r=this;this.removeAllSeries(),e.forEach(function(n){return r.addSeries(n)})},enumerable:!0,configurable:!0}),t.prototype.scheduleLayout=function(){this.layoutPending=!0},t.prototype.scheduleData=function(){this.dehighlightDatum(),this.dataPending=!0},t.prototype.addSeries=function(e,r){var i=this.series,a=this.seriesRoot;if(i.indexOf(e)<0){var l=r?i.indexOf(r):-1;return l>=0?(i.splice(l,0,e),a.insertBefore(e.group,r.group)):(i.push(e),a.append(e.group)),this.initSeries(e),this.seriesChanged=!0,this.axesChanged=!0,!0}return!1},t.prototype.initSeries=function(e){e.chart=this,e.data||(e.data=this.data),e.addEventListener("layoutChange",this.scheduleLayout,this),e.addEventListener("dataChange",this.scheduleData,this),e.addEventListener("legendChange",this.updateLegend,this),e.addEventListener("nodeClick",this.onSeriesNodeClick,this)},t.prototype.freeSeries=function(e){e.chart=void 0,e.removeEventListener("layoutChange",this.scheduleLayout,this),e.removeEventListener("dataChange",this.scheduleData,this),e.removeEventListener("legendChange",this.updateLegend,this),e.removeEventListener("nodeClick",this.onSeriesNodeClick,this)},t.prototype.addSeriesAfter=function(e,r){var i=this.series,a=this.seriesRoot;if(i.indexOf(e)<0){var l=r?this.series.indexOf(r):-1;l>=0?(l+1<i.length?a.insertBefore(e.group,i[l+1].group):a.append(e.group),this.initSeries(e),i.splice(l+1,0,e)):(i.length>0?a.insertBefore(e.group,i[0].group):a.append(e.group),this.initSeries(e),i.unshift(e)),this.seriesChanged=!0,this.axesChanged=!0}return!1},t.prototype.removeSeries=function(e){var r=this.series.indexOf(e);return r>=0&&(this.series.splice(r,1),this.freeSeries(e),this.seriesRoot.removeChild(e.group),this.seriesChanged=!0,!0)},t.prototype.removeAllSeries=function(){var e=this;this.series.forEach(function(r){e.freeSeries(r),e.seriesRoot.removeChild(r.group)}),this._series=[],this.seriesChanged=!0},t.prototype.assignSeriesToAxes=function(){var e=this;this.axes.forEach(function(r){var n=r.direction+"Axis",i=[];e.series.forEach(function(a){a[n]===r&&i.push(a)}),r.boundSeries=i}),this.seriesChanged=!1},t.prototype.assignAxesToSeries=function(e){var r=this;void 0===e&&(e=!1);var n={};this.axes.forEach(function(i){var a=i.direction;(n[a]||(n[a]=[])).push(i)}),this.series.forEach(function(i){i.directions.forEach(function(a){var s=a+"Axis";if(!i[s]||e){var l=n[a];if(l){var c=r.findMatchingAxis(l,i.getKeys(a));c&&(i[s]=c)}}})}),this.axesChanged=!1},t.prototype.findMatchingAxis=function(e,r){for(var n=0;n<e.length;n++){var i=e[n],a=i.keys;if(!a.length)return i;if(r)for(var s=0;s<r.length;s++)if(a.indexOf(r[s])>=0)return i}},Object.defineProperty(t.prototype,"axesChanged",{get:function(){return this._axesChanged},set:function(e){this._axesChanged=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seriesChanged",{get:function(){return this._seriesChanged},set:function(e){this._seriesChanged=e,e&&(this.dataPending=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutPending",{get:function(){return!!this.layoutCallbackId},set:function(e){e?this.layoutCallbackId||this.dataPending||(this.layoutCallbackId=requestAnimationFrame(this._performLayout),this.series.forEach(function(r){return r.nodeDataPending=!0})):this.layoutCallbackId&&(cancelAnimationFrame(this.layoutCallbackId),this.layoutCallbackId=0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataPending",{get:function(){return!!this.dataCallbackId},set:function(e){var r=this;this.dataCallbackId&&(clearTimeout(this.dataCallbackId),this.dataCallbackId=0),e&&(this.dataCallbackId=window.setTimeout(function(){r.dataPending=!1,r.processData()},0))},enumerable:!0,configurable:!0}),t.prototype.processData=function(){this.layoutPending=!1,this.axesChanged&&(this.assignAxesToSeries(!0),this.assignSeriesToAxes()),this.seriesChanged&&this.assignSeriesToAxes(),this.series.forEach(function(e){return e.processData()}),this.updateLegend(),this.layoutPending=!0},t.prototype.createNodeData=function(){var e=this;this.nodeData.clear(),this.series.forEach(function(r){var n=r.visible?r.createNodeData():[];e.nodeData.set(r,n)})},t.prototype.placeLabels=function(){var e=[],r=[];this.nodeData.forEach(function(a,s){s.visible&&s.label.enabled&&(e.push(s),r.push(s.getLabelData()))});var n=this.seriesRect,i=n?function ab(o,t,e){void 0===e&&(e=5);var r=[];o=o.map(function(h){return h.slice().sort(function(p,f){return f.size-p.size})});for(var n=0;n<o.length;n++){var i=r[n]=[],a=o[n];if(a&&a.length&&a[0].label)for(var s=function(h,p){var f=a[h],d=f.label,g=f.point.x-.5*d.width,y=f.point.y-.5*f.size-d.height-e,m=d.width,C=d.height;return!t||ob(t.x,t.y,t.width,t.height,g,y,m,C)?o.some(function(O){return O.some(function(A){return nb(A.point.x,A.point.y,.5*A.size,g,y,m,C)})})||r.some(function(O){return O.some(function(A){return ib(A.x,A.y,A.width,A.height,g,y,m,C)})})?"continue":void i.push({index:h,text:d.text,x:g,y,width:m,height:C}):"continue"},l=0,c=a.length;l<c;l++)s(l)}return r}(r,{x:0,y:0,width:n.width,height:n.height}):[];return new Map(i.map(function(a,s){return[e[s],a]}))},t.prototype.updateLegend=function(){var e=[];this.series.filter(function(n){return n.showInLegend}).forEach(function(n){return n.listSeriesItems(e)});var r=this.legend.item.label.formatter;r&&e.forEach(function(n){return n.label.text=r({id:n.id,itemId:n.itemId,value:n.label.text})}),this.legend.data=e},Object.defineProperty(t.prototype,"updatePending",{get:function(){return!!this.updateCallbackId},set:function(e){var r=this;this.updateCallbackId&&(clearTimeout(this.updateCallbackId),this.updateCallbackId=0),e&&!this.layoutPending&&(this.updateCallbackId=window.setTimeout(function(){r.update()},0))},enumerable:!0,configurable:!0}),t.prototype.update=function(){this.updatePending=!1,this.series.forEach(function(e){e.updatePending&&e.update()})},t.prototype.positionCaptions=function(){var r=this.title,n=this.subtitle,i=!1,a=!1,l=10;if(r&&r.enabled){r.node.x=this.width/2,r.node.y=l,i=!0;var c=r.node.computeBBox();if(c&&(l=c.y+c.height),n&&n.enabled){n.node.x=this.width/2,n.node.y=l+10,a=!0;var h=n.node.computeBBox();h&&(l=h.y+h.height)}}r&&(r.node.visible=i),n&&(n.node.visible=a),this.captionAutoPadding=Math.floor(l)},t.prototype.positionLegend=function(){if(this.legend.enabled&&this.legend.data.length){var f,e=this,r=e.legend,n=e.captionAutoPadding,i=e.legendAutoPadding,a=this.width,s=this.height-n,l=r.group,c=r.spacing,h=0,p=0;switch(r.position){case"bottom":r.performLayout(a-2*c,0),f=l.computeBBox(),l.visible=f.height<Math.floor(.5*s),l.visible?(h=(a-f.width)/2-f.x,p=n+s-f.height-f.y-c,i.bottom=f.height):i.bottom=0;break;case"top":r.performLayout(a-2*c,0),f=l.computeBBox(),l.visible=f.height<Math.floor(.5*s),l.visible?(h=(a-f.width)/2-f.x,p=n+c-f.y,i.top=f.height):i.top=0;break;case"left":r.performLayout(0,s-2*c),f=l.computeBBox(),l.visible=f.width<Math.floor(.5*a),l.visible?(h=c-f.x,p=n+(s-f.height)/2-f.y,i.left=f.width):i.left=0;break;default:r.performLayout(0,s-2*c),f=l.computeBBox(),l.visible=f.width<Math.floor(.5*a),l.visible?(h=a-f.width-f.x-c,p=n+(s-f.height)/2-f.y,i.right=f.width):i.right=0}l.visible&&(l.translationX=Math.floor(h+l.translationX),l.translationY=Math.floor(p+l.translationY),this.legendBBox=l.computeBBox())}},t.prototype.setupDomListeners=function(e){e.addEventListener("mousedown",this._onMouseDown),e.addEventListener("mousemove",this._onMouseMove),e.addEventListener("mouseup",this._onMouseUp),e.addEventListener("mouseout",this._onMouseOut),e.addEventListener("click",this._onClick)},t.prototype.cleanupDomListeners=function(e){e.removeEventListener("mousedown",this._onMouseDown),e.removeEventListener("mousemove",this._onMouseMove),e.removeEventListener("mouseup",this._onMouseUp),e.removeEventListener("mouseout",this._onMouseOut),e.removeEventListener("click",this._onClick)},t.prototype.getSeriesRect=function(){return this.seriesRect},t.prototype.pickSeriesNode=function(e,r){if(this.seriesRect&&this.seriesRect.containsPoint(e,r))for(var n=this.series,i=void 0,a=n.length-1;a>=0;a--){var s=n[a];if(s.visible&&s.group.visible&&(i=s.pickGroup.pickNode(e,r)))return{series:s,node:i}}},t.prototype.pickClosestSeriesNodeDatum=function(e,r){if(this.seriesRect&&this.seriesRect.containsPoint(e,r)){for(var s,n=this.series,a=1/0,l=function(h){var p=n[h];if(!p.visible||!p.group.visible)return"continue";var f=p.group.transformPoint(e,r);p.getNodeData().forEach(function(d){var v,g;if(d.point){var m=p.yAxis;if((null===(v=p.xAxis)||void 0===v?void 0:v.inRange(d.point.x))&&(null===(g=m)||void 0===g?void 0:g.inRange(d.point.y))){var _=function i(h,p){return Math.sqrt(Math.pow(h.x-p.x,2)+Math.pow(h.y-p.y,2))}(f,d.point);_<a&&(a=_,s=d)}}})},c=n.length-1;c>=0;c--)l(c);return s}},t.prototype.onMouseMove=function(e){this.handleLegendMouseMove(e),this.tooltip.enabled&&(this.tooltip.delay>0&&this.tooltip.toggle(!1),this.handleTooltip(e))},t.prototype.handleTooltip=function(e){var c,n=this.lastPick,i=this.tooltip.tracking,a=e.offsetX,s=e.offsetY,l=this.pickSeriesNode(a,s);if(l&&l.node instanceof Lr){var h=l.node;if(c=h.datum,n&&n.datum===c&&(n.node=h,n.event=e),!h.datum.point||!i)return void(n&&n.node===h?l.series.tooltip.enabled&&this.tooltip.show(e):this.onSeriesDatumPick(e,h.datum,h,e))}var p=!1;if(i){var f=this.pickClosestSeriesNodeDatum(a,s);if(f&&f.point){var d=f.point,y=this.scene.canvas,m=f.series.group.inverseTransformPoint(d.x,d.y),C=y.element.getBoundingClientRect();this.onSeriesDatumPick({pageX:Math.round(C.left+window.pageXOffset+m.x),pageY:Math.round(C.top+window.pageYOffset+m.y)},f,c===f&&l?l.node:void 0,e)}else p=!0}n&&(p||!i)&&(this.dehighlightDatum(),this.tooltip.toggle(!1),this.lastPick=void 0)},t.prototype.onMouseDown=function(e){},t.prototype.onMouseUp=function(e){},t.prototype.onMouseOut=function(e){this.tooltip.toggle(!1)},t.prototype.onClick=function(e){this.checkSeriesNodeClick()||this.checkLegendClick(e)||this.fireEvent({type:"click",event:e})},t.prototype.checkSeriesNodeClick=function(){var e=this.lastPick;if(e&&e.event&&e.node){var n=e.datum;return n.series.fireNodeClickEvent(e.event,n),!0}return!1},t.prototype.onSeriesNodeClick=function(e){this.fireEvent(ka(ka({},e),{type:"seriesNodeClick"}))},t.prototype.checkLegendClick=function(e){var r=this.legend.getDatumForPoint(e.offsetX,e.offsetY);if(r){var n=r.id,i=r.itemId,a=r.enabled,s=El(this.series,function(l){return l.id===n});if(s)return s.toggleSeriesItem(i,!a),a&&this.tooltip.toggle(!1),this.legend.fireEvent({type:"click",event:e,itemId:i,enabled:!a}),!0}return!1},t.prototype.handleLegendMouseMove=function(e){if(this.legend.enabled){var r=e.offsetX,n=e.offsetY,i=this.legend.getDatumForPoint(r,n),a=this.legendBBox.containsPoint(r,n),s=a&&void 0!==i;if(!a&&this.pointerInsideLegend)return this.pointerInsideLegend=!1,this.element.style.cursor="default",void this.dehighlightDatum();s&&!this.pointerOverLegendDatum&&(this.element.style.cursor="pointer"),!s&&this.pointerOverLegendDatum&&(this.element.style.cursor="default"),this.pointerInsideLegend=a,this.pointerOverLegendDatum=s;var l=this.highlightedDatum;if(i){var c=i.id,h=i.itemId;if(i.enabled){var f=El(this.series,function(d){return d.id===c});f&&(this.highlightedDatum={series:f,itemId:h,datum:void 0})}}(this.highlightedDatum&&!l||this.highlightedDatum&&l&&(this.highlightedDatum.series!==l.series||this.highlightedDatum.itemId!==l.itemId))&&this.series.forEach(function(d){return d.updatePending=!0})}},t.prototype.onSeriesDatumPick=function(e,r,n,i){var a=this.lastPick;if(a){if(a.datum===r)return;this.dehighlightDatum()}this.lastPick={datum:r,node:n,event:i},this.highlightDatum(r);var s=r.series.tooltip.enabled&&r.series.getTooltipHtml(r);s&&this.tooltip.show(e,s)},t.prototype.highlightDatum=function(e){this.element.style.cursor=e.series.cursor,this.highlightedDatum=e,this.series.forEach(function(r){return r.updatePending=!0})},t.prototype.dehighlightDatum=function(){this.highlightedDatum&&(this.highlightedDatum=void 0,this.series.forEach(function(e){return e.updatePending=!0}))},t.defaultTooltipClass="ag-chart-tooltip",t.tooltipDocuments=[],oi([G("layoutChange")],t.prototype,"title",void 0),oi([G("layoutChange")],t.prototype,"subtitle",void 0),t}(rt),cb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),co=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.isContainerNode=!0,e.path=new Ah,e._enabled=!0,e._dirtyPath=!0,e._x=0,e._y=0,e._width=10,e._height=10,e}return cb(t,o),t.prototype.containsPoint=function(e,r){var n=this.transformPoint(e,r);return n.x>=this.x&&n.x<=this.x+this.width&&n.y>=this.y&&n.y<=this.y+this.height},Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e,this.dirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&(this.dirty=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),t.prototype.updatePath=function(){var e=this.path;e.clear(),e.rect(this.x,this.y,this.width,this.height),this.dirtyPath=!1},t.prototype.computeBBox=function(){var e=this;return new Ie(e.x,e.y,e.width,e.height)},t.prototype.render=function(e){this.enabled&&(this.dirtyPath&&this.updatePath(),this.path.draw(e),e.clip());for(var r=this.children,n=r.length,i=0;i<n;i++){e.save();var a=r[i];a.visible&&a.render(e),e.restore()}},t.className="ClipRect",t}(hr),hb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jh=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._fill="#f2f2f2",e._stroke="#999999",e._strokeWidth=1,e._lineCap="square",e._centerX=0,e._centerY=0,e._width=8,e._gripLineGap=2,e._gripLineLength=8,e._height=16,e}return hb(t,o),Object.defineProperty(t.prototype,"centerX",{get:function(){return this._centerX},set:function(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this._centerY},set:function(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gripLineGap",{get:function(){return this._gripLineGap},set:function(e){this._gripLineGap!==e&&(this._gripLineGap=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gripLineLength",{get:function(){return this._gripLineLength},set:function(e){this._gripLineLength!==e&&(this._gripLineLength=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){var e=this,i=e.width,a=e.height;return new Ie(e.centerX-i/2,e.centerY-a/2,i,a)},t.prototype.isPointInPath=function(e,r){var n=this.transformPoint(e,r);return this.computeBBox().containsPoint(n.x,n.y)},t.prototype.updatePath=function(){var e=this,r=e.path,n=e.centerX,i=e.centerY,a=e.width,s=e.height,c=this.alignment,h=this.align;r.clear();var p=n-a/2,f=i-s/2,d=h(c,p),v=h(c,f),g=d+h(c,p,a),y=v+h(c,f,s);r.moveTo(d,v),r.lineTo(g,v),r.lineTo(g,y),r.lineTo(d,y),r.lineTo(d,v);var m=this.gripLineGap/2,C=this.gripLineLength/2;r.moveTo(h(c,n-m),h(c,i-C)),r.lineTo(h(c,n-m),h(c,i+C)),r.moveTo(h(c,n+m),h(c,i-C)),r.lineTo(h(c,n+m),h(c,i+C))},t.className="RangeHandle",t}(lt),fb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pb=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._stroke="#999999",e._strokeWidth=1,e._fill="#999999",e._fillOpacity=.2,e._lineCap="square",e._x=0,e._y=0,e._width=200,e._height=30,e.minRange=.05,e._min=0,e._max=1,e}return fb(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(e){e=Math.min(Math.max(e,0),this.max-this.minRange),!isNaN(e)&&this._min!==e&&(this._min=e,this.dirtyPath=!0,this.onRangeChange&&this.onRangeChange(e,this.max))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(e){e=Math.max(Math.min(e,1),this.min+this.minRange),!isNaN(e)&&this._max!==e&&(this._max=e,this.dirtyPath=!0,this.onRangeChange&&this.onRangeChange(this.min,e))},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){var e=this;return new Ie(e.x,e.y,e.width,e.height)},t.prototype.computeVisibleRangeBBox=function(){var e=this,r=e.x,i=e.width,c=r+i*e.min;return new Ie(c,e.y,r+i*e.max-c,e.height)},t.prototype.updatePath=function(){var e=this,r=e.path,n=e.x,i=e.y,a=e.width,s=e.height,l=e.min,c=e.max,p=this.alignment,f=this.align;r.clear();var d=f(p,n),v=f(p,i),g=d+f(p,n,a),y=v+f(p,i,s);r.moveTo(d,v),r.lineTo(g,v),r.lineTo(g,y),r.lineTo(d,y),r.lineTo(d,v);var m=f(p,n+a*l),C=f(p,n+a*c);r.moveTo(m,v),r.lineTo(m,y),r.lineTo(C,y),r.lineTo(C,v),r.lineTo(m,v)},t.className="RangeMask",t}(lt),db=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vb=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.isContainerNode=!0,e.minHandle=new Jh,e.maxHandle=new Jh,e.mask=function(){var r=t.defaults,n=r.x,i=r.y,a=r.width,s=r.height,l=r.min,c=r.max,h=new pb;h.x=n,h.y=i,h.width=a,h.height=s,h.min=l,h.max=c;var f=e.minHandle,d=e.maxHandle;return f.centerX=n,d.centerX=n+a,f.centerY=d.centerY=i+s/2,e.append([h,f,d]),h.onRangeChange=function(v,g){e.updateHandles(),e.onRangeChange&&e.onRangeChange(v,g)},h}(),e._x=t.defaults.x,e._y=t.defaults.y,e._width=t.defaults.width,e._height=t.defaults.height,e._min=t.defaults.min,e._max=t.defaults.max,e}return db(t,o),Object.defineProperty(t.prototype,"x",{get:function(){return this.mask.x},set:function(e){this.mask.x=e,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.mask.y},set:function(e){this.mask.y=e,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.mask.width},set:function(e){this.mask.width=e,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.mask.height},set:function(e){this.mask.height=e,this.updateHandles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.mask.min},set:function(e){this.mask.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.mask.max},set:function(e){this.mask.max=e},enumerable:!0,configurable:!0}),t.prototype.updateHandles=function(){var e=this,r=e.minHandle,n=e.maxHandle,i=e.x,a=e.y,s=e.width,l=e.height,c=e.mask;r.centerX=i+s*c.min,n.centerX=i+s*c.max,r.centerY=n.centerY=a+l/2},t.prototype.computeBBox=function(){return this.mask.computeBBox()},t.prototype.computeVisibleRangeBBox=function(){return this.mask.computeVisibleRangeBBox()},t.prototype.render=function(e){this.dirtyTransform&&this.computeTransformMatrix(),this.matrix.toContext(e);var r=this;[r.mask,r.minHandle,r.maxHandle].forEach(function(s){e.save(),s.visible&&s.render(e),e.restore()})},t.className="Range",t.defaults={x:0,y:0,width:200,height:30,min:0,max:1},t}(Ge),gb=function(){function o(t){this.rm=t}return Object.defineProperty(o.prototype,"fill",{get:function(){return this.rm.fill},set:function(t){this.rm.fill=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"stroke",{get:function(){return this.rm.stroke},set:function(t){this.rm.stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeWidth",{get:function(){return this.rm.strokeWidth},set:function(t){this.rm.strokeWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fillOpacity",{get:function(){return this.rm.fillOpacity},set:function(t){this.rm.fillOpacity=t},enumerable:!0,configurable:!0}),o}(),Qh=function(){function o(t){this.rh=t}return Object.defineProperty(o.prototype,"fill",{get:function(){return this.rh.fill},set:function(t){this.rh.fill=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"stroke",{get:function(){return this.rh.stroke},set:function(t){this.rh.stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"strokeWidth",{get:function(){return this.rh.strokeWidth},set:function(t){this.rh.strokeWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this.rh.width},set:function(t){this.rh.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.rh.height},set:function(t){this.rh.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gripLineGap",{get:function(){return this.rh.gripLineGap},set:function(t){this.rh.gripLineGap=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"gripLineLength",{get:function(){return this.rh.gripLineLength},set:function(t){this.rh.gripLineLength=t},enumerable:!0,configurable:!0}),o}(),yb=function(){function o(t){var e=this;this.rs=new vb,this.mask=new gb(this.rs.mask),this.minHandle=new Qh(this.rs.minHandle),this.maxHandle=new Qh(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.changedCursor=!1,this._margin=10,this.chart=t,t.scene.root.append(this.rs),this.rs.onRangeChange=function(r,n){return e.updateAxes(r,n)}}return Object.defineProperty(o.prototype,"enabled",{get:function(){return this.rs.visible},set:function(t){this.rs.visible=t,this.chart.layoutPending=!0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"x",{get:function(){return this.rs.x},set:function(t){this.rs.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"y",{get:function(){return this.rs.y},set:function(t){this.rs.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"width",{get:function(){return this.rs.width},set:function(t){this.rs.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this.rs.height},set:function(t){this.rs.height=t,this.chart.layoutPending=!0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"margin",{get:function(){return this._margin},set:function(t){this._margin=t,this.chart.layoutPending=!0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"min",{get:function(){return this.rs.min},set:function(t){this.rs.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"max",{get:function(){return this.rs.max},set:function(t){this.rs.max=t},enumerable:!0,configurable:!0}),o.prototype.updateAxes=function(t,e){var r=this,n=this.chart,i=!1;n.axes.forEach(function(a){if(a.direction===ye.X){!i&&(t>0||e<1)&&(i=!0),a.visibleRange=[t,e];var s=a.labelAutoRotated;a.update(),a.labelAutoRotated!==s&&(r.chart.layoutPending=!0)}}),n.seriesRoot.enabled=i,n.series.forEach(function(a){return a.nodeDataPending=!0})},o.prototype.onDragStart=function(t){if(this.enabled){var e=t.offsetX,r=t.offsetY,n=this.rs,i=n.minHandle,a=n.maxHandle,s=n.x,l=n.width,c=n.min,h=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(i.containsPoint(e,r)?this.minHandleDragging=!0:a.containsPoint(e,r)?this.maxHandleDragging=!0:h.containsPoint(e,r)&&(this.panHandleOffset=(e-s)/l-c))}},o.prototype.onDrag=function(t){if(this.enabled){var r=this.rs,n=this.panHandleOffset,i=r.x,s=r.width,c=r.minHandle,h=r.maxHandle,p=this.chart.element.style,f=t.offsetX,d=t.offsetY,v=i+s*r.min,y=new Ie(v,r.y,i+s*r.max-v,r.height);if(c.containsPoint(f,d)||h.containsPoint(f,d)?(this.changedCursor=!0,p.cursor="ew-resize"):y.containsPoint(f,d)?(this.changedCursor=!0,p.cursor="grab"):this.changedCursor&&(this.changedCursor=!1,p.cursor="default"),this.minHandleDragging)r.min=m();else if(this.maxHandleDragging)r.max=m();else if(!isNaN(n)){var C=r.max-r.min,_=Math.min(m()-n,1-C);_<=r.min?(r.min=_,r.max=r.min+C):(r.max=_+C,r.min=r.max-C)}}function m(){return Math.min(Math.max((f-i)/s,0),1)}},o.prototype.onDragStop=function(){this.stopHandleDragging()},o.prototype.stopHandleDragging=function(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN},o}(),mb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cb=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},ef=function(o){function t(e){void 0===e&&(e=window.document);var r=o.call(this,e)||this;r._seriesRoot=new co,r.navigator=new yb(r),r.scene.root.visible=!1;var n=r.scene.root;return n.append(r.seriesRoot),n.append(r.legend.group),r.navigator.enabled=!1,r}return mb(t,o),Object.defineProperty(t.prototype,"seriesRoot",{get:function(){return this._seriesRoot},enumerable:!0,configurable:!0}),t.prototype.performLayout=function(){if(!this.dataPending){this.scene.root.visible=!0;var e=this,i=e.axes,a=e.legend,s=e.navigator,l=new Ie(0,0,e.width,e.height);if(this.positionCaptions(),this.positionLegend(),a.enabled&&a.data.length){var c=this.legendAutoPadding,h=this.legend.spacing;switch(l.x+=c.left,l.y+=c.top,l.width-=c.left+c.right,l.height-=c.top+c.bottom,this.legend.position){case"right":l.width-=h;break;case"bottom":l.height-=h;break;case"left":l.x+=h,l.width-=h;break;case"top":l.y+=h,l.height-=h}}var f=this.captionAutoPadding,d=this.padding;l.x+=d.left,l.width-=d.left+d.right,l.y+=d.top+f,l.height-=d.top+f+d.bottom,s.enabled&&(l.height-=s.height+s.margin),i.forEach(function(m){var C=0;switch(m.position){case oe.Top:case oe.Bottom:C=l.width;break;case oe.Left:case oe.Right:C=l.height}m.calculateTickCount(C)}),this.updateAxes();var v=0,g={top:!1,right:!1,bottom:!1,left:!1,angle:!1,radius:!1};i.forEach(function(m){m.group.visible=!0;var C=Math.floor(m.thickness||m.computeBBox().width);switch(g[m.position]&&(C+=m.title&&m.title.padding.top||15),m.position){case oe.Top:g[oe.Top]=!0,l.y+=C,l.height-=C,m.translation.y=Math.floor(l.y+1),m.label.mirrored=!0;break;case oe.Right:g[oe.Right]=!0,l.width-=C,m.translation.x=Math.max(Math.floor(l.x),Math.floor(l.x+l.width)),m.label.mirrored=!0;break;case oe.Bottom:g[oe.Bottom]=!0,l.height-=C,v+=C,m.translation.y=Math.max(Math.floor(l.y),Math.floor(l.y+l.height+1));break;case oe.Left:g[oe.Left]=!0,l.x+=C,l.width-=C,m.translation.x=Math.floor(l.x)}}),l.width=Math.max(0,l.width),l.height=Math.max(0,l.height),i.forEach(function(m){switch(m.position){case oe.Top:case oe.Bottom:m.translation.x=Math.floor(l.x),m.range=[0,l.width],m.gridLength=l.height;break;case oe.Left:case oe.Right:m.translation.y=Math.floor(l.y),m.range=m instanceof cn||m instanceof ri?[0,l.height]:[l.height,0],m.gridLength=l.width}}),this.createNodeData(),this.seriesRect=l,this.series.forEach(function(m){m.group.translationX=Math.floor(l.x),m.group.translationY=Math.floor(l.y),m.update()});var y=this.seriesRoot;y.x=l.x,y.y=l.y,y.width=l.width,y.height=l.height,s.enabled&&(s.x=l.x,s.y=l.y+l.height+v+s.margin,s.width=l.width),this.axes.forEach(function(m){return m.update()})}},t.prototype.initSeries=function(e){o.prototype.initSeries.call(this,e)},t.prototype.freeSeries=function(e){o.prototype.freeSeries.call(this,e)},t.prototype.setupDomListeners=function(e){o.prototype.setupDomListeners.call(this,e),this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this._onTouchCancel=this.onTouchCancel.bind(this),e.addEventListener("touchstart",this._onTouchStart,{passive:!0}),e.addEventListener("touchmove",this._onTouchMove,{passive:!0}),e.addEventListener("touchend",this._onTouchEnd,{passive:!0}),e.addEventListener("touchcancel",this._onTouchCancel,{passive:!0})},t.prototype.cleanupDomListeners=function(e){o.prototype.cleanupDomListeners.call(this,e),e.removeEventListener("touchstart",this._onTouchStart),e.removeEventListener("touchmove",this._onTouchMove),e.removeEventListener("touchend",this._onTouchEnd),e.removeEventListener("touchcancel",this._onTouchCancel)},t.prototype.getTouchOffset=function(e){var r=this.scene.canvas.element.getBoundingClientRect(),n=e.touches[0];return n?{offsetX:n.clientX-r.left,offsetY:n.clientY-r.top}:void 0},t.prototype.onTouchStart=function(e){var r=this.getTouchOffset(e);r&&this.navigator.onDragStart(r)},t.prototype.onTouchMove=function(e){var r=this.getTouchOffset(e);r&&this.navigator.onDrag(r)},t.prototype.onTouchEnd=function(e){this.navigator.onDragStop()},t.prototype.onTouchCancel=function(e){this.navigator.onDragStop()},t.prototype.onMouseDown=function(e){o.prototype.onMouseDown.call(this,e),this.navigator.onDragStart(e)},t.prototype.onMouseMove=function(e){o.prototype.onMouseMove.call(this,e),this.navigator.onDrag(e)},t.prototype.onMouseUp=function(e){o.prototype.onMouseUp.call(this,e),this.navigator.onDragStop()},t.prototype.onMouseOut=function(e){o.prototype.onMouseOut.call(this,e),this.navigator.onDragStop()},t.prototype.assignAxesToSeries=function(e){void 0===e&&(e=!1),o.prototype.assignAxesToSeries.call(this,e),this.series.forEach(function(r){r.xAxis||console.warn("Could not find a matching xAxis for the "+r.id+" series."),r.yAxis||console.warn("Could not find a matching yAxis for the "+r.id+" series.")})},t.prototype.updateAxes=function(){var i,e=this,r=this.navigator,n=!1;this.axes.forEach(function(a){var s,l=a.direction,c=a.boundSeries;if(0===c.length&&e._series.length>0&&console.warn("AG Charts - chart series not initialised; check series and axes configuration."),a.linkedTo)a.domain=a.linkedTo.domain;else{var h=[];c.filter(function(d){return d.visible}).forEach(function(d){h.push(d.getDomain(l))});var p=(s=new Array).concat.apply(s,function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(Cb(arguments[t]));return o}(h));a instanceof ti&&"y"===a.direction?(a.setDomain(p,i),i=i||a.scale.ticks(a.calculatedTickCount).length):a.domain=p}a.direction===ye.X&&(a.visibleRange=[r.min,r.max]),!n&&(a.visibleRange[0]>0||a.visibleRange[1]<1)&&(n=!0),a.update()}),this.seriesRoot.enabled=n},t.className="CartesianChart",t.type="cartesian",t}(Tt),bb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sb=function(o){function t(e){void 0===e&&(e=window.document);var r=o.call(this,e)||this;r._data={},r._seriesRoot=new co,r.scene.root.visible=!1;var n=r.scene.root;return n.append(r.seriesRoot),n.append(r.legend.group),r}return bb(t,o),Object.defineProperty(t.prototype,"seriesRoot",{get:function(){return this._seriesRoot},enumerable:!0,configurable:!0}),t.prototype.performLayout=function(){if(!this.dataPending){this.scene.root.visible=!0;var e=this,i=e.legend,a=new Ie(0,0,e.width,e.height);if(this.positionCaptions(),this.positionLegend(),i.enabled&&i.data.length){var s=this.legendAutoPadding,l=this.legend.spacing;switch(a.x+=s.left,a.y+=s.top,a.width-=s.left+s.right,a.height-=s.top+s.bottom,this.legend.position){case"right":a.width-=l;break;case"bottom":a.height-=l;break;case"left":a.x+=l,a.width-=l;break;case"top":a.y+=l,a.height-=l}}var h=this.captionAutoPadding,p=this.padding;a.x+=p.left,a.width-=p.left+p.right,a.y+=p.top+h,a.height-=p.top+h+p.bottom,this.seriesRect=a,this.series.forEach(function(d){d.group.translationX=Math.floor(a.x),d.group.translationY=Math.floor(a.y),d.update()});var f=this.seriesRoot;f.x=a.x,f.y=a.y,f.width=a.width,f.height=a.height}},t.className="HierarchyChart",t.type="hierarchy",t}(Tt),wb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xb=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Pb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return wb(t,o),t.prototype.updateAxes=function(){this.axes.forEach(function(e){var r,n=e.direction,a=[],s=void 0;e.boundSeries.filter(function(c){return c.visible}).forEach(function(c){if(n===ye.X)if(void 0===s){var h=c.getDomain(n);a.push(h),s="number"==typeof h[0]}else s&&a.push(c.getDomain(n));else a.push(c.getDomain(n))});var l=(r=new Array).concat.apply(r,function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(xb(arguments[t]));return o}(a));e.domain=Bt(l,it)||l,e.update()})},t.className="GroupedCategoryChart",t.type="groupedCategory",t}(ef),Tb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ai=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},At=function(o){function t(){var e=o.call(this)||this;return e.enabled=!0,e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.color="rgba(70, 70, 70, 1)",e}return Tb(t,o),t.prototype.getFont=function(){return fh(this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight)},ai([G("change","dataChange")],t.prototype,"enabled",void 0),ai([G("change")],t.prototype,"fontSize",void 0),ai([G("change")],t.prototype,"fontFamily",void 0),ai([G("change")],t.prototype,"fontStyle",void 0),ai([G("change")],t.prototype,"fontWeight",void 0),ai([G("change")],t.prototype,"color",void 0),t}(rt),tf=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),La=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rf=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Eb=function o(){this.fill="yellow",this.stroke=void 0,this.strokeWidth=void 0},Mb=function o(){this.strokeWidth=void 0,this.dimOpacity=void 0},nf=function o(){this.fill=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.item=new Eb,this.series=new Mb},vn=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.enabled=!0,e}return tf(t,o),La([G("change")],t.prototype,"enabled",void 0),t}(rt),si=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.id=Zn(e),e.group=new Ge,e.pickGroup=e.group.appendChild(new Ge),e.directions=[ye.X,ye.Y],e.directionKeys={},e.label=new At,e.data=void 0,e.visible=!0,e.showInLegend=!0,e.cursor="default",e._nodeDataPending=!0,e._updatePending=!1,e.highlightStyle=new nf,e.scheduleLayout=function(){e.fireEvent({type:"layoutChange"})},e.scheduleData=function(){e.fireEvent({type:"dataChange"})},e}return tf(t,o),Object.defineProperty(t.prototype,"type",{get:function(){return this.constructor.type||""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grouped",{set:function(e){if(!0===e)throw new Error("AG Charts - grouped: true is unsupported for series of type: "+this.type)},enumerable:!0,configurable:!0}),t.prototype.setColors=function(e,r){},t.prototype.getKeys=function(e){var r=this,n=this.directionKeys,i=n&&n[e],a=[];return i&&i.forEach(function(s){var l=r[s];l&&(Array.isArray(l)?a.push.apply(a,function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(rf(arguments[t]));return o}(l)):a.push(l))}),a},t.prototype.createNodeData=function(){return[]},t.prototype.getNodeData=function(){return[]},t.prototype.getLabelData=function(){return[]},Object.defineProperty(t.prototype,"nodeDataPending",{get:function(){return this._nodeDataPending},set:function(e){this._nodeDataPending!==e&&(this._nodeDataPending=e,this.updatePending=!0,e&&this.chart&&(this.chart.updatePending=e))},enumerable:!0,configurable:!0}),t.prototype.scheduleNodeDate=function(){this.nodeDataPending=!0},Object.defineProperty(t.prototype,"updatePending",{get:function(){return this._updatePending},set:function(e){this._updatePending!==e&&(this._updatePending=e,e&&this.chart&&(this.chart.updatePending=e))},enumerable:!0,configurable:!0}),t.prototype.scheduleUpdate=function(){this.updatePending=!0},t.prototype.getOpacity=function(e){var n=this.chart,i=this.highlightStyle.series.dimOpacity;return n&&n.highlightedDatum&&(n.highlightedDatum.series!==this||e&&n.highlightedDatum.itemId!==e.itemId)?void 0===i?1:i:1},t.prototype.getStrokeWidth=function(e,r){var i=this.chart,a=this.highlightStyle.series.strokeWidth;return!i||!i.highlightedDatum||i.highlightedDatum.series!==this||r&&i.highlightedDatum.itemId!==r.itemId||void 0===a?e:a},t.prototype.fireNodeClickEvent=function(e,r){},t.prototype.toggleSeriesItem=function(e,r){this.visible=r},t.prototype.onHighlightChange=function(){},t.prototype.fixNumericExtent=function(e,r,n){if(!e)return[0,1];var i=rf(e,2),a=i[0],s=i[1];if(s=+s,0==(a=+a)&&0===s)return[0,1];if(a===s)if(n instanceof uo)a-=1,s+=1;else{var l=Math.abs(.01*a);a-=l,s+=l}return Ir(a)&&Ir(s)?[a,s]:[0,1]},t.highlightedZIndex=1e12,La([G("dataChange")],t.prototype,"data",void 0),La([G("dataChange")],t.prototype,"visible",void 0),La([G("layoutChange")],t.prototype,"showInLegend",void 0),t}(rt),Db=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},of=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.enabled=!0,e.shape=qh,e.size=6,e.maxSize=30,e.strokeWidth=1,e}return Db(t,o),Qt([G("change")],t.prototype,"enabled",void 0),Qt([G("change")],t.prototype,"shape",void 0),Qt([G("change")],t.prototype,"size",void 0),Qt([G("change")],t.prototype,"maxSize",void 0),Qt([G("change")],t.prototype,"domain",void 0),Qt([G("change")],t.prototype,"fill",void 0),Qt([G("change")],t.prototype,"stroke",void 0),Qt([G("change")],t.prototype,"strokeWidth",void 0),Qt([G("change")],t.prototype,"fillOpacity",void 0),Qt([G("change")],t.prototype,"strokeOpacity",void 0),t}(rt),af=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),sf=function(o){function t(){var e,r=null!==o&&o.apply(this,arguments)||this;return r.directionKeys=((e={})[ye.X]=["angleKey"],e[ye.Y]=["radiusKey"],e),r.centerX=0,r.centerY=0,r.radius=0,r}return af(t,o),t}(si),Rb=(function(o){af(function t(){return null!==o&&o.apply(this,arguments)||this},o)}(of),function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}()),Fb=function(o){function t(e){void 0===e&&(e=window.document);var r=o.call(this,e)||this;return r.padding=new xa(40),r.scene.root.append(r.legend.group),r.padding.addEventListener("layoutChange",r.scheduleLayout,r),r}return Rb(t,o),Object.defineProperty(t.prototype,"seriesRoot",{get:function(){return this.scene.root},enumerable:!0,configurable:!0}),t.prototype.performLayout=function(){var e=new Ie(0,0,this.width,this.height);this.positionCaptions(),this.positionLegend();var r=this.captionAutoPadding;if(e.y+=r,e.height-=r,this.legend.enabled&&this.legend.data.length){var n=this.legendAutoPadding;e.x+=n.left,e.y+=n.top,e.width-=n.left+n.right,e.height-=n.top+n.bottom;var i=this.legend.spacing;switch(this.legend.position){case"right":e.width-=i;break;case"bottom":e.height-=i;break;case"left":e.x+=i,e.width-=i;break;case"top":e.y+=i,e.height-=i}}var a=this.padding;e.x+=a.left,e.y+=a.top,e.width-=a.left+a.right,e.height-=a.top+a.bottom,this.seriesRect=e;var s=e.x+e.width/2,l=e.y+e.height/2,c=Math.max(0,Math.min(e.width,e.height)/2);this.series.forEach(function(h){h instanceof sf&&(h.centerX=s,h.centerY=l,h.radius=c,h.update())})},t.className="PolarChart",t.type="polar",t}(Tt),lf=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ho=function(o){function t(){var e,r=null!==o&&o.apply(this,arguments)||this;return r.directionKeys=((e={})[ye.X]=["xKey"],e[ye.Y]=["yKey"],e),r}return lf(t,o),t.prototype.checkDomainXY=function(e,r,n,i){return(n&&it(e)||!n&&Ml(e))&&(i&&it(r)||!i&&Ml(r))?[e,r]:void 0},t.prototype.checkDatum=function(e,r){return r&&it(e)?e:r?void 0:Ml(e)?e:String(e)},t.prototype.checkRangeXY=function(e,r,n,i){return!isNaN(e)&&!isNaN(r)&&n.inRange(e)&&i.inRange(r)},t}(si),$l=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.formatter=void 0,e}return lf(t,o),t}(of);function Ia(o,t){if(o===t)return!0;if(o&&t&&"object"==typeof o&&"object"==typeof t){if(o.constructor!==t.constructor)return!1;var e,r=void 0;if(Array.isArray(o)){if((e=o.length)!=t.length)return!1;for(r=e;0!=r--;)if(!Ia(o[r],t[r]))return!1;return!0}if(o.constructor===RegExp)return o.source===t.source&&o.flags===t.flags;if(o.valueOf!==Object.prototype.valueOf)return o.valueOf()===t.valueOf();if(o.toString!==Object.prototype.toString)return o.toString()===t.toString();var n=Object.keys(o);if((e=n.length)!==Object.keys(t).length)return!1;for(r=e;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;for(r=e;0!=r--;){var i=n[r];if(!Ia(o[i],t[i]))return!1}return!0}return o!=o&&t!=t}var kb=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Lb=/(#\{(.*?)\})/g;function uf(o,t,e){return o.replace(Lb,function(){var r=arguments[2],n=kb(r.split(":"),2),i=n[0],a=n[1],s=t[i];if("number"==typeof s){if(l=a&&e&&e[a]){var c=l,h=c.locales,p=c.options;return s.toLocaleString(h,p)}return String(s)}if(s instanceof Date){var l;if("string"==typeof(l=a&&e&&e[a])){var f=Hl.format(l);return f(s)}return s.toDateString()}return"string"==typeof s||s&&s.toString?String(s):""})}var Na=null;function Xe(o){return Na=Na||document.createElement("div"),o?(Na.innerText=o,Na.innerHTML):""}var Kl=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ga=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ib=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Gb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Kl(t,o),vt([G("change")],t.prototype,"formatter",void 0),t}(At),Bb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Kl(t,o),vt([G("change")],t.prototype,"renderer",void 0),vt([G("change")],t.prototype,"format",void 0),t}(vn),Yl=function(o){function t(){var e=o.call(this)||this;e.tooltip=new Bb,e.areaGroup=e.group.insertBefore(new Ge,e.pickGroup),e.strokeGroup=e.group.insertBefore(new Ge,e.pickGroup),e.markerGroup=e.pickGroup.appendChild(new Ge),e.labelGroup=e.group.appendChild(new Ge),e.fillSelection=je.select(e.areaGroup).selectAll(),e.strokeSelection=je.select(e.strokeGroup).selectAll(),e.markerSelection=je.select(e.markerGroup).selectAll(),e.labelSelection=je.select(e.labelGroup).selectAll(),e.seriesItemEnabled=new Map,e.xData=[],e.yData=[],e.fillSelectionData=[],e.strokeSelectionData=[],e.markerSelectionData=[],e.labelSelectionData=[],e.yDomain=[],e.xDomain=[],e.directionKeys={x:["xKey"],y:["yKeys"]},e.marker=new $l,e.label=new Gb,e.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],e.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],e.fillOpacity=1,e.strokeOpacity=1,e.lineDash=[0],e.lineDashOffset=0,e._xKey="",e.xName="",e._yKeys=[],e.yNames=[],e.strokeWidth=2,e.addEventListener("update",e.scheduleUpdate);var n=e.marker,i=e.label;return n.enabled=!1,n.addPropertyListener("shape",e.onMarkerShapeChange,e),n.addEventListener("change",e.scheduleUpdate,e),i.enabled=!1,i.addEventListener("change",e.scheduleUpdate,e),e}return Kl(t,o),t.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.fireEvent({type:"legendChange"})},Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey!==e&&(this._xKey=e,this.xData=[],this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yKeys",{get:function(){return this._yKeys},set:function(e){if(!Ia(this._yKeys,e)){this._yKeys=e,this.yData=[];var r=this.seriesItemEnabled;r.clear(),e.forEach(function(n){return r.set(n,!0)}),this.scheduleData()}},enumerable:!0,configurable:!0}),t.prototype.setColors=function(e,r){this.fills=e,this.strokes=r},Object.defineProperty(t.prototype,"normalizedTo",{get:function(){return this._normalizedTo},set:function(e){var r=e?Math.abs(e):void 0;this._normalizedTo!==r&&(this._normalizedTo=r,this.scheduleData())},enumerable:!0,configurable:!0}),t.prototype.processData=function(){var e,r,n,i,a,s,l=this,c=this,h=c.xKey,p=c.yKeys,f=c.seriesItemEnabled,d=c.xAxis,v=c.yAxis,g=c.normalizedTo,y=h&&p.length&&this.data?this.data:[];if(!d||!v)return!1;var m=d.scale instanceof Qe,C=v.scale instanceof Qe,_=g&&isFinite(g),w=[],P=[],O=[],A=function(Q){if(!(h in Q))return Aa(function(){return console.warn("The key '"+h+"' was not found in the data: ",Q)},h+" not found in data"),"continue";var se=E.checkDatum(Q[h],m);if(m&&void 0===se)return"continue";O.push(se),P.push({xDatum:se,seriesDatum:Q}),p.forEach(function(de,we){if(de in Q){var Ae=Q[de],me=w[we]||(w[we]=[]);if(f.get(de)){var ge=l.checkDatum(Ae,C);me.push(ge)}else me.push(0)}else Aa(function(){return console.warn("The key '"+de+"' was not found in the data: ",Q)},de+" not found in data")})},E=this;try{for(var M=Ga(y),R=M.next();!R.done;R=M.next())A(R.value)}catch(Q){e={error:Q}}finally{try{R&&!R.done&&(r=M.return)&&r.call(M)}finally{if(e)throw e.error}}this.yData=w,this.xData=P,this.xDomain=m?this.fixNumericExtent(Bt(O,it),"x",d):O;for(var j=0,I=0,F=0;F<P.length;F++){var N={sum:0,absSum:0};try{for(var V=(n=void 0,Ga(w)),Y=V.next();!Y.done;Y=V.next())if(void 0!==($=Y.value)[F]){var J=+$[F];N.absSum+=Math.abs(J),N.sum+=J,N.sum>I?I=N.sum:N.sum<j&&(j=N.sum)}}catch(Q){n={error:Q}}finally{try{Y&&!Y.done&&(i=V.return)&&i.call(V)}finally{if(n)throw n.error}}if(_&&g){var H=0;try{for(var q=(a=void 0,Ga(w)),U=q.next();!U.done;U=q.next()){var $,te=+($=U.value)[F]/N.absSum*g;$[F]=te,(H+=te)>I?I=H:H<j&&(j=H)}}catch(Q){a={error:Q}}finally{try{U&&!U.done&&(s=q.return)&&s.call(q)}finally{if(a)throw a.error}}}}return _&&g&&(j=j<.5*-g?-g:j,I=I>.5*g?g:I),this.yDomain=this.fixNumericExtent([j,I],"y",v),this.fireEvent({type:"dataProcessed"}),!0},t.prototype.findLargestMinMax=function(e){var r,n,i=0,a=0;try{for(var s=Ga(e),l=s.next();!l.done;l=s.next()){var c=l.value;c.min<i&&(i=c.min),c.max>a&&(a=c.max)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return{min:i,max:a}},t.prototype.getDomain=function(e){return e===ye.X?this.xDomain:this.yDomain},t.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){!this.nodeDataPending||(this.nodeDataPending=!1,this.createSelectionData(),this.updateFillSelection(),this.updateStrokeSelection(),this.updateMarkerSelection(),this.updateLabelSelection())},t.prototype.updateNodes=function(){this.group.visible=this.visible&&this.xData.length>0&&this.yData.length>0,this.updateFillNodes(),this.updateStrokeNodes(),this.updateMarkerNodes(),this.updateLabelNodes()},t.prototype.createSelectionData=function(){var e=this,r=this,i=r.xAxis,a=r.yAxis,s=r.xData,l=r.yData,c=r.labelSelectionData,h=r.markerSelectionData,p=r.strokeSelectionData,f=r.fillSelectionData;if(r.data&&i&&a&&s.length&&l.length){var v=this,g=v.yKeys,y=v.marker,m=v.label,C=v.fills,_=v.strokes,w=i.scale,P=a.scale,O=P instanceof Qe,A=(w.bandwidth||0)/2;h.length=0,c.length=0,p.length=0,f.length=0;var E=new Array(s.length).fill(null).map(function(){return{left:0,right:0}}),M=new Array(s.length).fill(0),R=function(j,I,F,N){var V=w.convert(j)+A,$=E[F][N]+I,J=P.convert(E[F][N],O?Qn:void 0),H=P.convert($,O?Qn:void 0);return E[F][N]=$,[{x:V,y:H},{x:V,y:J}]};l.forEach(function(j,I){var F=g[I],V=(f[I]||(f[I]={itemId:F,points:[]})).points,Y=[],$=p[I]||(p[I]={itemId:F,points:[],yValues:[]}),J=$.points,H=$.yValues;j.forEach(function(q,U){var te,me,re=s[U],Q=re.xDatum,se=re.seriesDatum,de=null===(te=s[U+1])||void 0===te?void 0:te.xDatum,we=j[U+1],Ae=function(j,I,F,N){var V,Y=e.normalizedTo&&isFinite(e.normalizedTo),$=Y&&O&&it(N);return(!Y&&!isNaN(I)||$)&&(V=M[F]+=I),{x:w.convert(j)+A,y:P.convert(V,O?Qn:void 0)}}(Q,+q,U,se[F]);y&&h.push({index:U,series:e,itemId:F,datum:se,yValue:q,yKey:F,point:Ae,fill:C[I%C.length],stroke:_[I%_.length]}),me=m.formatter?m.formatter({value:q}):Ir(q)?Number(q).toFixed(2):String(q),m&&c.push({index:U,itemId:F,point:Ae,label:e.seriesItemEnabled.get(F)&&me?{text:me,fontStyle:m.fontStyle,fontWeight:m.fontWeight,fontSize:m.fontSize,fontFamily:m.fontFamily,textAlign:"center",textBaseline:"bottom",fill:m.color}:void 0});var ge=[Q,de],Ee=[q,we];if(!ge.some(function(De){return null==De})){Ee.some(function(De){return null==De})&&(Ee[0]=0,Ee[1]=0);var xe=R(ge[0],+Ee[0],U,"right");V.push(xe[0]),Y.push(xe[1]);var Ue=R(ge[1],+Ee[1],U,"left");V.push(Ue[0]),Y.push(Ue[1]),J.push({x:NaN,y:NaN}),H.push(void 0),J.push(xe[0]),H.push(q),void 0!==we&&(J.push(Ue[0]),H.push(q))}}),V.push.apply(V,function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(Ib(arguments[t]));return o}(Y.slice().reverse()))})}},t.prototype.updateFillSelection=function(){var e=this.fillSelection.setData(this.fillSelectionData);e.exit.remove();var r=e.enter.append(lt).each(function(n){n.lineJoin="round",n.stroke=void 0,n.pointerEvents=dt.None});this.fillSelection=e.merge(r)},t.prototype.updateFillNodes=function(){var e=this,r=this,n=r.fills,i=r.fillOpacity,a=r.strokeOpacity,s=r.strokeWidth,l=r.shadow,c=r.seriesItemEnabled;this.fillSelection.each(function(h,p,f){h.fill=n[f%n.length],h.fillOpacity=i,h.strokeOpacity=a,h.strokeWidth=s,h.lineDash=e.lineDash,h.lineDashOffset=e.lineDashOffset,h.fillShadow=l,h.visible=!!c.get(p.itemId),h.opacity=e.getOpacity(p);var d=p.points,v=h.path;v.clear(),d.forEach(function(g,y){var m=g.x,C=g.y;y>0?v.lineTo(m,C):v.moveTo(m,C)}),v.closePath()})},t.prototype.updateStrokeSelection=function(){var e=this.strokeSelection.setData(this.strokeSelectionData);e.exit.remove();var r=e.enter.append(lt).each(function(n){n.fill=void 0,n.lineJoin=n.lineCap="round",n.pointerEvents=dt.None});this.strokeSelection=e.merge(r)},t.prototype.updateStrokeNodes=function(){var e=this;if(this.data){var r=this,n=r.strokes,i=r.strokeOpacity,a=r.seriesItemEnabled,s=!0;this.strokeSelection.each(function(l,c,h){l.visible=!!a.get(c.itemId),l.opacity=e.getOpacity(c),l.stroke=n[h%n.length],l.strokeWidth=e.getStrokeWidth(e.strokeWidth,c),l.strokeOpacity=i,l.lineDash=e.lineDash,l.lineDashOffset=e.lineDashOffset;var p=c.points,f=c.yValues,d=l.path;d.clear();for(var v=0;v<p.length;v++){var g=p[v],y=g.x,m=g.y;void 0===f[v]?s=!0:s?(d.moveTo(y,m),s=!1):d.lineTo(y,m)}})}},t.prototype.updateMarkerSelection=function(){var e=ii(this.marker.shape),n=this.markerSelection.setData(e?this.markerSelectionData:[]);n.exit.remove();var i=n.enter.append(e);this.markerSelection=n.merge(i)},t.prototype.updateMarkerNodes=function(){var e=this;if(this.chart){var r=this,n=r.xKey,i=r.marker,a=r.seriesItemEnabled,s=r.yKeys,l=r.fills,c=r.strokes,h=r.chart.highlightedDatum,p=r.highlightStyle,g=p.item,y=g.fill,m=void 0===y?p.fill:y,C=g.stroke,_=void 0===C?p.stroke:C,w=g.strokeWidth,P=void 0===w?p.strokeWidth:w,O=i.size,A=i.formatter,E=void 0!==i.strokeWidth?i.strokeWidth:this.strokeWidth;this.markerSelection.each(function(M,R){var B=s.indexOf(R.yKey),j=R===h,I=j&&void 0!==m?m:i.fill||l[B%l.length],F=j&&void 0!==_?_:i.stroke||c[B%l.length],N=j&&void 0!==P?P:E,V=void 0;A&&(V=A({datum:R.datum,xKey:n,yKey:R.yKey,fill:I,stroke:F,strokeWidth:N,size:O,highlighted:j})),M.fill=V&&V.fill||I,M.stroke=V&&V.stroke||F,M.strokeWidth=V&&void 0!==V.strokeWidth?V.strokeWidth:N,M.size=V&&void 0!==V.size?V.size:O,M.translationX=R.point.x,M.translationY=R.point.y,M.visible=i.enabled&&M.size>0&&!!a.get(R.yKey)&&!isNaN(R.point.x)&&!isNaN(R.point.y),M.opacity=e.getOpacity(R)})}},t.prototype.updateLabelSelection=function(){var e=this.labelSelection.setData(this.labelSelectionData);e.exit.remove();var r=e.enter.append(nt);this.labelSelection=e.merge(r)},t.prototype.updateLabelNodes=function(){var e=this;if(this.chart){var r=this.label,n=r.enabled,i=r.fontStyle,a=r.fontWeight,s=r.fontSize,l=r.fontFamily,c=r.color;this.labelSelection.each(function(h,p){var f=p.point,d=p.label;d&&n?(h.fontStyle=i,h.fontWeight=a,h.fontSize=s,h.fontFamily=l,h.textAlign=d.textAlign,h.textBaseline=d.textBaseline,h.text=d.text,h.x=f.x,h.y=f.y-10,h.fill=c,h.visible=!0,h.opacity=e.getOpacity(p)):h.visible=!1})}},t.prototype.getNodeData=function(){return this.markerSelectionData},t.prototype.fireNodeClickEvent=function(e,r){this.fireEvent({type:"nodeClick",event:e,series:this,datum:r.datum,xKey:this.xKey,yKey:r.yKey})},t.prototype.getTooltipHtml=function(e){var r=this.xKey,n=e.yKey;if(!r||!n||!this.seriesItemEnabled.get(n))return"";var i=e.datum,a=i[r],s=i[n],c=this.xAxis,h=this.yAxis;if(!(c&&h&&Ir(s)))return"";var p=this,f=p.xName,d=p.yKeys,v=p.yNames,g=p.yData,y=p.fills,m=p.strokes,C=p.tooltip,_=p.marker,w=_.size,P=_.formatter,O=_.strokeWidth,A=_.fill,E=_.stroke,M=c.formatDatum(a),R=h.formatDatum(s),B=d.indexOf(n),I=g[B][e.index],F=v[B],N=Xe(F),V=Xe(M+": "+R),$=A||y[B%y.length],H=void 0;P&&(H=P({datum:i,xKey:r,yKey:n,fill:$,stroke:E||m[B%y.length],strokeWidth:void 0!==O?O:this.strokeWidth,size:w,highlighted:!1}));var q=H&&H.fill||$,U={title:N,backgroundColor:q,content:V},te=C.renderer,re=C.format;if(re||te){var Q={datum:i,xKey:r,xName:f,xValue:a,yKey:n,yValue:s,processedYValue:I,yName:F,color:q};if(re)return et({content:uf(re,Q)},U);if(te)return et(te(Q),U)}return et(U)},t.prototype.listSeriesItems=function(e){var r=this,n=r.data,i=r.id,s=r.yKeys,l=r.yNames,c=r.seriesItemEnabled,h=r.marker,p=r.fills,f=r.strokes,d=r.fillOpacity,v=r.strokeOpacity;n&&n.length&&r.xKey&&s.length&&s.forEach(function(g,y){e.push({id:i,itemId:g,enabled:c.get(g)||!1,label:{text:l[y]||s[y]},marker:{shape:h.shape,fill:h.fill||p[y%p.length],stroke:h.stroke||f[y%f.length],fillOpacity:d,strokeOpacity:v}})})},t.prototype.toggleSeriesItem=function(e,r){this.seriesItemEnabled.set(e,r),this.scheduleData()},t.className="AreaSeries",t.type="area",vt([G("dataChange")],t.prototype,"fills",void 0),vt([G("dataChange")],t.prototype,"strokes",void 0),vt([G("update")],t.prototype,"fillOpacity",void 0),vt([G("update")],t.prototype,"strokeOpacity",void 0),vt([G("update")],t.prototype,"lineDash",void 0),vt([G("update")],t.prototype,"lineDashOffset",void 0),vt([G("update")],t.prototype,"xName",void 0),vt([G("update")],t.prototype,"yNames",void 0),vt([G("update")],t.prototype,"strokeWidth",void 0),vt([G("update")],t.prototype,"shadow",void 0),t}(ho),Xl=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Et=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},cf=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fo=(()=>(function(o){o[o.Bar=0]="Bar",o[o.Label=1]="Label"}(fo||(fo={})),fo))(),yr=(()=>(function(o){o.Inside="inside",o.Outside="outside"}(yr||(yr={})),yr))(),jb=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.placement=yr.Inside,e}return Xl(t,o),Et([G("change")],t.prototype,"formatter",void 0),Et([G("change")],t.prototype,"placement",void 0),t}(At),Wb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Xl(t,o),Et([G("change")],t.prototype,"renderer",void 0),t}(vn);function hf(o,t){return void 0===t&&(t=[]),o.forEach(function(e){Array.isArray(e)?hf(e,t):t.push(e)}),t}var ql=function(o){function t(){var e,r=o.call(this)||this;return r.rectGroup=r.pickGroup.appendChild(new Ge),r.labelGroup=r.group.appendChild(new Ge),r.rectSelection=je.select(r.rectGroup).selectAll(),r.labelSelection=je.select(r.labelGroup).selectAll(),r.nodeData=[],r.xData=[],r.yData=[],r.yDomain=[],r.label=new jb,r.seriesItemEnabled=new Map,r.tooltip=new Wb,r.flipXY=!1,r.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],r.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.groupScale=new Jt,r.directionKeys=((e={})[ye.X]=["xKey"],e[ye.Y]=["yKeys"],e),r._xKey="",r._xName="",r.cumYKeyCount=[],r.flatYKeys=void 0,r.hideInLegend=[],r._yKeys=[],r._grouped=!1,r._yNames={},r._strokeWidth=1,r.addEventListener("update",r.scheduleUpdate),r.label.enabled=!1,r.label.addEventListener("change",r.scheduleUpdate,r),r}return Xl(t,o),t.prototype.getKeys=function(e){var r=this,n=this.directionKeys,i=n&&n[this.flipXY?Fh(e):e],a=[];return i&&i.forEach(function(s){var l=r[s];l&&(Array.isArray(l)?a=a.concat(hf(l)):a.push(l))}),a},Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey!==e&&(this._xKey=e,this.xData=[],this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xName",{get:function(){return this._xName},set:function(e){this._xName!==e&&(this._xName=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yKeys",{get:function(){return this._yKeys},set:function(e){var r=this,n=void 0;if(function Vb(o){return o.length>0&&Array.isArray(o[0])}(e)||(n=e,e=this.grouped?n.map(function(c){return[c]}):[n]),!Ia(this._yKeys,e)){this.flatYKeys=n||void 0,this._yKeys=e;var i=0;this.cumYKeyCount=[];var a=[];e.forEach(function(c,h){c.length>0&&a.push(String(h)),r.cumYKeyCount.push(i),i+=c.length}),this.yData=[];var s=this.seriesItemEnabled;s.clear(),e.forEach(function(c){c.forEach(function(h){return s.set(h,!0)})});var l=this.groupScale;l.domain=a,l.padding=.1,l.round=!0,this.scheduleData()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grouped",{get:function(){return this._grouped},set:function(e){this._grouped!==e&&(this._grouped=e,this.flatYKeys&&(this.yKeys=this.flatYKeys))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yNames",{get:function(){return this._yNames},set:function(e){if(Array.isArray(e)&&this.flatYKeys){var r={};this.flatYKeys.forEach(function(n,i){r[n]=e[i]}),e=r}this._yNames=e,this.scheduleData()},enumerable:!0,configurable:!0}),t.prototype.setColors=function(e,r){this.fills=e,this.strokes=r},Object.defineProperty(t.prototype,"normalizedTo",{get:function(){return this._normalizedTo},set:function(e){var r=e?Math.abs(e):void 0;this._normalizedTo!==r&&(this._normalizedTo=r,this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(e){this._strokeWidth!==e&&(this._strokeWidth=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadow",{get:function(){return this._shadow},set:function(e){this._shadow!==e&&(this._shadow=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),t.prototype.onHighlightChange=function(){this.updateRectNodes()},t.prototype.processData=function(){var e=this,r=this,n=r.xKey,i=r.yKeys,a=r.seriesItemEnabled,l=n&&i.length&&this.data?this.data:[];if(!r.xAxis)return!1;var c=!0;this.xData=l.map(function(C){return c&&!(n in C)&&(c=!1,console.warn("The key '"+n+"' was not found in the data: ",C)),e.checkDatum(C[n],!1)}),this.yData=l.map(function(C){return i.map(function(_){return _.map(function(w){c&&!(w in C)&&(c=!1,console.warn("The key '"+w+"' was not found in the data: ",C));var P=e.checkDatum(C[w],!0);return a.get(w)&&void 0!==P?P:0})})});var y,m,h=this.yData.map(function(C){return C.map(function(_){return function i0(o){var t,e,r=0,n=0;try{for(var i=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),a=i.next();!a.done;a=i.next()){var s=a.value;s<0?r+=s:n+=s}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return{min:r,max:n}}(_)})}),f=this.yData,d=this.normalizedTo,v=this.yData.map(function(C){return C.map(function(_){return _.reduce(function(w,P){return w+Math.abs(P)},0)})}),g=this.findLargestMinMax(h);return d&&isFinite(d)?(y=g.min<0?-d:0,m=g.max>0?d:0,f.forEach(function(C,_){C.forEach(function(w,P){w.forEach(function(O,A){w[A]=O/v[_][P]*d})})})):(y=g.min,m=g.max),this.yDomain=this.fixNumericExtent([y,m],"y",this.yAxis),this.fireEvent({type:"dataProcessed"}),!0},t.prototype.findLargestMinMax=function(e){var r,n,i,a,s=0,l=0;try{for(var c=cf(e),h=c.next();!h.done;h=c.next()){var p=h.value;try{for(var f=(i=void 0,cf(p)),d=f.next();!d.done;d=f.next()){var v=d.value;v.min<s&&(s=v.min),v.max>l&&(l=v.max)}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}}catch(g){r={error:g}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return{min:s,max:l}},t.prototype.getDomain=function(e){return this.flipXY&&(e=Fh(e)),e===ye.X?this.xData:this.yDomain},t.prototype.fireNodeClickEvent=function(e,r){this.fireEvent({type:"nodeClick",event:e,series:this,datum:r.datum,xKey:this.xKey,yKey:r.yKey})},t.prototype.getCategoryAxis=function(){return this.flipXY?this.yAxis:this.xAxis},t.prototype.getValueAxis=function(){return this.flipXY?this.xAxis:this.yAxis},t.prototype.createNodeData=function(){var e=this,r=this,n=r.chart,i=r.data,a=r.visible,s=this.getCategoryAxis(),l=this.getValueAxis();if(!(n&&i&&a&&s&&l)||n.layoutPending||n.dataPending)return[];var c=this.flipXY,h=s.scale,p=l.scale,f=this,d=f.groupScale,v=f.yKeys,g=f.cumYKeyCount,y=f.fills,m=f.strokes,C=f.strokeWidth,_=f.seriesItemEnabled,w=f.xData,P=f.yData,O=f.label,A=O.fontStyle,E=O.fontWeight,M=O.fontSize,R=O.fontFamily,B=O.color,j=O.formatter,I=O.placement;d.range=[0,h.bandwidth];var F=d.bandwidth,N=[];return w.forEach(function(V,Y){for(var $=i[Y],J=h.convert(V),H=P[Y],q=0;q<H.length;q++)for(var U=H[q],te=0,re=0,Q=0;Q<U.length;Q++){var se=+U[Q],de=v[q][Q],we=J+d.convert(String(q));if(s.inRange(we,F)){var Ue,Ae=se<0?te:re,me=p instanceof Qe,ge=p.convert(Ae+se,me?Qn:void 0),Ee=p.convert(Ae,me?Qn:void 0),xe=$[de];Ue=j?j({value:Ir(xe)?xe:void 0}):Ir(xe)?xe.toFixed(2):"";var De=void 0,Z=void 0;c?(Z=we+F/2,De=I===yr.Inside?ge+(xe>=0?-1:1)*Math.abs(Ee-ge)/2:ge+4*(xe>=0?1:-1)):(De=we+F/2,Z=I===yr.Inside?ge+(xe>=0?1:-1)*Math.abs(Ee-ge)/2:ge+(xe>=0?-3:4));var Pe=void 0,fe=void 0;I===yr.Inside?(Pe="center",fe="middle"):(Pe=c?xe>=0?"start":"end":"center",fe=c?"middle":xe>=0?"bottom":"top");var K=g[q]+Q;N.push({index:Y,series:e,itemId:de,datum:$,yValue:xe,yKey:de,x:c?Math.min(ge,Ee):we,y:c?we:Math.min(ge,Ee),width:c?Math.abs(Ee-ge):F,height:c?F:Math.abs(Ee-ge),fill:y[K%y.length],stroke:m[K%m.length],strokeWidth:C,label:_.get(de)&&Ue?{text:Ue,fontStyle:A,fontWeight:E,fontSize:M,fontFamily:R,textAlign:Pe,textBaseline:fe,fill:B,x:De,y:Z}:void 0}),se<0?te+=se:re+=se}}}),this.nodeData=N},t.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){!this.nodeDataPending||(this.nodeDataPending=!1,this.createNodeData(),this.updateRectSelection(),this.updateLabelSelection())},t.prototype.updateNodes=function(){this.group.visible=this.visible,this.updateRectNodes(),this.updateLabelNodes()},t.prototype.updateRectSelection=function(){var e=this.rectSelection.setData(this.nodeData);e.exit.remove();var r=e.enter.append(gr).each(function(n){n.tag=fo.Bar,n.crisp=!0});this.rectSelection=e.merge(r)},t.prototype.updateRectNodes=function(){var e=this;if(this.chart){var r=this,n=r.fills,i=r.strokes,a=r.fillOpacity,s=r.strokeOpacity,l=r.shadow,c=r.formatter,h=r.xKey,p=r.flipXY,f=r.yKeys,d=r.chart.highlightedDatum,v=r.highlightStyle,C=v.item,_=C.fill,w=void 0===_?v.fill:_,P=C.stroke,O=void 0===P?v.stroke:P,A=C.strokeWidth,E=void 0===A?v.strokeWidth:A;this.rectSelection.each(function(M,R,B){for(var j=0,I=0,F=0;F<f.length;F++){var N=f[F];if((I=N.indexOf(R.yKey))>=0){j+=I;break}j+=N.length}var V=R===d,Y=V&&void 0!==w?w:n[j%n.length],$=V&&void 0!==O?O:i[j%n.length],J=V&&void 0!==E?E:e.getStrokeWidth(e.strokeWidth,R),H=void 0;c&&(H=c({datum:R.datum,fill:Y,stroke:$,strokeWidth:J,highlighted:V,xKey:h,yKey:R.yKey})),M.x=R.x,M.y=R.y,M.width=R.width,M.height=R.height,M.fill=H&&H.fill||Y,M.stroke=H&&H.stroke||$,M.strokeWidth=H&&void 0!==H.strokeWidth?H.strokeWidth:J,M.fillOpacity=a,M.strokeOpacity=s,M.lineDash=e.lineDash,M.lineDashOffset=e.lineDashOffset,M.fillShadow=l,M.visible=p?R.width>0:R.height>0,M.zIndex=V?si.highlightedZIndex:B,M.opacity=e.getOpacity(R)})}},t.prototype.updateLabelSelection=function(){var e=this.labelSelection.setData(this.nodeData);e.exit.remove();var r=e.enter.append(nt).each(function(n){n.tag=fo.Label,n.pointerEvents=dt.None});this.labelSelection=e.merge(r)},t.prototype.updateLabelNodes=function(){var e=this;if(this.chart){var i=this.label,a=i.enabled,s=i.fontStyle,l=i.fontWeight,c=i.fontSize,h=i.fontFamily,p=i.color;this.labelSelection.each(function(f,d,v){var g=d.label;g&&a?(f.fontStyle=s,f.fontWeight=l,f.fontSize=c,f.fontFamily=h,f.textAlign=g.textAlign,f.textBaseline=g.textBaseline,f.text=g.text,f.x=g.x,f.y=g.y,f.fill=p,f.visible=!0,f.opacity=e.getOpacity(d)):f.visible=!1})}},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,i=r.yKeys,a=r.yData,s=this.getCategoryAxis(),l=this.getValueAxis(),c=e.yKey;if(!(a.length&&n&&c&&s&&l))return"";for(var h=a[e.index],p=0,f=0,d=0;d<i.length;d++){var v=i[d];if((f=v.indexOf(c))>=0){p+=f;break}p+=v.length}var g=this,y=g.xName,C=g.fills,P=g.formatter,O=g.tooltip.renderer,A=e.datum,E=g.yNames[c],M=C[p%C.length],R=g.strokes[p%C.length],B=this.getStrokeWidth(this.strokeWidth,A),j=A[n],I=A[c],F=h[d][f],N=Xe(s.formatDatum(j)),V=Xe(l.formatDatum(I)),Y=Xe(E),$=N+": "+V,J=void 0;P&&(J=P({datum:A,fill:M,stroke:R,strokeWidth:B,highlighted:!1,xKey:n,yKey:c}));var H=J&&J.fill||M,q={title:Y,backgroundColor:H,content:$};return O?et(O({datum:A,xKey:n,xValue:j,xName:y,yKey:c,yValue:I,processedYValue:F,yName:E,color:H}),q):et(q)},t.prototype.listSeriesItems=function(e){var r=this,n=r.id,i=r.data,l=r.yNames,c=r.cumYKeyCount,h=r.seriesItemEnabled,p=r.hideInLegend,f=r.fills,d=r.strokes,v=r.fillOpacity,g=r.strokeOpacity;i&&i.length&&r.xKey&&r.yKeys.length&&this.yKeys.forEach(function(y,m){y.forEach(function(C,_){if(p.indexOf(C)<0){var w=c[m]+_;e.push({id:n,itemId:C,enabled:h.get(C)||!1,label:{text:l[C]||C},marker:{fill:f[w%f.length],stroke:d[w%d.length],fillOpacity:v,strokeOpacity:g}})}})})},t.prototype.toggleSeriesItem=function(e,r){var n=this.seriesItemEnabled;n.set(e,r);var i=this.yKeys.map(function(s){return s.slice()});n.forEach(function(s,l){s||i.forEach(function(c){var h=c.indexOf(l);h>=0&&c.splice(h,1)})});var a=[];i.forEach(function(s,l){s.length>0&&a.push(String(l))}),this.groupScale.domain=a,this.scheduleData()},t.className="BarSeries",t.type="bar",Et([G("dataChange")],t.prototype,"flipXY",void 0),Et([G("dataChange")],t.prototype,"fills",void 0),Et([G("dataChange")],t.prototype,"strokes",void 0),Et([G("update")],t.prototype,"fillOpacity",void 0),Et([G("update")],t.prototype,"strokeOpacity",void 0),Et([G("update")],t.prototype,"lineDash",void 0),Et([G("update")],t.prototype,"lineDashOffset",void 0),Et([G("update")],t.prototype,"formatter",void 0),Et([G("layoutChange")],t.prototype,"hideInLegend",void 0),t}(ho),Zl=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Hb=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},zb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Zl(t,o),Wt([G("change")],t.prototype,"formatter",void 0),t}(At),Ub=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return Zl(t,o),Wt([G("change")],t.prototype,"renderer",void 0),Wt([G("change")],t.prototype,"format",void 0),t}(vn),Jl=function(o){function t(){var e=o.call(this)||this;e.xDomain=[],e.yDomain=[],e.xData=[],e.yData=[],e.lineNode=new lt,e.nodeSelection=je.select(e.pickGroup).selectAll(),e.nodeData=[],e.marker=new $l,e.label=new zb,e.stroke="#874349",e.lineDash=[0],e.lineDashOffset=0,e.strokeWidth=2,e.strokeOpacity=1,e.tooltip=new Ub,e._xKey="",e.xName="",e._yKey="",e.yName="";var r=e.lineNode;r.fill=void 0,r.lineJoin="round",r.pointerEvents=dt.None,e.group.insertBefore(r,e.pickGroup),e.addEventListener("update",e.scheduleUpdate);var i=e.marker,a=e.label;return i.fill="#c16068",i.stroke="#874349",i.addPropertyListener("shape",e.onMarkerShapeChange,e),i.addEventListener("change",e.scheduleUpdate,e),a.enabled=!1,a.addEventListener("change",e.scheduleUpdate,e),e}return Zl(t,o),t.prototype.onMarkerShapeChange=function(){this.nodeSelection=this.nodeSelection.setData([]),this.nodeSelection.exit.remove(),this.fireEvent({type:"legendChange"})},t.prototype.setColors=function(e,r){this.stroke=e[0],this.marker.stroke=r[0],this.marker.fill=e[0]},Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey!==e&&(this._xKey=e,this.xData=[],this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yKey",{get:function(){return this._yKey},set:function(e){this._yKey!==e&&(this._yKey=e,this.yData=[],this.scheduleData())},enumerable:!0,configurable:!0}),t.prototype.processData=function(){var e=this,r=e.xAxis,n=e.yAxis,i=e.xKey,a=e.yKey,s=e.xData,l=e.yData,c=i&&a&&this.data?this.data:[];if(!r||!n)return!1;var h=r.scale instanceof Qe,p=n.scale instanceof Qe;s.length=0,l.length=0;for(var f=0,d=c.length;f<d;f++){var v=c[f],y=v[a],m=this.checkDatum(v[i],h);if(!h||void 0!==m){s.push(m);var C=this.checkDatum(y,p);l.push(C)}}return this.xDomain=h?this.fixNumericExtent(Bt(s,it),"x",r):s,this.yDomain=p?this.fixNumericExtent(Bt(l,it),"y",n):l,!0},t.prototype.getDomain=function(e){return e===ye.X?this.xDomain:this.yDomain},t.prototype.onHighlightChange=function(){this.updateNodes()},t.prototype.resetHighlight=function(){this.lineNode.strokeWidth=this.strokeWidth},t.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){!this.nodeDataPending||(this.nodeDataPending=!1,this.updateLinePath(),this.updateNodeSelection())},t.prototype.updateLinePath=function(){var e,r=this,i=r.xAxis,a=r.yAxis;if(r.data&&i&&a){var s=this,l=s.xData,c=s.yData,p=s.label,f=s.xKey,d=s.yKey,v=i.scale,g=a.scale,y=(v.bandwidth||0)/2,m=(g.bandwidth||0)/2,C=s.lineNode.path,_=[];C.clear();for(var w=!0,P=void 0,O=void 0,A=0;A<l.length;A++){var E=O||[l[A],c[A]];if(void 0===E[1])P=void 0,w=!0;else{var M=Hb(E,2),R=M[0],B=M[1],j=v.convert(R)+y;if(isNaN(j)){P=void 0,w=!0;continue}var I=(v.bandwidth||.5*this.marker.size+(this.marker.strokeWidth||0))+1;O=void 0===c[A+1]?void 0:[l[A+1],c[A+1]];var F=i.inRangeEx(j,0,I),N=O&&i.inRangeEx(v.convert(O[0])+y,0,I);if(-1===F&&-1===N){w=!0;continue}if(1===F&&1===P){w=!0;continue}P=F;var V=g.convert(B)+m;w?(C.moveTo(j,V),w=!1):C.lineTo(j,V);var Y;Y=p.formatter?p.formatter({value:B}):"number"==typeof B&&isFinite(B)?B.toFixed(2):B?String(B):"";var $=((e={})[f]=R,e[d]=B,e);_.push({series:this,datum:$,point:{x:j,y:V},label:Y?{text:Y,fontStyle:p.fontStyle,fontWeight:p.fontWeight,fontSize:p.fontSize,fontFamily:p.fontFamily,textAlign:"center",textBaseline:"bottom",fill:p.color}:void 0})}}this.nodeData=_}},t.prototype.updateNodeSelection=function(){var e=this.marker,r=e.shape?this.nodeData:[],n=ii(e.shape),i=this.nodeSelection.setData(r);i.exit.remove();var a=i.enter.append(Ge);a.append(n),a.append(nt),this.nodeSelection=i.merge(a)},t.prototype.updateNodes=function(){this.group.visible=this.visible,this.updateLineNode(),this.updateMarkerNodes(),this.updateTextNodes()},t.prototype.updateLineNode=function(){var e=this.lineNode;e.stroke=this.stroke,e.strokeWidth=this.getStrokeWidth(this.strokeWidth),e.strokeOpacity=this.strokeOpacity,e.lineDash=this.lineDash,e.lineDashOffset=this.lineDashOffset,e.opacity=this.getOpacity()},t.prototype.updateMarkerNodes=function(){var e=this;if(this.chart){var r=this,n=r.marker,i=r.xKey,a=r.yKey,s=r.stroke,l=r.chart.highlightedDatum,c=r.highlightStyle,d=c.item,v=d.fill,g=void 0===v?c.fill:v,y=d.stroke,m=void 0===y?c.stroke:y,C=d.strokeWidth,_=void 0===C?c.strokeWidth:C,w=n.size,P=n.formatter,O=void 0!==n.strokeWidth?n.strokeWidth:this.strokeWidth,A=ii(n.shape);this.nodeSelection.selectByClass(A).each(function(E,M){var R=M===l,B=R&&void 0!==g?g:n.fill,j=R&&void 0!==m?m:n.stroke||s,I=R&&void 0!==_?_:O,F=void 0;P&&(F=P({datum:M.datum,xKey:i,yKey:a,fill:B,stroke:j,strokeWidth:I,size:w,highlighted:R})),E.fill=F&&F.fill||B,E.stroke=F&&F.stroke||j,E.strokeWidth=F&&void 0!==F.strokeWidth?F.strokeWidth:I,E.size=F&&void 0!==F.size?F.size:w,E.translationX=M.point.x,E.translationY=M.point.y,E.opacity=e.getOpacity(M),E.visible=n.enabled&&E.size>0})}},t.prototype.updateTextNodes=function(){var e=this;this.nodeSelection.selectByClass(nt).each(function(r,n){var i=n.point,a=n.label,s=e.label,h=s.fontWeight,p=s.fontSize,f=s.fontFamily,d=s.color;a&&s.enabled?(r.fontStyle=s.fontStyle,r.fontWeight=h,r.fontSize=p,r.fontFamily=f,r.textAlign=a.textAlign,r.textBaseline=a.textBaseline,r.text=a.text,r.x=i.x,r.y=i.y-10,r.fill=d,r.visible=!0):r.visible=!1})},t.prototype.getNodeData=function(){return this.nodeData},t.prototype.fireNodeClickEvent=function(e,r){this.fireEvent({type:"nodeClick",event:e,series:this,datum:r.datum,xKey:this.xKey,yKey:this.yKey})},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,i=r.yKey,a=r.xAxis,s=r.yAxis;if(!(n&&i&&a&&s))return"";var l=this,c=l.xName,h=l.yName,p=l.tooltip,f=l.marker,d=p.renderer,v=p.format,g=e.datum,y=g[n],m=g[i],C=a.formatDatum(y),_=s.formatDatum(m),w=Xe(this.title||h),P=Xe(C+": "+_),O=f.formatter,A=f.fill,M=f.strokeWidth,j=void 0;O&&(j=O({datum:g,xKey:n,yKey:i,fill:A,stroke:f.stroke,strokeWidth:void 0!==M?M:this.strokeWidth,size:f.size,highlighted:!1}));var I=j&&j.fill||A,F={title:w,backgroundColor:I,content:P};if(v||d){var N={datum:g,xKey:n,xValue:y,xName:c,yKey:i,yValue:m,yName:h,title:w,color:I};if(v)return et({content:uf(v,N)},F);if(d)return et(d(N),F)}return et(F)},t.prototype.listSeriesItems=function(e){var r=this,i=r.data,s=r.yKey,p=r.marker;i&&i.length&&r.xKey&&s&&e.push({id:r.id,itemId:void 0,enabled:r.visible,label:{text:r.title||r.yName||s},marker:{shape:p.shape,fill:p.fill||"rgba(0, 0, 0, 0)",stroke:p.stroke||r.stroke||"rgba(0, 0, 0, 0)",fillOpacity:1,strokeOpacity:r.strokeOpacity}})},t.className="LineSeries",t.type="line",Wt([G("layoutChange")],t.prototype,"title",void 0),Wt([G("update")],t.prototype,"stroke",void 0),Wt([G("update")],t.prototype,"lineDash",void 0),Wt([G("update")],t.prototype,"lineDashOffset",void 0),Wt([G("update")],t.prototype,"strokeWidth",void 0),Wt([G("update")],t.prototype,"strokeOpacity",void 0),Wt([G("update")],t.prototype,"xName",void 0),Wt([G("update")],t.prototype,"yName",void 0),t}(ho),ff=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ql=function(){return Ql=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ql.apply(this,arguments)},li=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$b=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return ff(t,o),li([G("change")],t.prototype,"renderer",void 0),t}(vn),pf=function(o){function t(){var e=o.call(this)||this;e.xDomain=[],e.yDomain=[],e.xData=[],e.yData=[],e.validData=[],e.sizeData=[],e.sizeScale=new Ne,e.nodeData=[],e.markerSelection=je.select(e.pickGroup).selectAll(),e.labelSelection=je.select(e.group).selectAll(),e.marker=new $l,e.label=new At,e._fill="#c16068",e._stroke="#874349",e._strokeWidth=2,e._fillOpacity=1,e._strokeOpacity=1,e.xKey="",e.yKey="",e.xName="",e.yName="",e.sizeName="Size",e.labelName="Label",e.tooltip=new $b;var n=e.marker,i=e.label;return n.addPropertyListener("shape",e.onMarkerShapeChange,e),n.addEventListener("change",e.scheduleUpdate,e),e.addPropertyListener("xKey",function(){return e.xData=[]}),e.addPropertyListener("yKey",function(){return e.yData=[]}),e.addPropertyListener("sizeKey",function(){return e.sizeData=[]}),i.enabled=!1,i.addEventListener("change",e.scheduleUpdate,e),i.addEventListener("dataChange",e.scheduleData,e),e}return ff(t,o),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){this._fill!==e&&(this._fill=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){this._stroke!==e&&(this._stroke=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(e){this._strokeWidth!==e&&(this._strokeWidth=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this._fillOpacity},set:function(e){this._fillOpacity!==e&&(this._fillOpacity=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeOpacity",{get:function(){return this._strokeOpacity},set:function(e){this._strokeOpacity!==e&&(this._strokeOpacity=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),t.prototype.onHighlightChange=function(){this.updateMarkerNodes()},t.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.setData([]),this.markerSelection.exit.remove(),this.fireEvent({type:"legendChange"})},t.prototype.setColors=function(e,r){this.fill=e[0],this.stroke=r[0],this.marker.fill=e[0],this.marker.stroke=r[0]},t.prototype.processData=function(){var e=this,r=this,n=r.xKey,i=r.yKey,a=r.sizeKey,l=r.xAxis,c=r.yAxis,h=r.marker;if(!l||!c)return!1;var g=l.scale instanceof Qe,y=c.scale instanceof Qe;return this.validData=(n&&i&&this.data?this.data:[]).filter(function(m){return void 0!==e.checkDatum(m[n],g)&&void 0!==e.checkDatum(m[i],y)}),this.xData=this.validData.map(function(m){return m[n]}),this.yData=this.validData.map(function(m){return m[i]}),this.sizeData=a?this.validData.map(function(m){return m[a]}):[],this.sizeScale.domain=h.domain?h.domain:Bt(this.sizeData,it)||[1,1],this.xDomain=l.scale instanceof Qe?this.fixNumericExtent(Bt(this.xData,it),"x",l):this.xData,this.yDomain=c.scale instanceof Qe?this.fixNumericExtent(Bt(this.yData,it),"y",c):this.yData,!0},t.prototype.getDomain=function(e){return e===ye.X?this.xDomain:this.yDomain},t.prototype.getNodeData=function(){return this.nodeData},t.prototype.getLabelData=function(){return this.nodeData},t.prototype.fireNodeClickEvent=function(e,r){this.fireEvent({type:"nodeClick",event:e,series:this,datum:r.datum,xKey:this.xKey,yKey:this.yKey,sizeKey:this.sizeKey})},t.prototype.createNodeData=function(){var e=this,r=e.chart,a=e.xAxis,s=e.yAxis,l=e.label,c=e.labelKey;if(!(r&&e.data&&e.visible&&a&&s)||r.layoutPending||r.dataPending)return[];var h=a.scale,p=s.scale,f=h instanceof Qe,d=p instanceof Qe,v=(h.bandwidth||0)/2,g=(p.bandwidth||0)/2,y=this,m=y.xData,C=y.yData,_=y.validData,w=y.sizeData,P=y.sizeScale,O=y.marker,A=[];P.range=[O.size,O.maxSize];for(var E=l.getFont(),M=0;M<m.length;M++){var R=this.checkDomainXY(m[M],C[M],f,d);if(R){var B=h.convert(R[0])+v,j=p.convert(R[1])+g;if(this.checkRangeXY(B,j,a,s)){var I=c?String(_[M][c]):"",F=sn.getTextSize(I,E);A.push({series:this,datum:_[M],point:{x:B,y:j},size:w.length?P.convert(w[M]):O.size,label:Ql({text:I},F)})}}}return this.nodeData=A},t.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){!this.nodeDataPending||(this.nodeDataPending=!1,this.createNodeData(),this.updateMarkerSelection(),this.updateLabelSelection())},t.prototype.updateNodes=function(){this.group.visible=this.visible,this.updateMarkerNodes(),this.updateLabelNodes()},t.prototype.updateLabelSelection=function(){var e=this.chart&&this.chart.placeLabels().get(this)||[],r=this.labelSelection.setData(e);r.exit.remove();var n=r.enter.append(nt);this.labelSelection=r.merge(n)},t.prototype.updateMarkerSelection=function(){var e=ii(this.marker.shape),r=this.markerSelection.setData(this.nodeData);r.exit.remove();var n=r.enter.append(e);this.markerSelection=r.merge(n)},t.prototype.updateLabelNodes=function(){var e=this.label;this.labelSelection.each(function(r,n){r.text=n.text,r.fill=e.color,r.x=n.x,r.y=n.y,r.fontStyle=e.fontStyle,r.fontWeight=e.fontWeight,r.fontSize=e.fontSize,r.fontFamily=e.fontFamily,r.textAlign="left",r.textBaseline="top"})},t.prototype.updateMarkerNodes=function(){var e=this;if(this.chart){var r=this,n=r.marker,i=r.xKey,a=r.yKey,l=r.fillOpacity,c=r.strokeOpacity,h=r.fill,p=r.stroke,f=r.chart.highlightedDatum,d=r.sizeScale,v=r.sizeData,g=r.highlightStyle,_=g.item,w=_.fill,P=void 0===w?g.fill:w,O=_.stroke,A=void 0===O?g.stroke:O,E=_.strokeWidth,M=void 0===E?g.strokeWidth:E,R=void 0!==n.strokeWidth?n.strokeWidth:r.strokeWidth,B=n.formatter;d.range=[n.size,n.maxSize],this.markerSelection.each(function(j,I,F){var N=I===f,V=N&&void 0!==P?P:n.fill||h,Y=N&&void 0!==A?A:n.stroke||p,$=N&&void 0!==M?M:e.getStrokeWidth(R,I),J=v.length?d.convert(v[F]):n.size,H=void 0;B&&(H=B({datum:I.datum,xKey:i,yKey:a,fill:V,stroke:Y,strokeWidth:$,size:J,highlighted:N})),j.fill=H&&H.fill||V,j.stroke=H&&H.stroke||Y,j.strokeWidth=H&&void 0!==H.strokeWidth?H.strokeWidth:$,j.size=H&&void 0!==H.size?H.size:J,j.fillOpacity=void 0!==n.fillOpacity?n.fillOpacity:l,j.strokeOpacity=void 0!==n.strokeOpacity?n.strokeOpacity:c,j.translationX=I.point.x,j.translationY=I.point.y,j.opacity=e.getOpacity(I),j.zIndex=N?si.highlightedZIndex:F,j.visible=n.enabled&&j.size>0})}},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,i=r.yKey,a=r.xAxis,s=r.yAxis;if(!(n&&i&&a&&s))return"";var l=this,p=l.marker,f=l.tooltip,d=l.xName,v=l.yName,g=l.sizeKey,y=l.sizeName,m=l.labelKey,C=l.labelName,_=p.fill||l.fill,w=p.stroke||l.stroke,P=this.getStrokeWidth(p.strokeWidth||this.strokeWidth,e),O=this.marker.formatter,A=void 0;O&&(A=O({datum:e,xKey:n,yKey:i,fill:_,stroke:w,strokeWidth:P,size:e.size,highlighted:!1}));var E=A&&A.fill||_||"gray",M=this.title||v,R=e.datum,B=R[n],j=R[i],I=Xe(a.formatDatum(B)),F=Xe(s.formatDatum(j)),N="<b>"+Xe(d||n)+"</b>: "+I+"<br><b>"+Xe(v||i)+"</b>: "+F;g&&(N+="<br><b>"+Xe(y||g)+"</b>: "+Xe(R[g])),m&&(N="<b>"+Xe(C||m)+"</b>: "+Xe(R[m])+"<br>"+N);var V={title:M,backgroundColor:E,content:N},Y=f.renderer;return Y?et(Y({datum:R,xKey:n,xValue:B,xName:d,yKey:i,yValue:j,yName:v,sizeKey:g,sizeName:y,labelKey:m,labelName:C,title:M,color:E}),V):et(V)},t.prototype.listSeriesItems=function(e){var r=this,i=r.data,s=r.yKey,p=r.marker;i&&i.length&&r.xKey&&s&&e.push({id:r.id,itemId:void 0,enabled:r.visible,label:{text:r.title||r.yName||s},marker:{shape:p.shape,fill:p.fill||r.fill||"rgba(0, 0, 0, 0)",stroke:p.stroke||r.stroke||"rgba(0, 0, 0, 0)",fillOpacity:void 0!==p.fillOpacity?p.fillOpacity:r.fillOpacity,strokeOpacity:void 0!==p.strokeOpacity?p.strokeOpacity:r.strokeOpacity}})},t.className="ScatterSeries",t.type="scatter",li([G("layoutChange")],t.prototype,"title",void 0),li([G("dataChange")],t.prototype,"xKey",void 0),li([G("dataChange")],t.prototype,"yKey",void 0),li([G("dataChange")],t.prototype,"sizeKey",void 0),li([G("dataChange")],t.prototype,"labelKey",void 0),t}(ho),eu=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Br=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},po=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},df=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(po(arguments[t]));return o},vo=(()=>(function(o){o[o.Bin=0]="Bin",o[o.Label=1]="Label"}(vo||(vo={})),vo))(),Kb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return eu(t,o),Br([G("change")],t.prototype,"formatter",void 0),t}(At),tu={count:function(o){return o.data.length},sum:function(o,t){return o.data.reduce(function(e,r){return e+r[t]},0)},mean:function(o,t){return tu.sum(o,t)/tu.count(o,t)}},gf=function(){function o(t){var e=po(t,2),r=e[0],n=e[1];this.data=[],this.aggregatedValue=0,this.frequency=0,this.domain=[r,n]}return o.prototype.addDatum=function(t){this.data.push(t),this.frequency++},Object.defineProperty(o.prototype,"domainWidth",{get:function(){var t=po(this.domain,2);return t[1]-t[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"relativeHeight",{get:function(){return this.aggregatedValue/this.domainWidth},enumerable:!0,configurable:!0}),o.prototype.calculateAggregatedValue=function(t,e){e||(t="count"),this.aggregatedValue=(0,tu[t])(this,e)},o.prototype.getY=function(t){return t?this.relativeHeight:this.aggregatedValue},o}(),Yb=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return eu(t,o),Br([G("change")],t.prototype,"renderer",void 0),t}(vn),yf=function(o){function t(){var e,r=o.call(this)||this;return r.rectGroup=r.pickGroup.appendChild(new Ge),r.textGroup=r.group.appendChild(new Ge),r.rectSelection=je.select(r.rectGroup).selectAll(),r.textSelection=je.select(r.textGroup).selectAll(),r.binnedData=[],r.xDomain=[],r.yDomain=[],r.label=new Kb,r.seriesItemEnabled=!0,r.tooltip=new Yb,r.fill=void 0,r.stroke=void 0,r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.directionKeys=((e={})[ye.X]=["xKey"],e[ye.Y]=["yKey"],e),r._xKey="",r._areaPlot=!1,r._bins=void 0,r._aggregation="count",r._binCount=void 0,r._xName="",r._yKey="",r._yName="",r._strokeWidth=1,r.label.enabled=!1,r.label.addEventListener("change",r.scheduleUpdate,r),r}return eu(t,o),t.prototype.getKeys=function(e){var r=this,n=this.directionKeys,i=n&&n[e],a=[];return i&&i.forEach(function(s){var l=r[s];l&&(Array.isArray(l)?a.push.apply(a,df(l)):a.push(l))}),a},Object.defineProperty(t.prototype,"xKey",{get:function(){return this._xKey},set:function(e){this._xKey!==e&&(this._xKey=e,this.scheduleData())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"areaPlot",{get:function(){return this._areaPlot},set:function(e){this._areaPlot=e,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bins",{get:function(){return this._bins},set:function(e){this._bins=e,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aggregation",{get:function(){return this._aggregation},set:function(e){this._aggregation=e,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binCount",{get:function(){return this._binCount},set:function(e){this._binCount=e,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xName",{get:function(){return this._xName},set:function(e){this._xName!==e&&(this._xName=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yKey",{get:function(){return this._yKey},set:function(e){this._yKey=e,this.seriesItemEnabled=!0,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yName",{get:function(){return this._yName},set:function(e){this._yName=e,this.scheduleData()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(e){this._strokeWidth!==e&&(this._strokeWidth=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadow",{get:function(){return this._shadow},set:function(e){this._shadow!==e&&(this._shadow=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),t.prototype.onHighlightChange=function(){this.updateRectNodes()},t.prototype.setColors=function(e,r){this.fill=e[0],this.stroke=r[0]},t.prototype.deriveBins=function(){var e=this,n=this.bins;if(!this.data)return[];if(n)return n;var a=this.data.map(function(f){return f[e.xKey]}),s=this.fixNumericExtent(Bt(a,it),"x"),l=Pa(s[0],s[1],this.binCount||10),c=io(s[0],s[1],this.binCount||10),h=l[0];return df([[h-c,h]],l.map(function(f){return[f,f+c]}))},t.prototype.placeDataInBins=function(e){var r=this,n=this.xKey,i=this.deriveBins(),a=e.slice().sort(function(d,v){return d[n]<v[n]?-1:d[n]>v[n]?1:0}),s=0,l=[new gf(i[0])];e:for(var c=0,h=a.length;c<h;c++){for(var p=a[c];p[n]>i[s][1];){var f=i[++s];if(!f)break e;l.push(new gf(f))}l[s].addDatum(p)}return l.forEach(function(d){return d.calculateAggregatedValue(r._aggregation,r.yKey)}),l},Object.defineProperty(t.prototype,"xMax",{get:function(){var e=this;return this.data&&this.data.reduce(function(r,n){return Math.max(r,n[e.xKey])},Number.NEGATIVE_INFINITY)},enumerable:!0,configurable:!0}),t.prototype.processData=function(){var e=this,i=this.data;this.binnedData=this.placeDataInBins(this.xKey&&i?i:[]);var s=Bt(this.binnedData.map(function(f){return f.getY(e.areaPlot)}),it);return this.yDomain=this.fixNumericExtent([0,s?s[1]:1],"y"),this.xDomain=[this.binnedData[0].domain[0],this.binnedData[this.binnedData.length-1].domain[1]],this.fireEvent({type:"dataProcessed"}),!0},t.prototype.getDomain=function(e){return e===ye.X?this.xDomain:this.yDomain},t.prototype.fireNodeClickEvent=function(e,r){this.fireEvent({type:"nodeClick",event:e,series:this,datum:r.datum,xKey:this.xKey})},t.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){if(this.nodeDataPending){this.nodeDataPending=!1;var e=this.createNodeData();this.updateRectSelection(e),this.updateTextSelection(e)}},t.prototype.updateNodes=function(){this.group.visible=this.visible,this.updateRectNodes(),this.updateTextNodes()},t.prototype.createNodeData=function(){var e=this,n=this.xAxis,i=this.yAxis;if(!this.seriesItemEnabled||!n||!i)return[];var a=n.scale,s=i.scale,l=this,c=l.fill,h=l.stroke,p=l.strokeWidth,f=[],v=this.label,g=v.formatter,y=void 0===g?function(O){return String(O.value)}:g,m=v.fontStyle,C=v.fontWeight,_=v.fontSize,w=v.fontFamily,P=v.color;return this.binnedData.forEach(function(O){var A=O.aggregatedValue,E=O.frequency,M=po(O.domain,2),B=M[1],j=O.relativeHeight,I=a.convert(M[0]),F=a.convert(B),N=e.areaPlot?j:e.yKey?A:E,V=s.convert(0),Y=s.convert(N),$=F-I,J=Math.abs(Y-V),H=0!==N?{text:y({value:O.aggregatedValue}),fontStyle:m,fontWeight:C,fontSize:_,fontFamily:w,fill:P,x:I+$/2,y:Y+J/2}:void 0;f.push({series:e,datum:O,x:I,y:Y,width:$,height:J,fill:c,stroke:h,strokeWidth:p,label:H})}),f},t.prototype.updateRectSelection=function(e){var r=this.rectSelection.setData(e);r.exit.remove();var n=r.enter.append(gr).each(function(i){i.tag=vo.Bin,i.crisp=!0});this.rectSelection=r.merge(n)},t.prototype.updateRectNodes=function(){var e=this;if(this.chart){var r=this,n=r.fillOpacity,i=r.strokeOpacity,a=r.shadow,s=r.chart.highlightedDatum,l=r.highlightStyle,f=l.item,d=f.fill,v=void 0===d?l.fill:d,g=f.stroke,y=void 0===g?l.stroke:g,m=f.strokeWidth,C=void 0===m?l.strokeWidth:m;this.rectSelection.each(function(_,w,P){var O=w===s,A=O&&void 0!==C?C:e.getStrokeWidth(w.strokeWidth,w);_.x=w.x,_.y=w.y,_.width=w.width,_.height=w.height,_.fill=O&&void 0!==v?v:w.fill,_.stroke=O&&void 0!==y?y:w.stroke,_.fillOpacity=n,_.strokeOpacity=i,_.strokeWidth=A,_.lineDash=e.lineDash,_.lineDashOffset=e.lineDashOffset,_.fillShadow=a,_.zIndex=O?si.highlightedZIndex:P,_.visible=w.height>0,_.opacity=e.getOpacity(w)})}},t.prototype.updateTextSelection=function(e){var r=this.textSelection.setData(e);r.exit.remove();var n=r.enter.append(nt).each(function(i){i.tag=vo.Label,i.pointerEvents=dt.None,i.textAlign="center",i.textBaseline="middle"});this.textSelection=r.merge(n)},t.prototype.updateTextNodes=function(){var e=this.label.enabled;this.textSelection.each(function(r,n){var i=n.label;i&&e?(r.text=i.text,r.x=i.x,r.y=i.y,r.fontStyle=i.fontStyle,r.fontWeight=i.fontWeight,r.fontSize=i.fontSize,r.fontFamily=i.fontFamily,r.fill=i.fill,r.visible=!0):r.visible=!1})},t.prototype.getTooltipHtml=function(e){var r=this,n=r.xKey,i=r.yKey,a=r.xAxis,s=r.yAxis;if(!n||!a||!s)return"";var l=this,c=l.xName,h=l.yName,p=l.fill,d=l.aggregation,v=l.tooltip.renderer,g=e.datum,y=g.aggregatedValue,m=g.frequency,C=po(g.domain,2),_=C[0],w=C[1],P=Xe(c||n)+": "+a.formatDatum(_)+" - "+a.formatDatum(w),O=i?"<b>"+Xe(h||i)+" ("+d+")</b>: "+s.formatDatum(y)+"<br>":"",A={title:P,backgroundColor:p,content:O+="<b>Frequency</b>: "+m};return v?et(v({datum:g,xKey:n,xValue:g.domain,xName:c,yKey:i,yValue:g.aggregatedValue,yName:h,color:p}),A):et(A)},t.prototype.listSeriesItems=function(e){var r=this,i=r.data,a=r.yKey;i&&i.length&&e.push({id:r.id,itemId:a,enabled:r.seriesItemEnabled,label:{text:r.yName||a||"Frequency"},marker:{fill:r.fill||"rgba(0, 0, 0, 0)",stroke:r.stroke||"rgba(0, 0, 0, 0)",fillOpacity:r.fillOpacity,strokeOpacity:r.strokeOpacity}})},t.prototype.toggleSeriesItem=function(e,r){e===this.yKey&&(this.seriesItemEnabled=r),this.scheduleData()},t.className="HistogramSeries",t.type="histogram",Br([G("dataChange")],t.prototype,"fill",void 0),Br([G("dataChange")],t.prototype,"stroke",void 0),Br([G("layoutChange")],t.prototype,"fillOpacity",void 0),Br([G("layoutChange")],t.prototype,"strokeOpacity",void 0),Br([G("update")],t.prototype,"lineDash",void 0),Br([G("update")],t.prototype,"lineDashOffset",void 0),t}(ho),Xb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zb=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.data=void 0,e}return Xb(t,o),function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([G("dataChange")],t.prototype,"data",void 0),t}(si),Jb=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),go=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},mf=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.enabled=!0,e.color="rgba(0, 0, 0, 0.5)",e.xOffset=0,e.yOffset=0,e.blur=5,e}return Jb(t,o),go([G("change")],t.prototype,"enabled",void 0),go([G("change")],t.prototype,"color",void 0),go([G("change")],t.prototype,"xOffset",void 0),go([G("change")],t.prototype,"yOffset",void 0),go([G("change")],t.prototype,"blur",void 0),t}(rt);function Qb(o,t,e,r,n){var a=o.value&&(n-e)/o.value;o.children.forEach(function(s){s.x0=t,s.x1=r,s.y0=e,s.y1=e+=s.value*a})}function eS(o,t,e,r,n){var a=o.value&&(r-t)/o.value;o.children.forEach(function(s){s.x0=t,s.x1=t+=s.value*a,s.y0=e,s.y1=n})}function tS(o){o.x0=Math.round(o.x0),o.y0=Math.round(o.y0),o.x1=Math.round(o.x1),o.y1=Math.round(o.y1)}var iS=function o(t){function e(r,n,i,a,s){!function rS(o,t,e,r,n,i){for(var f,d,v,g,y,m,C,_,w,P,a=[],s=t.children,l=s.length,c=t.value,h=0,p=0;h<l;){f=n-e,d=i-r;do{g=s[p++].value}while(!g&&p<l);for(y=m=g,P=g*g*(w=Math.max(d/f,f/d)/(c*o)),_=Math.max(m/P,P/y);p<l;++p){if((v=s[p].value)<y&&(y=v),v>m&&(m=v),P=(g+=v)*g*w,(C=Math.max(m/P,P/y))>_){g-=v;break}_=C}var O={value:g,dice:f<d,children:s.slice(h,p)};a.push(O),O.dice?eS(O,e,r,n,c?r+=d*g/c:i):Qb(O,e,r,c?e+=f*g/c:n,i),c-=g,h=p}}(t,r,n,i,a,s)}return e.ratio=function(r){return o((r=+r)>1?r:1)},e}((1+Math.sqrt(5))/2),oS=function(){function o(){this.paddingStack=[0],this.dx=1,this.dy=1,this.round=!0,this.tile=iS,this.paddingInner=function(t){return 0},this.paddingTop=function(t){return 0},this.paddingRight=function(t){return 0},this.paddingBottom=function(t){return 0},this.paddingLeft=function(t){return 0}}return Object.defineProperty(o.prototype,"size",{get:function(){return[this.dx,this.dy]},set:function(t){this.dx=t[0],this.dy=t[1]},enumerable:!0,configurable:!0}),o.prototype.processData=function(t){return t.x0=0,t.y0=0,t.x1=this.dx,t.y1=this.dy,t.eachBefore(this.positionNode.bind(this)),this.paddingStack=[0],this.round&&t.eachBefore(tS),t},o.prototype.positionNode=function(t){var e=this.paddingStack[t.depth],r=t.x0+e,n=t.y0+e,i=t.x1-e,a=t.y1-e;i<r&&(r=i=(r+i)/2),a<n&&(n=a=(n+a)/2),t.x0=r,t.y0=n,t.x1=i,t.y1=a,t.children&&(e=this.paddingStack[t.depth+1]=this.paddingInner(t)/2,r+=this.paddingLeft(t)-e,n+=this.paddingTop(t)-e,(i-=this.paddingRight(t)-e)<r&&(r=i=(r+i)/2),(a-=this.paddingBottom(t)-e)<n&&(n=a=(n+a)/2),this.tile(t,r,n,i,a))},o}(),Cf=function(){function o(t){this.value=0,this.depth=0,this.height=0,this.parent=void 0,this.children=void 0,this.datum=t}return o.prototype.countFn=function(t){var e=0,r=t.children;if(r&&r.length)for(var n=r.length;--n>=0;)e+=r[n].value;else e=1;t.value=e},o.prototype.count=function(){return this.eachAfter(this.countFn)},o.prototype.each=function(t,e){var r=this,n=-1;return this.iterator(function(i){t.call(e,i,++n,r)}),this},o.prototype.eachAfter=function(t,e){for(var r=this,n=[r],i=[];r=n.pop();){i.push(r);var a=r.children;if(a)for(var s=0,l=a.length;s<l;++s)n.push(a[s])}for(var c=-1;r=i.pop();)t.call(e,r,++c,this);return this},o.prototype.eachBefore=function(t,e){for(var r=this,n=[r],i=-1;r=n.pop();){t.call(e,r,++i,this);var a=r.children;if(a)for(var s=a.length-1;s>=0;--s)n.push(a[s])}return this},o.prototype.find=function(t,e){var i,r=this,n=-1;return this.iterator(function(a){if(t.call(e,a,++n,r))return i=a,!1}),i},o.prototype.sum=function(t){return this.eachAfter(function(e){var r=+t(e.datum)||0,n=e.children;if(n)for(var i=n.length;--i>=0;)r+=n[i].value;e.value=r})},o.prototype.sort=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},o.prototype.path=function(t){for(var e=this,r=function uS(o,t){if(o&&t){if(o===t)return o;var e=o.ancestors(),r=t.ancestors(),n=void 0;for(o=e.pop(),t=r.pop();o===t;)n=o,o=e.pop(),t=r.pop();return n}}(e,t),n=[e];e!==r;)n.push(e=e.parent);for(var i=n.length;t!==r;)n.splice(i,0,t),t=t.parent;return n},o.prototype.ancestors=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},o.prototype.descendants=function(){var t=[];return this.iterator(function(e){return t.push(e)}),t},o.prototype.leaves=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},o.prototype.links=function(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e},o.prototype.copy=function(){},o.prototype.iterator=function(t){var n,e=this,r=[e];e:do{for(n=r.reverse(),r=[];e=n.pop();){if(!1===t(e))break e;var i=e.children;if(i)for(var a=0,s=i.length;a<s;++a)r.push(i[a])}}while(r.length)},o}();function _f(o,t){o instanceof Map?(o=[void 0,o],void 0===t&&(t=sS)):void 0===t&&(t=lS);for(var n,i,a,s,l,e=new Cf(o),r=[e];n=r.pop();)if((a=t(n.datum))&&(l=(a=Array.from(a)).length))for(n.children=a,s=l-1;s>=0;--s)r.push(i=a[s]=new Cf(a[s])),i.parent=n,i.depth=n.depth+1;return e.eachBefore(aS)}function aS(o){var t=0;do{o.height=t}while((o=o.parent)&&o.height<++t)}function sS(o){return Array.isArray(o)?o[1]:void 0}function lS(o){return o.children}var ru=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},cS=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return ru(t,o),mr([G("change")],t.prototype,"renderer",void 0),t}(vn),bf=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.padding=10,e}return ru(t,o),mr([G("change")],t.prototype,"padding",void 0),t}(At),gn=(()=>(function(o){o[o.Name=0]="Name",o[o.Value=1]="Value"}(gn||(gn={})),gn))(),hS=function(o){function t(){var r,e=o.call(this)||this;return e.groupSelection=je.select(e.pickGroup).selectAll(),e.labelMap=new Map,e.layout=new oS,e.title=((r=new bf).color="white",r.fontWeight="bold",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.padding=15,r),e.subtitle=function(){var r=new bf;return r.color="white",r.fontSize=9,r.fontFamily="Verdana, sans-serif",r.padding=13,r}(),e.labels={large:function(){var r=new At;return r.color="white",r.fontWeight="bold",r.fontSize=18,r}(),medium:function(){var r=new At;return r.color="white",r.fontWeight="bold",r.fontSize=14,r}(),small:function(){var r=new At;return r.color="white",r.fontWeight="bold",r.fontSize=10,r}(),color:function(){var r=new At;return r.color="white",r}()},e._nodePadding=2,e.labelKey="label",e.sizeKey="size",e.colorKey="color",e.colorDomain=[-5,5],e.colorRange=["#cb4b3f","#6acb64"],e.colorParents=!1,e.gradient=!0,e.colorName="Change",e.rootName="Root",e._shadow=function(){var r=new mf;return r.color="rgba(0, 0, 0, 0.4)",r.xOffset=1.5,r.yOffset=1.5,r}(),e.tooltip=new cS,e.shadow.addEventListener("change",e.scheduleUpdate,e),e.title.addEventListener("change",e.scheduleUpdate,e),e.subtitle.addEventListener("change",e.scheduleUpdate,e),e.labels.small.addEventListener("change",e.scheduleUpdate,e),e.labels.medium.addEventListener("change",e.scheduleUpdate,e),e.labels.large.addEventListener("change",e.scheduleUpdate,e),e.labels.color.addEventListener("change",e.scheduleUpdate,e),e}return ru(t,o),Object.defineProperty(t.prototype,"nodePadding",{get:function(){return this._nodePadding},set:function(e){this._nodePadding!==e&&(this._nodePadding=e,this.updateLayoutPadding(),this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadow",{get:function(){return this._shadow},set:function(e){this._shadow!==e&&(this._shadow=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),t.prototype.onHighlightChange=function(){this.updateNodes()},t.prototype.updateLayoutPadding=function(){var e=this,r=e.title,n=e.subtitle,i=e.nodePadding,a=e.labelKey;this.layout.paddingRight=function(s){return i},this.layout.paddingBottom=function(s){return i},this.layout.paddingLeft=function(s){return i},this.layout.paddingTop=function(s){var l=s.datum[a]||"";s.children&&(l=l.toUpperCase());var c=s.depth>1?n:r,h=sn.getTextSize(l,[c.fontWeight,c.fontSize+"px",c.fontFamily].join(" ").trim()),f=s.depth>0&&s.children&&h.width<=s.x1-s.x0-2*i;return s.hasTitle=!!f,f?h.height+2*i:i}},t.prototype.processData=function(){if(!this.data)return!1;var h,e=this,r=e.data,n=e.sizeKey,i=e.labelKey,a=e.colorKey,s=e.colorDomain,l=e.colorRange,c=e.colorParents;h=n?_f(r).sum(function(v){return v.children?1:v[n]}):_f(r).sum(function(v){return v.children?0:1}),this.dataRoot=h;var p=new Ne;p.domain=s,p.range=l;var f=this;return function d(v,g){void 0===g&&(g=0);var y=v.children,m=v.datum,C=m[i],_=a?m[a]:g;v.series=f,v.fill=!y||c?p.convert(_):"#272931",v.colorValue=_,v.label=C?y?C.toUpperCase():C:"",y&&y.forEach(function(w){return d(w,g+1)})}(this.dataRoot),!0},t.prototype.getLabelCenterX=function(e){return(e.x0+e.x1)/2},t.prototype.getLabelCenterY=function(e){return(e.y0+e.y1)/2+2},t.prototype.update=function(){this.updatePending=!1,this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){if(this.nodeDataPending){this.nodeDataPending=!1;var r=this.chart,n=this.dataRoot;if(r&&n){var i=r.getSeriesRect();if(i){this.layout.size=[i.width,i.height],this.updateLayoutPadding();var a=this.layout.processData(n).descendants(),s=this.groupSelection.setData(a);s.exit.remove();var l=s.enter.append(Ge);l.append(gr),l.append(nt).each(function(c){return c.tag=gn.Name}),l.append(nt).each(function(c){return c.tag=gn.Value}),this.groupSelection=s.merge(l)}}}},t.prototype.updateNodes=function(){var e=this;if(this.chart){var r=this,n=r.colorKey,i=r.labelMap,a=r.nodePadding,s=r.title,l=r.subtitle,c=r.labels,h=r.shadow,p=r.gradient,f=r.chart.highlightedDatum,d=r.highlightStyle,m=d.item,C=m.fill,_=void 0===C?d.fill:C,w=m.stroke,P=void 0===w?d.stroke:w,O=m.strokeWidth,A=void 0===O?d.strokeWidth:O;this.groupSelection.selectByClass(gr).each(function(E,M){var R=M===f,B=R&&void 0!==_?_:M.fill,j=R&&void 0!==P?P:M.depth<2?void 0:"black",I=R&&void 0!==A?A:e.getStrokeWidth(1,M);E.fill=B,E.stroke=j,E.strokeWidth=I,E.crisp=!0,E.gradient=p,E.x=M.x0,E.y=M.y0,E.width=M.x1-M.x0,E.height=M.y1-M.y0}),this.groupSelection.selectByTag(gn.Name).each(function(E,M,R){var V,B=!M.children,j=M.x1-M.x0-2*a,I=M.y1-M.y0-2*a,F=M.hasTitle,N=M===f;E.fontWeight=(V=B?j>40&&I>40?c.large:j>20&&I>20?c.medium:c.small:M.depth>1?l:s).fontWeight,E.fontSize=V.fontSize,E.fontFamily=V.fontFamily,E.textBaseline=B?"bottom":F?"top":"middle",E.textAlign=F?"left":"center",E.text=M.label;var Y=E.computeBBox(),$=B&&!!Y&&Y.width<=j&&2*Y.height+8<=I;i.set(R,E),E.fill=N?"black":V.color,E.fillShadow=$&&!N?h:void 0,E.visible=F||$,F?(E.x=M.x0+a,E.y=M.y0+a):(E.x=e.getLabelCenterX(M),E.y=e.getLabelCenterY(M))}),this.groupSelection.selectByTag(gn.Value).each(function(E,M,R){var B=!M.children,j=M.x1-M.x0-2*a,I=M===f,F=M.colorValue,N=c.color;E.fontSize=N.fontSize,E.fontFamily=N.fontFamily,E.fontStyle=N.fontStyle,E.fontWeight=N.fontWeight,E.textBaseline="top",E.textAlign="center",E.text="number"==typeof F&&isFinite(F)?String(Rl(M.colorValue))+"%":"";var V=E.computeBBox(),Y=i.get(R),J=B&&!!n&&!!Y&&Y.visible&&!!V&&V.width<j;E.fill=I?"black":N.color,E.fillShadow=I?void 0:h,E.visible=J,J?(E.x=e.getLabelCenterX(M),E.y=e.getLabelCenterY(M)):Y&&(!M.children||!M.children.length)&&(Y.textBaseline="middle",Y.y=e.getLabelCenterY(M))})}},t.prototype.getDomain=function(e){return[0,1]},t.prototype.fireNodeClickEvent=function(e,r){this.fireEvent({type:"nodeClick",event:e,series:this,datum:r.datum,labelKey:this.labelKey,sizeKey:this.sizeKey,colorKey:this.colorKey})},t.prototype.getTooltipHtml=function(e){var r=this,i=r.sizeKey,a=r.labelKey,s=r.colorKey,l=r.colorName,h=e.datum,p=r.tooltip.renderer,f=e.depth?h[a]:r.rootName||h[a],d=void 0,v=e.fill||"gray";if(s&&l){var g=h[s];"number"==typeof g&&isFinite(g)&&(d="<b>"+l+"</b>: "+Rl(h[s]))}var y={title:f,backgroundColor:v,content:d};return p?et(p({datum:e,sizeKey:i,labelKey:a,colorKey:s,title:f,color:v}),y):et(y)},t.prototype.listSeriesItems=function(e){},t.className="TreemapSeries",t.type="treemap",mr([G("dataChange")],t.prototype,"labelKey",void 0),mr([G("dataChange")],t.prototype,"sizeKey",void 0),mr([G("dataChange")],t.prototype,"colorKey",void 0),mr([G("dataChange")],t.prototype,"colorDomain",void 0),mr([G("dataChange")],t.prototype,"colorRange",void 0),mr([G("dataChange")],t.prototype,"colorParents",void 0),mr([G("update")],t.prototype,"gradient",void 0),t}(Zb),fS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sf=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e._centerX=0,e._centerY=0,e._centerOffset=0,e._innerRadius=10,e._outerRadius=20,e._startAngle=0,e._endAngle=2*Math.PI,e._angleOffset=0,e}return fS(t,o),Object.defineProperty(t.prototype,"centerX",{get:function(){return this._centerX},set:function(e){this._centerX!==e&&(this._centerX=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerY",{get:function(){return this._centerY},set:function(e){this._centerY!==e&&(this._centerY=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerOffset",{get:function(){return this._centerOffset},set:function(e){this._centerOffset!==e&&(this._centerOffset=Math.max(0,e),this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(e){this._innerRadius!==e&&(this._innerRadius=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outerRadius",{get:function(){return this._outerRadius},set:function(e){this._outerRadius!==e&&(this._outerRadius=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){return this._startAngle},set:function(e){this._startAngle!==e&&(this._startAngle=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this._endAngle},set:function(e){this._endAngle!==e&&(this._endAngle=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angleOffset",{get:function(){return this._angleOffset},set:function(e){this._angleOffset!==e&&(this._angleOffset=e,this.dirtyPath=!0)},enumerable:!0,configurable:!0}),t.prototype.computeBBox=function(){var e=this.outerRadius;return new Ie(this.centerX-e,this.centerY-e,2*e,2*e)},t.prototype.isFullPie=function(){return Eh(Ot(this.startAngle),Ot(this.endAngle))},t.prototype.updatePath=function(){var e=this.path,r=this.angleOffset,n=Math.min(this.startAngle,this.endAngle)+r,i=Math.max(this.startAngle,this.endAngle)+r,a=.5*(n+i),s=Math.min(this.innerRadius,this.outerRadius),l=Math.max(this.innerRadius,this.outerRadius),c=this.centerOffset,h=this.isFullPie(),p=this.centerX,f=this.centerY;if(e.clear(),c&&(p+=c*Math.cos(a),f+=c*Math.sin(a)),h||(e.moveTo(p+s*Math.cos(n),f+s*Math.sin(n)),e.lineTo(p+l*Math.cos(n),f+l*Math.sin(n))),e.cubicArc(p,f,l,l,0,n,i,0),h)e.moveTo(p+s*Math.cos(i),f+s*Math.sin(i));else{var d=p+s*Math.cos(i);e.lineTo(Math.abs(d)<1e-8?0:d,f+s*Math.sin(i))}e.cubicArc(p,f,s,s,0,i,n,1),e.closePath(),this.dirtyPath=!1},t.className="Sector",t}(lt),ui=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Oe=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pS=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},wf=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(pS(arguments[t]));return o},dS=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return ui(t,o),t}(nf),Cr=(()=>(function(o){o[o.Sector=0]="Sector",o[o.Callout=1]="Callout",o[o.Label=2]="Label"}(Cr||(Cr={})),Cr))(),vS=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.offset=3,e.minAngle=20,e}return ui(t,o),Oe([G("change")],t.prototype,"offset",void 0),Oe([G("dataChange")],t.prototype,"minAngle",void 0),Oe([G("dataChange")],t.prototype,"formatter",void 0),t}(At),gS=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.colors=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],e.length=10,e.strokeWidth=1,e}return ui(t,o),Oe([G("change")],t.prototype,"colors",void 0),Oe([G("change")],t.prototype,"length",void 0),Oe([G("change")],t.prototype,"strokeWidth",void 0),t}(rt),yS=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return ui(t,o),Oe([G("change")],t.prototype,"renderer",void 0),t}(vn),mS=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.showInLegend=!1,e}return ui(t,o),Oe([G()],t.prototype,"showInLegend",void 0),t}(ml),xf=function(o){function t(){var r,e=o.call(this)||this;return e.radiusScale=new Ne,e.groupSelection=je.select(e.pickGroup).selectAll(),e.groupSelectionData=[],e.angleScale=((r=new Ne).domain=[0,1],r.range=[-Math.PI,Math.PI].map(function(n){return n+Math.PI/2}),r),e.seriesItemEnabled=[],e.label=new vS,e.callout=new gS,e.tooltip=new yS,e.angleKey="",e.angleName="",e._fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],e._strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],e.fillOpacity=1,e.strokeOpacity=1,e.lineDash=[0],e.lineDashOffset=0,e.rotation=0,e.outerRadiusOffset=0,e.innerRadiusOffset=0,e.strokeWidth=1,e.highlightStyle=new dS,e.addEventListener("update",e.scheduleUpdate,e),e.label.addEventListener("change",e.scheduleUpdate,e),e.label.addEventListener("dataChange",e.scheduleData,e),e.callout.addEventListener("change",e.scheduleLayout,e),e.addPropertyListener("data",function(r){r.value&&(r.source.seriesItemEnabled=r.value.map(function(){return!0}))}),e}return ui(t,o),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){var r=this._title;function n(){this.fireEvent({type:"legendChange"})}r!==e&&(r&&(r.removeEventListener("change",this.scheduleUpdate,this),r.removePropertyListener("showInLegend",n,this),this.group.removeChild(r.node)),e&&(e.node.textBaseline="bottom",e.addEventListener("change",this.scheduleUpdate,this),e.addPropertyListener("showInLegend",n,this),this.group.appendChild(e.node)),this._title=e,this.scheduleUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fills",{get:function(){return this._fills},set:function(e){this._fills=e,this.scheduleUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokes",{get:function(){return this._strokes},set:function(e){this._strokes=e,this.scheduleUpdate()},enumerable:!0,configurable:!0}),t.prototype.onHighlightChange=function(){this.updateNodes()},t.prototype.setColors=function(e,r){this.fills=e,this.strokes=r,this.callout.colors=r},t.prototype.getDomain=function(e){return e===ye.X?this.angleScale.domain:this.radiusScale.domain},t.prototype.processData=function(){var F,e=this,r=this,n=r.angleKey,i=r.radiusKey,a=r.seriesItemEnabled,s=r.angleScale,l=r.groupSelectionData,c=r.label,h=n&&this.data?this.data:[],p=h.map(function(F,N){return a[N]&&Math.abs(+F[n])||0}),f=p.reduce(function(F,N){return F+N},0),d=(F=0,p.map(function(N){return F+=N/f})),v=c.formatter,g=c.enabled&&this.labelKey,y=[],m=[];if(g&&(y=h.map(v?function(F){return v({value:F[g]})}:function(F){return String(F[g])})),i){var _=this.radiusMin,w=this.radiusMax,P=h.map(function(F){return Math.abs(F[i])}),O=void 0!==_?_:Math.min.apply(Math,wf(P)),E=(void 0!==w?w:Math.max.apply(Math,wf(P)))-O;m=P.map(function(F){return E?(F-O)/E:1})}l.length=0;var M=Be(this.rotation),R=Math.PI/2,B=0,j=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],I=0;return d.forEach(function(F){if(!isNaN(F)){var N=i?m[B]:1,V=s.convert(F)+M,Y=s.convert(I)+M,$=(V+Y)/2,J=Math.abs(Y-V),H=Math.cos($),q=Math.sin($),U=Be(c.minAngle),te=g&&J>U,re=function y0(o){return(o%=Zt)<-Math.PI?o+=Zt:o>=Math.PI&&(o-=Zt),o}($),Q=-3*Math.PI/4,we=function m0(o,t){var e=o%t;return e>=0?e:e+t}(Math.floor((re-Q)/R),j.length),Ae=j[we];l.push({series:e,datum:h[B],itemId:B,index:B,radius:N,startAngle:V,endAngle:Y,midAngle:$,midCos:H,midSin:q,label:te?{text:y[B],textAlign:Ae.textAlign,textBaseline:Ae.textBaseline}:void 0}),B++,I=F}}),!0},t.prototype.update=function(){this.updatePending=!1;var e=this,r=e.radius,n=e.innerRadiusOffset,i=e.outerRadiusOffset,a=e.title;this.radiusScale.range=[n?r+n:0,r+(i||0)],this.group.translationX=this.centerX,this.group.translationY=this.centerY,a&&(0===Math.max(0,this.radiusScale.range[1])?a.node.visible=!1:(a.node.translationY=-r-i-2,a.node.visible=a.enabled)),this.updateSelections(),this.updateNodes()},t.prototype.updateSelections=function(){!this.nodeDataPending||(this.nodeDataPending=!1,this.updateGroupSelection())},t.prototype.updateGroupSelection=function(){var e=this.groupSelection.setData(this.groupSelectionData);e.exit.remove();var r=e.enter.append(Ge);r.append(Sf).each(function(n){return n.tag=Cr.Sector}),r.append(jt).each(function(n){n.tag=Cr.Callout,n.pointerEvents=dt.None}),r.append(nt).each(function(n){n.tag=Cr.Label,n.pointerEvents=dt.None}),this.groupSelection=e.merge(r)},t.prototype.updateNodes=function(){var e=this;if(this.chart){this.group.visible=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;var r=this,n=r.fills,i=r.strokes,a=r.fillOpacity,s=r.strokeOpacity,l=r.radiusScale,c=r.callout,h=r.shadow,p=r.chart.highlightedDatum,f=r.highlightStyle,y=f.item,m=y.fill,C=void 0===m?f.fill:m,_=y.stroke,w=void 0===_?f.stroke:_,P=y.strokeWidth,O=void 0===P?f.strokeWidth:P,A=r.angleKey,E=r.radiusKey,M=r.formatter,R=[],B=l.convert(0);this.groupSelection.selectByTag(Cr.Sector).each(function(U,te,re){var Q=l.convert(te.radius),se=!!p&&p.series===e&&te.itemId===p.itemId,de=se&&void 0!==C?C:n[re%n.length],we=se&&void 0!==w?w:i[re%i.length],Ae=se&&void 0!==O?O:e.getStrokeWidth(e.strokeWidth),me=void 0;M&&(me=M({datum:te.datum,angleKey:A,radiusKey:E,fill:de,stroke:we,strokeWidth:Ae,highlighted:se}));var ge=U.parent&&U.parent.parent;se&&ge&&(ge.removeChild(U.parent),ge.appendChild(U.parent)),U.innerRadius=Math.max(0,B),U.outerRadius=Math.max(0,Q),U.startAngle=te.startAngle,U.endAngle=te.endAngle,U.fill=me&&me.fill||de,U.stroke=me&&me.stroke||we,U.strokeWidth=me&&void 0!==me.strokeWidth?me.strokeWidth:Ae,U.fillOpacity=a,U.strokeOpacity=s,U.lineDash=e.lineDash,U.lineDashOffset=e.lineDashOffset,U.fillShadow=h,U.lineJoin="round",U.opacity=e.getOpacity(),R.push(U.centerOffset)});var j=c.colors,I=c.length,F=c.strokeWidth;this.groupSelection.selectByTag(Cr.Callout).each(function(U,te,re){var Q=l.convert(te.radius),se=Math.max(0,Q);te.label&&0!==se?(U.strokeWidth=F,U.stroke=j[re%j.length],U.x1=te.midCos*se,U.y1=te.midSin*se,U.x2=te.midCos*(se+I),U.y2=te.midSin*(se+I)):U.stroke=void 0});var N=this.label,V=N.offset,Y=N.fontStyle,$=N.fontWeight,J=N.fontSize,H=N.fontFamily,q=N.color;this.groupSelection.selectByTag(Cr.Label).each(function(U,te,re){var Q=te.label,se=l.convert(te.radius),de=Math.max(0,se);if(Q&&0!==de){var we=R[re]+de+I+V;U.fontStyle=Y,U.fontWeight=$,U.fontSize=J,U.fontFamily=H,U.text=Q.text,U.x=te.midCos*we,U.y=te.midSin*we,U.fill=q,U.textAlign=Q.textAlign,U.textBaseline=Q.textBaseline}else U.fill=void 0})}},t.prototype.fireNodeClickEvent=function(e,r){this.fireEvent({type:"nodeClick",event:e,series:this,datum:r.datum,angleKey:this.angleKey,labelKey:this.labelKey,radiusKey:this.radiusKey})},t.prototype.getTooltipHtml=function(e){var r=this.angleKey;if(!r)return"";var n=this,i=n.fills,s=n.angleName,l=n.radiusKey,c=n.radiusName,h=n.labelKey,p=n.labelName,f=n.tooltip.renderer,d=i[e.index%i.length],v=e.datum,g=h?v[h]+": ":"",y=v[r],m="number"==typeof y?Rl(y):y.toString(),C=this.title?this.title.text:void 0,w={title:C,backgroundColor:d,content:g+m};return f?et(f({datum:v,angleKey:r,angleValue:y,angleName:s,radiusKey:l,radiusValue:l?v[l]:void 0,radiusName:c,labelKey:h,labelName:p,title:C,color:d}),w):et(w)},t.prototype.listSeriesItems=function(e){var r=this,i=this.labelKey,a=this.data;if(a&&a.length&&i){var s=this,l=s.fills,c=s.strokes,h=s.id,p=this.title&&this.title.showInLegend&&this.title.text;a.forEach(function(f,d){var v=[];p&&v.push(p),v.push(String(f[i])),e.push({id:h,itemId:d,enabled:r.seriesItemEnabled[d],label:{text:v.join(" - ")},marker:{fill:l[d%l.length],stroke:c[d%c.length],fillOpacity:r.fillOpacity,strokeOpacity:r.strokeOpacity}})})}},t.prototype.toggleSeriesItem=function(e,r){this.seriesItemEnabled[e]=r,this.scheduleData()},t.className="PieSeries",t.type="pie",Oe([G("dataChange")],t.prototype,"angleKey",void 0),Oe([G("update")],t.prototype,"angleName",void 0),Oe([G("dataChange")],t.prototype,"radiusKey",void 0),Oe([G("update")],t.prototype,"radiusName",void 0),Oe([G("dataChange")],t.prototype,"radiusMin",void 0),Oe([G("dataChange")],t.prototype,"radiusMax",void 0),Oe([G("dataChange")],t.prototype,"labelKey",void 0),Oe([G("update")],t.prototype,"labelName",void 0),Oe([G("layoutChange")],t.prototype,"fillOpacity",void 0),Oe([G("layoutChange")],t.prototype,"strokeOpacity",void 0),Oe([G("update")],t.prototype,"lineDash",void 0),Oe([G("update")],t.prototype,"lineDashOffset",void 0),Oe([G("update")],t.prototype,"formatter",void 0),Oe([G("dataChange")],t.prototype,"rotation",void 0),Oe([G("layoutChange")],t.prototype,"outerRadiusOffset",void 0),Oe([G("dataChange")],t.prototype,"innerRadiusOffset",void 0),Oe([G("layoutChange")],t.prototype,"strokeWidth",void 0),Oe([G("layoutChange")],t.prototype,"shadow",void 0),t}(sf);new ut(function CS(o){o.setUTCSeconds(0,0)},function _S(o,t){o.setTime(o.getTime()+t*Pt)},function bS(o,t){return(t.getTime()-o.getTime())/Pt},function SS(o){return o.getUTCMinutes()}),new ut(function wS(o){o.setUTCMinutes(0,0,0)},function xS(o,t){o.setTime(o.getTime()+t*vr)},function OS(o,t){return(t.getTime()-o.getTime())/vr},function PS(o){return o.getUTCHours()}),new ut(function TS(o){o.setUTCDate(1),o.setUTCHours(0,0,0,0)},function AS(o,t){o.setUTCMonth(o.getUTCMonth()+t)},function ES(o,t){return t.getUTCMonth()-o.getUTCMonth()+12*(t.getUTCFullYear()-o.getUTCFullYear())},function MS(o){return o.getUTCMonth()});var ae=function(){return ae=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},ae.apply(this,arguments)},RS={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},_r={arrayMerge:function FS(o,t,e){return t},isMergeableObject:function kS(o){return hh(o)&&!(o instanceof Hh)}},yn=function(){function o(t){var e=(t=xt({},t||{},_r)).overrides,r=void 0===e?null:e,n=t.palette,i=void 0===n?null:n,a=this.createChartConfigPerSeries(this.getDefaults());if(r){var s=r.common,l=r.cartesian,c=r.polar,h=r.hierarchy,p=function(d,v,g){g&&(a[d]=xt(a[d],g,_r),v.forEach(function(y){a[y]=xt(a[y],g,_r)}))};p("common",Object.keys(a),s),p("cartesian",o.cartesianSeriesTypes,l),p("polar",o.polarSeriesTypes,c),p("hierarchy",o.hierarchySeriesTypes,h);var f={};o.seriesTypes.forEach(function(d){var v=r[d];v&&(v.series&&(f[d]=v.series,v.series=f),a[d]=xt(a[d],v,_r))})}this.palette=null!=i?i:this.getPalette(),this.config=Object.freeze(a)}return o.prototype.getPalette=function(){return RS},o.getAxisDefaults=function(){return{top:{},right:{},bottom:{},left:{},thickness:0,title:{enabled:!1,padding:{top:10,right:10,bottom:10,left:10},text:"Axis Title",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}]}},o.getSeriesDefaults=function(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,cursor:"default",highlightStyle:{item:{fill:"yellow"},series:{dimOpacity:1}}}},o.getBarSeriesDefaults=function(){return ae(ae({},this.getSeriesDefaults()),{flipXY:!1,fillOpacity:1,strokeOpacity:1,xKey:"",xName:"",yKeys:[],yNames:[],grouped:!1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})},o.getLineSeriesDefaults=function(){var t=this.getSeriesDefaults();return ae(ae({},t),{tooltip:ae(ae({},t.tooltip),{format:void 0})})},o.getCartesianSeriesMarkerDefaults=function(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}},o.getChartDefaults=function(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,padding:{top:10,right:10,bottom:10,left:10},text:"Title",fontStyle:void 0,fontWeight:"bold",fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},subtitle:{enabled:!1,padding:{top:10,right:10,bottom:10,left:10},text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)"},legend:{enabled:!0,position:"right",spacing:20,item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}}},tooltip:{enabled:!0,tracking:!0,delay:0,class:Tt.defaultTooltipClass}}},o.prototype.createChartConfigPerSeries=function(t){return Object.entries({cartesian:o.cartesianSeriesTypes,polar:o.polarSeriesTypes,hierarchy:o.hierarchySeriesTypes,groupedCategory:[]}).forEach(function(r){var n=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(r,2),i=n[0];n[1].forEach(function(s){t[s]||(t[s]=xt({},t[i],_r))})}),t},o.prototype.getConfig=function(t,e){var r=function pC(o,t,e){var r=Array.isArray(t)?t:t.split("."),n=o;try{r.forEach(function(i){n=n[i]})}catch(i){if(3!==arguments.length)throw i;n=e}return n}(this.config,t,e);return Array.isArray(r)?xt([],r,_r):function SC(o){return"object"==typeof o&&!Array.isArray(o)}(r)?xt({},r,_r):r},o.prototype.getDefaults=function(){return xt({},o.defaults,_r)},o.prototype.mergeWithParentDefaults=function(t,e){return xt(t,e,_r)},o.fontFamily="Verdana, sans-serif",o.cartesianDefaults=ae(ae({},o.getChartDefaults()),{axes:{number:ae({},o.getAxisDefaults()),log:ae(ae({},o.getAxisDefaults()),{base:10}),category:ae(ae({},o.getAxisDefaults()),{label:ae(ae({},o.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:ae({},o.getAxisDefaults()),time:ae({},o.getAxisDefaults())},series:{column:ae(ae({},o.getBarSeriesDefaults()),{flipXY:!1}),bar:ae(ae({},o.getBarSeriesDefaults()),{flipXY:!0}),line:ae(ae({},o.getLineSeriesDefaults()),{title:void 0,xKey:"",xName:"",yKey:"",yName:"",strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:ae({},o.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:ae(ae({},o.getSeriesDefaults()),{title:void 0,xKey:"",yKey:"",sizeKey:void 0,labelKey:void 0,xName:"",yName:"",sizeName:"Size",labelName:"Label",strokeWidth:2,fillOpacity:1,strokeOpacity:1,marker:ae({},o.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)"}}),area:ae(ae({},o.getSeriesDefaults()),{xKey:"",xName:"",yKeys:[],yNames:[],normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:ae(ae({},o.getCartesianSeriesMarkerDefaults()),{enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:ae(ae({},o.getSeriesDefaults()),{xKey:"",yKey:"",xName:"",yName:"",strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,binCount:10,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})},navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}),o.polarDefaults=ae(ae({},o.getChartDefaults()),{series:{pie:ae(ae({},o.getSeriesDefaults()),{title:{enabled:!0,padding:{top:10,right:10,bottom:10,left:10},text:"",fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)"},angleKey:"",angleName:"",radiusKey:void 0,radiusName:void 0,labelKey:void 0,labelName:void 0,label:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:20},callout:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})}}),o.hierarchyDefaults=ae(ae({},o.getChartDefaults()),{series:{treemap:ae(ae({},o.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],colorParents:!1,gradient:!0,nodePadding:2,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:15},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:13},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white"},color:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}})}}),o.defaults={cartesian:o.cartesianDefaults,groupedCategory:o.cartesianDefaults,polar:o.polarDefaults,hierarchy:o.hierarchyDefaults},o.cartesianSeriesTypes=["line","area","bar","column","scatter","histogram"],o.polarSeriesTypes=["pie"],o.hierarchySeriesTypes=["treemap"],o.seriesTypes=o.cartesianSeriesTypes.concat(o.polarSeriesTypes).concat(o.hierarchySeriesTypes),o}(),NS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Te=function(){return Te=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Te.apply(this,arguments)},yo=function(o){function t(e){return o.call(this,e)||this}return NS(t,o),t.prototype.getDefaults=function(){var e="rgb(200, 200, 200)",r="rgb(150, 150, 150)",n={title:{color:e},label:{color:e},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},i={label:{color:e}},a={axes:{number:Te({},n),category:Te({},n),time:Te({},n)}},s={background:{fill:"rgb(34, 38, 41)"},title:{color:e},subtitle:{color:r},legend:{item:{label:{color:e}}}};return this.mergeWithParentDefaults(o.prototype.getDefaults.call(this),{cartesian:Te(Te(Te({},s),a),{series:{bar:Te({},i),column:Te({},i),histogram:Te({},i)}}),groupedCategory:Te(Te(Te({},s),a),{series:{bar:Te({},i),column:Te({},i),histogram:Te({},i)}}),polar:Te(Te({},s),{series:{pie:Te(Te({},i),{title:{color:e}})}}),hierarchy:Te(Te({},s),{series:{treemap:{title:{color:e},subtitle:{color:r},labels:{large:{color:e},medium:{color:e},small:{color:e},color:{color:e}}}}})})},t}(yn),GS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),BS={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},jS=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return GS(t,o),t.prototype.getPalette=function(){return BS},t}(yn),WS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),VS={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},HS=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return WS(t,o),t.prototype.getPalette=function(){return VS},t}(yo),zS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),US={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},$S=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return zS(t,o),t.prototype.getPalette=function(){return US},t}(yn),KS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),YS={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},XS=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return KS(t,o),t.prototype.getPalette=function(){return YS},t}(yo),qS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ZS={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},JS=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return qS(t,o),t.prototype.getPalette=function(){return ZS},t}(yn),QS=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ew={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},tw=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return QS(t,o),t.prototype.getPalette=function(){return ew},t}(yo),rw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nw={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},iw=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return rw(t,o),t.prototype.getPalette=function(){return nw},t}(yn),ow=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),aw={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},sw=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return ow(t,o),t.prototype.getPalette=function(){return aw},t}(yo),Ba=function(){return Ba=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ba.apply(this,arguments)},ja=new yn,nu=new yo,lw={undefined:ja,null:ja,"ag-default":ja,"ag-material":new jS,"ag-pastel":new $S,"ag-solar":new JS,"ag-vivid":new iw},uw={undefined:nu,null:nu,"ag-default-dark":nu,"ag-material-dark":new HS,"ag-pastel-dark":new XS,"ag-solar-dark":new tw,"ag-vivid-dark":new sw},Pf=Ba(Ba({},uw),lw);function ci(o){return o instanceof yn?o:Pf[o]||((o=o).baseTheme||o.overrides||o.palette?new(ci(o.baseTheme).constructor)(o):ja)}var cw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),iu=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Tf=function(o){return o},hw=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.type="log",e._domain=[1,10],e.baseLog=Tf,e.basePow=Tf,e._base=10,e}return cw(t,o),t.prototype.setDomain=function(e){var r=e[0],n=e[e.length-1];(0===r||0===n||r<0&&n>0||r>0&&n<0)&&(console.warn("Log scale domain should not start at, end at or cross zero."),0===r&&n>0?r=Number.EPSILON:0===n&&r<0?n=-Number.EPSILON:r<0&&n>0?Math.abs(n)>=Math.abs(r)?r=Number.EPSILON:n=-Number.EPSILON:r>0&&n<0&&(Math.abs(n)>=Math.abs(r)?r=-Number.EPSILON:n=Number.EPSILON),(e=e.slice())[0]=r,e[e.length-1]=n),o.prototype.setDomain.call(this,e)},t.prototype.getDomain=function(){return o.prototype.getDomain.call(this)},Object.defineProperty(t.prototype,"base",{get:function(){return this._base},set:function(e){this._base!==e&&(this._base=e,this.rescale())},enumerable:!0,configurable:!0}),t.prototype.rescale=function(){var e=this.base,r=t.makeLogFn(e),n=t.makePowFn(e);this.domain[0]<0?(r=this.reflect(r),n=this.reflect(n),this.transform=function(i){return-Math.log(-i)},this.untransform=function(i){return-Math.exp(-i)}):(this.transform=function(i){return Math.log(i)},this.untransform=function(i){return Math.exp(i)}),this.baseLog=r,this.basePow=n,o.prototype.rescale.call(this)},t.prototype.reflect=function(e){return function(r){return-e(-r)}},t.prototype.nice=function(){var e,r,n=this.domain,i=0,a=n.length-1,s=n[i],l=n[a];l<s&&(i=(e=iu([a,i],2))[0],a=e[1],s=(r=iu([l,s],2))[0],l=r[1]),n[i]=this.basePow(Math.floor(this.baseLog(s))),n[a]=this.basePow(Math.ceil(this.baseLog(l))),this.domain=n},t.pow10=function(e){return isFinite(e)?+("1e"+e):e<0?0:e},t.makePowFn=function(e){return 10===e?t.pow10:e===Math.E?Math.exp:function(r){return Math.pow(e,r)}},t.makeLogFn=function(e){if(e===Math.E)return Math.log;if(10===e)return Math.log10;if(2===e)return Math.log2;var r=Math.log(e);return function(n){return Math.log(n)/r}},t.prototype.ticks=function(e){var r;void 0===e&&(e=10);var n=null==e?10:+e,i=this.base,a=this.domain,s=a[0],l=a[a.length-1],c=l<s;c&&(s=(r=iu([l,s],2))[0],l=r[1]);var h=this.baseLog(s),p=this.baseLog(l),f=[];if(!(i%1)&&p-h<n){if(h=Math.round(h)-1,p=Math.round(p)+1,s>0){for(;h<p;++h)for(var d=1,v=this.basePow(h);d<i;++d)if(!((g=v*d)<s)){if(g>l)break;f.push(g)}}else for(;h<p;++h)for(d=i-1,v=this.basePow(h);d>=1;--d){var g;if(!((g=v*d)<s)){if(g>l)break;f.push(g)}}2*f.length<n&&(f=Pa(s,l,n))}else f=Pa(h,p,Math.min(p-h,n)).map(this.basePow);return c?f.reverse():f},t.prototype.tickFormat=function(e,r){var n=this,i=this.base;if(null==r&&(r=10===i?".0e":","),"function"!=typeof r&&(r=Al(r)),e===1/0)return r;null==e&&(e=10);var a=Math.max(1,i*e/this.ticks().length);return function(s){var l=s/n.basePow(Math.round(n.baseLog(s)));return l*i<i-.5&&(l*=i),l<=a?r(s):""}},t}(Qe),fw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Af=function(o){function t(){var e=o.call(this)||this;return e.scale=new hw,e.scale.clamper=Lh,e}return fw(t,o),Object.defineProperty(t.prototype,"base",{get:function(){return this.scale.base},set:function(e){this.scale.base=e},enumerable:!0,configurable:!0}),t.className="LogAxis",t.type="log",t}(ti),hi=function(){return hi=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},hi.apply(this,arguments)},pw=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},mn=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(pw(arguments[t]));return o},Ef=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function mo(o,t,e){var r,n,i=(e||{}).stringify,a=void 0===i?[]:i,s=Mt(o);if("array"===Mt(t))return"array"!==s||o.length!==t.length||t.some(function(C,_){var w;return null!=mo(null===(w=o)||void 0===w?void 0:w[_],C)})?mn(t):null;var c=o||{},h=t||{},p=new Set(mn(Object.keys(c),Object.keys(h))),f=0,d={},v=function(C){if(c[C]===h[C])return"continue";var _=function(A){d[C]=A,f++};if(a.includes(C))return JSON.stringify(c[C]!==JSON.stringify(h[C]))&&_(h[C]),"continue";var w=Mt(c[C]),P=Mt(h[C]);if(w!==P||"primitive"===P||null===P||"array"===P&&c[C].length!==h[C].length||"class-instance"===P||"function"===P&&c[C]!==h[C])return _(h[C]),"continue";var O=mo(c[C],h[C],{stringify:a});null!==O&&_(O)};try{for(var g=Ef(p),y=g.next();!y.done;y=g.next())v(y.value)}catch(C){r={error:C}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}return 0===f?null:d}var jr=Symbol("<delete-property>"),Mf=Symbol("<unspecified-property>");function Vt(){for(var o,t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.map(function(f){return Mt(f)});if(n.some(function(f){return"array"===f})){var i=e[e.length-1];return i instanceof Array?i.map(function(f){var d=Mt(f);return"array"===d?Vt([],f):"object"===d?Vt({},f):f}):i}var a={},s=new Set(e.map(function(f){return null!=f?Object.keys(f):[]}).reduce(function(f,d){return f.concat(d)},[])),l=function(f){var d=e.map(function(m){return null!=m&&f in m?m[f]:Mf}).filter(function(m){return m!==Mf});if(0===d.length)return"continue";var v=d[d.length-1];if(v===jr)return"continue";var g=d.map(function(m){return Mt(m)}),y=g[0];if(g.some(function(m){return m!==y&&null!==m}))return a[f]=v,"continue";a[f]="array"===y||"object"===y?Vt.apply(void 0,mn(d)):v};try{for(var c=Ef(s),h=c.next();!h.done;h=c.next()){var p=h.value;l(p)}}catch(f){o={error:f}}finally{try{h&&!h.done&&(t=c.return)&&t.call(c)}finally{if(o)throw o.error}}return a}function Cn(o,t,e){void 0===e&&(e={});var r,n,i,a=e.path,s=void 0===a?void 0:a,l=e.matcherPath,c=void 0===l?s?s.replace(/(\[[0-9+]{1,}\])/i,"[]"):void 0:l,h=e.skip,p=void 0===h?[]:h,f=e.constructors,d=void 0===f?{}:f,v=e.allowedTypes,g=void 0===v?{}:v;if(null==o)throw new Error("AG Charts - target is uninitialised: "+(s||"<root>"));if(null==t)return o;var y=Mt(o);for(var m in t)if(!(p.indexOf(m)>=0)){var C=t[m],_=(s?s+".":"")+m,w=(c?c+".":"")+m,P=o,O=P.constructor,A=P[m],E=d[m];try{var M=Mt(A),R=Mt(C);if("class-instance"===y&&!(m in o)&&!P.hasOwnProperty(m)){console.warn("AG Charts - unable to set ["+_+"] in "+(null===(r=O)||void 0===r?void 0:r.name)+" - property is unknown");continue}var B=g[w]||[M];if(("class-instance"!==M||"object"!==R)&&null!=M&&null!=R&&!B.includes(R)){console.warn("AG Charts - unable to set ["+_+"] in "+(null===(n=O)||void 0===n?void 0:n.name)+" - can't apply type of ["+R+"], allowed types are: ["+B+"]");continue}"array"===R||"class-instance"===R?P[m]=C:"object"===R?null!=A?Cn(A,C,hi(hi({},e),{path:_,matcherPath:w})):P[m]=null!=E?Cn(new E,C,hi(hi({},e),{path:_,matcherPath:w})):C:P[m]=C}catch(j){console.warn("AG Charts - unable to set ["+_+"] in ["+(null===(i=O)||void 0===i?void 0:i.name)+"]; nested error is: "+j.message);continue}}return o}function ou(o,t,e){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];var i,a=Mt(o),s=e.skip||[];if("array"!==a){if("object"===a){t.apply(void 0,mn([a,o],r));var l=function(h){if(s.indexOf(h)>=0)return"continue";var p=o[h],f=null===(i=r)||void 0===i?void 0:i.map(function(v){var g;return null===(g=v)||void 0===g?void 0:g[h]}),d=Mt(p);("object"===d||"array"===d)&&ou.apply(void 0,mn([p,t,e],f))};for(var c in o)l(c)}}else o.forEach(function(h,p){var f;ou.apply(void 0,mn([h,t,e],null===(f=r)||void 0===f?void 0:f.map(function(d){var v;return null===(v=d)||void 0===v?void 0:v[p]})))})}function Mt(o){return null==o?null:o instanceof HTMLElement?"primitive":o instanceof Array?"array":o instanceof Date?"primitive":"object"==typeof o&&o.constructor===Object?"object":"function"==typeof o?"function":"object"==typeof o&&null!=o.constructor?"class-instance":"primitive"}var dw={type:"cartesian",axes:[{type:ti.type,position:oe.Left},{type:cn.type,position:oe.Bottom}]},vw={axes:[{type:"number",position:oe.Bottom},{type:"category",position:oe.Left}]},Df={axes:[{type:"number",position:oe.Bottom},{type:"number",position:oe.Left}]},fi=function(){return fi=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},fi.apply(this,arguments)};function Rf(o){return null!=o&&o instanceof Array&&o[0]instanceof Array}function yw(o,t){if(null==o)return{};if(!(o instanceof Array))return o;var e=t.yKeys;if(null==e||Rf(e))throw new Error("AG Charts - yNames and yKeys mismatching configuration.");var r={};return e.forEach(function(n,i){r[n]=o[i]}),r}function mw(o,t){return null==o?[[]]:Rf(o)?o:t.grouped?o.map(function(e){return[e]}):[o]}function Cw(o){if(null!=o){var t=o.placement;return fi(fi({},o),{placement:"inside"===t?yr.Inside:"outside"===t?yr.Outside:void 0})}}function Ff(o){var t=fi(fi({},o),{yKeys:o.yKeys||[o.yKey]});return delete t.yKey,function gw(o,t){var e={};for(var r in o)e[r]=(t[r]||function(i){return i})(o[r],o);return e}(t,{yNames:yw,yKeys:mw,label:Cw})}function pi(o){return o}var _w={area:pi,bar:Ff,column:Ff,histogram:pi,line:pi,pie:pi,scatter:pi,treemap:pi};function bw(o){return(0,_w[o.type||"line"])(o)}var Wa=function(){return Wa=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Wa.apply(this,arguments)},au=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sw=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},su=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(Sw(arguments[t]));return o};function kf(o,t){var e,r,n={},i=["yKeys","fills","strokes","yNames","hideInChart","hideInLegend"],a=["yKey","fill","stroke","yName"];try{for(var s=au(o),l=s.next();!l.done;l=s.next()){var c=l.value;for(var h in c){var p=i.indexOf(h)>-1,f=a.indexOf(h)>-1;p&&c[h].length>0?n[h]=su(n[h]||[],c[h]):f?n[h+"s"]=su(n[h+"s"]||[],[c[h]]):t&&"showInLegend"===h?!1===c[h]&&(n.hideInLegend=su(n.hideInLegend||[],c.yKey?[c.yKey]:c.yKeys)):t&&"grouped"===h?!0===c[h]&&(n[h]=c[h]):n[h]=c[h]}}}catch(d){e={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n}var Wr=function(){return Wr=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Wr.apply(this,arguments)},Pw=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Lf=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(Pw(arguments[t]));return o};function di(o){var t,e;return o.type||(null===(e=null===(t=o.series)||void 0===t?void 0:t[0])||void 0===e?void 0:e.type)||"cartesian"}function Vr(o){var t=di(o);if(null==t)return!0;switch(t){case"cartesian":case"area":case"bar":case"column":case"groupedCategory":case"histogram":case"line":case"scatter":return!0;default:return!1}}function Va(o){if(null==di(o))return!1;switch(o.type){case"hierarchy":case"treemap":return!0;default:return!1}}function Ha(o){if(null==di(o))return!1;switch(o.type){case"polar":case"pie":return!0;default:return!1}}function If(o){var t,e,r=0;try{for(var n=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),i=n.next();!i.done;i=n.next()){var a=i.value;a instanceof Array&&(r+=If(a)),null!=a&&r++}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r}function Hr(o,t,e){for(var r=[],n=0;n<e;n++)r.push(t[(n+o.colourIndex)%t.length]);return r}function Nf(o,t){var e=null==t?o:Vt(t,o);!function Aw(o){var t,e;(null===(t=o.series)||void 0===t?void 0:t.some(function(r){return null!=r.yKeys&&null!=r.yKey}))&&console.warn("AG Charts - series options yKeys and yKey are mutually exclusive, please only use yKey for future compatibility."),(null===(e=o.series)||void 0===e?void 0:e.some(function(r){return null!=r.yNames&&null!=r.yName}))&&console.warn("AG Charts - series options yNames and yName are mutually exclusive, please only use yName for future compatibility.")}(e);var r=e.type,n=di(e),i=Vr(e=Wr(Wr({},e),{type:n}))?"line":Va(e)?"treemap":Ha(e)?"pie":"line",s=function Ew(o,t){var e=function Mw(o){var t=ci(o.theme),e=t.getConfig(di(o)||"cartesian");return{theme:t,axesThemes:e.axes||{},seriesThemes:e.series||{},cleanedTheme:Vt(e,{axes:jr,series:jr})}}(t),i=e.axesThemes,a=e.seriesThemes;return{context:{colourIndex:0,palette:e.theme.palette},mergedOptions:Vt(o,e.cleanedTheme,t),axesThemes:i,seriesThemes:a}}("bar"===n?vw:"scatter"===n||"histogram"===n?Df:Vr(e)?dw:{},e),l=s.context,c=s.mergedOptions,h=s.axesThemes,p=s.seriesThemes;return c.series=function xw(o){var t,e,r=[],n=o.map(function(l){return"bar"!==l.type&&"column"!==l.type||null==l.yKey||l.stacked?l:Wa(Wa({},l),{grouped:null==l.grouped||l.grouped})});try{for(var i=au(function ww(o){var t,e,r={},n=[];try{for(var i=au(o),a=i.next();!a.done;a=i.next()){var s=a.value;if("column"===s.type||"bar"===s.type||"area"===s.type&&!0===s.stacked){var h=(s.type||"line")+"-"+s.xKey+"-"+(s.stacked?"stacked":s.grouped?"grouped":s.yKeys?"stacked":"grouped");null==r[h]&&(r[h]=[],n.push(r[h])),r[h].push(s)}else n.push([s])}}catch(p){t={error:p}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n}(n)),a=i.next();!a.done;a=i.next()){var s=a.value;switch(s[0].type){case"column":case"bar":r.push(kf(s,!0));break;case"area":r.push(kf(s,!1));break;default:s.length>1&&console.warn("AG Charts - unexpected grouping of series type: "+s[0].type),r.push(s[0])}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r}(c.series||[]).map(function(f){var d=f.type?f.type:function Tw(o){return null!=o&&["line","bar","column","histogram","scatter","area","pie","treemap"].indexOf(o)>=0}(r)?r:i,v=Wr(Wr({},f),{type:d});return function Dw(o,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var n=Rw(o,t);return bw(Vt.apply(void 0,Lf(e,[n,t,{stacked:jr}])))}(l,v,p[d]||{})}),Vr(c)&&(c.axes||[]).forEach(function(f,d){var v=f.type||"number",g=Wr(Wr({},f),{type:v}),y=Vt(h[v],h[v][f.position||"unknown"]||{});c.axes[d]=function Fw(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return Vt.apply(void 0,Lf(t,[o,{top:jr,bottom:jr,left:jr,right:jr}]))}(g,y)}),function kw(o,t){ou(o,function(e,r,n){!n||"enabled"in n&&null==r.enabled&&(n.enabled=!0)},{skip:["data"]},t)}(e,c),c}function Rw(o,t){var e={},r=o.palette,n=r.fills,i=r.strokes,s=If(t.yKeys||[])||1;switch(t.type){case"pie":s=Math.max(n.length,i.length);case"area":case"bar":case"column":e.fills=Hr(o,n,s),e.strokes=Hr(o,i,s);break;case"histogram":e.fill=Hr(o,n,1)[0],e.stroke=Hr(o,i,1)[0];break;case"scatter":e.fill=Hr(o,n,1)[0];case"line":e.stroke=Hr(o,n,1)[0],e.marker={stroke:Hr(o,i,1)[0],fill:Hr(o,n,1)[0]};break;case"treemap":break;default:throw new Error("AG Charts - unknown series type: "+t.type)}return o.colourIndex+=s,e}var He=function(){return He=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},He.apply(this,arguments)},Lw=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},za=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(Lw(arguments[t]));return o},Gf=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Bf(o){if(Vr(o))return"cartesian";if(Ha(o))return"polar";if(Va(o))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+o.type)}var ot=function(){function o(){}return o.createComponent=function(t,e){return e.indexOf(".series")>=0?jf([He(He({},t),{type:t.type||e.split(".")[0]})])[0]:null},o.create=function(t,e,r){return lu.create(t)},o.update=function(t,e,r,n){return lu.update(t,e)},o}(),lu=function(){function o(){}return o.create=function(t){Co("user options",t);var e=Nf(t),r=Vr(e)?"groupedCategory"===e.type?new Pb(document):new ef(document):Va(e)?new Sb(document):Ha(e)?new Fb(document):void 0;if(!r)throw new Error("AG Charts - couldn't apply configuration, check type of options: "+e.type);return o.updateDelta(r,e,t),r},o.update=function(t,e){Co("user options",e);var r=Nf(e,t.userOptions);if(Bf(r)!==Bf(t.options))return t.destroy(),void console.warn("AG Charts - options supplied require a different type of chart, please recreate the chart.");var n=mo(t.options,r,{stringify:["data"]});null!=n&&o.updateDelta(t,n,e)},o.updateDelta=function(t,e,r){null==e.type&&(e=He(He({},e),{type:t.options.type||di(e)})),Co("delta update",e),function Iw(o,t,e){if(Vr(t))uu(o,t,{skip:["type","data","series","axes","autoSize","listeners","theme"]});else if(Ha(t))uu(o,t,{skip:["type","data","series","autoSize","listeners","theme"]});else{if(!Va(t))throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+t.type);uu(o,t,{skip:["type","data","series","autoSize","listeners","theme"]})}var r=!1;t.series&&t.series.length>0&&function Nw(o,t){var e=t.series;if(e){if(o.series.length===e.length&&o.series.every(function(n,i){var a;return n.type===(null===(a=e[i])||void 0===a?void 0:a.type)}))return void o.series.forEach(function(n,i){var a,s,c=mo((null===(s=null===(a=o.options)||void 0===a?void 0:a.series)||void 0===s?void 0:s[i])||{},e[i]||{});Co("applying series diff idx "+i,c),Cn(n,c)});o.series=jf(e)}}(o,t),Vr(t)&&t.axes&&(r=function Gw(o,t){var e=t.axes;if(!e)return!1;if(o.axes.length===e.length&&o.axes.every(function(i,a){return i.type===e[a].type})){var n=o.options;if(Vr(n))return o.axes.forEach(function(i,a){var s,c=mo((null===(s=n.axes)||void 0===s?void 0:s[a])||{},e[a]);Co("applying axis diff idx "+a,c),Cn(i,c)}),!0}return o.axes=function Bw(o){var t,e,r=[],n=0;try{for(var i=Gf(o||[]),a=i.next();!a.done;a=i.next()){var s=a.value,l="axis["+n+++"]";switch(s.type){case"number":r.push(_o(new ti,s,{path:l}));break;case Af.type:r.push(_o(new Af,s,{path:l}));break;case cn.type:r.push(_o(new cn,s,{path:l}));break;case ri.type:r.push(_o(new ri,s,{path:l}));break;case uo.type:r.push(_o(new uo,s,{path:l}));break;default:throw new Error("AG Charts - unknown axis type: "+s.type)}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r}(e),!0}(o,t)),t.data&&(o.data=t.data,r=!0),null!=t.autoSize&&(o.autoSize=t.autoSize),t.listeners&&Wf(o,t.listeners),o.layoutPending=!0,r&&o.processData(),o.performLayout(),o.options=Vt(o.options||{},t),o.userOptions=Vt(o.userOptions||{},e)}(t,e,r)},o.DEBUG=!1,o}();function Co(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];lu.DEBUG&&console.log.apply(console,za([o],t))}function jf(o){var t,e,r=[],n=["listeners"],i=0;try{for(var a=Gf(o||[]),s=a.next();!s.done;s=a.next()){var l=s.value,c="series["+i+++"]";switch(l.type){case"area":r.push(_n(new Yl,l,{path:c,skip:n}));break;case"bar":case"column":r.push(_n(new ql,l,{path:c,skip:n}));break;case"histogram":r.push(_n(new yf,l,{path:c,skip:n}));break;case"line":r.push(_n(new Jl,l,{path:c,skip:n}));break;case"scatter":r.push(_n(new pf,l,{path:c,skip:n}));break;case"pie":r.push(_n(new xf,l,{path:c,skip:n}));break;case"treemap":r.push(_n(new hS,l,{path:c,skip:n}));break;default:throw new Error("AG Charts - unknown series type: "+l.type)}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return r.forEach(function(h,p){var f,d,v=null===(d=null===(f=o)||void 0===f?void 0:f[p])||void 0===d?void 0:d.listeners;null!=v&&Wf(h,v)}),r}function Wf(o,t){for(var e in t)o.addEventListener(e,t[e])}var Ua={constructors:{title:ml,subtitle:ml,shadow:mf},allowedTypes:{"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function uu(o,t,e){var r=void 0===e?{}:e,n=r.skip,i=r.path;return Cn(o,t,He(He(He({},Ua),{skip:za(["type"],n||[])}),i?{path:i}:{}))}function _n(o,t,e){var a,r=void 0===e?{}:e,n=r.skip,i=r.path,s=(null===(a=Ua)||void 0===a?void 0:a.constructors)||{},l={constructors:He(He({},s),{title:"pie"===o.type?mS:s.title})};return Cn(o,t,He(He(He(He({},Ua),l),{skip:za(["type"],n||[])}),i?{path:i}:{}))}function _o(o,t,e){var r=void 0===e?{}:e,n=r.skip,i=r.path;return Cn(o,t,He(He(He({},Ua),{skip:za(["type"],n||[])}),i?{path:i}:{}))}function er(o){switch(o){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var jw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$a=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},bn=function(o){function t(e){var r=o.call(this)||this;return r.model=e,r}return jw(t,o),t.prototype.init=function(){var e=this;this.setChartRange(),this.addManagedListener(this.eventService,u.Events.EVENT_RANGE_SELECTION_CHANGED,function(r){r.id&&r.id===e.model.chartId&&e.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},t.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.setChartRange())},t.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartUpdatedEvent())},t.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},t.prototype.updateForPanelChange=function(e){this.model.updateCellRanges(e),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},t.prototype.getChartModel=function(){var e=this.model.pivotChart?"pivot":"range",r=this.isComboChart()?this.model.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.model.chartThemeName,chartOptions:this.chartProxy.getChartOptions(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:r}},t.prototype.getChartId=function(){return this.model.chartId},t.prototype.getChartData=function(){return this.model.chartData},t.prototype.getChartType=function(){return this.model.chartType},t.prototype.setChartType=function(e){this.model.chartType=e,this.model.updateSeriesChartTypes(),this.raiseChartUpdatedEvent(),this.raiseChartOptionsChangedEvent()},t.prototype.setChartThemeName=function(e){this.model.chartThemeName=e,this.raiseChartUpdatedEvent(),this.raiseChartOptionsChangedEvent()},t.prototype.getChartThemeName=function(){return this.model.chartThemeName},t.prototype.isPivotChart=function(){return this.model.pivotChart},t.prototype.isPivotMode=function(){return this.model.isPivotMode()},t.prototype.isGrouping=function(){return this.model.isGrouping()},t.prototype.getThemes=function(){return this.gridOptionsWrapper.getChartThemes()},t.prototype.getPalettes=function(){var e=this;return this.gridOptionsWrapper.getChartThemes().map(function(n){return ci(e.chartProxy.isStockTheme(n)?n:e.chartProxy.lookupCustomChartTheme(n)).palette})},t.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},t.prototype.getSelectedValueColState=function(){return this.getValueColState().filter(function(e){return e.selected})},t.prototype.getDimensionColState=function(){return this.model.dimensionColState},t.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},t.prototype.displayNameMapper=function(e){var r=this.model.columnNames[e.colId];return e.displayName=r?r.join(" - "):this.model.getColDisplayName(e.column),e},t.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},t.prototype.isDefaultCategorySelected=function(){return this.model.getSelectedDimension().colId===ba.DEFAULT_CATEGORY},t.prototype.setChartRange=function(e){void 0===e&&(e=!1),this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartUpdatedEvent()},t.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},t.prototype.setChartProxy=function(e){this.chartProxy=e},t.prototype.getChartProxy=function(){return this.chartProxy},t.prototype.isActiveXYChart=function(){return u._.includes(["scatter","bubble"],this.getChartType())},t.prototype.isChartLinked=function(){return!this.model.unlinked},t.prototype.customComboExists=function(){return this.model.savedCustomSeriesChartTypes&&this.model.savedCustomSeriesChartTypes.length>0},t.prototype.getSeriesChartTypes=function(){return this.model.seriesChartTypes},t.prototype.isComboChart=function(){return this.model.isComboChart()},t.prototype.updateSeriesChartType=function(e,r,n){var i=this.model.seriesChartTypes.find(function(l){return l.colId===e});if(i){var a="customCombo"!==this.model.chartType;a&&(this.model.chartType="customCombo");var s=i.chartType;null!=r&&(i.chartType=r),null!=n&&(i.secondaryAxis=n),this.model.savedCustomSeriesChartTypes=this.model.seriesChartTypes,this.model.updateSeriesChartTypes(),this.updateForDataChange(),a&&this.dispatchEvent(Object.freeze({type:t.EVENT_CHART_TYPE_CHANGED})),s!==r&&this.dispatchEvent(Object.freeze({type:t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}))}},t.prototype.getActiveSeriesChartTypes=function(){var e=this.getSelectedValueColState().map(function(r){return r.colId});return this.getSeriesChartTypes().filter(function(r){return e.includes(r.colId)})},t.prototype.getChartSeriesTypes=function(){return this.isComboChart()?["line","column","area"]:[er(this.getChartType())]},t.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(function(e){return e})},t.prototype.getCellRangeParams=function(){var e=this.getCellRanges(),r=e[0],n=r&&r.startRow||null,i=r&&r.endRow||null;return{rowStartIndex:n&&n.rowIndex,rowStartPinned:n&&n.rowPinned,rowEndIndex:i&&i.rowIndex,rowEndPinned:i&&i.rowPinned,columns:e.reduce(function(a,s){return a.concat(s.columns.map(function(l){return l.getId()}))},[])}},t.prototype.raiseChartUpdatedEvent=function(){var e=Object.freeze({type:t.EVENT_CHART_UPDATED});this.dispatchEvent(e)},t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.getChartModel(),i=Object.freeze({type:u.Events.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.model.chartThemeName,chartOptions:this.chartProxy.getChartOptions(),api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(i)},t.prototype.raiseChartRangeSelectionChangedEvent=function(){var e=Object.freeze({type:u.Events.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams(),api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(e)},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},t.EVENT_CHART_UPDATED="chartUpdated",t.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",t.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",$a([u.Autowired("rangeService")],t.prototype,"rangeService",void 0),$a([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),$a([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),$a([u.PostConstruct],t.prototype,"init",null),t}(u.BeanStub),Ww=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),cu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Vw=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Vf=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(Vw(arguments[t]));return o},zw=function(o){function t(e,r){var n=o.call(this,t.TEMPLATE)||this;return n.chartController=e,n.chartOptionsService=r,n.columnComps=new Map,n}return Ww(t,o),t.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,bn.EVENT_CHART_UPDATED,this.updatePanels.bind(this)),this.createAutoScrollService()},t.prototype.destroy=function(){this.clearComponents(),o.prototype.destroy.call(this)},t.prototype.updatePanels=function(){var e=this,r=this.chartType,n=this.chartController.getColStateForMenu(),i=n.dimensionCols,a=n.valueCols,s=i.map(function(h){return h.colId}).concat(a.map(function(h){return h.colId}));this.chartType=this.chartController.getChartType();var l=this.getGroupExpandedState();if(u._.areEqual(u._.keys(this.columnComps),s)&&this.chartType===r){if(Vf(i,a).forEach(function(h){e.columnComps.get(h.colId).setValue(h.selected,!0)}),this.chartController.isActiveXYChart()){var c=this.generateGetSeriesLabel();a.forEach(function(h){e.columnComps.get(h.colId).setLabel(c(h))})}u._.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.createSeriesChartTypeGroup(a)}else this.clearComponents(),this.createCategoriesGroup(i),this.createSeriesGroup(a),this.createSeriesChartTypeGroup(a);this.restoreGroupExpandedState(l)},t.prototype.getGroupExpandedState=function(){return[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].map(function(e){return!e||e.isExpanded()})},t.prototype.restoreGroupExpandedState=function(e){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach(function(r,n){!r||r.toggleGroupExpand(e[n])})},t.prototype.createAutoScrollService=function(){var e=this.getGui();this.autoScrollService=new u.AutoScrollService({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(r){return e.scrollTop=r}})},t.prototype.addComponent=function(e,r,n){var i=document.createElement("div");i.id=n,i.className="ag-chart-data-section",i.appendChild(r.getGui()),e.appendChild(i)},t.prototype.addChangeListener=function(e,r){var n=this;this.addManagedListener(e,u.AgAbstractField.EVENT_CHANGED,function(){r.selected=e.getValue(),n.chartController.updateForPanelChange(r)})},t.prototype.createCategoriesGroup=function(e){var r=this;this.categoriesGroupComp=this.createBean(new u.AgGroupComponent({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n="chartDimension"+this.getCompId();e.forEach(function(i){var a=r.categoriesGroupComp.createManagedBean(new u.AgRadioButton);a.setLabel(u._.escapeString(i.displayName)),a.setValue(i.selected),a.setInputName(n),r.addChangeListener(a,i),r.categoriesGroupComp.addItem(a),r.columnComps.set(i.colId,a)}),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},t.prototype.createSeriesGroup=function(e){var r=this;if(this.seriesGroupComp=this.createManagedBean(new u.AgGroupComponent({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var n=this.seriesGroupComp.createManagedBean(new u.AgToggleButton);n.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange(function(s){r.chartOptionsService.setPairedMode(!!s),r.chartController.updateForGridChange()}),this.seriesGroupComp.addItem(n)}var i=this.generateGetSeriesLabel();e.forEach(function(s){var l=r.seriesGroupComp.createManagedBean(new u.AgCheckbox);l.addCssClass("ag-data-select-checkbox");var c=i(s);l.setLabel(c),l.setValue(s.selected),r.addChangeListener(l,s),r.seriesGroupComp.addItem(l),r.columnComps.set(s.colId,l),r.addDragHandle(l,s)}),this.addComponent(this.getGui(),this.seriesGroupComp,"seriesGroup");var a={getIconName:function(){return u.DragAndDropService.ICON_MOVE},getContainer:function(){return r.seriesGroupComp.getGui()},onDragging:function(s){return r.onDragging(s)},onDragLeave:function(){return r.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(a)},t.prototype.createSeriesChartTypeGroup=function(e){var r=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new u.AgGroupComponent({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n=this.chartController.getSeriesChartTypes();e.forEach(function(i){if(i.selected){var a=n.filter(function(f){return f.colId===i.colId})[0];if(a){var s=r.seriesChartTypeGroupComp.createManagedBean(new u.AgGroupComponent({title:i.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),l=r.seriesChartTypeGroupComp.createManagedBean(new u.AgCheckbox).setLabel(r.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(a.chartType)).setValue(!!a.secondaryAxis).onValueChange(function(f){return r.chartController.updateSeriesChartType(i.colId,void 0,f)});s.addItem(l);var c=function(f,d){return r.chartTranslationService.translate(f,d)},h=[{value:"line",text:c("line","Line")},{value:"area",text:c("area","Area")},{value:"stackedArea",text:c("stackedArea","StackedArea")},{value:"groupedColumn",text:c("groupedColumn","Grouped Column")},{value:"stackedColumn",text:c("stackedColumn","Stacked Column")}],p=s.createManagedBean(new u.AgSelect);p.setLabelAlignment("left").setLabelWidth("flex").addOptions(h).setValue(a.chartType).onValueChange(function(f){return r.chartController.updateSeriesChartType(i.colId,f)}),s.addItem(p),r.seriesChartTypeGroupComp.addItem(s)}}}),this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup")}},t.prototype.addDragHandle=function(e,r){var n=this,i=u._.createIconNoSpan("columnDrag",this.gridOptionsWrapper);i.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),e.getGui().insertAdjacentElement("beforeend",i);var a={type:u.DragSourceType.ChartPanel,eElement:i,dragItemName:r.displayName,getDragItem:function(){return{columns:[r.column]}},onDragStopped:function(){return n.onDragStop()}};this.dragAndDropService.addDragSource(a,!0),this.addDestroyFunc(function(){return n.dragAndDropService.removeDragSource(a)})},t.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(a){return u._.escapeString(a.displayName)};var e="bubble"===this.chartType,r=this.isInPairedMode(),n=0,i=new Map;return i.set(0,"X"),i.set(1,"Y"),i.set(2,"size"),function(a){var l,s=u._.escapeString(a.displayName);return a.selected?(l=r?i.get(n%(e?3:2)):0===n?"X":e&&n%2==0?"size":"Y",n++,s+" ("+l+")"):s}},t.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},t.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},t.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},t.prototype.clearComponents=function(){u._.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},t.prototype.onDragging=function(e){var r=this.checkHoveredItem(e);if(r){this.lastDraggedColumn=e.dragItem.columns[0];var n=r.comp,i=r.position,a=this.lastHoveredItem||{};n===a.comp&&i===a.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredItem={comp:n,position:i},n.getGui().classList.add("ag-list-item-hovered","ag-item-highlight-"+i))}},t.prototype.checkHoveredItem=function(e){var r,n;if(u._.missing(e.vDirection))return null;var i=e.event;try{for(var a=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.columnComps.values()),s=a.next();!s.done;s=a.next()){var l=s.value,c=l.getGui();if(c.querySelector(".ag-chart-data-column-drag-handle")){var h=c.getBoundingClientRect();if(i.clientY>=h.top&&i.clientY<=h.bottom)return{comp:l,position:i.clientY>h.top+c.clientHeight/2?"bottom":"top"}}}}catch(v){r={error:v}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return null},t.prototype.onDragLeave=function(){this.clearHoveredItems()},t.prototype.onDragStop=function(){var e=this;if(this.lastHoveredItem){var r=this.chartController.getColStateForMenu(),a=Vf(r.dimensionCols,r.valueCols).find(function(l){return l.column===e.lastDraggedColumn});if(a){var s=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&s++,a.order=s,this.chartController.updateForPanelChange(a)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},t.prototype.clearHoveredItems=function(){this.columnComps.forEach(function(e){e.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0},t.prototype.isInterestedIn=function(e){return e===u.DragSourceType.ChartPanel},t.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',cu([u.Autowired("dragAndDropService")],t.prototype,"dragAndDropService",void 0),cu([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),cu([u.PostConstruct],t.prototype,"init",null),t}(u.Component),Uw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Ka=function(o){function t(e){var r=o.call(this)||this;return r.activeComps=[],r.params=e,r}return Uw(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{fontGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},t.prototype.addCompToPanel=function(e){this.fontGroup.addItem(e),this.activeComps.push(e)},t.prototype.setEnabled=function(e){this.fontGroup.setEnabled(e)},t.prototype.initGroup=function(){var e=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange(function(r){e.params.setEnabled&&e.params.setEnabled(r)})},t.prototype.initFontFamilySelect=function(){var e=this,r=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],n=this.params.initialFont.family,i=r[0];if(n){var s=r.map(function(h){return h.toLowerCase()}).indexOf(n.toLowerCase());if(s>=0)i=r[s];else{var l=u._.capitalise(n);r.push(l),i=l}}var c=r.sort().map(function(h){return{value:h,text:h}});this.familySelect.addOptions(c).setInputWidth("flex").setValue(""+i).onValueChange(function(h){return e.params.setFont({family:h})})},t.prototype.initFontSizeSelect=function(){var e=this,r=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],n=this.params.initialFont.size;u._.includes(r,n)||r.push(n);var i=r.sort(function(a,s){return a-s}).map(function(a){return{value:""+a,text:""+a}});this.sizeSelect.addOptions(i).setInputWidth("flex").setValue(""+n).onValueChange(function(a){return e.params.setFont({size:parseInt(a,10)})}),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},t.prototype.initFontWeightStyleSelect=function(){var e=this,r=this.params.initialFont,n=r.weight,i=void 0===n?"normal":n,a=r.style,s=void 0===a?"normal":a,l=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],c=l.find(function(p){return p.weight===i&&p.style===s});c||l.unshift(c={name:"predefined",weight:i,style:s});var h=l.map(function(p){return{value:p.name,text:e.chartTranslationService.translate(p.name)}});this.weightStyleSelect.addOptions(h).setInputWidth("flex").setValue(c.name).onValueChange(function(p){var f=l.find(function(d){return d.name===p});e.params.setFont({weight:f.weight,style:f.style})})},t.prototype.initFontColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange(function(r){return e.params.setFont({color:r})})},t.prototype.destroyActiveComps=function(){var e=this;this.activeComps.forEach(function(r){u._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActiveComps(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',Sn([u.RefSelector("fontGroup")],t.prototype,"fontGroup",void 0),Sn([u.RefSelector("familySelect")],t.prototype,"familySelect",void 0),Sn([u.RefSelector("weightStyleSelect")],t.prototype,"weightStyleSelect",void 0),Sn([u.RefSelector("sizeSelect")],t.prototype,"sizeSelect",void 0),Sn([u.RefSelector("colorPicker")],t.prototype,"colorPicker",void 0),Sn([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Sn([u.PostConstruct],t.prototype,"init",null),t}(u.Component),$w=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Kw=function(o){function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r.activePanels=[],r}return $w(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},t.prototype.initLegendGroup=function(){var e=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(!1).onEnableChange(function(r){e.chartOptionsService.setChartOption("legend.enabled",r),e.legendGroup.toggleGroupExpand(!0)})},t.prototype.initLegendPosition=function(){var e=this,r=[Gr.Top,Gr.Right,Gr.Bottom,Gr.Left];this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(r.map(function(n){return{value:n,text:e.chartTranslationService.translate(n)}})).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange(function(n){return e.chartOptionsService.setChartOption("legend.position",n)})},t.prototype.initLegendPadding=function(){var e=this,r=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(tt(r,200)).setValue(""+r).setTextFieldWidth(45).onValueChange(function(n){return e.chartOptionsService.setChartOption("legend.spacing",n)})},t.prototype.initLegendItems=function(){var e=this,r=function(n,i,a,s){var l=e.chartOptionsService.getChartOption("legend."+n);a.setLabel(e.chartTranslationService.translate(i)).setMaxValue(tt(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(c){e.chartOptionsService.setChartOption("legend."+n,c)})};r("item.marker.size","markerSize",this.markerSizeSlider,40),r("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),r("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),r("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),r("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},t.prototype.initLabelPanel=function(){var e=this,r=this.chartOptionsService,n={family:r.getChartOption("legend.item.label.fontFamily"),style:r.getChartOption("legend.item.label.fontStyle"),weight:r.getChartOption("legend.item.label.fontWeight"),size:r.getChartOption("legend.item.label.fontSize"),color:r.getChartOption("legend.item.label.color")},s=this.createBean(new Ka({enabled:!0,suppressEnabledCheckbox:!0,initialFont:n,setFont:function(l){var c=e.chartOptionsService;l.family&&c.setChartOption("legend.item.label.fontFamily",l.family),l.weight&&c.setChartOption("legend.item.label.fontWeight",l.weight),l.style&&c.setChartOption("legend.item.label.fontStyle",l.style),l.size&&c.setChartOption("legend.item.label.fontSize",l.size),l.color&&c.setChartOption("legend.item.label.color",l.color)}}));this.legendGroup.addItem(s),this.activePanels.push(s)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){u._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',tr([u.RefSelector("legendGroup")],t.prototype,"legendGroup",void 0),tr([u.RefSelector("legendPositionSelect")],t.prototype,"legendPositionSelect",void 0),tr([u.RefSelector("legendPaddingSlider")],t.prototype,"legendPaddingSlider",void 0),tr([u.RefSelector("markerSizeSlider")],t.prototype,"markerSizeSlider",void 0),tr([u.RefSelector("markerStrokeSlider")],t.prototype,"markerStrokeSlider",void 0),tr([u.RefSelector("markerPaddingSlider")],t.prototype,"markerPaddingSlider",void 0),tr([u.RefSelector("itemPaddingXSlider")],t.prototype,"itemPaddingXSlider",void 0),tr([u.RefSelector("itemPaddingYSlider")],t.prototype,"itemPaddingYSlider",void 0),tr([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),tr([u.PostConstruct],t.prototype,"init",null),t}(u.Component),Yw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Xw=function(o){function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r}return Yw(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{axisTicksGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initAxisTicks()},t.prototype.initAxisTicks=function(){var e=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange(function(n){return e.chartOptionsService.setAxisProperty("tick.color",n)});var r=function(n,i,a,s){var l=e.chartOptionsService.getAxisProperty(n);i.setLabel(a).setMaxValue(tt(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(c){return e.chartOptionsService.setAxisProperty(n,c)})};r("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),r("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},t.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',vi([u.RefSelector("axisTicksGroup")],t.prototype,"axisTicksGroup",void 0),vi([u.RefSelector("axisTicksColorPicker")],t.prototype,"axisTicksColorPicker",void 0),vi([u.RefSelector("axisTicksWidthSlider")],t.prototype,"axisTicksWidthSlider",void 0),vi([u.RefSelector("axisTicksSizeSlider")],t.prototype,"axisTicksSizeSlider",void 0),vi([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),vi([u.PostConstruct],t.prototype,"init",null),t}(u.Component),qw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),gi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},wn=function(o){function t(e,r){var n=o.call(this)||this;return n.chartController=e,n.chartOptionsService=r,n.activePanels=[],n.axisLabelUpdateFuncs=[],n}return qw(t,o),t.prototype.init=function(){var e=this;this.setTemplate(t.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels(),this.addManagedListener(this.chartController,bn.EVENT_CHART_UPDATED,function(){return e.axisLabelUpdateFuncs.forEach(function(i){return i()})})},t.prototype.initAxis=function(){var e=this,r=this.chartTranslationService;this.axisGroup.setTitle(r.translate("axis")).toggleGroupExpand(!1).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(r.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange(function(a){return e.chartOptionsService.setAxisProperty("line.color",a)});var n=this.chartOptionsService.getAxisProperty("line.width");if(this.axisLineWidthSlider.setMaxValue(tt(n,10)).setLabel(r.translate("thickness")).setTextFieldWidth(45).setValue(""+n).onValueChange(function(a){return e.chartOptionsService.setAxisProperty("line.width",a)}),u._.includes(["line","scatter","bubble"],this.chartController.getChartType())&&!this.chartController.isGrouping()){var i=[{value:"",text:r.translate("automatic")}];["category","time","number"].forEach(function(a){i.push({value:a,text:r.translate(a)})}),this.xAxisTypeSelect.setLabel(r.translate("xType")).setLabelWidth("flex").addOptions(i).setValue(this.chartOptionsService.getChartOption("xAxis.type")||"").onValueChange(function(a){e.chartOptionsService.setChartOption("xAxis.type","string"==typeof a&&a.length&&a),e.chartController.updateForDataChange()})}else this.xAxisTypeSelect.setDisplayed(!1)},t.prototype.initAxisTicks=function(){var e=this.createBean(new Xw(this.chartOptionsService));this.axisGroup.addItem(e),this.activePanels.push(e)},t.prototype.initAxisLabels=function(){var e=this,r={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},a=this.createBean(new Ka({enabled:!0,suppressEnabledCheckbox:!0,initialFont:r,setFont:function(s){s.family&&e.chartOptionsService.setAxisProperty("label.fontFamily",s.family),s.weight&&e.chartOptionsService.setAxisProperty("label.fontWeight",s.weight),s.style&&e.chartOptionsService.setAxisProperty("label.fontStyle",s.style),s.size&&e.chartOptionsService.setAxisProperty("label.fontSize",s.size),s.color&&e.chartOptionsService.setAxisProperty("label.color",s.color),e.chartController.getChartProxy().getChart().layoutPending=!0}}));this.axisGroup.addItem(a),this.activePanels.push(a),this.addAdditionalLabelComps(a)},t.prototype.addAdditionalLabelComps=function(e){var r=this,n=function(h,p){var f=r.chartOptionsService.getLabelRotation(p),d=(new u.AgAngleSelect).setLabel(h).setLabelWidth("flex").setValue(f||0).onValueChange(function(g){return r.chartOptionsService.setLabelRotation(p,g)});r.axisLabelUpdateFuncs.push(function(){var g=r.chartOptionsService.getLabelRotation(p);d.setValue(g)});var v=r.createBean(d);e.addCompToPanel(v)},i=String.fromCharCode(176),a=this.chartTranslationService.translate("xRotation")+" "+i,s=this.chartTranslationService.translate("yRotation")+" "+i;n(a,"xAxis"),n(s,"yAxis");var l=this.createBean(new u.AgSlider),c=this.chartOptionsService.getAxisProperty("label.padding");l.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(tt(c,30)).setValue(""+c).setTextFieldWidth(45).onValueChange(function(h){return r.chartOptionsService.setAxisProperty("label.padding",h)}),e.addCompToPanel(l)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){u._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n                <ag-select ref="xAxisTypeSelect"></ag-select>\n            </ag-group-component>\n        </div>',gi([u.RefSelector("axisGroup")],t.prototype,"axisGroup",void 0),gi([u.RefSelector("axisColorInput")],t.prototype,"axisColorInput",void 0),gi([u.RefSelector("axisLineWidthSlider")],t.prototype,"axisLineWidthSlider",void 0),gi([u.RefSelector("xAxisTypeSelect")],t.prototype,"xAxisTypeSelect",void 0),gi([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),gi([u.PostConstruct],t.prototype,"init",null),t}(u.Component),Zw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ya=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xn=function(o){function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r}return Zw(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{navigatorGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initNavigator()},t.prototype.initNavigator=function(){var e=this,r=this.chartTranslationService;this.navigatorGroup.setTitle(r.translate("navigator")).toggleGroupExpand(!1).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange(function(i){e.chartOptionsService.setChartOption("navigator.enabled",i),e.navigatorGroup.toggleGroupExpand(!0)});var n=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(r.translate("height")).setMinValue(10).setMaxValue(tt(n,60)).setTextFieldWidth(45).setValue(""+(n||30)).onValueChange(function(i){return e.chartOptionsService.setChartOption("navigator.height",i)})},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Ya([u.RefSelector("navigatorGroup")],t.prototype,"navigatorGroup",void 0),Ya([u.RefSelector("navigatorHeightSlider")],t.prototype,"navigatorHeightSlider",void 0),Ya([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Ya([u.PostConstruct],t.prototype,"init",null),t}(u.Component),Jw=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),On=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Qw=function(o){function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r}return Jw(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{chartPaddingGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initChartPaddingItems()},t.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},t.prototype.initChartPaddingItems=function(){var e=this,r=function(n,i){var a=e.chartOptionsService.getChartOption("padding."+n);i.setLabel(e.chartTranslationService.translate(n)).setMaxValue(tt(a,200)).setValue(""+a).setTextFieldWidth(45).onValueChange(function(s){return e.chartOptionsService.setChartOption("padding."+n,s)})};r("top",this.paddingTopSlider),r("right",this.paddingRightSlider),r("bottom",this.paddingBottomSlider),r("left",this.paddingLeftSlider)},t.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',On([u.RefSelector("chartPaddingGroup")],t.prototype,"chartPaddingGroup",void 0),On([u.RefSelector("paddingTopSlider")],t.prototype,"paddingTopSlider",void 0),On([u.RefSelector("paddingRightSlider")],t.prototype,"paddingRightSlider",void 0),On([u.RefSelector("paddingBottomSlider")],t.prototype,"paddingBottomSlider",void 0),On([u.RefSelector("paddingLeftSlider")],t.prototype,"paddingLeftSlider",void 0),On([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),On([u.PostConstruct],t.prototype,"init",null),t}(u.Component),ex=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xa=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tx=function(o){function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r}return ex(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{chartBackgroundGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initColorPicker()},t.prototype.initGroup=function(){var e=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(function(r){return e.chartOptionsService.setChartOption("background.visible",r)})},t.prototype.initColorPicker=function(){var e=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange(function(r){return e.chartOptionsService.setChartOption("background.fill",r)})},t.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',Xa([u.RefSelector("chartBackgroundGroup")],t.prototype,"group",void 0),Xa([u.RefSelector("colorPicker")],t.prototype,"colorPicker",void 0),Xa([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Xa([u.PostConstruct],t.prototype,"init",null),t}(u.Component),rx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},nx=function(o){function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.chartOptionsService=e,r.activePanels=[],r}return rx(t,o),t.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},t.prototype.hasTitle=function(){var e=this.getOption("title");return e&&e.enabled&&e.text&&e.text.length>0},t.prototype.initFontPanel=function(){var e=this,r=this.hasTitle,n=function(l){l.family&&e.setOption("title.fontFamily",l.family),l.weight&&e.setOption("title.fontWeight",l.weight),l.style&&e.setOption("title.fontStyle",l.style),l.size&&e.setOption("title.fontSize",l.size),l.color&&e.setOption("title.color",l.color)},i={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};r||n(i);var a={name:this.chartTranslationService.translate("title"),enabled:this.hasTitle(),suppressEnabledCheckbox:!1,initialFont:i,setFont:n,setEnabled:function(l){e.setOption("title.enabled",l);var c=e.getOption("title.text");l&&"Title"===c&&e.setOption("title.text",e.titlePlaceholder)}},s=this.createBean(new Ka(a));this.getGui().appendChild(s.getGui()),this.activePanels.push(s),this.addManagedListener(this.eventService,"chartTitleEdit",function(){s.setEnabled(e.hasTitle())})},t.prototype.getOption=function(e){return this.chartOptionsService.getChartOption(e)},t.prototype.setOption=function(e,r){this.chartOptionsService.setChartOption(e,r)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){u._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE="<div></div>",Hf([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Hf([u.PostConstruct],t.prototype,"init",null),t}(u.Component),ix=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ox=function(o){function t(e){var r=o.call(this)||this;return r.chartOptionsService=e,r.activePanels=[],r}return ix(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{chartGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},t.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(!1).hideEnabledCheckbox(!0)},t.prototype.initTitles=function(){var e=this.createBean(new nx(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.initPaddingPanel=function(){var e=this.createBean(new Qw(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.initBackgroundPanel=function(){var e=this.createBean(new tx(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){u._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',hu([u.RefSelector("chartGroup")],t.prototype,"chartGroup",void 0),hu([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),hu([u.PostConstruct],t.prototype,"init",null),t}(u.Component),ax=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sx=function(o){function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return ax(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{shadowGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},t.prototype.initSeriesShadow=function(){var e=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(function(n){return e.chartOptionsService.setSeriesOption("shadow.enabled",n,e.getSelectedSeries())}),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange(function(n){return e.chartOptionsService.setSeriesOption("shadow.color",n,e.getSelectedSeries())});var r=function(n,i,a,s){var l=e.chartOptionsService.getSeriesOption("shadow."+i,e.getSelectedSeries());n.setLabel(e.chartTranslationService.translate(i)).setMinValue(a).setMaxValue(tt(l,s)).setValue(""+l).onValueChange(function(c){return e.chartOptionsService.setSeriesOption("shadow."+i,c,e.getSelectedSeries())})};r(this.shadowBlurSlider,"blur",0,20),r(this.shadowXOffsetSlider,"xOffset",-10,10),r(this.shadowYOffsetSlider,"yOffset",-10,10)},t.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Pn([u.RefSelector("shadowGroup")],t.prototype,"shadowGroup",void 0),Pn([u.RefSelector("shadowColorPicker")],t.prototype,"shadowColorPicker",void 0),Pn([u.RefSelector("shadowBlurSlider")],t.prototype,"shadowBlurSlider",void 0),Pn([u.RefSelector("shadowXOffsetSlider")],t.prototype,"shadowXOffsetSlider",void 0),Pn([u.RefSelector("shadowYOffsetSlider")],t.prototype,"shadowYOffsetSlider",void 0),Pn([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Pn([u.PostConstruct],t.prototype,"init",null),t}(u.Component),ux=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},cx=function(o){function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return ux(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{seriesMarkersGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initMarkers()},t.prototype.initMarkers=function(){var e=this;this.seriesMarkerShapeSelect.addOptions([{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}]).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange(function(s){return e.setSeriesOption("marker.shape",s)});var n=this.chartOptionsService.getChartType(),i=u._.includes(["scatter","bubble"],n);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(i).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange(function(s){return e.setSeriesOption("marker.enabled",s)});var a=function(s,l,c,h){var p=e.getSeriesOption(s);l.setLabel(e.chartTranslationService.translate(c)).setMaxValue(tt(p,h)).setValue(""+p).setTextFieldWidth(45).onValueChange(function(f){return e.setSeriesOption(s,f)})};"bubble"===n?(a("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),a("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),a("marker.size",this.seriesMarkerSizeSlider,"size",60)),a("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.getSelectedSeries())},t.prototype.setSeriesOption=function(e,r){this.chartOptionsService.setSeriesOption(e,r,this.getSelectedSeries())},t.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Tn([u.RefSelector("seriesMarkersGroup")],t.prototype,"seriesMarkersGroup",void 0),Tn([u.RefSelector("seriesMarkerShapeSelect")],t.prototype,"seriesMarkerShapeSelect",void 0),Tn([u.RefSelector("seriesMarkerSizeSlider")],t.prototype,"seriesMarkerSizeSlider",void 0),Tn([u.RefSelector("seriesMarkerMinSizeSlider")],t.prototype,"seriesMarkerMinSizeSlider",void 0),Tn([u.RefSelector("seriesMarkerStrokeWidthSlider")],t.prototype,"seriesMarkerStrokeWidthSlider",void 0),Tn([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Tn([u.PostConstruct],t.prototype,"init",null),t}(u.Component),hx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},fx=function(o){function t(e,r){var n=o.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return hx(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{calloutGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initCalloutOptions()},t.prototype.initCalloutOptions=function(){var e=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var r=function(n,i,a,s){var l=e.chartOptionsService.getSeriesOption(n,e.getSelectedSeries());i.setLabel(e.chartTranslationService.translate(a)).setMaxValue(tt(l,s)).setValue(""+l).setTextFieldWidth(45).onValueChange(function(c){return e.chartOptionsService.setSeriesOption(n,c,e.getSelectedSeries())})};r("callout.length",this.calloutLengthSlider,"length",40),r("callout.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),r("label.offset",this.labelOffsetSlider,"offset",30)},t.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',yi([u.RefSelector("calloutGroup")],t.prototype,"calloutGroup",void 0),yi([u.RefSelector("calloutLengthSlider")],t.prototype,"calloutLengthSlider",void 0),yi([u.RefSelector("calloutStrokeWidthSlider")],t.prototype,"calloutStrokeWidthSlider",void 0),yi([u.RefSelector("labelOffsetSlider")],t.prototype,"labelOffsetSlider",void 0),yi([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),yi([u.PostConstruct],t.prototype,"init",null),t}(u.Component),px=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zr=function(o){function t(e,r,n){var i=o.call(this)||this;return i.chartController=e,i.chartOptionsService=r,i.activePanels=[],i.widgetFuncs={lineWidth:function(){return i.initLineWidth()},strokeWidth:function(){return i.initStrokeWidth()},lineDash:function(){return i.initLineDash()},lineOpacity:function(){return i.initLineOpacity()},fillOpacity:function(){return i.initFillOpacity()},markers:function(){return i.initMarkers()},labels:function(){return i.initLabels()},shadow:function(){return i.initShadow()},tooltips:function(){return i.initTooltips()},bins:function(){return i.initBins()}},i.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},i.seriesType=n||i.getChartSeriesType(),i}return px(t,o),t.prototype.init=function(){this.setTemplate(t.TEMPLATE,{seriesGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(!1).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,bn.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},t.prototype.refreshWidgets=function(){var e=this;this.destroyActivePanels(),this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),this.seriesWidgetMappings[this.seriesType].forEach(function(r){return e.widgetFuncs[r]()})},t.prototype.initSeriesSelect=function(){var e=this,r=this.seriesGroup.createManagedBean(new u.AgSelect);r.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange(function(n){e.seriesType=n,e.refreshWidgets()}),this.seriesGroup.addItem(r),this.activePanels.push(r)},t.prototype.initTooltips=function(){var e=this,r=this.createBean(new u.AgToggleButton);r.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange(function(n){return e.setSeriesOption("tooltip.enabled",n)}),this.addWidget(r)},t.prototype.initStrokeWidth=function(){var e=this,r=this.getSeriesOption("strokeWidth"),n=this.createBean(new u.AgSlider);n.setLabel(this.translate("strokeWidth")).setMaxValue(tt(r,10)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("strokeWidth",i)}),this.addWidget(n)},t.prototype.initLineWidth=function(){var e=this,r=this.getSeriesOption("strokeWidth"),n=this.createBean(new u.AgSlider);n.setLabel(this.translate("lineWidth")).setMaxValue(tt(r,10)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("strokeWidth",i)}),this.addWidget(n)},t.prototype.initLineDash=function(){var e=this,r=this.getSeriesOption("lineDash"),n=r?r[0]:0,i=this.createBean(new u.AgSlider);i.setLabel(this.translate("lineDash")).setMaxValue(tt(n,30)).setTextFieldWidth(45).setValue(""+n).onValueChange(function(a){return e.setSeriesOption("lineDash",[a])}),this.addWidget(i)},t.prototype.initLineOpacity=function(){var e=this,r=this.getSeriesOption("strokeOpacity"),n=this.createBean(new u.AgSlider);n.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(tt(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("strokeOpacity",i)}),this.addWidget(n)},t.prototype.initFillOpacity=function(){var e=this,r=this.getSeriesOption("fillOpacity"),n=this.createBean(new u.AgSlider);n.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(tt(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("fillOpacity",i)}),this.addWidget(n)},t.prototype.initLabels=function(){var e=this,r=function lx(o,t,e){var r={family:t.getSeriesOption("label.fontFamily",e()),style:t.getSeriesOption("label.fontStyle",e()),weight:t.getSeriesOption("label.fontWeight",e()),size:t.getSeriesOption("label.fontSize",e()),color:t.getSeriesOption("label.color",e())};return{name:o.translate("labels"),enabled:t.getSeriesOption("label.enabled",e())||!1,setEnabled:function(a){return t.setSeriesOption("label.enabled",a,e())},suppressEnabledCheckbox:!1,initialFont:r,setFont:function(a){a.family&&t.setSeriesOption("label.fontFamily",a.family,e()),a.weight&&t.setSeriesOption("label.fontWeight",a.weight,e()),a.style&&t.setSeriesOption("label.fontStyle",a.style,e()),a.size&&t.setSeriesOption("label.fontSize",a.size,e()),a.color&&t.setSeriesOption("label.color",a.color,e())}}}(this.chartTranslationService,this.chartOptionsService,function(){return e.seriesType}),n=this.createBean(new Ka(r));if("pie"===this.seriesType){var i=this.createBean(new fx(this.chartOptionsService,function(){return e.seriesType}));n.addCompToPanel(i),this.activePanels.push(i)}this.addWidget(n)},t.prototype.initShadow=function(){var e=this,r=this.createBean(new sx(this.chartOptionsService,function(){return e.seriesType}));this.addWidget(r)},t.prototype.initMarkers=function(){var e=this,r=this.createBean(new cx(this.chartOptionsService,function(){return e.seriesType}));this.addWidget(r)},t.prototype.initBins=function(){var e=this,r=this.getSeriesOption("binCount"),n=this.createBean(new u.AgSlider);n.setLabel(this.translate("histogramBinCount")).setMinValue(4).setMaxValue(tt(r,100)).setTextFieldWidth(45).setValue(""+r).onValueChange(function(i){return e.setSeriesOption("binCount",i)}),this.addWidget(n)},t.prototype.addWidget=function(e){this.seriesGroup.addItem(e),this.activePanels.push(e)},t.prototype.getSeriesOption=function(e){return this.chartOptionsService.getSeriesOption(e,this.seriesType)},t.prototype.setSeriesOption=function(e,r){this.chartOptionsService.setSeriesOption(e,r,this.seriesType)},t.prototype.getChartSeriesType=function(){var e=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===e?"column":"areaColumnCombo"===e?"area":er(e)},t.prototype.getSeriesSelectOptions=function(){var e=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var r=new Set;return this.chartController.getActiveSeriesChartTypes().forEach(function(n){var i=er(n.chartType);r.add(e.seriesSelectOptions.get(i))}),Array.from(r)},t.prototype.updateSeriesType=function(){var e=this.chartController.getActiveSeriesChartTypes().map(function(n){return er(n.chartType)});!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])},t.prototype.translate=function(e,r){return this.chartTranslationService.translate(e,r)},t.prototype.destroyActivePanels=function(){var e=this;this.activePanels.forEach(function(r){u._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyActivePanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">                \n            </ag-group-component>\n        </div>',fu([u.RefSelector("seriesGroup")],t.prototype,"seriesGroup",void 0),fu([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),fu([u.PostConstruct],t.prototype,"init",null),t}(u.Component),dx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function tt(o,t){return Math.max(o,t)}var gx=function(o){function t(e,r){var n=o.call(this,t.TEMPLATE)||this;return n.chartController=e,n.chartOptionsService=r,n.panels=[],n}return dx(t,o),t.prototype.init=function(){this.createPanels(),this.addManagedListener(this.chartController,bn.EVENT_CHART_UPDATED,this.createPanels.bind(this))},t.prototype.createPanels=function(){var e=this.chartController.getChartType(),r=this.chartController.isGrouping();if(e!==this.chartType||r!==this.isGrouping){switch(this.destroyPanels(),this.addComponent(new ox(this.chartOptionsService)),this.addComponent(new Kw(this.chartOptionsService)),e){case"groupedColumn":case"stackedColumn":case"normalizedColumn":this.addComponent(new wn(this.chartController,this.chartOptionsService)),this.addComponent(new zr(this.chartController,this.chartOptionsService,"column")),this.addComponent(new xn(this.chartOptionsService));break;case"groupedBar":case"stackedBar":case"normalizedBar":this.addComponent(new wn(this.chartController,this.chartOptionsService)),this.addComponent(new zr(this.chartController,this.chartOptionsService,"bar")),this.addComponent(new xn(this.chartOptionsService));break;case"pie":case"doughnut":this.addComponent(new zr(this.chartController,this.chartOptionsService,"pie"));break;case"line":this.addComponent(new wn(this.chartController,this.chartOptionsService)),this.addComponent(new zr(this.chartController,this.chartOptionsService,"line")),this.addComponent(new xn(this.chartOptionsService));break;case"scatter":case"bubble":this.addComponent(new wn(this.chartController,this.chartOptionsService)),this.addComponent(new zr(this.chartController,this.chartOptionsService,"scatter")),this.addComponent(new xn(this.chartOptionsService));break;case"area":case"stackedArea":case"normalizedArea":this.addComponent(new wn(this.chartController,this.chartOptionsService)),this.addComponent(new zr(this.chartController,this.chartOptionsService,"area")),this.addComponent(new xn(this.chartOptionsService));break;case"histogram":this.addComponent(new wn(this.chartController,this.chartOptionsService)),this.addComponent(new zr(this.chartController,this.chartOptionsService,"histogram")),this.addComponent(new xn(this.chartOptionsService));break;case"columnLineCombo":case"areaColumnCombo":case"customCombo":this.addComponent(new wn(this.chartController,this.chartOptionsService)),this.addComponent(new zr(this.chartController,this.chartOptionsService)),this.addComponent(new xn(this.chartOptionsService));break;default:console.warn("AG Grid: ChartFormattingPanel - unexpected chart type index: "+e+" supplied")}this.chartType=e,this.isGrouping=r}},t.prototype.addComponent=function(e){this.createBean(e),this.panels.push(e),e.addCssClass("ag-chart-format-section"),this.getGui().appendChild(e.getGui())},t.prototype.destroyPanels=function(){var e=this;this.panels.forEach(function(r){u._.removeFromParent(r.getGui()),e.destroyBean(r)})},t.prototype.destroy=function(){this.destroyPanels(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([u.PostConstruct],t.prototype,"init",null),t}(u.Component),yx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pu=function(o){function t(e,r){var n=o.call(this)||this;n.size=58,n.padding=5,n.root=new Ge;var i=new Xh(window.document,n.size,n.size);return i.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),i.root=n.root,i.container=e,n.scene=i,n.tooltipName=r,n}return yx(t,o),t.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName)},zf([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),zf([u.PostConstruct],t.prototype,"init",null),t}(u.Component),mx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dt=function(o){function t(e,r){var n=o.call(this,e,r)||this;return n.stroke="gray",n.axisOvershoot=3,n}return mx(t,o),t.prototype.addAxes=function(){var e=this.size,r=this.padding,n=new jt;n.x1=r,n.y1=r,n.x2=r,n.y2=e-r+this.axisOvershoot,n.stroke=this.stroke;var i=new jt;i.x1=r-this.axisOvershoot+1,i.y1=e-r,i.x2=e-r+1,i.y2=e-r,i.stroke=this.stroke;var a=this.root;a.append(n),a.append(i)},function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([u.PostConstruct],t.prototype,"addAxes",null),t}(pu);function bo(o){var t=o.stacked,e=o.size,r=o.padding,n=o.xScalePadding,i=o.xScaleDomain,a=o.yScaleDomain,s=new Jt;s.domain=i,s.range=[r,e-r],s.paddingInner=n,s.paddingOuter=n;var l=new Ne;l.domain=a,l.range=[e-r,r];var c=function(h,p,f){return h.map(function(d,v){var g=f.convert(d),y=new gr;return y.x=p.convert(v),y.y=g,y.width=p.bandwidth,y.height=f.convert(0)-g,y.strokeWidth=1,y.crisp=!0,y})};return t?o.data.map(function(h){return c(h,s,l)}):c(o.data,s,l)}function du(o,t,e,r){var n=new Ne;n.domain=[0,4],n.range=[r,e-r];var i=new Ne;i.domain=[0,10],i.range=[e-r,r];var a=t.map(function(l){var c=new lt;return c.strokeWidth=3,c.lineCap="round",c.fill=void 0,l.forEach(function(h,p){c.path[p>0?"lineTo":"moveTo"](n.convert(p),i.convert(h))}),c}),s=new co;return s.x=s.y=r,s.width=s.height=e-2*r,s.append(a),o.append(s),a}var _x=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),bx=function(o){function t(e,r,n){var i=o.call(this,e,"groupedColumnTooltip")||this;i.columnData=[2,3,4];var s=i.root;return i.columns=bo({stacked:!1,root:s,data:i.columnData,size:i.size,padding:i.padding,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(i.columns),i.updateColors(r,n),i}return _x(t,o),t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="groupedColumn",t}(Dt),Sx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Uf=function(o){function t(e,r,n,i,a,s){void 0===i&&(i=t.data),void 0===a&&(a=[0,16]),void 0===s&&(s="stackedColumnTooltip");var l=o.call(this,e,s)||this,h=l.root;return l.stackedColumns=bo({stacked:!0,root:h,data:i,size:l.size,padding:l.padding,xScaleDomain:[0,1,2],yScaleDomain:a,xScalePadding:.3}),h.append([].concat.apply([],l.stackedColumns)),l.updateColors(r,n),l}return Sx(t,o),t.prototype.updateColors=function(e,r){this.stackedColumns.forEach(function(n,i){return n.forEach(function(a){a.fill=e[i],a.stroke=r[i]})})},t.chartType="stackedColumn",t.data=[[8,12,16],[6,9,12],[2,3,4]],t}(Dt),wx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xx=function(o){function t(e,r,n){return o.call(this,e,r,n,t.data,[0,10],"normalizedColumnTooltip")||this}return wx(t,o),t.chartType="normalizedColumn",t.data=[[10,10,10],[6,7,8],[2,4,6]],t}(Uf),Ox=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Px=function(o){function t(e,r,n){var i=o.call(this,e,"groupedBarTooltip")||this,a=i.padding,s=i.size,c=new Jt;c.domain=[0,1,2],c.range=[a,s-a],c.paddingInner=.3,c.paddingOuter=.3;var h=new Ne;h.domain=[0,4],h.range=[s-a,a];var p=h.convert(0),f=c.bandwidth;return i.bars=[2,3,4].map(function(d,v){var g=new gr;return g.x=a,g.y=c.convert(v),g.width=p-h.convert(d),g.height=f,g.strokeWidth=1,g.crisp=!0,g}),i.updateColors(r,n),i.root.append(i.bars),i}return Ox(t,o),t.prototype.updateColors=function(e,r){this.bars.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="groupedBar",t}(Dt),Tx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$f=function(o){function t(e,r,n,i,a,s){void 0===i&&(i=t.data),void 0===a&&(a=[0,16]),void 0===s&&(s="stackedBarTooltip");var l=o.call(this,e,s)||this,c=l.size,h=l.padding,p=new Jt;p.domain=[0,1,2],p.range=[h,c-h],p.paddingInner=.3,p.paddingOuter=.3;var f=new Ne;f.domain=a,f.range=[c-h,h];var d=f.convert(0),v=p.bandwidth;return l.bars=i.map(function(g){return g.map(function(y,m){var C=new gr;return C.x=h,C.y=p.convert(m),C.width=d-f.convert(y),C.height=v,C.strokeWidth=1,C.crisp=!0,C})}),l.updateColors(r,n),l.root.append([].concat.apply([],l.bars)),l}return Tx(t,o),t.prototype.updateColors=function(e,r){this.bars.forEach(function(n,i){return n.forEach(function(a){a.fill=e[i],a.stroke=r[i]})})},t.chartType="stackedBar",t.data=[[8,12,16],[6,9,12],[2,3,4]],t}(Dt),Ax=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ex=function(o){function t(e,r,n){return o.call(this,e,r,n,t.data,[0,10],"normalizedBarTooltip")||this}return Ax(t,o),t.chartType="normalizedBar",t.data=[[10,10,10],[6,7,8],[2,4,6]],t}($f),Mx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kf=function(o){function t(e,r,n,i,a){void 0===i&&(i=.6),void 0===a&&(a="doughnutTooltip");var s=o.call(this,e,a)||this,l=(s.size-2*s.padding)/2,c=l+s.padding,h=[[Be(-90),Be(30)],[Be(30),Be(120)],[Be(120),Be(180)],[Be(180),Be(210)],[Be(210),Be(240)],[Be(240),Be(270)]];return s.sectors=h.map(function(p){var f=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(p,2),d=f[0],v=f[1],g=new Sf;return g.centerX=c,g.centerY=c,g.innerRadius=l*i,g.outerRadius=l,g.startAngle=d,g.endAngle=v,g.stroke=void 0,g.strokeWidth=1,g}),s.updateColors(r,n),s.root.append(s.sectors),s}return Mx(t,o),t.prototype.updateColors=function(e,r){this.sectors.forEach(function(n,i){n.fill=e[i%e.length],n.stroke=r[i%r.length]})},t.chartType="doughnut",t}(pu),Rx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fx=function(o){function t(e,r,n){return o.call(this,e,r,n,0,"pieTooltip")||this}return Rx(t,o),t.chartType="pie",t}(Kf),kx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Lx=function(o){function t(e,r,n){var i=o.call(this,e,"lineTooltip")||this;return i.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],i.lines=du(i.root,i.data,i.size,i.padding),i.updateColors(r,n),i}return kx(t,o),t.prototype.updateColors=function(e,r){this.lines.forEach(function(n,i){n.stroke=e[i]})},t.chartType="line",t}(Dt),Ix=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gx=function(o){function t(e,r,n){var i=o.call(this,e,"scatterTooltip")||this,a=i.size,s=i.padding,c=new Ne;c.domain=[-.5,4],c.range=[2*s,a-s];var h=new Ne;h.domain=[-.5,3.5],h.range=[a-s,s];var p=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach(function(d){d.forEach(function(v){var g=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(v,2),y=g[0],m=g[1],C=new Fl;C.strokeWidth=1,C.centerX=c.convert(y),C.centerY=h.convert(m),C.radiusX=C.radiusY=2.5,p.push(C)})}),i.points=p,i.updateColors(r,n);var f=new co;return f.x=f.y=s,f.width=f.height=a-2*s,f.append(i.points),i.root.append(f),i}return Ix(t,o),t.prototype.updateColors=function(e,r){this.points.forEach(function(n,i){n.stroke=r[i%r.length],n.fill=e[i%e.length]})},t.chartType="scatter",t}(Dt),Bx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wx=function(o){function t(e,r,n){var i=o.call(this,e,"bubbleTooltip")||this,a=i.size,s=i.padding,c=new Ne;c.domain=[0,1],c.range=[2*s,a-s];var h=new Ne;h.domain=[0,1],h.range=[a-s,s];var p=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach(function(d){d.forEach(function(v){var g=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(v,3),y=g[0],m=g[1],C=g[2],_=new Fl;_.strokeWidth=1,_.centerX=c.convert(y),_.centerY=h.convert(m),_.radiusX=_.radiusY=C,_.fillOpacity=.7,p.push(_)})}),i.points=p,i.updateColors(r,n);var f=new co;return f.x=s,f.y=s,f.width=a-2*s,f.height=a-2*s,f.append(i.points),i.root.append(f),i}return Bx(t,o),t.prototype.updateColors=function(e,r){this.points.forEach(function(n,i){n.stroke=r[i%r.length],n.fill=e[i%e.length]})},t.chartType="bubble",t}(Dt),Vx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hx=function(o){function t(e,r,n,i){void 0===i&&(i=t.data);var a=o.call(this,e,"groupedAreaTooltip")||this,s=a.size,l=a.padding,c=new Jt;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[l+.5,s-l-.5];var h=new Ne;h.domain=[0,6],h.range=[s-l+.5,l];var f=2*i.length-1,d=[],v=h.convert(0);return i.forEach(function(g,y){var m=c.convert(y);g.forEach(function(C,_){var w=h.convert(C),P=d[_]||(d[_]=[]);P[y]={x:m,y:w},P[f-y]={x:m,y:v}})}),a.areas=d.reverse().map(function(g){var y=new lt;y.strokeWidth=1,y.fillOpacity=.7;var m=y.path;return m.clear(),g.forEach(function(C,_){return m[_>0?"lineTo":"moveTo"](C.x,C.y)}),m.closePath(),y}),a.updateColors(r,n),a.root.append(a.areas),a}return Vx(t,o),t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="area",t.data=[[1,3,5],[2,6,4],[5,3,1]],t}(Dt),zx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vu=function(o){function t(e,r,n,i,a){void 0===i&&(i=t.data),void 0===a&&(a="stackedAreaTooltip");var s=o.call(this,e,a)||this,l=s.size,c=s.padding,h=new Jt;h.domain=[0,1,2],h.paddingInner=1,h.paddingOuter=0,h.range=[c+.5,l-c-.5];var p=new Ne;p.domain=[0,16],p.range=[l-c+.5,c+.5];var d=2*i.length-1,v=[];return i.forEach(function(g,y){var m=h.convert(y),C=0;g.forEach(function(_,w){var P=p.convert(C+_),O=v[w]||(v[w]=[]);O[y]={x:m,y:P},O[d-y]={x:m,y:p.convert(C)},C+=_})}),s.areas=v.map(function(g){var y=new lt;y.strokeWidth=1;var m=y.path;return m.clear(),g.forEach(function(C,_){return m[_>0?"lineTo":"moveTo"](C.x,C.y)}),m.closePath(),y}),s.updateColors(r,n),s.root.append(s.areas),s}return zx(t,o),t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]})},t.chartType="stackedArea",t.data=[[2,3,2],[3,6,5],[6,2,2]],t}(Dt),Ux=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$x=function(o){function t(e,r,n,i){return void 0===i&&(i=t.data),o.call(this,e,r,n,i,"normalizedAreaTooltip")||this}return Ux(t,o),t.chartType="normalizedArea",t.data=vu.data.map(function(e){var r=e.reduce(function(n,i){return n+i},0);return e.map(function(n){return n/r*16})}),t}(vu),Kx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yf=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},Yx=function(o){function t(e,r,n){var i=o.call(this,e,"histogramTooltip")||this,a=i.padding,s=i.size,l=[2,5,11,13,10,6,1],c=new Ne;c.domain=[0,l.length],c.range=[a,s-a];var h=new Ne;h.domain=[0,l.reduce(function(f,d){return Math.max(f,d)},0)],h.range=[s-a,a];var p=h.convert(0);return i.bars=l.map(function(f,d){var v=h.convert(f),g=c.convert(d),y=c.convert(d+1),m=new gr;return m.x=g,m.y=v,m.width=y-g,m.height=p-v,m.strokeWidth=1,m.crisp=!0,m}),i.updateColors(r,n),i.root.append(i.bars),i}return Kx(t,o),t.prototype.updateColors=function(e,r){var i=Yf(e,1)[0],s=Yf(r,1)[0];this.bars.forEach(function(l){l.fill=i,l.stroke=s})},t.chartType="histogram",t}(Dt),Xx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qx=function(o){function t(e,r,n){var i=o.call(this,e,"columnLineComboTooltip")||this;i.columnData=[3,4],i.lineData=[[5,4,6,5,4]];var s=i.root,c=i.lineData,h=i.size,p=i.padding;return i.columns=bo({stacked:!1,root:s,data:i.columnData,size:h,padding:p,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(i.columns),i.lines=du(s,c,h,p),i.updateColors(r,n),i}return Xx(t,o),t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]}),this.lines.forEach(function(n,i){n.stroke=e[i+2]})},t.chartType="columnLineCombo",t}(Dt),Zx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jx=function(o){function t(e,r,n){var i=o.call(this,e,"areaColumnComboTooltip")||this;i.columnData=[3,4.5],i.areaData=[[5,4,6,5,4]];var s=i.root,c=i.areaData,h=i.size,p=i.padding;i.columns=bo({stacked:!1,root:s,data:i.columnData,size:h,padding:p,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var f=new Jt;f.range=[p,h-p],f.domain=[0,1,2,3,4],f.paddingInner=1,f.paddingOuter=0;var d=new Ne;d.range=[h-p,p],d.domain=[0,6];var v=[],g=d.convert(0),y=f.convert(0);return c.forEach(function(m,C){var _=v[C]||(v[C]=[]);m.forEach(function(P,O){var A=P,M=f.convert(O),R=d.convert(A);_[O]={x:M,y:R}});var w=f.convert(m.length-1);v[C].push({x:w,y:g},{x:y,y:g})}),i.areas=v.map(function(m){var C=new lt;C.strokeWidth=1,C.fillOpacity=.8;var _=C.path;return m.forEach(function(w,P){return _[P>0?"lineTo":"moveTo"](w.x,w.y)}),C}),s.append(i.areas),s.append([].concat.apply([],i.columns)),i.updateColors(r,n),i}return Zx(t,o),t.prototype.updateColors=function(e,r){this.areas.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]}),this.columns.forEach(function(n,i){n.fill=e[i+1],n.stroke=r[i+1]})},t.chartType="areaColumnCombo",t}(Dt),Qx=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xf=function(o){function t(e,r,n){var i=o.call(this,e,"customComboTooltip")||this;i.columnData=[3,4],i.lineData=[[5,4,6,5,4]];var s=i.root,c=i.lineData,h=i.size,p=i.padding;i.columns=bo({stacked:!1,root:s,data:i.columnData,size:h,padding:p,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(i.columns),i.lines=du(s,c,h,p);var f="grey",v=new jt;v.x1=p,v.y1=p,v.x2=p,v.y2=h-p+3,v.stroke=f;var g=new jt;g.x1=p-3+1,g.y1=h-p,g.x2=h-p+1,g.y2=h-p,g.stroke=f;var y=new lt;return y.svgPath="M25.76,43.46l5.51,5.07M49.86,22a3.26,3.26,0,0,0-3-.59,6.78,6.78,0,0,0-3.35,2.14l-18,20.25-.08.09-2.42,8-.18.57,8.19-3.6,18-20.34a6.83,6.83,0,0,0,1.73-3.59A3.29,3.29,0,0,0,49.86,22Zm-8.1,3.5,5.58,5m-6.6-3.85,5.51,5.06",y.fill="whitesmoke",y.stroke="darkslategrey",y.strokeWidth=1,s.append([g,v,y]),i.updateColors(r,n),i}return Qx(t,o),t.prototype.updateColors=function(e,r){this.columns.forEach(function(n,i){n.fill=e[i],n.stroke=r[i]}),this.lines.forEach(function(n,i){n.stroke=e[i+2]})},t.chartType="customCombo",t}(pu),eO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tO=function(o){function t(e,r,n){var i=o.call(this,t.TEMPLATE)||this;return i.wrappers={},i.chartGroups={columnGroup:[bx,Uf,xx],barGroup:[Px,$f,Ex],pieGroup:[Fx,Kf],lineGroup:[Lx],scatterGroup:[Gx,Wx],areaGroup:[Hx,vu,$x],histogramGroup:[Yx],combinationGroup:[qx,Jx,Xf]},i.chartController=e,i.fills=r,i.strokes=n,i}return eO(t,o),t.prototype.init=function(){var e=this;this.chartController.customComboExists()||(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(function(n){return n!==Xf}));var r=this.getGui();Object.keys(this.chartGroups).forEach(function(n){var i=e.chartGroups[n],a=e.createBean(new u.AgGroupComponent({title:e.chartTranslationService.translate(n),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));i.forEach(function(s){var l=document.createElement("div");l.classList.add("ag-chart-mini-thumbnail"),e.addManagedListener(l,"click",function(){e.chartController.setChartType(s.chartType),e.updateSelectedMiniChart()}),e.wrappers[s.chartType]=l,e.createBean(new s(l,e.fills,e.strokes)),a.addItem(l)}),r.appendChild(a.getGui())}),this.updateSelectedMiniChart()},t.prototype.updateSelectedMiniChart=function(){var e=this.chartController.getChartType();for(var r in this.wrappers)this.wrappers[r].classList.toggle("ag-selected",r===e)},t.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',qf([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),qf([u.PostConstruct],t.prototype,"init",null),t}(u.Component),rO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),An=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},nO=function(o){function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.miniCharts=[],r.cardItems=[],r.activePaletteIndex=0,r.palettes=[],r.themes=[],r.chartController=e,r}return rO(t,o),t.prototype.postConstruct=function(){var e=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",u._.createIconNoSpan("previous",this.gridOptionsWrapper)),this.eNextBtn.insertAdjacentElement("afterbegin",u._.createIconNoSpan("next",this.gridOptionsWrapper)),this.addManagedListener(this.ePrevBtn,"click",function(){return e.setActivePalette(e.getPrev(),"left")}),this.addManagedListener(this.eNextBtn,"click",function(){return e.setActivePalette(e.getNext(),"right")}),this.addManagedListener(this.chartController,bn.EVENT_CHART_TYPE_CHANGED,function(){return e.resetPalettes(!0)}),this.scrollSelectedIntoView()},t.prototype.scrollSelectedIntoView=function(){var e=this;setTimeout(function(){var n=e.miniCharts.find(function(i){return!i.getGui().classList.contains("ag-hidden")}).getGui().querySelector(".ag-selected");n&&n.scrollIntoView({block:"nearest"})},250)},t.prototype.resetPalettes=function(e){var r=this,n=this.chartController.getPalettes();u._.shallowCompare(n,this.palettes)&&!e||this.isAnimating||(this.palettes=n,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex(function(i){return i===r.chartController.getChartThemeName()}),this.cardItems=[],u._.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach(function(i,a){var s=r.activePaletteIndex===a,h=r.createBean(new tO(r.chartController,i.fills,i.strokes));r.miniCharts.push(h),r.eMiniChartsContainer.appendChild(h.getGui()),r.addCardLink(a),s?h.updateSelectedMiniChart():h.addCssClass("ag-hidden")}),this.eNavBar.classList.toggle("ag-hidden",this.palettes.length<=1),u._.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},t.prototype.addCardLink=function(e){var r=this,n=document.createElement("div");n.classList.add("ag-chart-settings-card-item"),this.addManagedListener(n,"click",function(){r.setActivePalette(e,e<r.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(n),this.cardItems.push(n)},t.prototype.getPrev=function(){var e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e},t.prototype.getNext=function(){var e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e},t.prototype.setActivePalette=function(e,r){var n=this;if(!this.isAnimating&&this.activePaletteIndex!==e){u._.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");var i=this.miniCharts[this.activePaletteIndex],a=i.getGui(),s=this.miniCharts[e],l=s.getGui();i.updateSelectedMiniChart(),s.updateSelectedMiniChart();var c="left"===r?-1:1,h=l.style.left=u._.getAbsoluteWidth(this.getGui())*c+"px";this.activePaletteIndex=e,this.isAnimating=!0;var p="ag-animating";s.removeCssClass("ag-hidden"),i.addCssClass(p),s.addCssClass(p),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(function(){a.style.left=-parseFloat(h)+"px",l.style.left="0px"},0),window.setTimeout(function(){n.isAnimating=!1,i.removeCssClass(p),s.removeCssClass(p),i.addCssClass("ag-hidden")},300)}},t.prototype.destroyMiniCharts=function(){u._.clearElement(this.eMiniChartsContainer),this.miniCharts=this.destroyBeans(this.miniCharts)},t.prototype.destroy=function(){this.destroyMiniCharts(),o.prototype.destroy.call(this)},t.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',An([u.Autowired("resizeObserverService")],t.prototype,"resizeObserverService",void 0),An([u.RefSelector("eMiniChartsContainer")],t.prototype,"eMiniChartsContainer",void 0),An([u.RefSelector("eNavBar")],t.prototype,"eNavBar",void 0),An([u.RefSelector("eCardSelector")],t.prototype,"eCardSelector",void 0),An([u.RefSelector("ePrevBtn")],t.prototype,"ePrevBtn",void 0),An([u.RefSelector("eNextBtn")],t.prototype,"eNextBtn",void 0),An([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),iO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},oO=function(o){function t(e){var r=o.call(this)||this;r.tabs=[];var i=e.panels,a=e.chartOptionsService;return r.chartController=e.controller,r.chartOptionsService=a,r.panels=i,r}return iO(t,o),t.prototype.init=function(){var e=this;this.panels.forEach(function(r){var n=r.replace("chart","").toLowerCase(),i=e.createTab(r,n,e.getPanelClass(n)),a=i.comp;e.tabs.push(i.tab),e.addDestroyFunc(function(){return e.destroyBean(a)})}),this.tabbedLayout=new u.TabbedLayout({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},t.prototype.createTab=function(e,r,n){var i=document.createElement("div");i.classList.add("ag-chart-tab","ag-chart-"+r);var a=new n(this.chartController,this.chartOptionsService);this.getContext().createBean(a),i.appendChild(a.getGui());var s=document.createElement("div"),l=this.chartTranslationService.translate(r);return s.innerText=l,{comp:a,tab:{title:s,titleLabel:l,bodyPromise:u.AgPromise.resolve(i),getScrollableContainer:function(){return i.querySelector(".ag-scrollable-container")||i},name:e}}},t.prototype.showTab=function(e){this.tabbedLayout.showItem(this.tabs[e])},t.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},t.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),o.prototype.destroy.call(this)},t.prototype.getPanelClass=function(e){switch(e){case t.TAB_DATA:return zw;case t.TAB_FORMAT:return gx;default:return nO}},t.TAB_DATA="data",t.TAB_FORMAT="format",Zf([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Zf([u.PostConstruct],t.prototype,"init",null),t}(u.Component),aO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jf=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Qf=function(o){function t(e,r,n,i){var a=o.call(this,t.TEMPLATE)||this;return a.eChartContainer=e,a.eMenuPanelContainer=r,a.chartController=n,a.chartOptionsService=i,a.buttons={chartSettings:["menu",function(){return a.showMenu("chartSettings")}],chartData:["menu",function(){return a.showMenu("chartData")}],chartFormat:["menu",function(){return a.showMenu("chartFormat")}],chartLink:["linked",function(s){return a.toggleDetached(s)}],chartUnlink:["unlinked",function(s){return a.toggleDetached(s)}],chartDownload:["save",function(){return a.saveChart()}]},a.tabs=[],a.menuVisible=!1,a}return aO(t,o),t.prototype.postConstruct=function(){this.createButtons(),this.refreshMenuClasses()},t.prototype.isVisible=function(){return this.menuVisible},t.prototype.getToolbarOptions=function(){var e=this,r=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],n=this.gridOptionsWrapper.getChartToolbarItemsFunc();n&&(r=n({defaultItems:r}).filter(function(s){return!!e.buttons[s]||(console.warn("AG Grid: '"+s+" is not a valid Chart Toolbar Option"),!1)})),this.chartController.isPivotChart()&&(r=r.filter(function(s){return"chartData"!==s}));var a=["chartUnlink","chartLink","chartDownload"];return this.tabs=r.filter(function(s){return-1===a.indexOf(s)}),r.filter(function(s){return-1!==a.indexOf(s)||e.tabs.length&&s===e.tabs[0]})},t.prototype.toggleDetached=function(e){var r=e.target,n=r.classList.contains("ag-icon-linked");r.classList.toggle("ag-icon-linked",!n),r.classList.toggle("ag-icon-unlinked",n);var a=this.chartTranslationService.translate(n?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip");a&&(r.title=a),this.chartController.detachChartRange()},t.prototype.createButtons=function(){var e=this,r=this.getToolbarOptions(),n=this.getGui();r.forEach(function(i){var s=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(e.buttons[i],2),c=s[1],h=u._.createIconNoSpan(s[0],e.gridOptionsWrapper,void 0,!0);h.classList.add("ag-chart-menu-icon");var p=e.chartTranslationService.translate(i+"ToolbarTooltip");p&&(h.title=p),e.addManagedListener(h,"click",c),n.appendChild(h)})},t.prototype.saveChart=function(){this.dispatchEvent({type:t.EVENT_DOWNLOAD_CHART})},t.prototype.createMenuPanel=function(e){var r=this,n=this.gridOptionsWrapper.chartMenuPanelWidth(),i=this.menuPanel=this.createBean(new u.AgPanel({minWidth:n,width:n,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return i.setParentComponent(this),this.eMenuPanelContainer.appendChild(i.getGui()),this.tabbedMenu=this.createBean(new oO({controller:this.chartController,type:this.chartController.getChartType(),panels:this.tabs,chartOptionsService:this.chartOptionsService})),this.addManagedListener(i,u.Component.EVENT_DESTROYED,function(){return r.destroyBean(r.tabbedMenu)}),new u.AgPromise(function(a){window.setTimeout(function(){i.setBodyComponent(r.tabbedMenu),r.tabbedMenu.showTab(e),r.addManagedListener(r.eChartContainer,"click",function(s){r.getGui().contains(s.target)||r.menuVisible&&r.hideMenu()}),a(i)},100)})},t.prototype.showContainer=function(){!this.menuPanel||(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},t.prototype.showMenu=function(e){var r=this.tabs.indexOf(e);this.menuPanel?this.showContainer():this.createMenuPanel(r).then(this.showContainer.bind(this))},t.prototype.hideMenu=function(){var e=this;this.hideParent(),window.setTimeout(function(){e.menuVisible=!1,e.refreshMenuClasses()},500)},t.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible)},t.prototype.showParent=function(e){this.eMenuPanelContainer.style.minWidth=e+"px"},t.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel)},t.EVENT_DOWNLOAD_CHART="downloadChart",t.TEMPLATE='<div class="ag-chart-menu"></div>',Jf([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),Jf([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),lO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qa=function(){return qa=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},qa.apply(this,arguments)},ep=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},uO=function(o){function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.chartMenu=e,r}return lO(t,o),t.prototype.init=function(){var e=this;this.addManagedListener(this.getGui(),"keypress",function(r){"Enter"===r.key&&e.endEditing()}),this.addManagedListener(this.getGui(),"blur",this.endEditing.bind(this))},t.prototype.refreshTitle=function(e,r){var n=this;this.chartController=e,this.chartOptionsService=r;var i=this.chartController.getChartProxy();if(i){for(var a=0;a++;a<this.destroyableChartListeners.length)this.destroyableChartListeners[a]();this.destroyableChartListeners=[]}var s=i.getChart(),l=s.scene.canvas.element,c=this.addManagedListener(l,"dblclick",function(f){var d=s.title;if(d&&d.node.containsPoint(f.offsetX,f.offsetY)){var v=d.node.computeBBox(),g=d.node.inverseTransformPoint(v.x,v.y);n.startEditing(qa(qa({},v),g))}}),h=!1,p=this.addManagedListener(l,"mousemove",function(f){var d=s.title,v=!!(d&&d.enabled&&d.node.containsPoint(f.offsetX,f.offsetY));h!==v&&(l.style.cursor=v?"pointer":""),h=v});this.destroyableChartListeners=[c,p]},t.prototype.startEditing=function(e){if(!this.chartMenu||!this.chartMenu.isVisible()){var n=this.chartController.getChartProxy().getChart().width,i=Math.max(Math.min(e.width+20,n),300),a=this.getGui();a.classList.add("currently-editing");var s=a.style;s.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),s.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),s.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),s.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",s.color=this.chartOptionsService.getChartOption("title.color");var l=this.chartOptionsService.getChartOption("title.text"),c=l===this.chartTranslationService.translate("titlePlaceholder")?"":l;a.value=c;var h=a.getBoundingClientRect();s.left=Math.round(e.x+e.width/2-i/2)+"px",s.top=Math.round(e.y+e.height/2-h.height/2)+"px",s.width=Math.round(i)+"px",a.focus()}},t.prototype.endEditing=function(){var e=this.getGui().value;this.chartOptionsService.setChartOption("title.text",e),this.eventService.dispatchEvent({type:"chartTitleEdit"}),this.removeCssClass("currently-editing")},t.TEMPLATE='<input\n            class="ag-chart-title-edit"\n            style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center;" />\n        ',ep([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),ep([u.PostConstruct],t.prototype,"init",null),t}(u.Component);function So(o,t){return!1!==t.clone&&t.isMergeableObject(o)?Fe(function cO(o){return Array.isArray(o)?[]:{}}(o),o,t):o}function hO(o,t,e){return o.concat(t).map(function(r){return So(r,e)})}function tp(o){return Object.keys(o).concat(function pO(o){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o).filter(function(t){return o.propertyIsEnumerable(t)}):[]}(o))}function rp(o,t){try{return t in o}catch(e){return!1}}function gO(o){return function yO(o){return!!o&&"object"==typeof o}(o)&&!function mO(o){var t=Object.prototype.toString.call(o);return"[object RegExp]"===t||"[object Date]"===t}(o)}function Fe(o,t,e){(e=e||{}).arrayMerge=e.arrayMerge||hO,e.isMergeableObject=e.isMergeableObject||gO,e.cloneUnlessOtherwiseSpecified=So;var r=Array.isArray(t);return r===Array.isArray(o)?r?e.arrayMerge(o,t,e):function vO(o,t,e){var r={};return e.isMergeableObject(o)&&tp(o).forEach(function(n){r[n]=So(o[n],e)}),tp(t).forEach(function(n){(function dO(o,t){return rp(o,t)&&!(Object.hasOwnProperty.call(o,t)&&Object.propertyIsEnumerable.call(o,t))})(o,n)||(r[n]=rp(o,n)&&e.isMergeableObject(t[n])?function fO(o,t){if(!t.customMerge)return Fe;var e=t.customMerge(o);return"function"==typeof e?e:Fe}(n,e)(o[n],t[n],e):So(t[n],e))}),r}(o,t,e):So(t,e)}var wo=function(){return wo=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},wo.apply(this,arguments)},np=function(){function o(t){if(this.chartProxyParams=t,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=er(this.chartType),this.chartProxyParams.chartOptionsToRestore){this.chartOptions=this.chartProxyParams.chartOptionsToRestore,this.chartPalette=this.chartProxyParams.chartPaletteToRestore;var e={overrides:this.chartOptions,palette:this.chartPalette};this.chartTheme=ci(wo({baseTheme:this.getSelectedTheme()},e))}else this.chartTheme=this.createChartTheme(),this.chartOptions=this.convertConfigToOverrides(this.chartTheme.config),this.chartPalette=this.chartTheme.palette}return o.prototype.recreateChart=function(){var t=this;this.chart&&this.destroyChart(),this.chart=this.createChart(),this.crossFiltering&&this.chart.addEventListener("click",function(r){return t.crossFilterCallback(r,!0)})},o.prototype.getChart=function(){return this.chart},o.prototype.createChartTheme=function(){var e=this.getSelectedTheme(),r=this.isStockTheme(e),n=this.chartProxyParams.getGridOptionsChartThemeOverrides(),i=this.chartProxyParams.apiChartThemeOverrides;if(n||i){var a={overrides:o.mergeThemeOverrides(n,i)};return ci(r?wo({baseTheme:e},a):Fe(this.lookupCustomChartTheme(e),a))}return ci(r?e:this.lookupCustomChartTheme(e))},o.prototype.isStockTheme=function(t){return u._.includes(Object.keys(Pf),t)},o.prototype.getSelectedTheme=function(){var t=this.chartProxyParams.getChartThemeName(),e=this.chartProxyParams.getChartThemes();return u._.includes(e,t)||(t=e[0]),t},o.prototype.lookupCustomChartTheme=function(t){var e=this.chartProxyParams.customChartThemes,r=e&&e[t];return r||console.warn("AG Grid: no stock theme exists with the name '"+t+"' and no custom chart theme with that name was supplied to 'customChartThemes'"),r},o.mergeThemeOverrides=function(t,e){return t?e?Fe(t,e):t:e},o.prototype.downloadChart=function(){var t=this.chart;t.scene.download(t.title?t.title.text:"chart")},o.prototype.getChartImageDataURL=function(t){return this.chart.scene.getDataURL(t)},o.prototype.getChartOptions=function(){return this.chartOptions},o.prototype.getChartPalette=function(){return this.chartPalette},o.prototype.transformData=function(t,e){return this.chartProxyParams.grouping||this.chart.axes.filter(function(n){return n instanceof cn}).length<1?t:t.map(function(n,i){var a=n[e],s=a&&a.toString?a.toString():"",l=wo({},n);return l[e]={id:i,value:a,toString:function(){return s}},l})},o.prototype.convertConfigToOverrides=function(t){var e=["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType),n={};return(e?["line","area","column","cartesian"]:[this.standaloneChartType]).forEach(function(i){var a=Fe({},t[i]);a.series=a.series[i],"scatter"===i&&(a.paired=!0),n[i]=a}),n},o.prototype.destroy=function(){this.destroyChart()},o.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},o}(),CO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mi=function(o){function t(e){var r=o.call(this,e)||this;return r.axisTypeToClassMap={number:ti,category:cn,groupedCategory:ri,time:uo},r}return CO(t,o),t.prototype.updateAxes=function(e){if(e.grouping)this.axisTypeToClassMap[this.xAxisType]!==ri&&(this.xAxisType="groupedCategory",this.recreateChart());else{var r=t.isTimeAxis(e)?"time":"category";r!==this.xAxisType&&(this.xAxisType=r,this.recreateChart())}},t.prototype.getAxesOptions=function(e){return void 0===e&&(e=this.standaloneChartType),this.chartOptions[e].axes},t.prototype.processDataForCrossFiltering=function(e,r,n){var i=r,a=!1;return this.crossFiltering&&(e.forEach(function(l){l[r+"-total"]=l[r]+l[r+"-filtered-out"],l[r+"-filtered-out"]>0&&(a=!0)}),n.getCrossFilteringContext().lastSelectedChartId===n.chartId&&(i=r+"-total")),{yKey:i,atLeastOneSelectedPoint:a}},t.prototype.updateSeriesForCrossFiltering=function(e,r,n,i,a){if(this.crossFiltering){e.marker.enabled=!0,e.marker.formatter=function(h){return{fill:h.highlighted?"yellow":h.fill,size:h.highlighted?12:h.datum[r]>0?8:0}},n.tooltip.delay=500;var c=i.getCrossFilteringContext().lastSelectedChartId===i.chartId&&a;e instanceof Yl&&(e.fillOpacity=c?.3:1),e instanceof Jl&&(e.strokeOpacity=c?.3:1),e.addEventListener("nodeClick",this.crossFilterCallback)}},t.isTimeAxis=function(e){if(e.category&&e.category.chartDataType)return"time"===e.category.chartDataType;var r=e.data[0];return(r&&r[e.category.id])instanceof Date},t}(np);function Ci(o,t){var e=parseInt(o.slice(1,3),16),r=parseInt(o.slice(3,5),16),n=parseInt(o.slice(5,7),16);return t?"rgba("+e+", "+r+", "+n+", "+t+")":"rgba("+e+", "+r+", "+n+")"}function gu(o,t){return o.map(function(e){var r=u.Color.fromString(e);return new u.Color(r.r,r.g,r.b,t).toHexString()})}var _O=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ht=function(){return Ht=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ht.apply(this,arguments)},SO=function(o){function t(e){var r=o.call(this,e)||this;return r.xAxisType=e.grouping?"groupedCategory":"category",r.yAxisType="number",r.recreateChart(),r}return _O(t,o),t.prototype.createChart=function(){var e=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(["bar"===this.standaloneChartType,this.isNormalised()],2),n=e[1];return ot.create({container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes(e[0],n),series:this.getSeries(n)})},t.prototype.update=function(e){this.updateAxes(e);var r=this.chart.series[0];this.crossFiltering?this.updateCrossFilteringSeries(r,e):(r.fills=this.chartTheme.palette.fills,r.strokes=this.chartTheme.palette.strokes),r.data=this.transformData(e.data,e.category.id),r.xKey=e.category.id,r.xName=e.category.name,r.yKeys=e.fields.map(function(n){return n.colId}),r.yNames=e.fields.map(function(n){return n.displayName})},t.prototype.updateCrossFilteringSeries=function(e,r){var n=r.fields;n.forEach(function(c){var h=Ht({},c);h.colId=c.colId+"-filtered-out",n.push(h)});var i=this.chartTheme.palette,a=[];i.fills.forEach(function(c){a.push(c),a.push(Ci(c,"0.3"))}),e.fills=a,i.strokes.forEach(function(c){a.push(c),a.push(Ci(c,"0.3"))}),e.strokes=[],e.highlightStyle.fill=void 0;var l=r.fields.map(function(c){return c.colId});e.hideInLegend=l.filter(function(c){return-1!==c.indexOf("-filtered-out")}),this.chart.legend.addEventListener("click",function(c){e.toggleSeriesItem(c.itemId+"-filtered-out",c.enabled)}),this.chart.tooltip.delay=500,e.addEventListener("nodeClick",this.crossFilterCallback)},t.prototype.getAxes=function(e,r){var n=this.getAxesOptions(),i=[Ht(Ht({},Fe(n[this.xAxisType],n[this.xAxisType].bottom)),{type:this.xAxisType,position:e?oe.Left:oe.Bottom}),Ht(Ht({},Fe(n[this.yAxisType],n[this.yAxisType].left)),{type:this.yAxisType,position:e?oe.Bottom:oe.Left})];if(r){var a=i[1];a.label=Ht(Ht({},a.label),{formatter:function(s){return Math.round(s.value)+"%"}})}return i},t.prototype.getSeries=function(e){var n=!this.crossFiltering&&u._.includes(["groupedColumn","groupedBar"],this.chartType);return[Ht(Ht({},this.chartOptions[this.standaloneChartType].series),{type:this.standaloneChartType,grouped:n,normalizedTo:e?100:void 0})]},t.prototype.isNormalised=function(){return!this.crossFiltering&&u._.includes(["normalizedColumn","normalizedBar"],this.chartType)},t}(mi),wO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),at=function(){return at=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},at.apply(this,arguments)},xO=function(o){function t(e){var r=o.call(this,e)||this;return r.xAxisType=e.grouping?"groupedCategory":"category",r.yAxisType="number",r.recreateChart(),r}return wO(t,o),t.prototype.createChart=function(){return ot.create({type:"area",container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes()})},t.prototype.update=function(e){if(this.updateAxes(e),"area"===this.chartType)this.updateAreaChart(e);else{var r=this.chart.series[0];if(!r){var n=at(at({},this.chartOptions[this.standaloneChartType].series),{type:"area",normalizedTo:"normalizedArea"===this.chartType?100:void 0});if(!(r=ot.createComponent(at({},n),"area.series")))return;this.chart.addSeries(r)}r.data=this.transformData(e.data,e.category.id),r.xKey=e.category.id,r.xName=e.category.name,r.yKeys=e.fields.map(function(i){return i.colId}),r.yNames=e.fields.map(function(i){return i.displayName}),r.fills=this.chartTheme.palette.fills,r.strokes=this.chartTheme.palette.strokes}},t.prototype.updateAreaChart=function(e){var r=this,n=this.chart;if(0!==e.fields.length){var l,i=e.fields.map(function(f){return f.colId}),a=n.series.reduceRight(function(f,d,v){var g=d.yKeys[0];return i.indexOf(g)===v?f.set(g,d):n.removeSeries(d),f},new Map),s=this.transformData(e.data,e.category.id),c=this.chartTheme.palette,h=c.fills,p=c.strokes;e.fields.forEach(function(f,d){var v=r.processDataForCrossFiltering(s,f.colId,e),g=v.yKey,y=v.atLeastOneSelectedPoint,m=a.get(f.colId),C=h[d%h.length],_=p[d%p.length];if(m)m.data=s,m.xKey=e.category.id,m.xName=e.category.name,m.yKeys=[g],m.yNames=[f.displayName],m.fills=[C],m.strokes=[_];else{var P=at(at({},r.chartOptions[r.standaloneChartType].series),{type:"area",normalizedTo:"normalizedArea"===r.chartType?100:void 0}),O=at(at({},P),{data:s,xKey:e.category.id,xName:e.category.name,yKeys:[g],yNames:[f.displayName],fills:[C],strokes:[_],marker:at(at({},P.marker),{fill:C,stroke:_})});m=ot.createComponent(O,"area.series"),n.addSeriesAfter(m,l)}r.updateSeriesForCrossFiltering(m,f.colId,n,e,y),l=m})}else n.removeAllSeries()},t.prototype.getAxes=function(){var e=this.getAxesOptions(),r=[at(at({},Fe(e[this.xAxisType],e[this.xAxisType].bottom)),{type:this.xAxisType,position:oe.Bottom,paddingInner:1,paddingOuter:0}),at(at({},Fe(e[this.yAxisType],e[this.yAxisType].left)),{type:this.yAxisType,position:oe.Left})];return"time"===this.xAxisType&&(delete r[0].paddingInner,delete r[0].paddingOuter),r},t}(mi),OO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rr=function(){return rr=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},rr.apply(this,arguments)},PO=function(o){function t(e){var r=o.call(this,e)||this;return r.xAxisType=e.grouping?"groupedCategory":"category",r.yAxisType="number",r.recreateChart(),r}return OO(t,o),t.prototype.createChart=function(){return ot.create({type:"line",container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes()})},t.prototype.update=function(e){var r=this;if(0!==e.fields.length){this.updateAxes(e);var c,n=this.chart,i=e.fields,a=i.map(function(d){return d.colId}),s=this.transformData(e.data,e.category.id),l=n.series.reduceRight(function(d,v,g){var y=v.yKey;return a.indexOf(y)===g?d.set(y,v):n.removeSeries(v),d},new Map),h=this.chartTheme.palette,p=h.fills,f=h.strokes;i.forEach(function(d,v){var g=r.processDataForCrossFiltering(s,d.colId,e),y=g.yKey,m=g.atLeastOneSelectedPoint,C=l.get(d.colId),_=p[v%p.length],w=f[v%f.length];if(C)C.title=d.displayName,C.data=s,C.xKey=e.category.id,C.xName=e.category.name,C.yKey=y,C.yName=d.displayName,C.marker.fill=_,C.marker.stroke=w,C.stroke=_;else{var P=r.chartOptions[r.standaloneChartType].series,O=rr(rr({},P),{type:"line",title:d.displayName,data:s,xKey:e.category.id,xName:e.category.name,yKey:y,yName:d.displayName,stroke:_,marker:rr(rr({},P.marker),{fill:_,stroke:w})});C=ot.createComponent(O,"line.series"),n.addSeriesAfter(C,c)}r.updateSeriesForCrossFiltering(C,d.colId,n,e,m),c=C})}else this.chart.removeAllSeries()},t.prototype.getAxes=function(){var e=this.getAxesOptions();return[rr(rr({},Fe(e[this.xAxisType],e[this.xAxisType].bottom)),{type:this.xAxisType,position:oe.Bottom}),rr(rr({},Fe(e[this.yAxisType],e[this.yAxisType].left)),{type:this.yAxisType,position:oe.Left})]},t}(mi),TO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ip=function(o){function t(e){return o.call(this,e)||this}return TO(t,o),t.prototype.addCrossFilteringTooltipRenderer=function(e){e.tooltip.renderer=function(r){return{content:r.datum[r.labelKey]+": "+r.angleValue*r.datum[r.radiusKey]}}},t}(np),AO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xo=function(){return xo=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},xo.apply(this,arguments)},EO=function(o){function t(e){var r=o.call(this,e)||this;return r.recreateChart(),r}return AO(t,o),t.prototype.createChart=function(){return ot.create({type:"pie",container:this.chartProxyParams.parentElement,theme:this.chartTheme})},t.prototype.update=function(e){var r=this.chart;if(0!==e.fields.length){var n=e.fields[0],i=n;if(this.crossFiltering){var a=e.fields;a.forEach(function(f){var d=xo({},f);d.colId=f.colId+"-filtered-out",a.push(d)});var s=a[1];e.data.forEach(function(f){f[n.colId+"-total"]=f[n.colId]+f[s.colId],f[n.colId]=f[n.colId]/f[n.colId+"-total"],f[s.colId]=1});var l=r.series[1],c=s;l=this.updateSeries(r,l,i,c,e,void 0),this.updateSeries(r,r.series[0],i,c=i,e,l)}else this.updateSeries(r,r.series[0],i,i,e,void 0)}else r.removeAllSeries()},t.prototype.updateSeries=function(e,r,n,i,a,s){var c=this.chartOptions[this.standaloneChartType].series,h=r;if((r&&r.angleKey)!==i.colId){e.removeSeries(r);var p=xo(xo({},c),{type:"pie",angleKey:this.crossFiltering?n.colId+"-total":n.colId,radiusKey:this.crossFiltering?i.colId:void 0});(h=ot.createComponent(p,"pie.series")).fills=this.chartTheme.palette.fills,h.strokes=this.chartTheme.palette.strokes,h.callout.colors=this.chartTheme.palette.strokes,this.crossFiltering&&h&&!h.tooltip.renderer&&this.addCrossFilteringTooltipRenderer(h)}return h.angleName=i.displayName,h.labelKey=a.category.id,h.labelName=a.category.name,h.data=a.data,this.crossFiltering&&(h.radiusMin=0,h.radiusMax=1,s?e.legend.addEventListener("click",function(d){s&&s.toggleSeriesItem(d.itemId,d.enabled)}):(h.fills=gu(h.fills,.3),h.strokes=gu(h.strokes,.3),h.callout.colors=gu(h.strokes,.3),h.showInLegend=!1),e.tooltip.delay=500,h.highlightStyle.fill=void 0,h.addEventListener("nodeClick",this.crossFilterCallback)),e.addSeries(h),h},t}(ip),MO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),En=function(){return En=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},En.apply(this,arguments)},DO=function(o){function t(e){var r=o.call(this,e)||this;return r.recreateChart(),r}return MO(t,o),t.prototype.createChart=function(){return ot.create({type:"pie",container:this.chartProxyParams.parentElement,theme:this.chartTheme})},t.prototype.update=function(e){var r=this;if(0!==e.fields.length){var n=this.chart,i=e.fields.map(function(f){return f.colId}),a={};n.series.forEach(function(f){var d=f,v=d.angleKey;u._.includes(i,v)&&(a[v]=d)});var s=this.chartTheme.palette.fills,l=this.chartTheme.palette.strokes,c=this.chartOptions[this.standaloneChartType].series,h=e.fields.length,p=0;e.fields.forEach(this.crossFiltering?function(f,d){var v=En({},f);v.colId=f.colId+"-filtered-out",e.data.forEach(function(C){C[f.colId+"-total"]=C[f.colId]+C[v.colId],C[f.colId]=C[f.colId]/C[f.colId+"-total"],C[v.colId]=1});var g=r.updateSeries({seriesMap:a,angleField:f,field:v,seriesDefaults:c,index:d,params:e,fills:s,strokes:l,doughnutChart:n,offset:p,numFields:h,opaqueSeries:void 0}),y=g.updatedOffset;r.updateSeries({seriesMap:a,angleField:f,field:f,seriesDefaults:c,index:d,params:e,fills:s,strokes:l,doughnutChart:n,offset:p,numFields:h,opaqueSeries:g.pieSeries}),p=y}:function(f,d){var v=r.updateSeries({seriesMap:a,angleField:f,field:f,seriesDefaults:c,index:d,params:e,fills:s,strokes:l,doughnutChart:n,offset:p,numFields:h,opaqueSeries:void 0}).updatedOffset;p=v}),n.series=u._.values(a)}else this.chart.removeAllSeries()},t.prototype.updateSeries=function(e){var r=e.seriesMap[e.field.colId],n=En(En({},e.seriesDefaults),{type:"pie",angleKey:this.crossFiltering?e.angleField.colId+"-total":e.angleField.colId,radiusKey:this.crossFiltering?e.field.colId:void 0,title:En(En({},e.seriesDefaults.title),{text:e.seriesDefaults.title.text||e.field.displayName})}),i=r||ot.createComponent(n,"pie.series");i.title&&(i.title.showInLegend=e.numFields>1),r||this.crossFiltering&&!i.tooltip.renderer&&this.addCrossFilteringTooltipRenderer(i),i.angleName=e.field.displayName,i.labelKey=e.params.category.id,i.labelName=e.params.category.name,i.data=e.params.data,this.crossFiltering?(i.radiusMin=0,i.radiusMax=1,e.opaqueSeries?(e.doughnutChart.legend.addEventListener("click",function(l){e.opaqueSeries&&e.opaqueSeries.toggleSeriesItem(l.itemId,l.enabled)}),i.fills=e.fills,i.strokes=e.strokes,i.callout.colors=e.strokes):(i.fills=e.fills.map(function(l){return Ci(l,"0.3")}),i.strokes=e.strokes.map(function(l){return Ci(l,"0.3")}),i.showInLegend=!1),i.highlightStyle.fill=void 0,i.addEventListener("nodeClick",this.crossFilterCallback),e.doughnutChart.tooltip.delay=500):(i.fills=e.fills,i.strokes=e.strokes,i.callout.colors=e.strokes);var s=e.numFields>1?20:40;return i.outerRadiusOffset=e.offset,e.offset-=s,i.innerRadiusOffset=e.offset,e.offset-=s,r||(e.seriesMap[e.field.colId]=i),{updatedOffset:e.offset,pieSeries:i}},t}(ip),RO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),br=function(){return br=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},br.apply(this,arguments)},FO=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},op=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(FO(arguments[t]));return o},kO=function(o){function t(e){var r=o.call(this,e)||this;return r.xAxisType="number",r.yAxisType="number",r.recreateChart(),r}return RO(t,o),t.prototype.createChart=function(){return ot.create({type:"scatter",container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes()})},t.prototype.update=function(e){var r=this;if(e.fields.length<2)this.chart.removeAllSeries();else{var n=e.fields;this.crossFiltering&&n.forEach(function(C){var _=br({},C);_.colId=C.colId+"-filtered-out",n.push(_)});var s,a=this.getSeriesDefinitions(n,this.chartOptions[this.standaloneChartType].paired);this.crossFiltering&&(s=this.getCrossFilteringDataDomain(a,e));var l=this.chart,c=l.series.reduceRight(function(C,_,w){return a.findIndex(function(O){return O.xField.colId===_.xKey&&O.yField.colId===_.yKey&&(!O.sizeField&&!_.sizeKey||O.sizeField&&O.sizeField.colId===_.sizeKey)})===w?C.set(_.yKey,_):l.removeSeries(_),C},new Map),h=this.chartTheme.palette,p=h.fills,f=h.strokes;if(this.crossFiltering){var d=[];p.forEach(function(C){d.push(C),d.push(Ci(C,"0.3"))}),p=d;var v=[];f.forEach(function(C){v.push(C),v.push(Ci(C,"0.3"))}),f=v}var y,g=e.category.id===ba.DEFAULT_CATEGORY?void 0:e.category,m=this.chartOptions[this.standaloneChartType].series;a.forEach(function(C,_){var w=c.get(C.yField.colId),P=w||ot.createComponent(br(br({},m),{type:"scatter"}),"scatter.series");if(P){var A=C.xField,E=C.yField,M=C.sizeField;P.title=E.displayName+" vs "+A.displayName,P.xKey=A.colId,P.xName=A.displayName,P.yKey=E.colId,P.yName=E.displayName,P.data=e.data,P.fill=p[_%p.length],P.stroke=f[_%f.length],M?(P.sizeKey=M.colId,P.sizeName=M.displayName):P.sizeKey=void 0,g?(P.labelKey=g.id,P.labelName=g.name):P.labelKey=P.yKey;var R=E.colId.indexOf("-filtered-out")>-1;r.crossFiltering&&(R||l.legend.addEventListener("click",function(B){P.toggleSeriesItem(B.itemId+"-filtered-out",B.enabled)}),s&&(P.marker.domain=s),l.tooltip.delay=500,R&&(P.showInLegend=!1),P.addEventListener("nodeClick",r.crossFilterCallback)),w||l.addSeriesAfter(P,y),y=P}})}},t.prototype.getSeriesDefinitions=function(e,r){if(e.length<2)return[];var n="bubble"===this.chartType;if(r)return n?e.map(function(a,s){return s%3==0?{xField:a,yField:e[s+1],sizeField:e[s+2]}:null}).filter(function(a){return a&&a.yField&&a.sizeField}):e.map(function(a,s){return s%2==0?{xField:a,yField:e[s+1]}:null}).filter(function(a){return a&&a.yField});var i=e[0];return n?e.map(function(a,s){return s%2==1?{xField:i,yField:a,sizeField:e[s+1]}:null}).filter(function(a){return a&&a.sizeField}):e.filter(function(a,s){return s>0}).map(function(a){return{xField:i,yField:a}})},t.prototype.getCrossFilteringDataDomain=function(e,r){var n;if(e[0]&&e[0].sizeField){var i=e[0].sizeField.colId,a=[];r.data.forEach(function(s){void 0!==s[i]&&a.push(s[i]),void 0!==s[i+"-filtered-out"]&&a.push(s[i+"-filtered-out"])}),a.length>0&&(n=[Math.min.apply(Math,op(a)),Math.max.apply(Math,op(a))])}return n},t.prototype.getAxes=function(){var e=this.getAxesOptions();return[br(br({},Fe(e[this.xAxisType],e[this.xAxisType].bottom)),{type:this.xAxisType,position:oe.Bottom}),br(br({},Fe(e[this.yAxisType],e[this.yAxisType].left)),{type:this.yAxisType,position:oe.Left})]},t}(mi),LO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ur=function(){return Ur=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Ur.apply(this,arguments)},NO=function(o){function t(e){var r=o.call(this,e)||this;return r.xAxisType="number",r.yAxisType="number",r.recreateChart(),r}return LO(t,o),t.prototype.createChart=function(){return ot.create({container:this.chartProxyParams.parentElement,theme:this.chartTheme,axes:this.getAxes(),series:[Ur(Ur({},this.chartOptions[this.standaloneChartType].series),{type:"histogram"})]})},t.prototype.update=function(e){var r=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i}(e.fields,1),n=r[0],a=this.chart.series[0];a.data=e.data,a.xKey=n.colId,a.xName=n.displayName,a.areaPlot=!1,a.fill=this.chartTheme.palette.fills[0],a.stroke=this.chartTheme.palette.strokes[0]},t.prototype.getAxes=function(){var e=this.getAxesOptions();return[Ur(Ur({},Fe(e[this.xAxisType],e[this.xAxisType].bottom)),{type:this.xAxisType,position:oe.Bottom}),Ur(Ur({},Fe(e[this.yAxisType],e[this.yAxisType].left)),{type:this.yAxisType,position:oe.Left})]},t}(mi),GO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ap=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},BO=function(o){function t(e){var r=o.call(this)||this;return r.chartController=e,r}return GO(t,o),t.prototype.getChartType=function(){return this.chartController.getChartType()},t.prototype.getChartOption=function(e){return u._.get(this.getChart(),e,void 0)},t.prototype.setChartOption=function(e,r){var n=this;this.chartController.getChartSeriesTypes().forEach(function(i){var a=u._.get(n.getChartOptions(),""+i,void 0);u._.set(a,e,r)}),u._.set(this.getChart(),e,r),this.raiseChartOptionsChangedEvent()},t.prototype.getAxisProperty=function(e){return u._.get(this.getChart().axes[0],e,void 0)},t.prototype.setAxisProperty=function(e,r){var n=this,i=this.getChart();i.axes.forEach(function(a){n.updateAxisOptions(a,e,r),u._.set(a,e,r)}),i.layoutPending=!0,this.raiseChartOptionsChangedEvent()},t.prototype.getLabelRotation=function(e){var r=this.getAxis(e);return u._.get(r,"label.rotation",void 0)},t.prototype.setLabelRotation=function(e,r){var n="label.rotation",i=this.getAxis(e);u._.set(i,n,r),this.getChart().layoutPending=!0,i&&!this.chartController.isDefaultCategorySelected()&&(this.updateAxisOptions(i,n,r),this.raiseChartOptionsChangedEvent())},t.prototype.getSeriesOption=function(e,r){var n=this.getChart().series.find(function(i){return t.isMatchingSeries(r,i)});return u._.get(n,e,void 0)},t.prototype.setSeriesOption=function(e,r,n){var i=this.getChartOptions();i[n]||(i[n]={}),u._.set(i[n].series,e,r),this.getChart().series.forEach(function(a){t.isMatchingSeries(n,a)&&u._.set(a,e,r)}),this.raiseChartOptionsChangedEvent()},t.prototype.getPairedMode=function(){var e=er(this.getChartType());return u._.get(this.getChartOptions(),e+".paired",void 0)},t.prototype.setPairedMode=function(e){var r=er(this.getChartType()),n=u._.get(this.getChartOptions(),""+r,void 0);u._.set(n,"paired",e)},t.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},t.prototype.getChartOptions=function(){return this.chartController.getChartProxy().getChartOptions()},t.prototype.getAxis=function(e){var r=this.getChart();if(r.axes&&!(r.axes.length<1))return"xAxis"===e?r.axes&&"x"===r.axes[0].direction?r.axes[0]:r.axes[1]:r.axes&&"y"===r.axes[1].direction?r.axes[1]:r.axes[0]},t.prototype.updateAxisOptions=function(e,r,n){var i=er(this.getChartType()),a=this.getChartOptions()[i].axes;e instanceof ti?u._.set(a.number,r,n):e instanceof cn?u._.set(a.category,r,n):e instanceof uo?u._.set(a.time,r,n):e instanceof ri&&u._.set(a.groupedCategory,r,n)},t.prototype.raiseChartOptionsChangedEvent=function(){var e=this.chartController.getChartModel(),r=Object.freeze({type:u.Events.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:e.chartThemeName,chartOptions:e.chartOptions,api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(r)},t.isMatchingSeries=function(e,r){return"area"===e&&r instanceof Yl||"bar"===e&&r instanceof ql||"column"===e&&r instanceof ql||"histogram"===e&&r instanceof yf||"line"===e&&r instanceof Jl||"pie"===e&&r instanceof xf||"scatter"===e&&r instanceof pf},t.prototype.destroy=function(){o.prototype.destroy.call(this)},ap([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),ap([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),t}(u.BeanStub),jO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),gt=function(){return gt=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},gt.apply(this,arguments)},WO=function(o){function t(e){var r=o.call(this,e)||this;return r.xAxisType=e.grouping?"groupedCategory":"category",r.yAxisType="number",r.recreateChart(),r}return jO(t,o),t.prototype.createChart=function(){return ot.create({container:this.chartProxyParams.parentElement,theme:this.chartTheme})},t.prototype.update=function(e){var i={data:this.transformData(e.data,e.category.id)};this.seriesChanged(e)&&(i.series=this.getSeriesOptions(e),i.axes=this.getAxes(e)),ot.update(this.chart,i)},t.prototype.seriesChanged=function(e){var r=e.seriesChartTypes,n=!u._.areEqual(this.prevSeriesChartTypes,r,function(c,h){return c.colId===h.colId&&c.chartType===h.chartType&&c.secondaryAxis===h.secondaryAxis});this.prevSeriesChartTypes=r.map(function(c){return gt({},c)});var i=e.fields.map(function(c){return c.colId}).join(),a=this.prevFields!==i;this.prevFields=i;var s=e.category.id,l=this.prevCategoryId!==s;return this.prevCategoryId=s,n||a||l},t.prototype.getSeriesOptions=function(e){var r=this,i=e.category,a=e.seriesChartTypes;return e.fields.map(function(s){var l=a.find(function(h){return h.colId===s.colId});if(l){var c=l.chartType;return gt(gt({},r.extractSeriesOverrides(l)),{type:er(c),xKey:i.id,yKey:s.colId,yName:s.displayName,grouped:["groupedColumn","groupedBar","groupedArea"].includes(c),stacked:["stackedArea","stackedColumn"].includes(c)})}})},t.prototype.getAxes=function(e){var r=this;this.xAxisType=e.grouping?"groupedCategory":"category";var n=e?e.fields:[],i=new Map(n.map(function(v){return[v.colId,v]})),a=this.getYKeys(n,e.seriesChartTypes),s=a.primaryYKeys,l=a.secondaryYKeys,c=this.getAxisOptions(),p=c.leftOptions,f=c.rightOptions,d=[gt(gt({},c.bottomOptions),{type:this.xAxisType,position:oe.Bottom,gridStyle:[{strokeWidth:0}]})];return s.length>0&&d.push(gt(gt({},p),{type:this.yAxisType,keys:s,position:oe.Left,title:gt({},Fe(p.title,{enabled:!0,text:s.map(function(v){var g=i.get(v);return g?g.displayName:v}).join(" / ")}))})),l.length>0&&l.forEach(function(v,g){var y=i.get(v);if(y&&y.colId===v){var C=gt(gt({},f),{type:r.yAxisType,keys:[v],position:oe.Right,title:gt({},Fe(f.title,{enabled:!0,text:y?y.displayName:v}))});!s.some(function(P){return!!i.get(P)})&&g===l.length-1||(C.gridStyle=[{strokeWidth:0}]),d.push(C)}}),d},t.prototype.getAxisOptions=function(){var e=this.getAxesOptions("cartesian");return{bottomOptions:Fe(e[this.xAxisType],e[this.xAxisType].bottom),leftOptions:Fe(e[this.yAxisType],e[this.yAxisType].left),rightOptions:Fe(e[this.yAxisType],e[this.yAxisType].right)}},t.prototype.getYKeys=function(e,r){var n=[],i=[];return e.forEach(function(a){var s=a.colId,l=r.find(function(c){return c.colId===s});l&&(l.secondaryAxis?i.push(s):n.push(s))}),{primaryYKeys:n,secondaryYKeys:i}},t.prototype.extractSeriesOverrides=function(e){var r=this.chartOptions[er(e.chartType)].series;return delete r.yKeys,delete r.yNames,r},t}(mi),VO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},sp=function(o){function t(e){var r=o.call(this,t.TEMPLATE)||this;return r.params=e,r}return VO(t,o),t.prototype.init=function(){var e=this.gridOptionsWrapper.getChartThemes();if(e.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");var r=this.params.chartThemeName;u._.includes(e,r)||(r=e[0]);var n={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:r,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},i=this.gridOptionsWrapper.isEnableRtl();this.addCssClass(i?"ag-rtl":"ag-ltr");var a=this.createBean(new ba(n));this.chartController=this.createManagedBean(new bn(a)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,bn.EVENT_CHART_UPDATED,this.refresh.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,Qf.EVENT_DOWNLOAD_CHART,this.downloadChart.bind(this)),this.refresh(),this.raiseChartCreatedEvent()},t.prototype.validateCustomThemes=function(){var e=this.gridOptionsWrapper.getChartThemes(),r=this.gridOptionsWrapper.getCustomChartThemes();r&&u._.getAllKeysInObjects([r]).forEach(function(n){u._.includes(e,n)||console.warn("AG Grid: a custom chart theme with the name '"+n+"' has been supplied but not added to the 'chartThemes' list")})},t.prototype.createChart=function(){var e=this;this.chartProxy&&this.chartProxy.destroy();var n=this.chartController.getChartType(),i={chartType:n,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsWrapper.getCustomChartThemes(),getGridOptionsChartThemeOverrides:this.getGridOptionsChartThemeOverrides.bind(this),apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:function(s,l){e.params.crossFilteringContext.lastSelectedChartId=l?"":e.chartController.getChartId(),e.crossFilterService.filter(s,l)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes()};if(this.params.chartOptionsToRestore=void 0,this.chartType=n,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=t.createChartProxy(i),this.chartProxy){var a=this.eChart.querySelector("canvas");a&&a.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new BO(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}else console.warn("AG Grid: invalid chart type supplied: ",i.chartType)},t.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},t.prototype.getChartThemes=function(){return this.chartController.getThemes()},t.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsWrapper.getChartThemeOverrides()},t.createChartProxy=function(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new SO(e);case"pie":return new EO(e);case"doughnut":return new DO(e);case"area":case"stackedArea":case"normalizedArea":return new xO(e);case"line":return new PO(e);case"scatter":case"bubble":return new kO(e);case"histogram":return new NO(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new WO(e);default:throw"AG Grid: Unable to create chart as an invalid chartType = '"+e.chartType+"' was supplied."}},t.prototype.addDialog=function(){var e=this,r=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),n=this.getBestDialogSize();this.chartDialog=new u.AgDialog({resizable:!0,movable:!0,maximizable:!0,title:r,width:n.width,height:n.height,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(u.AgDialog.EVENT_DESTROYED,function(){return e.destroy()})},t.prototype.getBestDialogSize=function(){var e=this.popupService.getPopupParent(),r=.75*u._.getAbsoluteWidth(e),n=.75*u._.getAbsoluteHeight(e),a=this.chartProxy.getChart(),s=this.params.insideDialog?850:a.width,l=this.params.insideDialog?470:a.height;return(s>r||l>n)&&(s=Math.min(s,r),(l=Math.round(.553*s))>n&&(l=n,s=Math.min(s,Math.round(l/.553)))),{width:s,height:l}},t.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new Qf(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},t.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new uO(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},t.prototype.refresh=function(){this.shouldRecreateChart()&&this.createChart(),this.updateChart()},t.prototype.shouldRecreateChart=function(){return this.chartType!==this.chartController.getChartType()||this.chartThemeName!==this.chartController.getChartThemeName()},t.prototype.getCurrentChartType=function(){return this.chartType},t.prototype.getChartModel=function(){return this.chartController.getChartModel()},t.prototype.getChartImageDataURL=function(e){return this.chartProxy.getChartImageDataURL(e)},t.prototype.updateChart=function(){var e=this,r=this.chartProxy,i=this.chartController.getSelectedValueColState().map(function(h){return{colId:h.colId,displayName:h.displayName}}),a=this.chartController.getChartData();if(!this.handleEmptyChart(a,i)){var l=this.chartController.getSelectedDimension(),c={data:a,grouping:this.chartController.isGrouping(),category:{id:l.colId,name:l.displayName,chartDataType:this.getChartDataType(l.colId)},fields:i,chartId:this.chartController.getChartId(),getCrossFilteringContext:function(){return e.params.crossFilteringContext},seriesChartTypes:this.chartController.getSeriesChartTypes()};r.update(c),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},t.prototype.getChartDataType=function(e){var r=this.columnModel.getPrimaryColumn(e);return r?r.getColDef().chartDataType:void 0},t.prototype.handleEmptyChart=function(e,r){var n=this.chartProxy.getChart().container,i=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),a=1;this.chartController.isActiveXYChart()&&(a="bubble"===this.chartController.getChartType()?3:2);var s=r.length<a||0===e.length;if(n){var l=i||s;u._.setDisplayed(this.eChart,!l),u._.setDisplayed(this.eEmpty,l)}return i?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!s&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)},t.prototype.downloadChart=function(){this.chartProxy.downloadChart()},t.prototype.getChartId=function(){return this.chartController.getChartId()},t.prototype.getUnderlyingChart=function(){return this.chartProxy.getChart()},t.prototype.refreshCanvasSize=function(){if(this.params.insideDialog){var e=this.eChart;if(this.chartMenu.isVisible()){var r=this.chartProxy.getChart();r.height=u._.getInnerHeight(e),r.width=u._.getInnerWidth(e)}}},t.prototype.setActiveChartCellRange=function(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},t.prototype.raiseChartCreatedEvent=function(){var e=Object.freeze({type:u.Events.EVENT_CHART_CREATED,chartId:this.chartController.getChartId(),api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(e)},t.prototype.raiseChartDestroyedEvent=function(){var e=Object.freeze({type:u.Events.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId(),api:this.gridApi,columnApi:this.columnApi});this.eventService.dispatchEvent(e)},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);var e=this.getGui();u._.clearElement(e),u._.removeFromParent(e),this.raiseChartDestroyedEvent()},t.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>\n        </div>',yt([u.RefSelector("eChart")],t.prototype,"eChart",void 0),yt([u.RefSelector("eChartContainer")],t.prototype,"eChartContainer",void 0),yt([u.RefSelector("eMenuContainer")],t.prototype,"eMenuContainer",void 0),yt([u.RefSelector("eEmpty")],t.prototype,"eEmpty",void 0),yt([u.RefSelector("eTitleEditContainer")],t.prototype,"eTitleEditContainer",void 0),yt([u.Autowired("environment")],t.prototype,"environment",void 0),yt([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),yt([u.Autowired("chartCrossFilterService")],t.prototype,"crossFilterService",void 0),yt([u.Autowired("chartTranslationService")],t.prototype,"chartTranslationService",void 0),yt([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),yt([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),yt([u.Autowired("popupService")],t.prototype,"popupService",void 0),yt([u.PostConstruct],t.prototype,"init",null),t}(u.Component);var UO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Za=function(){return Za=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Za.apply(this,arguments)},Oo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$O=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.activeCharts=new Set,e.activeChartComps=new Set,e.crossFilteringContext={lastSelectedChartId:""},e}return UO(t,o),t.prototype.getChartModels=function(){var e=[];return this.activeChartComps.forEach(function(n){return e.push(function(n){return Za(Za({},n),{version:"27.3.0"})}(n.getChartModel()))}),e},t.prototype.getChartRef=function(e){var r;return this.activeCharts.forEach(function(n){n.chartId===e&&(r=n)}),r},t.prototype.getChartImageDataURL=function(e){var r;return this.activeChartComps.forEach(function(n){n.getChartId()===e.chartId&&(r=n.getChartImageDataURL(e.fileFormat))}),r},t.prototype.createChartFromCurrentRange=function(e){void 0===e&&(e="groupedColumn");var r=this.getSelectedRange();return this.createChart(r,e)},t.prototype.restoreChart=function(e,r){var n=this;if(e){"27.3.0"!==e.version&&(e=function HO(o){return null==o.version&&(o.version="27.1.0"),function zO(o){var t="string"==typeof o?o.split(".").map(function(e){return Number(e)}):[];if(3!==t.length||t.some(function(e){return isNaN(e)}))throw new Error("AG Grid - Illegal version string: "+o)}(o.version),o}(e));var i={cellRange:e.cellRange,chartType:e.chartType,chartThemeName:e.chartThemeName,chartContainer:r,suppressChartRanges:e.suppressChartRanges,aggFunc:e.aggFunc,unlinkChart:e.unlinkChart,seriesChartTypes:e.seriesChartTypes},a=function(p){return n.rangeService?n.rangeService.createCellRangeFromCellRangeParams(p):void 0};if("pivot"===e.modelType){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var c=a({rowStartIndex:null,rowEndIndex:null,columns:this.columnModel.getAllDisplayedColumns().map(function(p){return p.getColId()})});return c?this.createChart(c,i.chartType,i.chartThemeName,!0,!0,i.chartContainer,void 0,void 0,i.unlinkChart,!1,e.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}var h=a(i.cellRange);if(h)return this.createChart(h,i.chartType,i.chartThemeName,!1,i.suppressChartRanges,i.chartContainer,i.aggFunc,void 0,i.unlinkChart,!1,e.chartOptions,e.chartPalette,i.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}else console.warn("AG Grid - unable to restore chart as no chart model is provided")},t.prototype.createRangeChart=function(e){var r=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e.cellRange):void 0;if(r)return this.createChart(r,e.chartType,e.chartThemeName,!1,e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,void 0,void 0,void 0,e.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")},t.prototype.createPivotChart=function(e){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var r={rowStartIndex:null,rowEndIndex:null,columns:this.columnModel.getAllDisplayedColumns().map(function(i){return i.getColId()})},n=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(r):void 0;if(n)return this.createChart(n,e.chartType,e.chartThemeName,!0,!0,e.chartContainer,void 0,e.chartThemeOverrides,e.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")},t.prototype.createCrossFilterChart=function(e){var r=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e.cellRange):void 0;if(r)return this.createChart(r,e.chartType,e.chartThemeName,!1,!(null!=e.suppressChartRanges)||e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,!0);console.warn("AG Grid - unable to create chart as no range is selected")},t.prototype.createChart=function(e,r,n,i,a,s,l,c,h,p,f,d,v){var g=this;void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===h&&(h=!1),void 0===p&&(p=!1);var y=this.gridOptionsWrapper.getCreateChartContainerFunc(),m={chartId:this.generateId(),pivotChart:i,cellRange:e,chartType:r,chartThemeName:n,insideDialog:!(s||y),suppressChartRanges:a,aggFunc:l,chartThemeOverrides:c,unlinkChart:h,crossFiltering:p,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:f,chartPaletteToRestore:d,seriesChartTypes:v},C=new sp(m);this.context.createBean(C);var _=this.createChartRef(C);if(s){s.appendChild(C.getGui());var w=this.environment.getTheme();w.el&&!w.el.contains(s)&&s.classList.add(w.theme)}else y?y(_):C.addEventListener(sp.EVENT_DESTROYED,function(){g.activeChartComps.delete(C),g.activeCharts.delete(_)});return _},t.prototype.createChartRef=function(e){var r=this,n={destroyChart:function(){r.activeCharts.has(n)&&(r.context.destroyBean(e),r.activeChartComps.delete(e),r.activeCharts.delete(n))},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId};return this.activeCharts.add(n),this.activeChartComps.add(e),n},t.prototype.getSelectedRange=function(){var e=this.rangeService.getCellRanges();return e.length>0?e[0]:{}},t.prototype.generateId=function(){return"id-"+Math.random().toString(36).substr(2,16)},t.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach(function(e){return e.destroyChart()})},Oo([u.Optional("rangeService")],t.prototype,"rangeService",void 0),Oo([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Oo([u.Autowired("environment")],t.prototype,"environment",void 0),Oo([u.PreDestroy],t.prototype,"destroyAllActiveCharts",null),Oo([u.Bean("chartService")],t)}(u.BeanStub),KO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),XO=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}var e;return KO(t,o),e=t,t.prototype.translate=function(r,n){return this.gridOptionsWrapper.getLocaleTextFunc()(r,e.DEFAULT_TRANSLATIONS[r]||n)},t.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},t=e=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i}([u.Bean("chartTranslationService")],t),t}(u.BeanStub),qO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ja=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ZO=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}var e;return qO(t,o),e=t,t.prototype.filter=function(r,n){void 0===n&&(n=!1);var i=this.gridApi.getFilterModel();if(n)this.resetFilters(i);else{var a=e.extractFilterColId(r);this.isValidColumnFilter(a)?this.updateFilters(i,r,a):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+a+"'")}},t.prototype.resetFilters=function(r){Object.keys(r).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},t.prototype.updateFilters=function(r,n,i){var a,s=e.extractFilterColId(n),l=n.datum[s];if(void 0!==l){var c=l.toString();if(n.event.metaKey||n.event.ctrlKey){var h=this.getCurrentGridValuesForCategory(i),f=void 0;u._.includes(h,c)?f=h.filter(function(d){return d!==c}):(f=h).push(c),r[i]=this.getUpdatedFilterModel(i,f)}else(a={})[i]=this.getUpdatedFilterModel(i,f=[c]),r=a;this.gridApi.setFilterModel(r)}},t.prototype.getUpdatedFilterModel=function(r,n){return"agMultiColumnFilter"===this.getColumnFilterType(r)?{filterType:"multi",filterModels:[null,{filterType:"set",values:n}]}:{filterType:"set",values:n}},t.prototype.getCurrentGridValuesForCategory=function(r){var n=this,i=[],a=this.getColumnById(r);return this.gridApi.forEachNodeAfterFilter(function(s){if(a&&!s.group){var l=n.valueService.getValue(a,s)+"";i.includes(l)||i.push(l)}}),i},t.extractFilterColId=function(r){return r.xKey?r.xKey:r.labelKey},t.prototype.isValidColumnFilter=function(r){r.indexOf("-filtered-out")&&(r=r.replace("-filtered-out",""));var n=this.getColumnFilterType(r);return"boolean"==typeof n?n:u._.includes(["agSetColumnFilter","agMultiColumnFilter"],n)},t.prototype.getColumnFilterType=function(r){var n=this.getColumnById(r);if(n){var i=n.getColDef();return null!=i.filter?i.filter:i.filterFramework}},t.prototype.getColumnById=function(r){return this.columnModel.getGridColumn(r)},Ja([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Ja([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Ja([u.Autowired("valueService")],t.prototype,"valueService",void 0),e=Ja([u.Bean("chartCrossFilterService")],t)}(u.BeanStub),JO=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},QO=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},yu=function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(QO(arguments[t]));return o},tP=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.cellRanges=[],e.bodyScrollListener=e.onBodyScroll.bind(e),e.dragging=!1,e}return JO(t,o),t.prototype.init=function(){var e=this;this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,function(){return e.onColumnsChanged()}),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_CHANGED,function(){return e.removeAllCellRanges()}),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady(function(){var r=e.ctrlsService.getGridBodyCtrl();e.autoScrollService=new u.AutoScrollService({scrollContainer:r.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return r.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(n){return r.getScrollFeature().setVerticalScrollPosition(n)},getHorizontalPosition:function(){return r.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(n){return r.getScrollFeature().setHorizontalScrollPosition(n)},shouldSkipVerticalScroll:function(){return e.gridOptionsWrapper.getDomLayout()!==u.Constants.DOM_LAYOUT_NORMAL},shouldSkipHorizontalScroll:function(){return r.getScrollFeature().isHorizontalScrollShowing()}})})},t.prototype.onColumnsChanged=function(){var e=this;this.refreshLastRangeStart();var r=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach(function(i){var a=i.columns;i.columns=i.columns.filter(function(l){return l.isVisible()&&-1!==r.indexOf(l)}),!u._.areEqual(a,i.columns)&&e.dispatchChangedEvent(!1,!0,i.id)});var n=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(function(i){return i.columns.length>0}),n>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)},t.prototype.refreshLastRangeStart=function(){var e=u._.last(this.cellRanges);!e||this.refreshRangeStart(e)},t.prototype.isContiguousRange=function(e){var r=e.columns;if(!r.length)return!1;var n=this.columnModel.getAllDisplayedColumns(),i=r.map(function(a){return n.indexOf(a)}).sort(function(a,s){return a-s});return u._.last(i)-i[0]+1===r.length},t.prototype.getRangeStartRow=function(e){return e.startRow&&e.endRow?this.rowPositionUtils.before(e.startRow,e.endRow)?e.startRow:e.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?u.Constants.PINNED_TOP:null}},t.prototype.getRangeEndRow=function(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.endRow:e.startRow;var r=this.pinnedRowModel.getPinnedBottomRowCount();return r>0?{rowIndex:r-1,rowPinned:u.Constants.PINNED_BOTTOM}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}},t.prototype.setRangeToCell=function(e,r){if(void 0===r&&(r=!1),this.gridOptionsWrapper.isEnableRangeSelection()){var n=this.calculateColumnsBetween(e.column,e.column);if(n){(this.gridOptionsWrapper.isSuppressMultiRangeSelection()||!r||u._.missing(this.cellRanges))&&this.removeAllCellRanges(!0);for(var s,a={rowIndex:e.rowIndex,rowPinned:e.rowPinned},l=0;l<this.cellRanges.length;l++){var c=this.cellRanges[l];if(c.columns&&1===c.columns.length&&c.columns[0]===e.column&&this.rowPositionUtils.sameRow(a,c.startRow)&&this.rowPositionUtils.sameRow(a,c.endRow)){s=c;break}}s?u._.last(this.cellRanges)!==s&&(u._.removeFromArray(this.cellRanges,s),this.cellRanges.push(s)):this.cellRanges.push(s={startRow:a,endRow:a,columns:n,startColumn:e.column}),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0,s.id)}}},t.prototype.extendLatestRangeToCell=function(e){if(!this.isEmpty()&&this.newestRangeStartCell){var r=u._.last(this.cellRanges);this.updateRangeEnd(r,e)}},t.prototype.updateRangeEnd=function(e,r,n){void 0===n&&(n=!1);var a=this.calculateColumnsBetween(e.startColumn,r.column);!a||this.isLastCellOfRange(e,r)||(e.columns=a,e.endRow={rowIndex:r.rowIndex,rowPinned:r.rowPinned},n||this.dispatchChangedEvent(!0,!0,e.id))},t.prototype.refreshRangeStart=function(e){var r=e.startColumn,n=e.columns,i=function(p,f){var d=e.columns.filter(function(v){return v!==p});p?(e.startColumn=p,e.columns=f?yu([p],d):yu(d,[p])):e.columns=d},a=this.getRangeEdgeColumns(e),s=a.left,l=a.right;r===n[0]&&r!==s?i(s,!0):r===u._.last(n)&&r===l&&i(l,!1)},t.prototype.getRangeEdgeColumns=function(e){var r=this.columnModel.getAllDisplayedColumns(),n=e.columns.map(function(i){return r.indexOf(i)}).filter(function(i){return i>-1}).sort(function(i,a){return i-a});return{left:r[n[0]],right:r[u._.last(n)]}},t.prototype.extendLatestRangeInDirection=function(e){if(!this.isEmpty()&&this.newestRangeStartCell){var r=e.key,n=e.ctrlKey||e.metaKey,i=u._.last(this.cellRanges),a=this.newestRangeStartCell,s=i.columns[0],l=u._.last(i.columns),d=this.cellNavigationService.getNextCellToFocus(r,{column:a.column===s?l:s,rowIndex:i.endRow.rowIndex,rowPinned:i.endRow.rowPinned},n);if(d)return this.setCellRange({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,rowEndIndex:d.rowIndex,rowEndPinned:d.rowPinned,columnStart:a.column,columnEnd:d.column}),d}},t.prototype.setCellRange=function(e){!this.gridOptionsWrapper.isEnableRangeSelection()||(this.removeAllCellRanges(!0),this.addCellRange(e))},t.prototype.setCellRanges=function(e){var r=this;u._.shallowCompare(this.cellRanges,e)||(this.removeAllCellRanges(!0),e.forEach(function(n){n.columns&&n.startRow&&r.setNewestRangeStartCell({rowIndex:n.startRow.rowIndex,rowPinned:n.startRow.rowPinned,column:n.columns[0]}),r.cellRanges.push(n)}),this.dispatchChangedEvent(!1,!0))},t.prototype.setNewestRangeStartCell=function(e){this.newestRangeStartCell=e},t.prototype.createCellRangeFromCellRangeParams=function(e){var n,r=this,i=!1;if(e.columns)n=e.columns.map(function(h){return r.columnModel.getColumnWithValidation(h)}).filter(function(h){return h});else{var a=this.columnModel.getColumnWithValidation(e.columnStart),s=this.columnModel.getColumnWithValidation(e.columnEnd);if(!a||!s)return;(n=this.calculateColumnsBetween(a,s))&&n.length&&(i=n[0]!==a)}if(n)return{startRow:null!=e.rowStartIndex?{rowIndex:e.rowStartIndex,rowPinned:e.rowStartPinned||null}:void 0,endRow:null!=e.rowEndIndex?{rowIndex:e.rowEndIndex,rowPinned:e.rowEndPinned||null}:void 0,columns:n,startColumn:i?u._.last(n):n[0]}},t.prototype.addCellRange=function(e){if(this.gridOptionsWrapper.isEnableRangeSelection()){var r=this.createCellRangeFromCellRangeParams(e);r&&(r.startRow&&this.setNewestRangeStartCell({rowIndex:r.startRow.rowIndex,rowPinned:r.startRow.rowPinned,column:r.startColumn}),this.cellRanges.push(r),this.dispatchChangedEvent(!1,!0,r.id))}},t.prototype.getCellRanges=function(){return this.cellRanges},t.prototype.isEmpty=function(){return 0===this.cellRanges.length},t.prototype.isMoreThanOneCell=function(){var e=this.cellRanges.length;if(0===e)return!1;if(e>1)return!0;var r=this.cellRanges[0],n=this.getRangeStartRow(r),i=this.getRangeEndRow(r);return n.rowPinned!==i.rowPinned||n.rowIndex!==i.rowIndex||1!==r.columns.length},t.prototype.areAllRangesAbleToMerge=function(){var e,r,s,n=this,i=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach(function(f){for(var d=n.getRangeStartRow(f),v=n.getRangeEndRow(f),g=d,y=function(){var C=(g.rowPinned||"normal")+"_"+g.rowIndex,_=i.get(C),w=f.columns.map(function(O){return O.getId()});if(_){var P=w.filter(function(O){return-1===_.indexOf(O)});_.push.apply(_,yu(P))}else i.set(C,w);if(n.rowPositionUtils.sameRow(g,v))return"break";g=n.cellNavigationService.getRowBelow(g)};g&&"break"!==y(););});try{for(var l=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i.values()),c=l.next();!c.done;c=l.next()){var p=c.value.sort().join();if(void 0!==s){if(s!==p)return!1}else s=p}}catch(f){e={error:f}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return!0},t.prototype.removeAllCellRanges=function(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))},t.prototype.onBodyScroll=function(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)},t.prototype.isCellInAnyRange=function(e){return this.getCellRangeCount(e)>0},t.prototype.isCellInSpecificRange=function(e,r){var n=null!==r.columns&&u._.includes(r.columns,e.column),i=this.isRowInRange(e.rowIndex,e.rowPinned,r);return n&&i},t.prototype.isLastCellOfRange=function(e,r){var n=e.startRow,i=e.endRow,a=this.rowPositionUtils.before(n,i)?i:n,s=r.rowIndex===a.rowIndex&&r.rowPinned===a.rowPinned,l=e.columns[0],c=u._.last(e.columns);return r.column===(e.startColumn===l?c:l)&&s},t.prototype.isBottomRightCell=function(e,r){var n=this.columnModel.getAllDisplayedColumns(),i=e.columns.map(function(p){return n.indexOf(p)}).sort(function(p,f){return p-f}),a=e.startRow,s=e.endRow,l=this.rowPositionUtils.before(a,s)?s:a,c=n.indexOf(r.column)===u._.last(i),h=r.rowIndex===l.rowIndex&&u._.makeNull(r.rowPinned)===u._.makeNull(l.rowPinned);return c&&h},t.prototype.getCellRangeCount=function(e){var r=this;return this.isEmpty()?0:this.cellRanges.filter(function(n){return r.isCellInSpecificRange(e,n)}).length},t.prototype.isRowInRange=function(e,r,n){var i=this.getRangeStartRow(n),a=this.getRangeEndRow(n),s={rowIndex:e,rowPinned:r||null};if(s.rowIndex===i.rowIndex&&s.rowPinned==i.rowPinned||s.rowIndex===a.rowIndex&&s.rowPinned==a.rowPinned)return!0;var h=!this.rowPositionUtils.before(s,i),p=this.rowPositionUtils.before(s,a);return h&&p},t.prototype.getDraggingRange=function(){return this.draggingRange},t.prototype.onDragStart=function(e){if(this.gridOptionsWrapper.isEnableRangeSelection()){var i=e.shiftKey,a=e.ctrlKey||e.metaKey,l=!this.gridOptionsWrapper.isSuppressMultiRangeSelection()&&a,c=i&&u._.existsAndNotEmpty(this.cellRanges);if(!l&&(!c||u._.exists(u._.last(this.cellRanges).type))&&this.removeAllCellRanges(!0),this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),this.updateValuesOnMove(e),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,c||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=u._.last(this.cellRanges);else{var h={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:h,endRow:h,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}},t.prototype.updateValuesOnMove=function(e){var r=this.mouseEventService.getCellPositionForEvent(e);this.cellHasChanged=!1,!(!r||this.lastCellHovered&&this.cellPositionUtils.equals(r,this.lastCellHovered))&&(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=r)},t.prototype.onDragging=function(e){var r=this;if(this.dragging&&e){this.lastMouseEvent=e;var n=this.lastCellHovered,i=function(l){return n&&n.rowPinned===l&&r.newestRangeStartCell.rowPinned===l},a=i("top")||i("bottom");if(this.autoScrollService.check(e,a),this.cellHasChanged){var s=this.calculateColumnsBetween(this.newestRangeStartCell.column,n.column);!s||(this.draggingRange.endRow={rowIndex:n.rowIndex,rowPinned:n.rowPinned},this.draggingRange.columns=s,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}}},t.prototype.onDragStop=function(){if(this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0),this.dragging){var e=this.draggingRange.id;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.dispatchChangedEvent(!1,!0,e)}},t.prototype.dispatchChangedEvent=function(e,r,n){var i=Object.freeze({type:u.Events.EVENT_RANGE_SELECTION_CHANGED,api:this.gridApi,columnApi:this.columnApi,started:e,finished:r,id:n});this.eventService.dispatchEvent(i)},t.prototype.calculateColumnsBetween=function(e,r){var n=this.columnModel.getAllDisplayedColumns(),i=e===r,a=n.indexOf(e);if(a<0)console.warn("AG Grid: column "+e.getId()+" is not visible");else{var s=i?a:n.indexOf(r);if(!(s<0)){if(i)return[e];for(var l=Math.min(a,s),c=l===a?s:a,h=[],p=l;p<=c;p++)h.push(n[p]);return h}console.warn("AG Grid: column "+r.getId()+" is not visible")}},Rt([u.Autowired("rowModel")],t.prototype,"rowModel",void 0),Rt([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Rt([u.Autowired("mouseEventService")],t.prototype,"mouseEventService",void 0),Rt([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),Rt([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Rt([u.Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0),Rt([u.Autowired("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),Rt([u.Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Rt([u.Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),Rt([u.Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),Rt([u.PostConstruct],t.prototype,"init",null),Rt([u.Bean("rangeService")],t)}(u.BeanStub),rP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},up=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.changedCalculatedValues=!1,e.dragging=!1,e.shouldDestroyOnEndDragging=!1,e}return rP(t,o),t.prototype.init=function(){var e=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(r){e.dragging=!0,e.rangeService.autoScrollService.check(r),e.changedCalculatedValues&&(e.onDrag(r),e.changedCalculatedValues=!1)},onDragStop:function(r){e.dragging=!1,e.onDragEnd(r),e.clearValues(),e.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(e.getDraggingCssClass()),e.shouldDestroyOnEndDragging&&e.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))},t.prototype.isDragging=function(){return this.dragging},t.prototype.getCellCtrl=function(){return this.cellCtrl},t.prototype.setCellCtrl=function(e){this.cellCtrl=e},t.prototype.getCellRange=function(){return this.cellRange},t.prototype.setCellRange=function(e){this.cellRange=e},t.prototype.getRangeStartRow=function(){return this.rangeStartRow},t.prototype.setRangeStartRow=function(e){this.rangeStartRow=e},t.prototype.getRangeEndRow=function(){return this.rangeEndRow},t.prototype.setRangeEndRow=function(e){this.rangeEndRow=e},t.prototype.getLastCellHovered=function(){return this.lastCellHovered},t.prototype.preventRangeExtension=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.onDragStart=function(e){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())},t.prototype.getDraggingCssClass=function(){return"ag-dragging-"+(this.type===u.SelectionHandleType.FILL?"fill":"range")+"-handle"},t.prototype.updateValuesOnMove=function(e){var r=this.mouseEventService.getCellPositionForEvent(e);!r||this.lastCellHovered&&this.cellPositionUtils.equals(r,this.lastCellHovered)||(this.lastCellHovered=r,this.changedCalculatedValues=!0)},t.prototype.getType=function(){return this.type},t.prototype.refresh=function(e){var r=this.getCellCtrl(),n=this.getGui(),i=u._.last(this.rangeService.getCellRanges()),a=i.startRow,s=i.endRow;if(a&&s&&(this.rowPositionUtils.before(s,a)?(this.setRangeStartRow(s),this.setRangeEndRow(a)):(this.setRangeStartRow(a),this.setRangeEndRow(s))),r!==e||!u._.isVisible(n)){this.setCellCtrl(e);var c=e.getComp().getParentOfValue();c&&c.appendChild(n)}this.setCellRange(i)},t.prototype.clearValues=function(){this.lastCellHovered=void 0,this.removeListeners()},t.prototype.removeListeners=function(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)},t.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging())return u._.setDisplayed(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,o.prototype.destroy.call(this),this.removeListeners();var e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)},zt([u.Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),zt([u.Autowired("dragService")],t.prototype,"dragService",void 0),zt([u.Autowired("rangeService")],t.prototype,"rangeService",void 0),zt([u.Autowired("mouseEventService")],t.prototype,"mouseEventService",void 0),zt([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),zt([u.Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0),zt([u.Autowired("navigationService")],t.prototype,"navigationService",void 0),zt([u.Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),zt([u.Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),zt([u.Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),zt([u.PostConstruct],t.prototype,"init",null),t}(u.Component),nP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_i=function(){return _i=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},_i.apply(this,arguments)},oP=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},cp=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.markedCells=[],e.cellValues=[],e.isUp=!1,e.isLeft=!1,e.isReduce=!1,e.type=u.SelectionHandleType.FILL,e}return nP(t,o),t.prototype.updateValuesOnMove=function(e){o.prototype.updateValuesOnMove.call(this,e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));var f,r=this.initialXY,n=r.x,i=r.y,a=this.mouseEventService.getNormalisedPosition(e),l=a.y,c=Math.abs(n-a.x),h=Math.abs(i-l),p=this.gridOptionsWrapper.getFillHandleDirection();(f="xy"===p?c>h?"x":"y":p)!==this.dragAxis&&(this.dragAxis=f,this.changedCalculatedValues=!0)},t.prototype.onDrag=function(e){if(!this.initialPosition){var r=this.getCellCtrl();if(!r)return;this.initialPosition=r.getCellPosition()}var n=this.getLastCellHovered();n&&this.markPathFrom(this.initialPosition,n)},t.prototype.onDragEnd=function(e){if(this.initialXY=null,this.markedCells.length){var l,r="x"===this.dragAxis,n=this.getCellRange(),i=n.columns.length,a=this.getRangeStartRow(),s=this.getRangeEndRow();if(this.isUp||this.isLeft){var c=r?a:this.lastCellMarked;l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:c.rowIndex,rowStartPinned:c.rowPinned,columnStart:r?this.lastCellMarked.column:n.columns[0],rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnEnd:n.columns[i-1]})}else l=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,columnStart:n.columns[0],rowEndIndex:r?s.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:r?s.rowPinned:this.lastCellMarked.rowPinned,columnEnd:r?this.lastCellMarked.column:n.columns[i-1]});l&&(this.raiseFillStartEvent(),this.handleValueChanged(n,l,e),this.rangeService.setCellRanges([l]),this.raiseFillEndEvent(n,l))}},t.prototype.raiseFillStartEvent=function(){var e={type:u.Events.EVENT_FILL_START,columnApi:this.gridOptionsWrapper.getColumnApi(),api:this.gridOptionsWrapper.getApi()};this.eventService.dispatchEvent(e)},t.prototype.raiseFillEndEvent=function(e,r){var n={type:u.Events.EVENT_FILL_END,columnApi:this.gridOptionsWrapper.getColumnApi(),api:this.gridOptionsWrapper.getApi(),initialRange:e,finalRange:r};this.eventService.dispatchEvent(n)},t.prototype.handleValueChanged=function(e,r,n){var i=this,a=this.rangeService.getRangeEndRow(e),s=this.rangeService.getRangeStartRow(e),l=this.rangeService.getRangeEndRow(r),c=this.rangeService.getRangeStartRow(r),h="y"===this.dragAxis;if(!this.isReduce||this.gridOptionsWrapper.isSuppressClearOnFillReduction()){var d=!0,v=[],g=[],y=0,m=function(){v.length=0,g.length=0,y=0},C=function(w,P){var O=i.isUp?a:s,A=!1;h&&(d=!0,m());for(var E=function(){var R=i.rowPositionUtils.getRowNode(O);if(!R)return"break";h&&w?_(v,w,R,function(){return!i.rowPositionUtils.sameRow(O,i.isUp?s:a)}):P&&(d=!0,m(),P.forEach(function(B){return _(v,B,R,function(){return B!==(i.isLeft?e.columns[0]:u._.last(e.columns))})})),A=i.rowPositionUtils.sameRow(O,i.isUp?c:l),O=i.isUp?i.cellNavigationService.getRowAbove(O):i.cellNavigationService.getRowBelow(O)};!A&&O&&"break"!==E(););},_=function(w,P,O,A){var E,M=!1;if(d)E=i.valueService.getValue(P,O),g.push(E),d=A();else{var R=i.processValues(n,w,g,P,O,y++),j=R.fromUserFunction;if(E=R.value,P.isCellEditable(O)){var I=i.valueService.getValue(P,O);j&&I===E?M=!0:O.setDataValue(P,E)}}M||w.push(E)};h?e.columns.forEach(function(w){C(w)}):(p=this.isLeft?function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(oP(arguments[t]));return o}(r.columns).reverse():r.columns,C(void 0,p))}else{var p=h?e.columns:e.columns.filter(function(w){return r.columns.indexOf(w)<0}),f=h?this.cellNavigationService.getRowBelow(l):c;f&&this.clearCellsInRange(f,a,p)}},t.prototype.clearCellsInRange=function(e,r,n){for(var i=e,a=!1,s=function(){var h=l.rowPositionUtils.getRowNode(i);if(!h)return"break";n.forEach(function(p){p.isCellEditable(h)&&h.setDataValue(p,null)}),a=l.rowPositionUtils.sameRow(i,r),i=l.cellNavigationService.getRowBelow(i)},l=this;!a&&i&&"break"!==s(););},t.prototype.processValues=function(e,r,n,i,a,s){var h,l=this.gridOptionsWrapper.getFillOperation();if(h="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",l){var f=l({event:e,values:r,initialValues:n,currentIndex:s,currentCellValue:this.valueService.getValue(i,a),direction:h,column:i,rowNode:a});if(!1!==f)return{value:f,fromUserFunction:!0}}var d=!r.some(function(g){var y=parseFloat(g);return isNaN(y)||y.toString()!==g.toString()});if(e.altKey||!d){if(d&&1===n.length){var v=this.isUp||this.isLeft?-1:1;return{value:parseFloat(u._.last(r))+1*v,fromUserFunction:!1}}return{value:r[s%r.length],fromUserFunction:!1}}return{value:u._.last(u._.findLineByLeastSquares(r.map(Number))),fromUserFunction:!1}},t.prototype.clearValues=function(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,o.prototype.clearValues.call(this)},t.prototype.clearMarkedPath=function(){this.markedCells.forEach(function(e){var r=e.getComp();r.addOrRemoveCssClass("ag-selection-fill-top",!1),r.addOrRemoveCssClass("ag-selection-fill-right",!1),r.addOrRemoveCssClass("ag-selection-fill-bottom",!1),r.addOrRemoveCssClass("ag-selection-fill-left",!1)}),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1},t.prototype.clearCellValues=function(){this.cellValues.length=0},t.prototype.markPathFrom=function(e,r){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(this.rowPositionUtils.sameRow(r,e))return;var n=this.rowPositionUtils.before(r,e),i=this.getRangeStartRow(),a=this.getRangeEndRow();n&&(r.rowPinned==i.rowPinned&&r.rowIndex>=i.rowIndex||i.rowPinned!=a.rowPinned&&r.rowPinned==a.rowPinned&&r.rowIndex<=a.rowIndex)?(this.reduceVertical(e,r),this.isReduce=!0):(this.extendVertical(e,r,n),this.isReduce=!1)}else{var s=e.column,l=r.column;if(s===l)return;var c=this.columnModel.getAllDisplayedColumns(),h=c.indexOf(s),p=c.indexOf(l);p<=h&&p>=c.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(e,r),this.isReduce=!0):(this.extendHorizontal(e,r,p<h),this.isReduce=!1)}this.lastCellMarked=r},t.prototype.extendVertical=function(e,r,n){var a=this.navigationService,s=this.rangeService,l=e;do{for(var c=this.getCellRange(),h=c.columns.length,p=0;p<h;p++){var f=c.columns[p],v=_i(_i({},{rowIndex:l.rowIndex,rowPinned:l.rowPinned}),{column:f}),g=s.isCellInSpecificRange(v,c),y=this.rowPositionUtils.sameRow(l,e);if(n&&(this.isUp=!0),!y){var m=a.getCellByPosition(v);if(m){this.markedCells.push(m);var C=m.getComp();g||(C.addOrRemoveCssClass("ag-selection-fill-left",0===p),C.addOrRemoveCssClass("ag-selection-fill-right",p===h-1)),C.addOrRemoveCssClass(n?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(l,r))}}}if(this.rowPositionUtils.sameRow(l,r))break}while(l=n?this.cellNavigationService.getRowAbove(l):this.cellNavigationService.getRowBelow(l))},t.prototype.reduceVertical=function(e,r){var n=e;do{for(var i=this.getCellRange(),a=i.columns.length,s=this.rowPositionUtils.sameRow(n,r),l=0;l<a;l++){var h=_i(_i({},{rowIndex:n.rowIndex,rowPinned:n.rowPinned}),{column:i.columns[l]}),p=this.navigationService.getCellByPosition(h);p&&(this.markedCells.push(p),p.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(n,r)))}if(s)break}while(n=this.cellNavigationService.getRowAbove(n))},t.prototype.extendHorizontal=function(e,r,n){var i=this,a=this.columnModel.getAllDisplayedColumns(),s=a.indexOf(n?r.column:e.column),l=a.indexOf(n?this.getCellRange().columns[0]:r.column),c=n?0:1,h=a.slice(s+c,l+c),p=this.getRangeStartRow(),f=this.getRangeEndRow();h.forEach(function(d){var v=p,g=!1;do{g=i.rowPositionUtils.sameRow(v,f);var y=i.navigationService.getCellByPosition({rowIndex:v.rowIndex,rowPinned:v.rowPinned,column:d});if(y){i.markedCells.push(y);var m=y.getComp();m.addOrRemoveCssClass("ag-selection-fill-top",i.rowPositionUtils.sameRow(v,p)),m.addOrRemoveCssClass("ag-selection-fill-bottom",i.rowPositionUtils.sameRow(v,f)),n?(i.isLeft=!0,m.addOrRemoveCssClass("ag-selection-fill-left",d===h[0])):m.addOrRemoveCssClass("ag-selection-fill-right",d===u._.last(h))}v=i.cellNavigationService.getRowBelow(v)}while(!g)})},t.prototype.reduceHorizontal=function(e,r){var n=this,i=this.columnModel.getAllDisplayedColumns(),a=i.indexOf(r.column),s=i.indexOf(e.column),l=i.slice(a,s),c=this.getRangeStartRow(),h=this.getRangeEndRow();l.forEach(function(p){var f=c,d=!1;do{d=n.rowPositionUtils.sameRow(f,h);var v=n.navigationService.getCellByPosition({rowIndex:f.rowIndex,rowPinned:f.rowPinned,column:p});v&&(n.markedCells.push(v),v.getComp().addOrRemoveCssClass("ag-selection-fill-right",p===l[0])),f=n.cellNavigationService.getRowBelow(f)}while(!d)})},t.prototype.refresh=function(e){var r=this.rangeService.getCellRanges()[0];r.startRow&&r.endRow?o.prototype.refresh.call(this,e):this.destroy()},t.TEMPLATE='<div class="ag-fill-handle"></div>',function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([u.Autowired("valueService")],t.prototype,"valueService",void 0),t}(up),sP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qa=function(){return Qa=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Qa.apply(this,arguments)},hp=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.type=u.SelectionHandleType.RANGE,e.rangeFixed=!1,e}return sP(t,o),t.prototype.onDrag=function(e){var r=this.getLastCellHovered();if(r){var n=this.rangeService.getCellRanges(),i=u._.last(n);this.rangeFixed||(this.fixRangeStartEnd(i),this.rangeFixed=!0),this.endPosition={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column},2===n.length&&n[0].type===u.CellRangeType.DIMENSION&&i.type===u.CellRangeType.VALUE&&!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(i))&&this.rangeService.updateRangeEnd(n[0],Qa(Qa({},this.endPosition),{column:n[0].columns[0]}),!0),this.rangeService.extendLatestRangeToCell(this.endPosition)}},t.prototype.onDragEnd=function(e){var r=u._.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(r),this.rangeFixed=!1},t.prototype.fixRangeStartEnd=function(e){var r=this.rangeService.getRangeStartRow(e),n=this.rangeService.getRangeEndRow(e),i=e.columns[0];e.startRow=r,e.endRow=n,e.startColumn=i},t.TEMPLATE='<div class="ag-range-handle"></div>',t}(up),lP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),cP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return lP(t,o),t.prototype.createSelectionHandle=function(e){return this.createBean(e===u.SelectionHandleType.RANGE?new hp:new cp)},t=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i}([u.Bean("selectionHandleFactory")],t),t}(u.BeanStub),fp={moduleName:u.ModuleNames.RangeSelectionModule,beans:[tP,cP],agStackComponents:[{componentName:"AgFillHandle",componentClass:cp},{componentName:"AgRangeHandle",componentClass:hp}],dependantModules:[Re]},hP={moduleName:u.ModuleNames.GridChartsModule,beans:[$O,XO,ZO],dependantModules:[fp,Re]},fP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mu=function(){return mu=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},mu.apply(this,arguments)},Cu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pp=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.loadRowDataVersion=0,e.needRefresh=!1,e}return fP(t,o),t.prototype.init=function(e,r){var n=this;this.params=r,this.comp=e,null!=r.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(r.node.parent,u.RowNode.EVENT_DATA_CHANGED,function(){n.needRefresh=!0}),this.addManagedListener(this.eventService,u.Events.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},t.prototype.onFullWidthRowFocused=function(e){var r=this.params;!this.rowPositionUtils.sameRow({rowIndex:r.node.rowIndex,rowPinned:r.node.rowPinned},{rowIndex:e.rowIndex,rowPinned:e.rowPinned})||this.focusService.focusInto(this.comp.getGui(),e.fromBelow)},t.prototype.setAutoHeightClasses=function(){var e=this.gridOptionsWrapper.isDetailRowAutoHeight(),n=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(e?"ag-details-row-auto-height":"ag-details-row-fixed-height",!0),this.comp.addOrRemoveDetailGridCssClass(n,!0)},t.prototype.setupRefreshStrategy=function(){if(this.params.suppressRefresh)return console.warn("AG Grid: as of v23.2.0, cellRendererParams.suppressRefresh for Detail Cell Renderer is no longer used. Please set cellRendererParams.refreshStrategy = 'nothing' instead."),void(this.refreshStrategy="nothing");var e=this.params.refreshStrategy;"everything"==e||"nothing"==e||"rows"==e?this.refreshStrategy=e:(null!=e&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+e+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows")},t.prototype.addThemeToDetailGrid=function(){var e=this.environment.getTheme().theme;e&&this.comp.addOrRemoveDetailGridCssClass(e,!0)},t.prototype.createDetailGrid=function(){if(u._.missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var e=this.gridOptionsWrapper.isDetailRowAutoHeight(),r=mu({},this.params.detailGridOptions);e&&(r.domLayout="autoHeight"),this.comp.setDetailGrid(r)}},t.prototype.registerDetailWithMaster=function(e,r){var n=this.params.node.id,i=this.params.api,a={id:n,api:e,columnApi:r},s=this.params.node;i.addDetailGridInfo(n,a),s.detailGridInfo=a,this.addDestroyFunc(function(){s.detailGridInfo===a&&(i.removeDetailGridInfo(n),s.detailGridInfo=null)})},t.prototype.loadRowData=function(){var e=this;this.loadRowDataVersion++;var r=this.loadRowDataVersion,n=this.params.getDetailRowData;n?n({node:this.params.node,data:this.params.node.data,successCallback:function(s){e.loadRowDataVersion===r&&e.comp.setRowData(s)},context:this.gridOptionsWrapper.getContext()}):console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},t.prototype.refresh=function(){return!(this.needRefresh&&"nothing"!==this.refreshStrategy&&(this.needRefresh=!1,"everything"===this.refreshStrategy||(this.loadRowData(),0)))},Cu([u.Autowired("environment")],t.prototype,"environment",void 0),Cu([u.Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),Cu([u.Autowired("focusService")],t.prototype,"focusService",void 0),t}(u.BeanStub),pP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return pP(t,o),t.prototype.init=function(e){var r=this;this.params=e,this.selectAndSetTemplate();var n={addOrRemoveCssClass:function(i,a){return r.addOrRemoveCssClass(i,a)},addOrRemoveDetailGridCssClass:function(i,a){return r.eDetailGrid.classList.toggle(i,a)},setDetailGrid:function(i){return r.setDetailGrid(i)},setRowData:function(i){return r.setRowData(i)},getGui:function(){return r.eDetailGrid}};this.ctrl=this.createManagedBean(new pp),this.ctrl.init(n,e)},t.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.selectAndSetTemplate=function(){var e=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var r=function(){e.setTemplate(t.TEMPLATE)};if(u._.missing(this.params.template))r();else if("string"==typeof this.params.template)this.setTemplate(this.params.template);else if("function"==typeof this.params.template){var i=(0,this.params.template)(this.params);this.setTemplate(i)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),r();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},t.prototype.setDetailGrid=function(e){if(this.eDetailGrid){var r=this.context.getBean("agGridReact"),n=r?u._.cloneObject(r):void 0,i=this.context.getBean("frameworkComponentWrapper"),a=this.getFrameworkOverrides();new u.Grid(this.eDetailGrid,e,{frameworkOverrides:a,providedBeanInstances:{agGridReact:n,frameworkComponentWrapper:i}}),this.detailApi=e.api,this.ctrl.registerDetailWithMaster(e.api,e.columnApi),this.addDestroyFunc(function(){e.api&&e.api.destroy()})}},t.prototype.setRowData=function(e){this.detailApi&&this.detailApi.setRowData(e)},t.TEMPLATE='<div class="ag-details-row">\n            <div ref="eDetailGrid" class="ag-details-grid"></div>\n        </div>',function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([u.RefSelector("eDetailGrid")],t.prototype,"eDetailGrid",void 0),t}(u.Component),gP={moduleName:u.ModuleNames.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:vP}],controllers:[{controllerName:"detailCellRenderer",controllerClass:pp}],dependantModules:[Re]},dp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ft=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},yP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return dp(t,o),t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.showMenuAfterMouseEvent=function(e,r,n){var i=this;this.showMenu(e,function(a){var s=a.getGui();i.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:e,mouseEvent:r,ePopup:s}),n&&a.showTab(n)},"columnMenu",n,void 0,r.target)},t.prototype.showMenuAfterButtonClick=function(e,r,n,i,a){var s=this,l=-1,c="left";this.gridOptionsWrapper.isEnableRtl()&&(l=1,c="right"),this.showMenu(e,function(h){var p=h.getGui();s.popupService.positionPopupUnderComponent({type:n,column:e,eventSource:r,ePopup:p,alignSide:c,nudgeX:9*l,nudgeY:-23,keepWithinBounds:!0}),i&&h.showTab(i)},n,i,a,r)},t.prototype.showMenu=function(e,r,n,i,a,s){var l=this,c=this.createBean(new _u(e,this.lastSelectedTab,a)),h=c.getGui(),p=s||this.ctrlsService.getGridBodyCtrl().getGui(),f=[];f.push(function(y){if(l.destroyBean(c),e.setMenuVisible(!1,"contextMenu"),y instanceof KeyboardEvent&&s&&u._.isVisible(s)){var C=l.focusService.findTabbableParent(s);C&&C.focus()}});var d=this.gridOptionsWrapper.getLocaleTextFunc(),v=this.popupService.addPopup({modal:!0,eChild:h,closeOnEsc:!0,closedCallback:function(y){f.forEach(function(m){return m(y)})},afterGuiAttached:function(y){return c.afterGuiAttached(Object.assign({},{container:n},y))},positionCallback:function(){return r(c)},anchorToElement:p,ariaLabel:d("ariaLabelColumnMenu","Column Menu")});if(v){var g=v.stopAnchoringPromise;g&&g.then(function(y){e.addEventListener(u.Column.EVENT_LEFT_CHANGED,y),e.addEventListener(u.Column.EVENT_VISIBLE_CHANGED,y),f.push(function(){e.removeEventListener(u.Column.EVENT_LEFT_CHANGED,y),e.removeEventListener(u.Column.EVENT_VISIBLE_CHANGED,y)})})}i||(c.showTabBasedOnPreviousSelection(),r(c)),c.addEventListener(_u.EVENT_TAB_SELECTED,function(y){l.lastSelectedTab=y.key}),e.setMenuVisible(!0,"contextMenu"),this.activeMenu=c,c.addEventListener(u.BeanStub.EVENT_DESTROYED,function(){l.activeMenu===c&&(l.activeMenu=null)})},t.prototype.isMenuEnabled=function(e){return e.getMenuTabs(_u.TABS_DEFAULT).length>0},Ft([u.Autowired("popupService")],t.prototype,"popupService",void 0),Ft([u.Autowired("focusService")],t.prototype,"focusService",void 0),Ft([u.Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),Ft([u.Bean("menuFactory")],t)}(u.BeanStub),_u=function(o){function t(e,r,n){var i=o.call(this)||this;return i.tabFactories={},i.includeChecks={},i.column=e,i.initialSelection=r,i.tabFactories[t.TAB_GENERAL]=i.createMainPanel.bind(i),i.tabFactories[t.TAB_FILTER]=i.createFilterPanel.bind(i),i.tabFactories[t.TAB_COLUMNS]=i.createColumnsPanel.bind(i),i.includeChecks[t.TAB_GENERAL]=function(){return!0},i.includeChecks[t.TAB_FILTER]=function(){return e.isFilterAllowed()},i.includeChecks[t.TAB_COLUMNS]=function(){return!0},i.restrictTo=n,i}return dp(t,o),t.prototype.init=function(){var e=this,r=this.getTabsToCreate().map(function(n){return e.createTab(n)});this.tabbedLayout=new u.TabbedLayout({items:r,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout)},t.prototype.getTabsToCreate=function(){var e=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(t.TABS_DEFAULT).filter(function(r){return e.isValidMenuTabItem(r)}).filter(function(r){return e.isNotSuppressed(r)}).filter(function(r){return e.isModuleLoaded(r)})},t.prototype.isModuleLoaded=function(e){return e!==t.TAB_COLUMNS||u.ModuleRegistry.isRegistered(u.ModuleNames.ColumnToolPanelModule)},t.prototype.isValidMenuTabItem=function(e){var r=!0,n=t.TABS_DEFAULT;return null!=this.restrictTo&&(r=this.restrictTo.indexOf(e)>-1,n=this.restrictTo),(r=r&&t.TABS_DEFAULT.indexOf(e)>-1)||console.warn("AG Grid: Trying to render an invalid menu item '"+e+"'. Check that your 'menuTabs' contains one of ["+n+"]"),r},t.prototype.isNotSuppressed=function(e){return this.includeChecks[e]()},t.prototype.createTab=function(e){return this.tabFactories[e]()},t.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},t.prototype.showTab=function(e){this.tabItemColumns&&e===t.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===t.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===t.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},t.prototype.onTabItemClicked=function(e){var r=null;switch(e.item){case this.tabItemColumns:r=t.TAB_COLUMNS;break;case this.tabItemFilter:r=t.TAB_FILTER;break;case this.tabItemGeneral:r=t.TAB_GENERAL}r&&this.activateTab(r)},t.prototype.activateTab=function(e){this.dispatchEvent({type:t.EVENT_TAB_SELECTED,key:e})},t.prototype.getMenuItems=function(){var r,e=this.getDefaultMenuOptions(),n=this.gridOptionsWrapper.getMainMenuItemsFunc();return r=n?n({column:this.column,defaultItems:e}):e,u._.removeRepeatsFromArray(r,t.MENU_ITEM_SEPARATOR),r},t.prototype.getDefaultMenuOptions=function(){var e=[],r=!this.column.getColDef().lockPinned,n=this.columnModel.getRowGroupColumns().length,i=n>0,a=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,s=this.column.isAllowValue(),l=this.column.isAllowRowGroup(),c=this.column.isPrimary(),h=this.columnModel.isPivotMode(),p=this.rowModel.getType()===u.Constants.ROW_MODEL_TYPE_CLIENT_SIDE,f=this.gridOptionsWrapper.isTreeData(),d=c&&i&&s||!c;return r&&e.push("pinSubMenu"),d&&e.push("valueAggSubMenu"),(r||d)&&e.push(t.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(t.MENU_ITEM_SEPARATOR),l&&this.column.isPrimary()&&e.push(a?"rowUnGroup":"rowGroup"),e.push(t.MENU_ITEM_SEPARATOR),e.push("resetColumns"),p&&(f||n>(h?1:0))&&(e.push("expandAll"),e.push("contractAll")),e},t.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new u.AgMenuList);var e=this.getMenuItems(),r=this.menuItemMapper.mapWithStockItems(e,this.column);return this.mainMenuList.addMenuItems(r),this.mainMenuList.addEventListener(u.AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:u._.createIconNoSpan("menu",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_GENERAL.replace("MenuTab",""),bodyPromise:u.AgPromise.resolve(this.mainMenuList.getGui()),name:t.TAB_GENERAL},this.tabItemGeneral},t.prototype.onHidePopup=function(e){var r;e&&e.event&&e.event instanceof KeyboardEvent&&(r=e.event),this.hidePopupFunc(r&&{keyboardEvent:r});var n=this.focusService.getFocusedCell(),i=this.gridOptionsWrapper.getDocument();i.activeElement===i.body&&n&&this.focusService.setFocusedCell(n.rowIndex,n.column,n.rowPinned,!0)},t.prototype.createFilterPanel=function(){var e,r=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!r)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:u._.createIconNoSpan("filter",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_FILTER.replace("MenuTab",""),bodyPromise:null===(e=r)||void 0===e?void 0:e.guiPromise,afterAttachedCallback:function(i){var a;!(null===(a=r)||void 0===a?void 0:a.filterPromise)||r.filterPromise.then(function(s){s&&s.afterGuiAttached&&s.afterGuiAttached(i)})},name:t.TAB_FILTER},this.tabItemFilter},t.prototype.createColumnsPanel=function(){var e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper"),this.columnSelectPanel=this.createManagedBean(new Ds);var r=this.column.getColDef().columnsMenuParams;r||(r={}),this.columnSelectPanel.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!r.contractColumnSelection,suppressColumnExpandAll:!!r.suppressColumnExpandAll,suppressColumnFilter:!!r.suppressColumnFilter,suppressColumnSelectAll:!!r.suppressColumnSelectAll,suppressSyncLayoutWithGrid:!!r.suppressSyncLayoutWithGrid,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()},"columnMenu");var n=this.columnSelectPanel.getGui();return n.classList.add("ag-menu-column-select"),e.appendChild(n),this.tabItemColumns={title:u._.createIconNoSpan("columns",this.gridOptionsWrapper,this.column),titleLabel:t.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:u.AgPromise.resolve(e),name:t.TAB_COLUMNS},this.tabItemColumns},t.prototype.afterGuiAttached=function(e){var n=e.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:e.container,hidePopup:n}),n&&(this.hidePopupFunc=n,this.addDestroyFunc(n))},t.prototype.getGui=function(){return this.tabbedLayout.getGui()},t.EVENT_TAB_SELECTED="tabSelected",t.TAB_FILTER="filterMenuTab",t.TABS_DEFAULT=[t.TAB_GENERAL="generalMenuTab",t.TAB_FILTER,t.TAB_COLUMNS="columnsMenuTab"],t.MENU_ITEM_SEPARATOR="separator",Ft([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Ft([u.Autowired("filterManager")],t.prototype,"filterManager",void 0),Ft([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Ft([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),Ft([u.Autowired("menuItemMapper")],t.prototype,"menuItemMapper",void 0),Ft([u.Autowired("rowModel")],t.prototype,"rowModel",void 0),Ft([u.Autowired("focusService")],t.prototype,"focusService",void 0),Ft([u.PostConstruct],t.prototype,"init",null),t}(u.BeanStub),vp=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},gp="ag-context-menu-open",CP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return vp(t,o),t.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},t.prototype.getMenuItems=function(e,r,n){var i=[];if(u._.exists(e)&&u.ModuleRegistry.isRegistered(u.ModuleNames.ClipboardModule)&&r&&i.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator"),this.gridOptionsWrapper.isEnableCharts()&&u.ModuleRegistry.isRegistered(u.ModuleNames.RangeSelectionModule)&&u.ModuleRegistry.isRegistered(u.ModuleNames.GridChartsModule)&&(this.columnModel.isPivotMode()&&i.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&i.push("chartRange")),u._.exists(e)){var a=!u.ModuleRegistry.isRegistered(u.ModuleNames.CsvExportModule),s=!u.ModuleRegistry.isRegistered(u.ModuleNames.ExcelExportModule),l=this.gridOptionsWrapper.isSuppressExcelExport()||s,c=this.gridOptionsWrapper.isSuppressCsvExport()||a;!(u._.isIOSUserAgent()||l&&c)&&i.push("export")}if(this.gridOptionsWrapper.getContextMenuItemsFunc()){var f=this.gridOptionsWrapper.getContextMenuItemsFunc();return f?f({node:e,column:r,value:n,defaultItems:i.length?i:void 0}):void 0}return i},t.prototype.onContextMenu=function(e,r,n,i,a,s){!this.gridOptionsWrapper.isAllowContextMenuWithControlKey()&&e&&(e.ctrlKey||e.metaKey)||(e&&this.blockMiddleClickScrollsIfNeeded(e),this.gridOptionsWrapper.isSuppressContextMenu())||this.showMenu(n,i,a,e||r.touches[0],s)&&(e||r).preventDefault()},t.prototype.blockMiddleClickScrollsIfNeeded=function(e){var n=e.which;this.gridOptionsWrapper.isSuppressMiddleClickScrolls()&&2===n&&e.preventDefault()},t.prototype.showMenu=function(e,r,n,i,a){var s=this,l=this.getMenuItems(e,r,n),c=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===l||u._.missingOrEmpty(l))return!1;var h=new _P(l);this.createBean(h);var p=h.getGui(),f={column:r,rowNode:e,type:"contextMenu",mouseEvent:i,ePopup:p,nudgeY:1},d=this.gridOptionsWrapper.getLocaleTextFunc(),v=this.popupService.addPopup({modal:!0,eChild:p,closeOnEsc:!0,closedCallback:function(){c.classList.remove(gp),s.destroyBean(h)},click:i,positionCallback:function(){s.popupService.positionPopupUnderMouseEvent(Object.assign({},{nudgeX:s.gridOptionsWrapper.isEnableRtl()?-1*(p.offsetWidth+1):1},f))},anchorToElement:a,ariaLabel:d("ariaLabelContextMenu","Context Menu")});return v&&(c.classList.add(gp),h.afterGuiAttached({container:"contextMenu",hidePopup:v.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=h,h.addEventListener(u.BeanStub.EVENT_DESTROYED,function(){s.activeMenu===h&&(s.activeMenu=null)}),v&&h.addEventListener(u.AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,v.hideFunc),!0},Sr([u.Autowired("popupService")],t.prototype,"popupService",void 0),Sr([u.Optional("rangeService")],t.prototype,"rangeService",void 0),Sr([u.Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),Sr([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Sr([u.Bean("contextMenuFactory")],t)}(u.BeanStub),_P=function(o){function t(e){var r=o.call(this,'<div class="ag-menu" role="presentation"></div>')||this;return r.menuList=null,r.focusedCell=null,r.menuItems=e,r}return vp(t,o),t.prototype.addMenuItems=function(){var e=this,r=this.createBean(new u.AgMenuList),n=this.menuItemMapper.mapWithStockItems(this.menuItems,null);r.addMenuItems(n),this.appendChild(r),this.menuList=r,r.addEventListener(u.AgMenuItemComponent.EVENT_MENU_ITEM_SELECTED,function(i){return e.dispatchEvent(i)})},t.prototype.afterGuiAttached=function(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},t.prototype.restoreFocusedCell=function(){var e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){var r=this.focusedCell,n=r.rowIndex,i=r.rowPinned,a=r.column,s=this.gridOptionsWrapper.getDocument();s.activeElement===s.body&&this.focusService.setFocusedCell(n,a,i,!0)}},t.prototype.destroy=function(){this.restoreFocusedCell(),o.prototype.destroy.call(this)},Sr([u.Autowired("menuItemMapper")],t.prototype,"menuItemMapper",void 0),Sr([u.Autowired("focusService")],t.prototype,"focusService",void 0),Sr([u.Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),Sr([u.PostConstruct],t.prototype,"addMenuItems",null),t}(u.Component),bP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),bi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},SP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return bP(t,o),t.prototype.mapWithStockItems=function(e,r){var n=this;if(!e)return[];var i=[];return e.forEach(function(a){var s;if(s="string"==typeof a?n.getStockMenuItem(a,r):a){var c=s.subMenu;c&&c instanceof Array&&(s.subMenu=n.mapWithStockItems(s.subMenu,r)),null!=s&&i.push(s)}}),i},t.prototype.getStockMenuItem=function(e,r){var n=this,i=this.gridOptionsWrapper.getLocaleTextFunc(),a=this.gridOptionsWrapper.isSkipHeaderOnAutoSize();switch(e){case"pinSubMenu":return{name:i("pinColumn","Pin Column"),icon:u._.createIconNoSpan("menuPin",this.gridOptionsWrapper,null),subMenu:["pinLeft","pinRight","clearPinned"]};case"pinLeft":return{name:i("pinLeft","Pin Left"),action:function(){return n.columnModel.setColumnPinned(r,u.Constants.PINNED_LEFT,"contextMenu")},checked:!!r&&r.isPinnedLeft()};case"pinRight":return{name:i("pinRight","Pin Right"),action:function(){return n.columnModel.setColumnPinned(r,u.Constants.PINNED_RIGHT,"contextMenu")},checked:!!r&&r.isPinnedRight()};case"clearPinned":return{name:i("noPin","No Pin"),action:function(){return n.columnModel.setColumnPinned(r,null,"contextMenu")},checked:!!r&&!r.isPinned()};case"valueAggSubMenu":return u.ModuleRegistry.assertRegistered(u.ModuleNames.RowGroupingModule,"Aggregation from Menu")?{name:i("valueAggregation","Value Aggregation"),icon:u._.createIconNoSpan("menuValue",this.gridOptionsWrapper,null),subMenu:this.createAggregationSubMenu(r)}:null;case"autoSizeThis":return{name:i("autosizeThiscolumn","Autosize This Column"),action:function(){return n.columnModel.autoSizeColumn(r,a,"contextMenu")}};case"autoSizeAll":return{name:i("autosizeAllColumns","Autosize All Columns"),action:function(){return n.columnModel.autoSizeAllColumns(a,"contextMenu")}};case"rowGroup":return{name:i("groupBy","Group by")+" "+u._.escapeString(this.columnModel.getDisplayNameForColumn(r,"header")),action:function(){return n.columnModel.addRowGroupColumn(r,"contextMenu")},icon:u._.createIconNoSpan("menuAddRowGroup",this.gridOptionsWrapper,null)};case"rowUnGroup":return{name:i("ungroupBy","Un-Group by")+" "+u._.escapeString(this.columnModel.getDisplayNameForColumn(r,"header")),action:function(){return n.columnModel.removeRowGroupColumn(r,"contextMenu")},icon:u._.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsWrapper,null)};case"resetColumns":return{name:i("resetColumns","Reset Columns"),action:function(){return n.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:i("expandAll","Expand All"),action:function(){return n.gridApi.expandAll()}};case"contractAll":return{name:i("collapseAll","Collapse All"),action:function(){return n.gridApi.collapseAll()}};case"copy":return u.ModuleRegistry.assertRegistered(u.ModuleNames.ClipboardModule,"Copy from Menu")?{name:i("copy","Copy"),shortcut:i("ctrlC","Ctrl+C"),icon:u._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return n.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return u.ModuleRegistry.assertRegistered(u.ModuleNames.ClipboardModule,"Copy with Headers from Menu")?{name:i("copyWithHeaders","Copy with Headers"),icon:u._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return u.ModuleRegistry.assertRegistered(u.ModuleNames.ClipboardModule,"Copy with Group Headers from Menu")?{name:i("copyWithGroupHeaders","Copy with Group Headers"),icon:u._.createIconNoSpan("clipboardCopy",this.gridOptionsWrapper,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"paste":return u.ModuleRegistry.assertRegistered(u.ModuleNames.ClipboardModule,"Paste from Clipboard")?{name:i("paste","Paste"),shortcut:i("ctrlV","Ctrl+V"),disabled:!0,icon:u._.createIconNoSpan("clipboardPaste",this.gridOptionsWrapper,null),action:function(){return n.clipboardService.pasteFromClipboard()}}:null;case"export":var s=[],l=u.ModuleRegistry.isRegistered(u.ModuleNames.CsvExportModule),c=u.ModuleRegistry.isRegistered(u.ModuleNames.ExcelExportModule);return!this.gridOptionsWrapper.isSuppressCsvExport()&&l&&s.push("csvExport"),!this.gridOptionsWrapper.isSuppressExcelExport()&&c&&s.push("excelExport"),{name:i("export","Export"),subMenu:s,icon:u._.createIconNoSpan("save",this.gridOptionsWrapper,null)};case"csvExport":return{name:i("csvExport","CSV Export"),icon:u._.createIconNoSpan("csvExport",this.gridOptionsWrapper,null),action:function(){return n.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:i("excelExport","Excel Export"),icon:u._.createIconNoSpan("excelExport",this.gridOptionsWrapper,null),action:function(){return n.gridApi.exportDataAsExcel()}};case"separator":return"separator";default:return this.getChartItems(e)||(console.warn("AG Grid: unknown menu item type "+e),null)}},t.prototype.getChartItems=function(e){var r=this,n=this.gridOptionsWrapper.getLocaleTextFunc(),i=function(s,l,c){return{name:n(s,l),action:function(){return r.chartService.createPivotChart({chartType:c})}}},a=function(s,l,c){return{name:n(s,l),action:function(){return r.chartService.createChartFromCurrentRange(c)}}};switch(e){case"pivotChart":return{name:n("pivotChart","Pivot Chart"),subMenu:["pivotColumnChart","pivotBarChart","pivotPieChart","pivotLineChart","pivotXYChart","pivotAreaChart"],icon:u._.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"chartRange":return{name:n("chartRange","Chart Range"),subMenu:["rangeColumnChart","rangeBarChart","rangePieChart","rangeLineChart","rangeXYChart","rangeAreaChart","rangeHistogramChart","rangeCombinationChart"],icon:u._.createIconNoSpan("chart",this.gridOptionsWrapper,null)};case"pivotColumnChart":return{name:n("columnChart","Column"),subMenu:["pivotGroupedColumn","pivotStackedColumn","pivotNormalizedColumn"]};case"pivotGroupedColumn":return i("groupedColumn","Grouped&lrm;","groupedColumn");case"pivotStackedColumn":return i("stackedColumn","Stacked&lrm;","stackedColumn");case"pivotNormalizedColumn":return i("normalizedColumn","100% Stacked&lrm;","normalizedColumn");case"rangeColumnChart":return{name:n("columnChart","Column"),subMenu:["rangeGroupedColumn","rangeStackedColumn","rangeNormalizedColumn"]};case"rangeGroupedColumn":return a("groupedColumn","Grouped&lrm;","groupedColumn");case"rangeStackedColumn":return a("stackedColumn","Stacked&lrm;","stackedColumn");case"rangeNormalizedColumn":return a("normalizedColumn","100% Stacked&lrm;","normalizedColumn");case"pivotBarChart":return{name:n("barChart","Bar"),subMenu:["pivotGroupedBar","pivotStackedBar","pivotNormalizedBar"]};case"pivotGroupedBar":return i("groupedBar","Grouped&lrm;","groupedBar");case"pivotStackedBar":return i("stackedBar","Stacked&lrm;","stackedBar");case"pivotNormalizedBar":return i("normalizedBar","100% Stacked&lrm;","normalizedBar");case"rangeBarChart":return{name:n("barChart","Bar"),subMenu:["rangeGroupedBar","rangeStackedBar","rangeNormalizedBar"]};case"rangeGroupedBar":return a("groupedBar","Grouped&lrm;","groupedBar");case"rangeStackedBar":return a("stackedBar","Stacked&lrm;","stackedBar");case"rangeNormalizedBar":return a("normalizedBar","100% Stacked&lrm;","normalizedBar");case"pivotPieChart":return{name:n("pieChart","Pie"),subMenu:["pivotPie","pivotDoughnut"]};case"pivotPie":return i("pie","Pie&lrm;","pie");case"pivotDoughnut":return i("doughnut","Doughnut&lrm;","doughnut");case"rangePieChart":return{name:n("pieChart","Pie"),subMenu:["rangePie","rangeDoughnut"]};case"rangePie":return a("pie","Pie&lrm;","pie");case"rangeDoughnut":return a("doughnut","Doughnut&lrm;","doughnut");case"pivotLineChart":return i("line","Line&lrm;","line");case"rangeLineChart":return a("line","Line&lrm;","line");case"pivotXYChart":return{name:n("xyChart","X Y (Scatter)"),subMenu:["pivotScatter","pivotBubble"]};case"pivotScatter":return i("scatter","Scatter&lrm;","scatter");case"pivotBubble":return i("bubble","Bubble&lrm;","bubble");case"rangeXYChart":return{name:n("xyChart","X Y (Scatter)"),subMenu:["rangeScatter","rangeBubble"]};case"rangeScatter":return a("scatter","Scatter&lrm;","scatter");case"rangeBubble":return a("bubble","Bubble&lrm;","bubble");case"pivotAreaChart":return{name:n("areaChart","Area"),subMenu:["pivotArea","pivotStackedArea","pivotNormalizedArea"]};case"pivotArea":return i("area","Area&lrm;","area");case"pivotStackedArea":return i("stackedArea","Stacked&lrm;","stackedArea");case"pivotNormalizedArea":return i("normalizedArea","100% Stacked&lrm;","normalizedArea");case"rangeAreaChart":return{name:n("areaChart","Area"),subMenu:["rangeArea","rangeStackedArea","rangeNormalizedArea"]};case"rangeArea":return a("area","Area&lrm;","area");case"rangeStackedArea":return a("stackedArea","Stacked&lrm;","stackedArea");case"rangeNormalizedArea":return a("normalizedArea","100% Stacked&lrm;","normalizedArea");case"rangeHistogramChart":return a("histogramChart","Histogram&lrm;","histogram");case"rangeColumnLineCombo":return a("columnLineCombo","Column & Line&lrm;","columnLineCombo");case"rangeAreaColumnCombo":return a("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo");case"rangeCombinationChart":return{name:n("combinationChart","Combination"),subMenu:["rangeColumnLineCombo","rangeAreaColumnCombo"]};default:return null}},t.prototype.createAggregationSubMenu=function(e){var s,r=this,n=this.gridOptionsWrapper.getLocaleTextFunc(),i=e.isValueActive(),a=this.aggFuncService.getFuncNames(e);if(e.isPrimary())s=e;else{var l=e.getColDef().pivotValueColumn;s=u._.exists(l)?l:void 0}var c=[];return a.forEach(function(h){c.push({name:n(h,h),action:function(){r.columnModel.setColumnAggFunc(s,h,"contextMenu"),r.columnModel.addValueColumn(s,"contextMenu")},checked:i&&s.getAggFunc()===h})}),c},bi([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),bi([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),bi([u.Optional("clipboardService")],t.prototype,"clipboardService",void 0),bi([u.Optional("aggFuncService")],t.prototype,"aggFuncService",void 0),bi([u.Optional("chartService")],t.prototype,"chartService",void 0),bi([u.Bean("menuItemMapper")],t)}(u.BeanStub),wP={moduleName:u.ModuleNames.MenuModule,beans:[yP,CP,SP],dependantModules:[Re]},xP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Si=function(){return Si=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},Si.apply(this,arguments)},bu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Su=function(o){function t(){var e=o.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;return e.filterDefs=[],e.filters=[],e.guiDestroyFuncs=[],e.activeFilterIndices=[],e.lastActivatedMenuItem=null,e.afterFiltersReadyFuncs=[],e}return xP(t,o),t.prototype.postConstruct=function(){var e=this;this.initialiseTabGuard({onFocusIn:function(r){return e.onFocusIn(r)}})},t.getFilterDefs=function(e){var r=e.filters;return r&&r.length>0?r:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]},t.prototype.init=function(e){var r=this;this.params=e,this.filterDefs=t.getFilterDefs(e);var i=e.filterChangedCallback;this.column=e.column,this.filterChangedCallback=i;var a=[];return this.filterDefs.forEach(function(s,l){var c=r.createFilter(s,l);null!=c&&a.push(c)}),u.AgPromise.all(a).then(function(s){r.filters=s,r.refreshGui("columnMenu"),r.afterFiltersReadyFuncs.forEach(function(l){return l()}),r.afterFiltersReadyFuncs.length=0})},t.prototype.refreshGui=function(e){var r=this;e!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach(function(n,i){i>0&&r.appendChild(u._.loadTemplate('<div class="ag-filter-separator"></div>'));var l,a=r.filterDefs[i],s=r.getFilterTitle(n,a);l="subMenu"===a.display&&"toolPanel"!==e?r.insertFilterMenu(n,s).getGui():"subMenu"===a.display||"accordion"===a.display?r.insertFilterGroup(n,s).getGui():n.getGui(),r.appendChild(l)}),this.lastOpenedInContainer=e)},t.prototype.getFilterTitle=function(e,r){return null!=r.title?r.title:"function"==typeof e.getFilterTitle?e.getFilterTitle():"Filter"},t.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach(function(e){return e()}),this.guiDestroyFuncs.length=0},t.prototype.insertFilterMenu=function(e,r){var n=this,i=this.createBean(new u.AgMenuItemComponent({name:r,subMenu:e,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:function(){return!1}}));return i.setParentComponent(this),this.guiDestroyFuncs.push(function(){return n.destroyBean(i)}),this.addManagedListener(i,u.AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,function(a){n.lastActivatedMenuItem&&n.lastActivatedMenuItem!==a.menuItem&&n.lastActivatedMenuItem.deactivate(),n.lastActivatedMenuItem=a.menuItem}),i.addGuiEventListener("focusin",function(){return i.activate()}),i.addGuiEventListener("focusout",function(){i.isSubMenuOpen()||i.deactivate()}),i},t.prototype.insertFilterGroup=function(e,r){var n=this,i=this.createBean(new u.AgGroupComponent({title:r,cssIdentifier:"multi-filter"}));if(this.guiDestroyFuncs.push(function(){return n.destroyBean(i)}),i.addItem(e.getGui()),i.toggleGroupExpand(!1),e.afterGuiAttached){var a={container:this.lastOpenedInContainer,suppressFocus:!0};i.addManagedListener(i,u.AgGroupComponent.EVENT_EXPANDED,function(){return e.afterGuiAttached(a)})}return i},t.prototype.isFilterActive=function(){return this.filters.some(function(e){return e.isFilterActive()})},t.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null},t.prototype.doesFilterPass=function(e,r){var n=!0;return this.filters.forEach(function(i){!n||i===r||!i.isFilterActive()||(n=i.doesFilterPass(e))}),n},t.prototype.getFilterType=function(){return"multi"},t.prototype.getModelFromUi=function(){return{filterType:this.getFilterType(),filterModels:this.filters.map(function(r){return"function"==typeof r.getModelFromUi?r.getModelFromUi():null})}},t.prototype.getModel=function(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map(function(r){return r.isFilterActive()?r.getModel():null})}:null},t.prototype.setModel=function(e){var r=this,n=function(a,s){return new u.AgPromise(function(l){var c=a.setModel(s);c?c.then(function(){return l()}):l()})},i=[];return null==e?i=this.filters.map(function(a,s){var l=n(a,null);return r.updateActiveList(s),l}):this.filters.forEach(function(a,s){var c=n(a,e.filterModels.length>s?e.filterModels[s]:null);i.push(c),r.updateActiveList(s)}),u.AgPromise.all(i).then(function(){})},t.prototype.applyModel=function(){var e=!1;return this.filters.forEach(function(r){r instanceof u.ProvidedFilter&&(e=r.applyModel()||e)}),e},t.prototype.getChildFilterInstance=function(e){return this.filters[e]},t.prototype.afterGuiAttached=function(e){e&&this.refreshGui(e.container);var r=this.params.filters,n=r&&r.some(function(s){return s.display&&"inline"!==s.display});this.executeFunctionIfExists("afterGuiAttached",Si(Si({},e||{}),{suppressFocus:n}));var i=this.gridOptionsWrapper.getDocument(),a=i.activeElement;n&&(a===i.body||this.getGui().contains(a))&&this.forceFocusOutOfContainer(!0)},t.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")},t.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")},t.prototype.destroy=function(){var e=this;this.filters.forEach(function(r){r.setModel(null),e.destroyBean(r)}),this.filters.length=0,this.destroyChildren(),o.prototype.destroy.call(this)},t.prototype.executeFunctionIfExists=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];u._.forEachReverse(this.filters,function(i){var a=i[e];"function"==typeof a&&a.apply(i,r)})},t.prototype.createFilter=function(e,r){var l,n=this,i=this.params,a=i.filterModifiedCallback,s=i.doesRowPassOtherFilter,c=Si(Si({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:a,filterChangedCallback:function(f){n.executeWhenAllFiltersReady(function(){return n.filterChanged(r,f)})},doesRowPassOtherFilter:function(f){return s(f)&&n.doesFilterPass({node:f,data:f.data},l)}}),h=this.userComponentFactory.getFilterDetails(e,c,"agTextColumnFilter");if(!h)return null;var p=h.newAgStackInstance();return p&&p.then(function(f){return l=f}),p},t.prototype.executeWhenAllFiltersReady=function(e){this.filters&&this.filters.length>0?e():this.afterFiltersReadyFuncs.push(e)},t.prototype.updateActiveList=function(e){var r=this.filters[e];u._.removeFromArray(this.activeFilterIndices,e),r.isFilterActive()&&this.activeFilterIndices.push(e)},t.prototype.filterChanged=function(e,r){this.updateActiveList(e),this.filterChangedCallback(r);var n=this.filters[e];this.filters.forEach(function(i){i!==n&&"function"==typeof i.onAnyFilterChanged&&i.onAnyFilterChanged()})},t.prototype.onFocusIn=function(e){return null!=this.lastActivatedMenuItem&&!this.lastActivatedMenuItem.getGui().contains(e.target)&&(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0},bu([u.Autowired("filterManager")],t.prototype,"filterManager",void 0),bu([u.Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),bu([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.TabGuardComp),OP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),es=function(){return es=Object.assign||function(o){for(var t,e=1,r=arguments.length;e<r;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n]);return o},es.apply(this,arguments)},TP=function(o){function t(){var e=o.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;return e.floatingFilters=[],e}return OP(t,o),t.prototype.init=function(e){var r=this;this.params=e;var i=[];return Su.getFilterDefs(e.filterParams).forEach(function(a,s){var l=es(es({},e),{parentFilterInstance:function(h){r.parentMultiFilterInstance(function(p){var f=p.getChildFilterInstance(s);null!=f&&h(f)})}}),c=r.createFloatingFilter(a,l);null!=c&&i.push(c)}),u.AgPromise.all(i).then(function(a){a.forEach(function(s,l){r.floatingFilters.push(s);var c=s.getGui();r.appendChild(c),l>0&&u._.setDisplayed(c,!1)})})},t.prototype.onParentModelChanged=function(e,r){var n=this;r&&r.afterFloatingFilter||this.parentMultiFilterInstance(function(i){if(null==e)n.floatingFilters.forEach(function(s,l){s.onParentModelChanged(null,r),u._.setDisplayed(s.getGui(),0===l)});else{var a=i.getLastActiveFilterIndex();n.floatingFilters.forEach(function(s,l){s.onParentModelChanged(e.filterModels.length>l?e.filterModels[l]:null,r);var h=null==a?0===l:l===a;u._.setDisplayed(s.getGui(),h)})}})},t.prototype.destroy=function(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,o.prototype.destroy.call(this)},t.prototype.createFloatingFilter=function(e,r){var n=this.userComponentFactory.getDefaultFloatingFilterType(e)||"agTextColumnFloatingFilter",i=this.userComponentFactory.getFloatingFilterCompDetails(e,r,n);return i?i.newAgStackInstance():null},t.prototype.parentMultiFilterInstance=function(e){this.params.parentFilterInstance(function(r){if(!(r instanceof Su))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as it's parent");e(r)})},function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([u.Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(u.Component),AP={moduleName:u.ModuleNames.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:Su},{componentName:"agMultiColumnFloatingFilter",componentClass:TP}],dependantModules:[Re]},EP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),DP=function(o){function t(e){var r=o.call(this,'<div class="ag-rich-select-row"></div>')||this;return r.params=e,r}return EP(t,o),t.prototype.setState=function(e,r,n){this.populateWithRenderer(e,r)||this.populateWithoutRenderer(e,r),this.addOrRemoveCssClass("ag-rich-select-row-selected",n)},t.prototype.populateWithoutRenderer=function(e,r){var i=null!=r?r:e;u._.exists(i)&&""!==i?this.getGui().textContent=i.toString():this.getGui().innerHTML="&nbsp;"},t.prototype.populateWithRenderer=function(e,r){var n=this,i={value:e,valueFormatted:r,api:this.gridOptionsWrapper.getApi()},a=this.userComponentFactory.getCellRendererDetails(this.params,i),s=a?a.newAgStackInstance():void 0;return null!=s?u._.bindCellRendererToHtmlElement(s,this.getGui()):this.getGui().innerText=null!=i.valueFormatted?i.valueFormatted:i.value,!!s&&(s.then(function(l){n.addDestroyFunc(function(){n.getContext().destroyBean(l)})}),!0)},function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);n>3&&i&&Object.defineProperty(t,e,i)}([u.Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),t}(u.Component),RP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},yp=function(o){function t(){var e=o.call(this,t.TEMPLATE)||this;return e.selectionConfirmed=!1,e.searchString="",e}return RP(t,o),t.prototype.init=function(e){this.params=e,this.selectedValue=e.value,this.originalSelectedValue=e.value,this.focusAfterAttached=e.cellStartedEdit;var r=u._.createIconNoSpan("smallDown",this.gridOptionsWrapper);if(r.classList.add("ag-rich-select-value-icon"),this.eValue.appendChild(r),this.virtualList=this.getContext().createBean(new u.VirtualList("rich-select")),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),u._.exists(this.params.cellHeight)&&this.virtualList.setRowHeight(this.params.cellHeight),this.renderSelectedValue(),u._.missing(e.values))console.warn("AG Grid: richSelectCellEditor requires values for it to work");else{var n=e.values;this.virtualList.setModel({getRowCount:function(){return n.length},getRow:function(s){return n[s]}}),this.addGuiEventListener("keydown",this.onKeyDown.bind(this));var i=this.virtualList.getGui();this.addManagedListener(i,"click",this.onClick.bind(this)),this.addManagedListener(i,"mousemove",this.onMouseMove.bind(this));var a=u._.exists(e.searchDebounceDelay)?e.searchDebounceDelay:300;this.clearSearchString=u._.debounce(this.clearSearchString,a),u._.exists(e.charPress)&&this.searchText(e.charPress)}},t.prototype.onKeyDown=function(e){var r=e.key;switch(e.preventDefault(),r){case u.KeyCode.ENTER:this.onEnterKeyDown();break;case u.KeyCode.TAB:this.confirmSelection();break;case u.KeyCode.DOWN:case u.KeyCode.UP:this.onNavigationKeyPressed(e,r);break;default:this.searchText(e)}},t.prototype.confirmSelection=function(){this.selectionConfirmed=!0},t.prototype.onEnterKeyDown=function(){this.confirmSelection(),this.params.stopEditing()},t.prototype.onNavigationKeyPressed=function(e,r){e.preventDefault();var n=this.params.values.indexOf(this.selectedValue),i=r===u.KeyCode.UP?n-1:n+1;i>=0&&i<this.params.values.length&&this.setSelectedValue(this.params.values[i])},t.prototype.searchText=function(e){if("string"==typeof e)this.searchString+=e,this.runSearch(),this.clearSearchString();else{var r=e.key;if(r===u.KeyCode.BACKSPACE)this.searchString=this.searchString.slice(0,-1),r="";else if(!u._.isEventFromPrintableCharacter(e))return;this.searchText(r)}},t.prototype.runSearch=function(){var n,e=this,r=this.params.values;if(("number"==typeof r[0]||"string"==typeof r[0])&&(n=r.map(String)),"object"==typeof r[0]&&this.params.colDef.keyCreator&&(n=r.map(function(l){var c={value:l,colDef:e.params.colDef,column:e.params.column,node:e.params.node,data:e.params.data,api:e.gridOptionsWrapper.getApi(),columnApi:e.gridOptionsWrapper.getColumnApi(),context:e.gridOptionsWrapper.getContext()};return e.params.colDef.keyCreator(c)})),n){var i=u._.fuzzySuggestions(this.searchString,n,!0,!0)[0];if(i){var a=n.indexOf(i);this.setSelectedValue(r[a])}}},t.prototype.clearSearchString=function(){this.searchString=""},t.prototype.renderSelectedValue=function(){var e=this,r=this.params.formatValue(this.selectedValue),n=this.eValue,i={value:this.selectedValue,valueFormatted:r,api:this.gridOptionsWrapper.getApi()},a=this.userComponentFactory.getCellRendererDetails(this.params,i),s=a?a.newAgStackInstance():void 0;s?(u._.bindCellRendererToHtmlElement(s,n),s.then(function(l){e.addDestroyFunc(function(){return e.getContext().destroyBean(l)})})):u._.exists(this.selectedValue)?n.innerHTML=r:u._.clearElement(n)},t.prototype.setSelectedValue=function(e){if(this.selectedValue!==e){var r=this.params.values.indexOf(e);-1!==r&&(this.selectedValue=e,this.virtualList.ensureIndexVisible(r),this.virtualList.refresh())}},t.prototype.createRowComponent=function(e){var r=this.params.formatValue(e),n=new DP(this.params);return this.getContext().createBean(n),n.setState(e,r,e===this.selectedValue),n},t.prototype.onMouseMove=function(e){var r=this.virtualList.getGui().getBoundingClientRect(),n=this.virtualList.getScrollTop(),a=Math.floor((e.clientY-r.top+n)/this.virtualList.getRowHeight()),s=this.params.values[a];void 0!==s&&this.setSelectedValue(s)},t.prototype.onClick=function(){this.confirmSelection(),this.params.stopEditing()},t.prototype.afterGuiAttached=function(){var e=this.params.values.indexOf(this.selectedValue);this.virtualList.refresh(),e>=0&&this.virtualList.ensureIndexVisible(e),this.virtualList.refresh(),this.focusAfterAttached&&this.getGui().focus()},t.prototype.getValue=function(){return this.selectionConfirmed?this.selectedValue:this.originalSelectedValue},t.TEMPLATE='<div class="ag-rich-select" tabindex="-1">\n            <div ref="eValue" class="ag-rich-select-value"></div>\n            <div ref="eList" class="ag-rich-select-list"></div>\n        </div>',wu([u.Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),wu([u.RefSelector("eValue")],t.prototype,"eValue",void 0),wu([u.RefSelector("eList")],t.prototype,"eList",void 0),t}(u.PopupComponent),FP={moduleName:u.ModuleNames.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:yp},{componentName:"agRichSelectCellEditor",componentClass:yp}],dependantModules:[Re]},kP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ct=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},LP=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.pauseStoreUpdateListening=!1,e.started=!1,e}return kP(t,o),t.prototype.ensureRowHeightsValid=function(){return!1},t.prototype.start=function(){this.started=!0;var e=this.gridOptionsWrapper.getServerSideDatasource();e&&this.setDatasource(e)},t.prototype.destroyDatasource=function(){!this.datasource||(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},t.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,u.Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_VALUE_CHANGED,e),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_CHANGED,e),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,u.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.verifyProps()},t.prototype.verifyProps=function(){null!=this.gridOptionsWrapper.getInitialGroupOrderComparator()&&u._.doOnce(function(){return console.warn("AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Partial Store, then sorting is done on the server side, nothing to do with the client.")},"SSRM.InitialGroupOrderComparator"),this.gridOptionsWrapper.isRowSelection()&&null==this.gridOptionsWrapper.getRowIdFunc()&&u._.doOnce(function(){return console.warn("AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.")},"SSRM.SelectionNeedsRowNodeIdFunc")},t.prototype.setDatasource=function(e){!this.started||(this.destroyDatasource(),this.datasource=e,this.resetRootStore())},t.prototype.isLastRowIndexKnown=function(){var e=this.getRootStore();return!!e&&e.isLastRowIndexKnown()},t.prototype.onColumnEverything=function(){if(!this.gridOptionsWrapper.isSuppressEnterpriseResetOnNewColumns()){if(!this.storeParams)return void this.resetRootStore();var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),r=this.columnsToValueObjects(this.columnModel.getValueColumns()),n=this.columnsToValueObjects(this.columnModel.getPivotColumns()),i=!u._.jsonEquals(this.storeParams.sortModel,this.sortController.getSortModel()),a=!u._.jsonEquals(this.storeParams.rowGroupCols,e),s=!u._.jsonEquals(this.storeParams.pivotCols,n),l=!u._.jsonEquals(this.storeParams.valueCols,r);(i||a||s||l)&&this.resetRootStore()}},t.prototype.destroyRootStore=function(){!this.rootNode||!this.rootNode.childStore||(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},t.prototype.refreshAfterSort=function(e,r){this.storeParams&&(this.storeParams.sortModel=e);var n=this.getRootStore();!n||(n.refreshAfterSort(r),this.onStoreUpdated())},t.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new u.RowNode(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.eventService.dispatchEvent({type:u.Events.EVENT_ROW_DATA_CHANGED,api:this.gridApi,columnApi:this.columnApi}),this.dispatchModelUpdated(!0)},t.prototype.columnsToValueObjects=function(e){var r=this;return e.map(function(n){return{id:n.getId(),aggFunc:n.getAggFunc(),displayName:r.columnModel.getDisplayNameForColumn(n,"model"),field:n.getColDef().field}})},t.prototype.createStoreParams=function(){var e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),r=this.columnsToValueObjects(this.columnModel.getValueColumns()),n=this.columnsToValueObjects(this.columnModel.getPivotColumns()),i=this.gridOptionsWrapper.isDynamicRowHeight();return{valueCols:r,rowGroupCols:e,pivotCols:n,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new u.NumberSequence,dynamicRowHeight:i}},t.prototype.getParams=function(){return this.storeParams},t.prototype.dispatchModelUpdated=function(e){void 0===e&&(e=!1),this.eventService.dispatchEvent({type:u.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1})},t.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},t.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},t.prototype.updateRowIndexesAndBounds=function(){var e=this.getRootStore();!e||e.setDisplayIndexes(new u.NumberSequence,{value:0})},t.prototype.retryLoads=function(){var e=this.getRootStore();!e||(e.retryLoads(),this.onStoreUpdated())},t.prototype.getRow=function(e){var r=this.getRootStore();if(r)return r.getRowUsingDisplayIndex(e)},t.prototype.expandAll=function(e){this.pauseStoreUpdateListening=!0,this.forEachNode(function(r){r.group&&r.setExpanded(e)}),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},t.prototype.refreshAfterFilter=function(e,r){this.storeParams&&(this.storeParams.filterModel=e);var n=this.getRootStore();!n||(n.refreshAfterFilter(r),this.onStoreUpdated())},t.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},t.prototype.getRowCount=function(){var e=this.getRootStore();return e?e.getDisplayIndexEnd():0},t.prototype.getTopLevelRowCount=function(){var e=this.getRootStore();return e?e.getRowCount():1},t.prototype.getTopLevelRowDisplayedIndex=function(e){var r=this.getRootStore();return r?r.getTopLevelRowDisplayedIndex(e):e},t.prototype.getRowBounds=function(e){var r=this.getRootStore();return r?r.getRowBounds(e):{rowTop:0,rowHeight:this.gridOptionsWrapper.getRowHeightAsNumber()}},t.prototype.getRowIndexAtPixel=function(e){var r=this.getRootStore();return e<=0||!r?0:r.getRowIndexAtPixel(e)},t.prototype.isEmpty=function(){return!1},t.prototype.isRowsToRender=function(){return null!=this.getRootStore()&&this.getRowCount()>0},t.prototype.getType=function(){return u.Constants.ROW_MODEL_TYPE_SERVER_SIDE},t.prototype.forEachNode=function(e){var r=this.getRootStore();!r||r.forEachNodeDeep(e)},t.prototype.forEachNodeAfterFilterAndSort=function(e){var r=this.getRootStore();!r||r.forEachNodeDeepAfterFilterAndSort(e)},t.prototype.executeOnStore=function(e,r){var n=this.getRootStore();if(n){var i=n.getChildStore(e);i&&r(i)}},t.prototype.refreshStore=function(e){void 0===e&&(e={}),this.executeOnStore(e.route?e.route:[],function(n){return n.refreshStore(1==e.purge)})},t.prototype.getStoreState=function(){var e=[],r=this.getRootStore();return r&&r.addStoreStates(e),e},t.prototype.getNodesInRangeForSelection=function(e,r){return u._.exists(r)&&e.parent!==r.parent?[]:e.parent.childStore.getRowNodesInRange(r,e)},t.prototype.getRowNode=function(e){var r;return this.forEachNode(function(n){n.id===e&&(r=n),n.detailNode&&n.detailNode.id===e&&(r=n.detailNode)}),r},t.prototype.isRowPresent=function(e){return!!this.getRowNode(e.id)},ct([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),ct([u.Autowired("filterManager")],t.prototype,"filterManager",void 0),ct([u.Autowired("sortController")],t.prototype,"sortController",void 0),ct([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),ct([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),ct([u.Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),ct([u.Autowired("ssrmSortService")],t.prototype,"sortListener",void 0),ct([u.Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0),ct([u.Autowired("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),ct([u.Autowired("beans")],t.prototype,"beans",void 0),ct([u.PreDestroy],t.prototype,"destroyDatasource",null),ct([u.PostConstruct],t.prototype,"addEventListeners",null),ct([u.PreDestroy],t.prototype,"destroyRootStore",null),ct([u.Bean("rowModel")],t)}(u.BeanStub),IP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},NP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return IP(t,o),t.prototype.loadFromDatasource=function(e){var r=e.storeParams,n=e.parentBlock,a=e.parentNode.getGroupKeys();if(r.datasource){var l={successCallback:e.successCallback,success:e.success,failCallback:e.failCallback,fail:e.fail,request:{startRow:e.startRow,endRow:e.endRow,rowGroupCols:r.rowGroupCols,valueCols:r.valueCols,pivotCols:r.pivotCols,pivotMode:r.pivotMode,groupKeys:a,filterModel:r.filterModel,sortModel:r.sortModel},parentNode:e.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsWrapper.getContext()};window.setTimeout(function(){r.datasource&&n.isAlive()?r.datasource.getRows(l):e.failCallback()},0)}},t.prototype.getChildStore=function(e,r,n){if(u._.missingOrEmpty(e))return r;var a=n(e[0]);if(a){var s=e.slice(1,e.length),l=a.childStore;return l?l.getChildStore(s):null}return null},t.prototype.isServerRefreshNeeded=function(e,r,n){if(n.alwaysReset||n.valueColChanged||n.secondaryColChanged)return!0;var i=e.level+1;return!(i<r.length&&!(n.changedColumns.indexOf(r[i].id)>-1))},xu([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),xu([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),xu([u.Bean("ssrmStoreUtils")],t)}(u.BeanStub),GP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),wi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},BP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return GP(t,o),t.prototype.postConstruct=function(){this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.usingMasterDetail=this.gridOptionsWrapper.isMasterDetail()},t.prototype.createRowNode=function(e){var r=new u.RowNode(this.beans);return r.setRowHeight(null!=e.rowHeight?e.rowHeight:this.rowHeight),r.group=e.group,r.leafGroup=e.leafGroup,r.level=e.level,r.uiLevel=e.level,r.parent=e.parent,r.stub=!0,r.group&&(r.expanded=!1,r.field=e.field,r.rowGroupColumn=e.rowGroupColumn),r},t.prototype.destroyRowNodes=function(e){e&&e.forEach(this.destroyRowNode.bind(this))},t.prototype.destroyRowNode=function(e){e.childStore&&(this.destroyBean(e.childStore),e.childStore=null),e.clearRowTopAndRowIndex(),null!=e.id&&this.nodeManager.removeNode(e)},t.prototype.setTreeGroupInfo=function(e){var r=this.gridOptionsWrapper.getIsServerSideGroupFunc(),n=this.gridOptionsWrapper.getServerSideGroupKeyFunc();null!=r&&(e.setGroup(r(e.data)),e.group&&null!=n&&(e.key=n(e.data))),!e.group&&null!=e.childStore&&(this.destroyBean(e.childStore),e.childStore=null)},t.prototype.setRowGroupInfo=function(e){e.key=this.valueService.getValue(e.rowGroupColumn,e),null==e.key&&u._.doOnce(function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),e.rowGroupColumn&&console.warn("column = "+e.rowGroupColumn.getId()),console.warn("data is ",e.data)},"ServerSideBlock-CannotHaveNullOrUndefinedForKey")},t.prototype.setMasterDetailInfo=function(e){var r=this.gridOptionsWrapper.getIsRowMasterFunc();e.master=null==r||r(e.data)},t.prototype.updateDataIntoRowNode=function(e,r){e.updateData(r),this.usingTreeData&&this.setTreeGroupInfo(e)},t.prototype.setDataIntoRowNode=function(e,r,n,i){e.stub=!1,u._.exists(r)?(e.setDataAndId(r,n),this.usingTreeData?this.setTreeGroupInfo(e):e.group?this.setRowGroupInfo(e):this.usingMasterDetail&&this.setMasterDetailInfo(e)):(e.setDataAndId(void 0,void 0),e.key=null),(this.usingTreeData||e.group)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),u._.exists(r)&&e.setRowHeight(this.gridOptionsWrapper.getRowHeightForNode(e,!1,i).height)},t.prototype.setChildCountIntoRowNode=function(e){var r=this.gridOptionsWrapper.getChildCountFunc();r&&(e.allChildrenCount=r(e.data))},t.prototype.setGroupDataIntoRowNode=function(e){var r=this,n=this.columnModel.getGroupDisplayColumns(),i=this.gridOptionsWrapper.isTreeData();n.forEach(function(a){if(null==e.groupData&&(e.groupData={}),i)e.groupData[a.getColId()]=e.key;else if(a.isRowGroupDisplayed(e.rowGroupColumn.getId())){var s=r.valueService.getValue(e.rowGroupColumn,e);e.groupData[a.getColId()]=s}})},t.prototype.clearDisplayIndex=function(e){e.clearRowTopAndRowIndex(),e.group&&u._.exists(e.childStore)&&e.childStore.clearDisplayIndexes(),e.master&&e.detailNode&&e.detailNode.clearRowTopAndRowIndex()},t.prototype.setDisplayIndex=function(e,r,n){if(e.setRowIndex(r.next()),e.setRowTop(n.value),n.value+=e.rowHeight,e.master&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(r.next()),e.detailNode.setRowTop(n.value),n.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex()),e.group&&u._.exists(e.childStore)){var s=e.childStore;e.expanded?s.setDisplayIndexes(r,n):s.clearDisplayIndexes()}},t.prototype.binarySearchForDisplayIndex=function(e,r){var n=0,i=r.length-1;if(u._.missing(i)||u._.missing(n))console.warn("AG Grid: error: topPointer = "+i+", bottomPointer = "+n);else for(;;){var a=Math.floor((n+i)/2),s=r[a];if(s.rowIndex===e)return s;var c=s.detailNode;if(s.master&&s.expanded&&c&&c.rowIndex===e)return s.detailNode;var h=s.childStore;if(s.expanded&&h&&h.isDisplayIndexInStore(e))return h.getRowUsingDisplayIndex(e);if(s.rowIndex<e)n=a+1;else{if(!(s.rowIndex>e))return void console.warn("AG Grid: error: unable to locate rowIndex = "+e+" in cache");i=a-1}}},t.prototype.extractRowBounds=function(e,r){var n=function(a){return{rowHeight:a.rowHeight,rowTop:a.rowTop}};if(e.rowIndex===r)return n(e);if(e.group&&e.expanded&&u._.exists(e.childStore)){var i=e.childStore;if(i.isDisplayIndexInStore(r))return i.getRowBounds(r)}else if(e.master&&e.expanded&&u._.exists(e.detailNode)&&e.detailNode.rowIndex===r)return n(e.detailNode)},t.prototype.getIndexAtPixel=function(e,r){if(e.isPixelInRange(r))return e.rowIndex;var i=e.detailNode;if(e.master&&e.expanded&&i&&i.isPixelInRange(r))return e.detailNode.rowIndex;if(e.group&&e.expanded&&u._.exists(e.childStore)){var a=e.childStore;if(a.isPixelInRange(r))return a.getRowIndexAtPixel(r)}return null},t.prototype.createNodeIdPrefix=function(e){for(var r=[],n=e;n&&n.level>=0;)r.push(n.key),n=n.parent;if(r.length>0)return r.reverse().join("-")},t.prototype.checkOpenByDefault=function(e){if(e.isExpandable()){var r=this.gridOptionsWrapper.getIsServerSideGroupOpenByDefaultFunc();r&&r({data:e.data,rowNode:e})&&window.setTimeout(function(){return e.setExpanded(!0)},0)}},wi([u.Autowired("valueService")],t.prototype,"valueService",void 0),wi([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),wi([u.Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0),wi([u.Autowired("beans")],t.prototype,"beans",void 0),wi([u.PostConstruct],t.prototype,"postConstruct",null),wi([u.Bean("ssrmBlockUtils")],t)}(u.BeanStub),mp=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},jP=function(){function o(){this.rowNodes={}}return o.prototype.addRowNode=function(t){var e=t.id;this.rowNodes[e]&&(console.warn("AG Grid: Duplicate node id "+t.id+". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",t.data)),this.rowNodes[e]=t},o.prototype.removeNode=function(t){var e=t.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)},o.prototype.clear=function(){this.rowNodes={}},mp([u.PreDestroy],o.prototype,"clear",null),mp([u.Bean("ssrmNodeManager")],o)}(),WP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Po=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},VP=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.asyncTransactions=[],e}return WP(t,o),t.prototype.postConstruct=function(){this.gridOptionsWrapper.isRowModelServerSide()},t.prototype.applyTransactionAsync=function(e,r){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:r})},t.prototype.scheduleExecuteAsync=function(){var e=this,r=this.gridOptionsWrapper.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout(function(){e.executeAsyncTransactions()},r)},t.prototype.executeAsyncTransactions=function(){var e=this;if(this.asyncTransactions){var r=[],n=[],i=[],a=!1;if(this.asyncTransactions.forEach(function(l){var c;e.serverSideRowModel.executeOnStore(l.transaction.route,function(p){c=p.applyTransaction(l.transaction)}),null==c&&(c={status:u.ServerSideTransactionResultStatus.StoreNotFound}),n.push(c),c.status==u.ServerSideTransactionResultStatus.StoreLoading?i.push(l):(l.callback&&r.push(function(){return l.callback(c)}),c.status===u.ServerSideTransactionResultStatus.Applied&&(a=!0))}),r.length>0&&window.setTimeout(function(){r.forEach(function(l){return l()})},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=i,a&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:u.Events.EVENT_STORE_UPDATED})),n.length>0){var s={api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),type:u.Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:n};this.eventService.dispatchEvent(s)}}},t.prototype.flushAsyncTransactions=function(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},t.prototype.applyTransaction=function(e){var r;return this.serverSideRowModel.executeOnStore(e.route,function(n){r=n.applyTransaction(e)}),r?(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:u.Events.EVENT_STORE_UPDATED}),r):{status:u.ServerSideTransactionResultStatus.StoreNotFound}},Po([u.Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Po([u.Autowired("valueCache")],t.prototype,"valueCache",void 0),Po([u.Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0),Po([u.PostConstruct],t.prototype,"postConstruct",null),Po([u.Bean("ssrmTransactionManager")],t)}(u.BeanStub),HP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),To=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},zP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return HP(t,o),t.prototype.postConstruct=function(){!this.gridOptionsWrapper.isRowModelServerSide()||this.addManagedListener(this.eventService,u.Events.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},t.prototype.onRowGroupOpened=function(e){var r=e.node;if(r.expanded){if(r.master)this.createDetailNode(r);else if(u._.missing(r.childStore)){var n=this.serverSideRowModel.getParams();r.childStore=this.createBean(this.storeFactory.createStore(n,r))}}else this.gridOptionsWrapper.isPurgeClosedRowNodes()&&u._.exists(r.childStore)&&(r.childStore=this.destroyBean(r.childStore));this.eventService.dispatchEvent({type:u.Events.EVENT_STORE_UPDATED})},t.prototype.createDetailNode=function(e){if(u._.exists(e.detailNode))return e.detailNode;var r=new u.RowNode(this.beans);r.detail=!0,r.selectable=!1,r.parent=e,u._.exists(e.id)&&(r.id="detail_"+e.id),r.data=e.data,r.level=e.level+1;var i=this.gridOptionsWrapper.getRowHeightForNode(r).height;return r.rowHeight=i||200,e.detailNode=r,r},To([u.Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0),To([u.Autowired("ssrmStoreFactory")],t.prototype,"storeFactory",void 0),To([u.Autowired("beans")],t.prototype,"beans",void 0),To([u.PostConstruct],t.prototype,"postConstruct",null),To([u.Bean("ssrmExpandListener")],t)}(u.BeanStub),UP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xi=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},$P=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return UP(t,o),t.prototype.postConstruct=function(){!this.gridOptionsWrapper.isRowModelServerSide()||this.addManagedListener(this.eventService,u.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},t.prototype.extractSortModel=function(){var e=this.sortController.getSortModel();return this.gridOptionsWrapper.isTreeData()||(this.replaceAutoGroupColumnWithActualRowGroupColumns(e),this.removeMultiColumnPrefixOnColumnIds(e)),e},t.prototype.removeMultiColumnPrefixOnColumnIds=function(e){if(this.gridOptionsWrapper.isGroupMultiAutoColumn())for(var r=u.Constants.GROUP_AUTO_COLUMN_ID+"-",n=0;n<e.length;++n)e[n].colId.indexOf(r)>-1&&(e[n].colId=e[n].colId.substr(r.length))},t.prototype.replaceAutoGroupColumnWithActualRowGroupColumns=function(e){var r=e.find(function(l){return l.colId==u.Constants.GROUP_AUTO_COLUMN_ID});if(r){var n=e.indexOf(r);u._.removeFromArray(e,r);var s=this.columnModel.getRowGroupColumns().filter(function(l){return 0==e.filter(function(c){return c.colId===l.getColId()}).length}).map(function(l){return{colId:l.getId(),sort:r.sort}});u._.insertArrayIntoArray(e,s,n)}},t.prototype.onSortChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var r=this.extractSortModel(),i=this.findChangedColumnsInSort(r,e.sortModel),a=this.listenerUtils.isSortingWithValueColumn(i),s=this.listenerUtils.isSortingWithSecondaryColumn(i),l=this.gridOptionsWrapper.isServerSideSortingAlwaysResets();this.serverSideRowModel.refreshAfterSort(r,{valueColChanged:a,secondaryColChanged:s,alwaysReset:l,changedColumns:i})}},t.prototype.findChangedColumnsInSort=function(e,r){var n=[];return[e,r].forEach(function(s){if(s){var l=s.map(function(c){return c.colId});n=n.concat(l)}}),n.filter(function(s){var l=r.find(function(h){return h.colId===s}),c=e.find(function(h){return h.colId===s});return function(s,l){return(s?s.sort:null)!==(l?l.sort:null)}(l,c)||function(s,l){return(s?r.indexOf(s):-1)!==(l?e.indexOf(l):-1)}(l,c)})},xi([u.Autowired("sortController")],t.prototype,"sortController",void 0),xi([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),xi([u.Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0),xi([u.Autowired("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),xi([u.PostConstruct],t.prototype,"postConstruct",null),xi([u.Bean("ssrmSortService")],t)}(u.BeanStub),KP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ao=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},YP=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return KP(t,o),t.prototype.postConstruct=function(){!this.gridOptionsWrapper.isRowModelServerSide()||this.addManagedListener(this.eventService,u.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},t.prototype.onFilterChanged=function(){var e=this.serverSideRowModel.getParams();if(e){var r=this.filterManager.getFilterModel(),i=this.findChangedColumns(r,e?e.filterModel:{}),a=this.listenerUtils.isSortingWithValueColumn(i),s=this.listenerUtils.isSortingWithSecondaryColumn(i),l=this.gridOptionsWrapper.isServerSideFilteringAlwaysResets();this.serverSideRowModel.refreshAfterFilter(r,{valueColChanged:a,secondaryColChanged:s,alwaysReset:l,changedColumns:i})}},t.prototype.findChangedColumns=function(e,r){var n={};Object.keys(e).forEach(function(a){return n[a]=!0}),Object.keys(r).forEach(function(a){return n[a]=!0});var i=[];return Object.keys(n).forEach(function(a){JSON.stringify(e[a])!=JSON.stringify(r[a])&&i.push(a)}),i},Ao([u.Autowired("rowModel")],t.prototype,"serverSideRowModel",void 0),Ao([u.Autowired("filterManager")],t.prototype,"filterManager",void 0),Ao([u.Autowired("ssrmListenerUtils")],t.prototype,"listenerUtils",void 0),Ao([u.PostConstruct],t.prototype,"postConstruct",null),Ao([u.Bean("ssrmFilterListener")],t)}(u.BeanStub),XP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$r=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},qP=function(o,t){return function(e,r){t(e,r,o)}},Cp=function(o){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&o[t],r=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&r>=o.length&&(o=void 0),{value:o&&o[r++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_p=function(o){function t(e,r,n,i,a){var s=o.call(this,e)||this;return s.ssrmParams=n,s.storeParams=i,s.parentRowNode=r,s.startRow=e*i.cacheBlockSize,s.parentStore=a,s.level=r.level+1,s.groupLevel=n.rowGroupCols?s.level<n.rowGroupCols.length:void 0,s.leafGroup=!!n.rowGroupCols&&s.level===n.rowGroupCols.length-1,s}return XP(t,o),t.prototype.postConstruct=function(){this.usingTreeData=this.gridOptionsWrapper.isTreeData(),!this.usingTreeData&&this.groupLevel&&(this.groupField=this.ssrmParams.rowGroupCols[this.level].field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),this.setData([])},t.prototype.isDisplayIndexInBlock=function(e){return e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.isBlockBefore=function(e){return e>=this.displayIndexEnd},t.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.getBlockHeightPx=function(){return this.blockHeightPx},t.prototype.getBlockTopPx=function(){return this.blockTopPx},t.prototype.isGroupLevel=function(){return this.groupLevel},t.prototype.getGroupField=function(){return this.groupField},t.prototype.prefixId=function(e){return null!=this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()},t.prototype.getBlockStateJson=function(){return{id:this.prefixId(this.getId()),state:{blockNumber:this.getId(),startRow:this.startRow,endRow:this.startRow+this.storeParams.cacheBlockSize,pageStatus:this.getState()}}},t.prototype.isAnyNodeOpen=function(){return this.rowNodes.filter(function(r){return r.expanded}).length>0},t.prototype.forEachNode=function(e,r,n,i){void 0===r&&(r=new u.NumberSequence),this.rowNodes.forEach(function(a){if(e(a,r.next()),n&&a.childStore){var s=a.childStore;i?s.forEachNodeDeepAfterFilterAndSort(e,r):s.forEachNodeDeep(e,r)}})},t.prototype.forEachNodeDeep=function(e,r){this.forEachNode(e,r,!0,!1)},t.prototype.forEachNodeAfterFilterAndSort=function(e,r){this.forEachNode(e,r,!0,!0)},t.prototype.forEachNodeShallow=function(e,r){this.forEachNode(e,r,!1,!1)},t.prototype.getLastAccessed=function(){return this.lastAccessed},t.prototype.getRowUsingLocalIndex=function(e){return this.rowNodes[e-this.startRow]},t.prototype.touchLastAccessed=function(){this.lastAccessed=this.ssrmParams.lastAccessedSequence.next()},t.prototype.processServerFail=function(){this.parentStore.onBlockLoadFailed(this)},t.prototype.retryLoads=function(){this.getState()===u.RowNodeBlock.STATE_FAILED&&(this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad(),this.setData()),this.forEachNodeShallow(function(e){e.childStore&&e.childStore.retryLoads()})},t.prototype.processServerResult=function(e){this.parentStore.onBlockLoaded(this,e)},t.prototype.setData=function(e,r){void 0===e&&(e=[]),void 0===r&&(r=!1),this.destroyRowNodes();for(var n=this.parentStore.getRowCount(),i=this.getId()*this.storeParams.cacheBlockSize,s=Math.min(i+this.storeParams.cacheBlockSize,n)-i,c=this.columnModel.getAllDisplayedAutoHeightCols().length>0?this.parentStore.getCachedBlockHeight(this.getId()):void 0,h=c?Math.round(c/s):void 0,p=0;p<s;p++){var f=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn,rowHeight:h});if(p<e.length){var v=e[p],g=this.prefixId(this.startRow+p);this.blockUtils.setDataIntoRowNode(f,v,g,h),this.parentStore.removeDuplicateNode(f.id),this.nodeManager.addRowNode(f),this.allNodesMap[f.id]=f,this.blockUtils.checkOpenByDefault(f)}this.rowNodes.push(f),r&&(f.failedLoad=!0)}},t.prototype.removeDuplicateNode=function(e){if(this.getState()!=u.RowNodeBlock.STATE_LOADED){var r=this.allNodesMap[e];if(r){this.blockUtils.destroyRowNode(r);var n=this.rowNodes.indexOf(r),i=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});this.rowNodes[n]=i}}},t.prototype.refresh=function(){this.getState()!==u.RowNodeBlock.STATE_WAITING_TO_LOAD&&this.setStateWaitingToLoad()},t.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.rowNodes),this.rowNodes=[],this.allNodesMap={}},t.prototype.setBeans=function(e){this.logger=e.create("ServerSideBlock")},t.prototype.getRowUsingDisplayIndex=function(e){return this.touchLastAccessed(),this.blockUtils.binarySearchForDisplayIndex(e,this.rowNodes)},t.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:this.startRow,endRow:this.startRow+this.storeParams.cacheBlockSize,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},t.prototype.isPixelInRange=function(e){return e>=this.blockTopPx&&e<this.blockTopPx+this.blockHeightPx},t.prototype.getRowBounds=function(e){var r,n,i;this.touchLastAccessed();try{for(var a=Cp(this.rowNodes),s=a.next();!s.done&&null==(i=this.blockUtils.extractRowBounds(s.value,e));s=a.next());}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.prototype.getRowIndexAtPixel=function(e){var r,n;this.touchLastAccessed();var i=null;try{for(var a=Cp(this.rowNodes),s=a.next();!s.done&&null==(i=this.blockUtils.getIndexAtPixel(s.value,e));s=a.next());}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexEnd=void 0,this.displayIndexStart=void 0,this.rowNodes.forEach(function(r){return e.blockUtils.clearDisplayIndex(r)})},t.prototype.setDisplayIndexes=function(e,r){var n=this;this.displayIndexStart=e.peek(),this.blockTopPx=r.value,this.rowNodes.forEach(function(i){return n.blockUtils.setDisplayIndex(i,e,r)}),this.displayIndexEnd=e.peek(),this.blockHeightPx=r.value-this.blockTopPx},$r([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),$r([u.Autowired("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),$r([u.Autowired("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),$r([u.Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0),$r([u.Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),$r([u.PostConstruct],t.prototype,"postConstruct",null),$r([u.PreDestroy],t.prototype,"destroyRowNodes",null),$r([qP(0,u.Qualifier("loggerFactory"))],t.prototype,"setBeans",null),t}(u.RowNodeBlock),ZP=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kr=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},JP=function(o,t){return function(e,r){t(e,r,o)}},ze=(()=>(function(o){o[o.FOUND=0]="FOUND",o[o.CONTINUE_FIND=1]="CONTINUE_FIND",o[o.BREAK_FIND=2]="BREAK_FIND"}(ze||(ze={})),ze))(),QP=function(o){function t(e,r,n){var i=o.call(this)||this;return i.blocks={},i.blockHeights={},i.lastRowIndexKnown=!1,i.displayIndexStart=0,i.displayIndexEnd=0,i.cacheTopPixel=0,i.info={},i.ssrmParams=e,i.storeParams=r,i.parentRowNode=n,i.rowCount=t.INITIAL_ROW_COUNT,i}return ZP(t,o),t.prototype.postConstruct=function(){this.defaultRowHeight=this.gridOptionsWrapper.getRowHeightAsNumber()},t.prototype.destroyAllBlocks=function(){var e=this;this.getBlocksInOrder().forEach(function(r){return e.destroyBlock(r)})},t.prototype.setBeans=function(e){this.logger=e.create("ServerSideCache")},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},t.prototype.retryLoads=function(){this.getBlocksInOrder().forEach(function(e){return e.retryLoads()})},t.prototype.onBlockLoadFailed=function(e){e.setData([],!0),this.fireCacheUpdatedEvent()},t.prototype.onBlockLoaded=function(e,r){this.logger.log("onPageLoaded: page = "+e.getId()+", lastRow = "+r.rowCount),r.storeInfo&&Object.assign(this.info,r.storeInfo),r.rowData||u._.doOnce(function(){return console.warn('AG Grid: "params.rowData" is missing from Server-Side Row Model success() callback. Please use the "rowData" attribute. If no data is returned, set an empty list.',r)},"InfiniteStore.noData");var i=null!=r.rowCount&&r.rowCount>=0?r.rowCount:void 0;!this.isAlive()||(this.checkRowCount(e,i),e.setData(r.rowData),this.destroyAllBlocksPastVirtualRowCount(),this.fireCacheUpdatedEvent())},t.prototype.purgeBlocksIfNeeded=function(e){var r=this,n=this.getBlocksInOrder().filter(function(c){return c!=e});n.sort(function(c,h){return h.getLastAccessed()-c.getLastAccessed()});var a=this.storeParams.maxBlocksInCache>0,s=a?this.storeParams.maxBlocksInCache-1:null,l=t.MAX_EMPTY_BLOCKS_TO_KEEP-1;n.forEach(function(c,h){if(c.getState()===_p.STATE_WAITING_TO_LOAD&&h>=l||a&&h>=s){if(c.isAnyNodeOpen()||r.isBlockCurrentlyDisplayed(c)||r.isBlockFocused(c))return;r.destroyBlock(c)}})},t.prototype.isBlockFocused=function(e){var r=this.focusService.getFocusCellToUseAfterRefresh();if(!r||null!=r.rowPinned)return!1;var n=e.getDisplayIndexStart(),i=e.getDisplayIndexEnd();return null!=i&&null!=n&&r.rowIndex>=n&&r.rowIndex<i},t.prototype.isBlockCurrentlyDisplayed=function(e){var r=e.getDisplayIndexStart(),n=e.getDisplayIndexEnd()-1;return this.rowRenderer.isRangeInRenderedViewport(r,n)},t.prototype.removeDuplicateNode=function(e){this.getBlocksInOrder().forEach(function(r){return r.removeDuplicateNode(e)})},t.prototype.checkRowCount=function(e,r){if("number"==typeof r&&r>=0)this.rowCount=r,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var i=(e.getId()+1)*this.storeParams.cacheBlockSize+t.OVERFLOW_SIZE;this.rowCount<i&&(this.rowCount=i)}},t.prototype.forEachNodeDeep=function(e,r){void 0===r&&(r=new u.NumberSequence),this.getBlocksInOrder().forEach(function(n){return n.forEachNodeDeep(e,r)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,r){void 0===r&&(r=new u.NumberSequence),this.getBlocksInOrder().forEach(function(n){return n.forEachNodeAfterFilterAndSort(e,r)})},t.prototype.getBlocksInOrder=function(){return u._.getAllValuesInObject(this.blocks).sort(function(n,i){return n.getId()-i.getId()})},t.prototype.destroyBlock=function(e){delete this.blocks[e.getId()],this.destroyBean(e),this.rowNodeBlockLoader.removeBlock(e)},t.prototype.fireCacheUpdatedEvent=function(){this.eventService.dispatchEvent({type:u.Events.EVENT_STORE_UPDATED})},t.prototype.destroyAllBlocksPastVirtualRowCount=function(){var e=this,r=[];this.getBlocksInOrder().forEach(function(n){n.getId()*e.storeParams.cacheBlockSize>=e.rowCount&&r.push(n)}),r.length>0&&r.forEach(function(n){return e.destroyBlock(n)})},t.prototype.refreshStore=function(e){0==this.getRowCount()||e?this.resetStore():this.refreshBlocks(),this.fireCacheUpdatedEvent()},t.prototype.refreshBlocks=function(){this.getBlocksInOrder().forEach(function(e){e.refresh()}),this.lastRowIndexKnown=!1,this.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.resetStore=function(){this.destroyAllBlocks(),this.lastRowIndexKnown=!1,(this.columnModel.isAutoRowHeightActive||0===this.rowCount)&&(this.rowCount=t.INITIAL_ROW_COUNT)},t.prototype.getRowNodesInRange=function(e,r){var n=[],i=-1,a=!1;u._.missing(e)&&(a=!0);var s=!1;return this.getBlocksInOrder().forEach(function(c){if(!s){if(a&&i+1!==c.getId())return void(s=!0);i=c.getId(),c.forEachNodeShallow(function(h){var p=h===e||h===r;(a||p)&&n.push(h),p&&(a=!a)})}}),s||a?[]:n},t.prototype.findBlockAndExecute=function(e,r,n){var l,i=!1,a=!1,s=null;return this.getBlocksInOrder().forEach(function(c){if(!i&&!a){var h=e(c);h==ze.FOUND?(l=r(c),i=!0):h==ze.CONTINUE_FIND?s=c:h==ze.BREAK_FIND&&(a=!0)}}),i||(l=n(s)),l},t.prototype.getRowBounds=function(e){var r=this;return this.findBlockAndExecute(function(s){return s.isDisplayIndexInBlock(e)?ze.FOUND:s.isBlockBefore(e)?ze.CONTINUE_FIND:ze.BREAK_FIND},function(s){return s.getRowBounds(e)},function(s){var l,c;return null!==s?(l=s.getBlockTopPx()+s.getBlockHeightPx(),c=s.getDisplayIndexEnd()):(l=r.cacheTopPixel,c=r.displayIndexStart),{rowHeight:r.defaultRowHeight,rowTop:l+(e-c)*r.defaultRowHeight}})},t.prototype.getRowIndexAtPixel=function(e){var r=this,s=this.findBlockAndExecute(function(c){return c.isPixelInRange(e)?ze.FOUND:c.getBlockTopPx()<e?ze.CONTINUE_FIND:ze.BREAK_FIND},function(c){return c.getRowIndexAtPixel(e)},function(c){var h,p;c?(h=c.getBlockTopPx()+c.getBlockHeightPx(),p=c.getDisplayIndexEnd()):(h=r.cacheTopPixel,p=r.displayIndexStart);for(var f=r.storeParams.cacheBlockSize,d=r.defaultRowHeight*f,v=c?c.getId()+1:0,g=function(w){var P=r.getCachedBlockHeight(w),O=null!=P?P:d;return{height:O,pixelInBlock:e<=O+h}},y=g(v);!y.pixelInBlock;)h+=y.height,p+=f,y=g(++v);return p+(0|Math.floor((e-h)/(y.height/f)))}),l=this.getDisplayIndexEnd()-1;return Math.min(s,l)},t.prototype.clearDisplayIndexes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.getBlocksInOrder().forEach(function(e){return e.clearDisplayIndexes()})},t.prototype.setDisplayIndexes=function(e,r){var n=this;this.displayIndexStart=e.peek(),this.cacheTopPixel=r.value;var i=-1,a=this.storeParams.cacheBlockSize;this.getBlocksInOrder().forEach(function(h){var p=h.getId(),f=p-i-1,d=f*a;d>0&&e.skip(d);for(var v=1;v<=f;v++){var g=p-v;u._.exists(n.blockHeights[g])?r.value+=n.blockHeights[g]:r.value+=a*n.defaultRowHeight}i=p,h.setDisplayIndexes(e,r),n.blockHeights[p]=h.getBlockHeightPx()});var s=(i+1)*a-1,c=this.getRowCount()-s-1;c>0&&(e.skip(c),r.value+=c*this.defaultRowHeight),this.displayIndexEnd=e.peek(),this.cacheHeightPixels=r.value-this.cacheTopPixel},t.prototype.getRowUsingDisplayIndex=function(e,r){var n=this;if(void 0===r&&(r=!1),this.isDisplayIndexInStore(e))return this.findBlockAndExecute(function(l){return l.isDisplayIndexInBlock(e)?ze.FOUND:l.isBlockBefore(e)?ze.CONTINUE_FIND:ze.BREAK_FIND},function(l){return l.getRowUsingDisplayIndex(e)},function(l){if(!r){var c,h,p,f=n.storeParams.cacheBlockSize;if(l)for(c=l.getId()+1,h=l.getDisplayIndexEnd(),p=l.getBlockHeightPx()+l.getBlockTopPx();!(e>=h&&e<h+f);){h+=f;var v=n.blockHeights[c];u._.exists(v)?p+=v:p+=n.defaultRowHeight*f,c++}else c=Math.floor((e-n.displayIndexStart)/f),h=n.displayIndexStart+c*f,p=n.cacheTopPixel+c*f*n.defaultRowHeight;return n.logger.log("block missing, rowIndex = "+e+", creating #"+c+", displayIndexStart = "+h),n.createBlock(c,h,{value:p}).getRowUsingDisplayIndex(e)}})},t.prototype.getTopLevelRowDisplayedIndex=function(e){var r=this.storeParams.cacheBlockSize,n=Math.floor(e/r);return this.findBlockAndExecute(function(l){return l.getId()===n?ze.FOUND:l.getId()<n?ze.CONTINUE_FIND:ze.BREAK_FIND},function(l){return l.getRowUsingLocalIndex(e).rowIndex},function(l){if(!l)return e;var c=r*(l.getId()+1)-1,h=l.getRowUsingLocalIndex(c);return(h.expanded&&h.childStore?h.childStore.getDisplayIndexEnd()-1:h.expanded&&h.detailNode?h.detailNode.rowIndex:h.rowIndex)+(e-c)})},t.prototype.addStoreStates=function(e){e.push({type:"partial",route:this.parentRowNode.getGroupKeys(),rowCount:this.rowCount,lastRowIndexKnown:this.lastRowIndexKnown,info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(function(r){return r.addStoreStates(e)})},t.prototype.getCachedBlockHeight=function(e){return this.blockHeights[e]},t.prototype.createBlock=function(e,r,n){var i=this.createBean(new _p(e,this.parentRowNode,this.ssrmParams,this.storeParams,this));return i.setDisplayIndexes(new u.NumberSequence(r),n),this.blocks[i.getId()]=i,this.purgeBlocksIfNeeded(i),this.rowNodeBlockLoader.addBlock(i),i},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.isDisplayIndexInStore=function(e){return 0!==this.getRowCount()&&e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.applyTransaction=function(e){return{status:u.ServerSideTransactionResultStatus.StoreWrongType}},t.prototype.getChildStore=function(e){var r=this;return this.storeUtils.getChildStore(e,this,function(i){var a=null;return r.getBlocksInOrder().forEach(function(s){s.forEachNodeShallow(function(l){l.key===i&&(a=l)},new u.NumberSequence)}),a})},t.prototype.isPixelInRange=function(e){return 0!==this.getRowCount()&&e>=this.cacheTopPixel&&e<this.cacheTopPixel+this.cacheHeightPixels},t.prototype.refreshAfterFilter=function(e){this.resetStore()},t.prototype.refreshAfterSort=function(e){this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)?this.resetStore():this.forEachChildStoreShallow(function(r){return r.refreshAfterSort(e)})},t.prototype.forEachChildStoreShallow=function(e){this.getBlocksInOrder().forEach(function(r){r.isGroupLevel()&&r.forEachNodeShallow(function(i){var a=i.childStore;a&&e(a)},new u.NumberSequence)})},t.MAX_EMPTY_BLOCKS_TO_KEEP=2,t.INITIAL_ROW_COUNT=1,t.OVERFLOW_SIZE=1,Kr([u.Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),Kr([u.Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),Kr([u.Autowired("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),Kr([u.Autowired("focusService")],t.prototype,"focusService",void 0),Kr([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),Kr([u.PostConstruct],t.prototype,"postConstruct",null),Kr([u.PreDestroy],t.prototype,"destroyAllBlocks",null),Kr([JP(0,u.Qualifier("loggerFactory"))],t.prototype,"setBeans",null),t}(u.BeanStub),eT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mt=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},tT=function(o){function t(e,r,n){var i=o.call(this,0)||this;return i.nodeIdSequence=new u.NumberSequence,i.info={},i.ssrmParams=e,i.parentRowNode=n,i.level=n.level+1,i.groupLevel=e.rowGroupCols?i.level<e.rowGroupCols.length:void 0,i.leafGroup=!!e.rowGroupCols&&i.level===e.rowGroupCols.length-1,i}return eT(t,o),t.prototype.postConstruct=function(){var e=this;this.usingTreeData=this.gridOptionsWrapper.isTreeData(),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel&&(this.groupField=this.ssrmParams.rowGroupCols[this.level].field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]),this.initialiseRowNodes(),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc(function(){return e.rowNodeBlockLoader.removeBlock(e)})},t.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},t.prototype.initialiseRowNodes=function(e,r){void 0===e&&(e=1),void 0===r&&(r=!1),this.destroyRowNodes();for(var n=0;n<e;n++){var i=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});r&&(i.failedLoad=!0),this.allRowNodes.push(i),this.nodesAfterFilter.push(i),this.nodesAfterSort.push(i)}},t.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},t.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},t.prototype.getStartRow=function(){return 0},t.prototype.getEndRow=function(){return this.nodesAfterSort.length},t.prototype.createDataNode=function(e,r){var n=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});null!=r?u._.insertIntoArray(this.allRowNodes,n,r):this.allRowNodes.push(n);var i=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(n,e,i,void 0),this.nodeManager.addRowNode(n),this.blockUtils.checkOpenByDefault(n),this.allNodesMap[n.id]=n,n},t.prototype.prefixId=function(e){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()},t.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},t.prototype.processServerResult=function(e){if(this.isAlive()){e.storeInfo&&Object.assign(this.info,e.storeInfo);var r=this.allRowNodes.length>0?this.allNodesMap:void 0;this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},e.rowData||u._.doOnce(function(){return console.warn('AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.',e)},"FullStore.noData"),this.createOrRecycleNodes(r,e.rowData),r&&this.blockUtils.destroyRowNodes(u._.getAllValuesInObject(r)),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},t.prototype.createOrRecycleNodes=function(e,r){var n=this;r&&r.forEach(function(s){var l=function(s){if(e){var l=n.gridOptionsWrapper.getRowIdFunc();if(l){var c=n.parentRowNode.getGroupKeys(),p=l({data:s,parentKeys:c.length>0?c:void 0,level:n.level}),f=e[p];if(f)return delete e[p],f}}}(s);l?function(s,l){n.allNodesMap[s.id]=s,n.blockUtils.updateDataIntoRowNode(s,l),n.allRowNodes.push(s)}(l,s):n.createDataNode(s)})},t.prototype.flushAsyncTransactions=function(){var e=this;window.setTimeout(function(){return e.transactionManager.flushAsyncTransactions()},0)},t.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},t.prototype.sortRowNodes=function(){var e=this.sortController.getSortOptions(),r=!e||0==e.length,n=this.gridOptionsWrapper.isServerSideSortingAlwaysResets();this.nodesAfterSort=r||n?this.nodesAfterFilter:this.rowNodeSorter.doFullSort(this.nodesAfterFilter,e)},t.prototype.filterRowNodes=function(){var e=this;this.nodesAfterFilter=this.gridOptionsWrapper.isServerSideFilteringAlwaysResets()||this.groupLevel?this.allRowNodes:this.allRowNodes.filter(function(a){return e.filterManager.doesRowPassFilter({rowNode:a})})},t.prototype.clearDisplayIndexes=function(){var e=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach(function(r){return e.blockUtils.clearDisplayIndex(r)})},t.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},t.prototype.isDisplayIndexInStore=function(e){return 0!==this.getRowCount()&&e>=this.displayIndexStart&&e<this.displayIndexEnd},t.prototype.setDisplayIndexes=function(e,r){var n=this;this.displayIndexStart=e.peek(),this.topPx=r.value;var i={};this.nodesAfterSort.forEach(function(a){n.blockUtils.setDisplayIndex(a,e,r),i[a.id]=!0}),this.allRowNodes.forEach(function(a){i[a.id]||n.blockUtils.clearDisplayIndex(a)}),this.displayIndexEnd=e.peek(),this.heightPx=r.value-this.topPx},t.prototype.forEachNodeDeep=function(e,r){void 0===r&&(r=new u.NumberSequence),this.allRowNodes.forEach(function(n){e(n,r.next());var i=n.childStore;i&&i.forEachNodeDeep(e,r)})},t.prototype.forEachNodeDeepAfterFilterAndSort=function(e,r){void 0===r&&(r=new u.NumberSequence),this.nodesAfterSort.forEach(function(n){e(n,r.next());var i=n.childStore;i&&i.forEachNodeDeepAfterFilterAndSort(e,r)})},t.prototype.getRowUsingDisplayIndex=function(e){if(this.isDisplayIndexInStore(e))return this.blockUtils.binarySearchForDisplayIndex(e,this.nodesAfterSort)},t.prototype.getRowBounds=function(e){for(var r=0;r<this.nodesAfterSort.length;r++){var i=this.blockUtils.extractRowBounds(this.nodesAfterSort[r],e);if(i)return i}return null},t.prototype.isPixelInRange=function(e){return e>=this.topPx&&e<this.topPx+this.heightPx},t.prototype.getRowIndexAtPixel=function(e){var r=this;if(e<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(e>=this.topPx+this.heightPx){var s=this.nodesAfterSort[this.nodesAfterSort.length-1];if(e>=s.rowTop+s.rowHeight&&s.expanded){if(s.childStore&&s.childStore.getRowCount()>0)return s.childStore.getRowIndexAtPixel(e);if(s.detailNode)return s.detailNode.rowIndex}return s.rowIndex}var c=null;return this.nodesAfterSort.forEach(function(p){var f=r.blockUtils.getIndexAtPixel(p,e);null!=f&&(c=f)}),null==c?this.displayIndexEnd-1:c},t.prototype.getChildStore=function(e){var r=this;return this.storeUtils.getChildStore(e,this,function(n){return r.allRowNodes.find(function(a){return a.key==n})})},t.prototype.forEachChildStoreShallow=function(e){this.allRowNodes.forEach(function(r){var n=r.childStore;n&&e(n)})},t.prototype.refreshAfterFilter=function(e){e.alwaysReset||this.gridOptionsWrapper.isTreeData()?this.refreshStore(!0):(this.filterAndSortNodes(),this.forEachChildStoreShallow(function(r){return r.refreshAfterFilter(e)}))},t.prototype.refreshAfterSort=function(e){e.alwaysReset?this.refreshStore(!0):(this.sortRowNodes(),this.forEachChildStoreShallow(function(r){return r.refreshAfterSort(e)}))},t.prototype.applyTransaction=function(e){switch(this.getState()){case u.RowNodeBlock.STATE_FAILED:return{status:u.ServerSideTransactionResultStatus.StoreLoadingFailed};case u.RowNodeBlock.STATE_LOADING:return{status:u.ServerSideTransactionResultStatus.StoreLoading};case u.RowNodeBlock.STATE_WAITING_TO_LOAD:return{status:u.ServerSideTransactionResultStatus.StoreWaitingToLoad}}var r=this.gridOptionsWrapper.getIsApplyServerSideTransactionFunc();if(r&&!r({transaction:e,parentNode:this.parentRowNode,storeInfo:this.info}))return{status:u.ServerSideTransactionResultStatus.Cancelled};var a={status:u.ServerSideTransactionResultStatus.Applied,remove:[],update:[],add:[]},s=[];return this.executeAdd(e,a),this.executeRemove(e,a,s),this.executeUpdate(e,a,s),this.filterAndSortNodes(),this.updateSelection(s),a},t.prototype.updateSelection=function(e){if(e.length>0){e.forEach(function(i){i.setSelected(!1,!1,!0)});var n={type:u.Events.EVENT_SELECTION_CHANGED,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi()};this.eventService.dispatchEvent(n)}},t.prototype.executeAdd=function(e,r){var n=this,i=e.add,a=e.addIndex;u._.missingOrEmpty(i)||("number"==typeof a&&a>=0?i.reverse().forEach(function(l){var c=n.createDataNode(l,a);r.add.push(c)}):i.forEach(function(l){var c=n.createDataNode(l);r.add.push(c)}))},t.prototype.executeRemove=function(e,r,n){var i=this,a=e.remove;if(null!=a){var s={};a.forEach(function(l){var c=i.lookupRowNode(l);!c||(c.isSelected()&&n.push(c),c.clearRowTopAndRowIndex(),s[c.id]=!0,delete i.allNodesMap[c.id],r.remove.push(c),i.nodeManager.removeNode(c))}),this.allRowNodes=this.allRowNodes.filter(function(l){return!s[l.id]})}},t.prototype.executeUpdate=function(e,r,n){var i=this,a=e.update;null!=a&&a.forEach(function(s){var l=i.lookupRowNode(s);!l||(l.updateData(s),!l.selectable&&l.isSelected()&&n.push(l),r.update.push(l))})},t.prototype.lookupRowNode=function(e){var n,r=this.gridOptionsWrapper.getRowIdFunc();if(null!=r){var i=this.level,a=this.parentRowNode.getGroupKeys(),s=r({data:e,parentKeys:a.length>0?a:void 0,level:i});if(!(n=this.allNodesMap[s]))return console.error("AG Grid: could not find row id="+s+", data item was not found for this id"),null}else if(!(n=this.allRowNodes.find(function(l){return l.data===e})))return console.error("AG Grid: could not find data item as object was not found",e),null;return n},t.prototype.addStoreStates=function(e){e.push({type:"full",route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow(function(r){return r.addStoreStates(e)})},t.prototype.refreshStore=function(e){e&&this.initialiseRowNodes(this.nodesAfterSort?this.nodesAfterSort.length:1),this.scheduleLoad(),this.fireStoreUpdatedEvent()},t.prototype.retryLoads=function(){this.getState()===u.RowNodeBlock.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow(function(e){return e.retryLoads()})},t.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},t.prototype.fireStoreUpdatedEvent=function(){this.eventService.dispatchEvent({type:u.Events.EVENT_STORE_UPDATED})},t.prototype.getRowCount=function(){return this.nodesAfterSort.length},t.prototype.getTopLevelRowDisplayedIndex=function(e){return this.nodesAfterSort[e].rowIndex},t.prototype.isLastRowIndexKnown=function(){return this.getState()==u.RowNodeBlock.STATE_LOADED},t.prototype.getRowNodesInRange=function(e,r){var n=[],i=!1;return u._.missing(e)&&(i=!0),this.nodesAfterSort.forEach(function(s){var l=s===e||s===r;(i||l)&&n.push(s),l&&(i=!i)}),i?[]:n},mt([u.Autowired("ssrmStoreUtils")],t.prototype,"storeUtils",void 0),mt([u.Autowired("ssrmBlockUtils")],t.prototype,"blockUtils",void 0),mt([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),mt([u.Autowired("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),mt([u.Autowired("rowNodeSorter")],t.prototype,"rowNodeSorter",void 0),mt([u.Autowired("sortController")],t.prototype,"sortController",void 0),mt([u.Autowired("ssrmNodeManager")],t.prototype,"nodeManager",void 0),mt([u.Autowired("filterManager")],t.prototype,"filterManager",void 0),mt([u.Autowired("ssrmTransactionManager")],t.prototype,"transactionManager",void 0),mt([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),mt([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),mt([u.PostConstruct],t.prototype,"postConstruct",null),mt([u.PreDestroy],t.prototype,"destroyRowNodes",null),t}(u.RowNodeBlock),Ou=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rT=function(){function o(){}return o.prototype.createStore=function(t,e){var r=this.getStoreParams(t,e);return new("partial"===r.storeType?QP:tT)(t,r,e)},o.prototype.getStoreParams=function(t,e){var r=this.getLevelSpecificParams(e),n=this.getStoreType(r);return{storeType:n,cacheBlockSize:this.getBlockSize(n,r),maxBlocksInCache:this.getMaxBlocksInCache(n,t,r)}},o.prototype.getMaxBlocksInCache=function(t,e,r){if("full"!=t){var n=r&&null!=r.maxBlocksInCache?r.maxBlocksInCache:this.gridOptionsWrapper.getMaxBlocksInCache();if(null!=n&&n>=0)return e.dynamicRowHeight?void u._.doOnce(function(){return console.warn("AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.")},"storeFactory.maxBlocksInCache.dynamicRowHeight"):this.columnModel.isAutoRowHeightActive()?void u._.doOnce(function(){return console.warn("AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.")},"storeFactory.maxBlocksInCache.autoRowHeightActive"):n}},o.prototype.getBlockSize=function(t,e){if("full"!=t){var r=e&&null!=e.cacheBlockSize?e.cacheBlockSize:this.gridOptionsWrapper.getCacheBlockSize();return null!=r&&r>0?r:100}},o.prototype.getLevelSpecificParams=function(t){var e=this.gridOptionsWrapper.getServerSideStoreParamsFunc();if(e)return e({level:t.level+1,parentRowNode:t.level>=0?t:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()})},o.prototype.getStoreType=function(t){var e=t&&null!=t.storeType?t.storeType:this.gridOptionsWrapper.getServerSideStoreType();switch(e){case"partial":case"full":return e;case null:case void 0:return"full";default:var n=["full","partial"].join(", ");return console.warn("AG Grid: invalid Server Side Store Type "+e+", valid types are ["+n+"]"),"partial"}},Ou([u.Autowired("gridOptionsWrapper")],o.prototype,"gridOptionsWrapper",void 0),Ou([u.Autowired("columnModel")],o.prototype,"columnModel",void 0),Ou([u.Bean("ssrmStoreFactory")],o)}(),bp=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},nT=function(){function o(){}return o.prototype.isSortingWithValueColumn=function(t){for(var e=this.columnModel.getValueColumns().map(function(n){return n.getColId()}),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},o.prototype.isSortingWithSecondaryColumn=function(t){if(!this.columnModel.getSecondaryColumns())return!1;for(var e=this.columnModel.getSecondaryColumns().map(function(n){return n.getColId()}),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},bp([u.Autowired("columnModel")],o.prototype,"columnModel",void 0),bp([u.Bean("ssrmListenerUtils")],o)}(),iT={moduleName:u.ModuleNames.ServerSideRowModelModule,rowModels:{serverSide:LP},beans:[zP,$P,NP,BP,jP,VP,YP,rT,nT],dependantModules:[Re]},aT=function(){function o(t,e,r){this.rowModel=t,this.filterParams=e,this.caseFormat=r}return o.prototype.extractUniqueValues=function(t){var e=this,r={},n=this.filterParams.colDef.keyCreator,i=function(a){var s=null!=a?e.caseFormat(a):"__<ag-grid-pseudo-null>__";s&&null==r[s]&&(r[s]=a)};return this.rowModel.forEachLeafNode(function(a){if(a.data&&t(a)){var s=e.filterParams,d=e.filterParams.valueGetter({api:s.api,colDef:s.colDef,column:s.column,columnApi:s.columnApi,context:s.context,data:a.data,getValue:function(g){return a.data[g]},node:a});n&&(d=n({value:d,colDef:e.filterParams.colDef,column:e.filterParams.column,node:a,data:a.data,api:e.filterParams.api,columnApi:e.filterParams.columnApi,context:e.filterParams.context})),null!=(d=u._.makeNull(d))&&Array.isArray(d)?d.forEach(function(g){var y=u._.toStringOrNull(u._.makeNull(g));i(y)}):i(u._.toStringOrNull(d))}}),u._.values(r)},o}(),ht=(()=>(function(o){o[o.PROVIDED_LIST=0]="PROVIDED_LIST",o[o.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",o[o.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"}(ht||(ht={})),ht))(),Sp=function(){function o(t,e,r,n,i){var a=this;this.filterParams=t,this.setIsLoading=e,this.valueFormatterService=r,this.translate=n,this.caseFormat=i,this.localEventService=new u.EventService,this.miniFilterText=null,this.providedValues=null,this.allValues=[],this.availableValues=new Set,this.displayedValues=[],this.selectedValues=new Set,this.initialised=!1;var l=t.colDef,c=t.textFormatter,h=t.doesRowPassOtherFilter,p=t.suppressSorting,f=t.comparator,d=t.rowModel,v=t.values;this.column=t.column,this.formatter=c||u.TextFilter.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=h,this.suppressSorting=p||!1,this.comparator=f||l.comparator||u._.defaultComparator,d.getType()===u.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideValuesExtractor=new aT(d,this.filterParams,this.caseFormat)),null==v?this.valuesType=ht.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(v)?ht.PROVIDED_LIST:ht.PROVIDED_CALLBACK,this.providedValues=v),this.updateAllValues().then(function(y){return a.resetSelectionState(y||[])})}return o.prototype.addEventListener=function(t,e,r){this.localEventService.addEventListener(t,e,r)},o.prototype.removeEventListener=function(t,e,r){this.localEventService.removeEventListener(t,e,r)},o.prototype.refreshValues=function(){var t=this.getModel();return this.updateAllValues(),this.setModel(t)},o.prototype.overrideValues=function(t){var e=this;return new u.AgPromise(function(r){e.allValuesPromise.then(function(){e.valuesType=ht.PROVIDED_LIST,e.providedValues=t,e.refreshValues().then(function(){return r()})})})},o.prototype.refreshAfterAnyFilterChanged=function(){var t=this;return this.showAvailableOnly()?this.allValuesPromise.then(function(e){return t.updateAvailableValues(e||[])}):u.AgPromise.resolve()},o.prototype.isInitialised=function(){return this.initialised},o.prototype.updateAllValues=function(){var t=this;return this.allValuesPromise=new u.AgPromise(function(e){switch(t.valuesType){case ht.TAKEN_FROM_GRID_VALUES:case ht.PROVIDED_LIST:var r=t.valuesType===ht.TAKEN_FROM_GRID_VALUES?t.getValuesFromRows(!1):u._.values(t.uniqueValues(u._.toStrings(t.providedValues)||[])),n=t.sortValues(r||[]);t.allValues=n,e(n);break;case ht.PROVIDED_CALLBACK:t.setIsLoading(!0);var i=t.providedValues,a=t.filterParams,f={success:function(d){var v=u._.values(t.uniqueValues(u._.toStrings(d)||[]));t.setIsLoading(!1);var g=t.sortValues(v||[]);t.allValues=g,e(g)},colDef:a.colDef,column:a.column,columnApi:a.columnApi,api:a.api,context:a.context};window.setTimeout(function(){return i(f)},0);break;default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(function(e){return t.updateAvailableValues(e||[])}).then(function(){return t.initialised=!0}),this.allValuesPromise},o.prototype.setValuesType=function(t){this.valuesType=t},o.prototype.getValuesType=function(){return this.valuesType},o.prototype.isValueAvailable=function(t){return this.availableValues.has(t)},o.prototype.showAvailableOnly=function(){return this.valuesType===ht.TAKEN_FROM_GRID_VALUES},o.prototype.updateAvailableValues=function(t){var e=this.showAvailableOnly()?this.sortValues(this.getValuesFromRows(!0)):t;this.availableValues=u._.convertToSet(e),this.localEventService.dispatchEvent({type:o.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues()},o.prototype.sortValues=function(t){return this.suppressSorting?t:!this.filterParams.excelMode||t.indexOf(null)<0?t.sort(this.comparator):t.filter(function(e){return null!=e}).sort(this.comparator).concat(null)},o.prototype.getValuesFromRows=function(t){var e=this;return void 0===t&&(t=!1),this.clientSideValuesExtractor?this.clientSideValuesExtractor.extractUniqueValues(function(n){return!t||e.doesRowPassOtherFilters(n)}):(console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),[])},o.prototype.setMiniFilter=function(t){return t=u._.makeNull(t),this.miniFilterText!==t&&(this.miniFilterText=t,this.updateDisplayedValues(),!0)},o.prototype.getMiniFilter=function(){return this.miniFilterText},o.prototype.updateDisplayedValues=function(){var t=this;if(null!=this.miniFilterText){this.displayedValues=[];var e=this.caseFormat(this.formatter(this.miniFilterText)||""),r=function(n){return null!=n&&t.caseFormat(n).indexOf(e)>=0};this.availableValues.forEach(function(n){if(null==n)t.filterParams.excelMode&&r(t.translate("blanks"))&&t.displayedValues.push(n);else{var i=t.formatter(n),a=t.valueFormatterService.formatValue(t.column,null,i,t.filterParams.valueFormatter,!1);(r(i)||r(a))&&t.displayedValues.push(n)}})}else this.displayedValues=u._.values(this.availableValues)},o.prototype.getDisplayedValueCount=function(){return this.displayedValues.length},o.prototype.getDisplayedValue=function(t){return this.displayedValues[t]},o.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedValues.size>0:this.allValues.length!==this.selectedValues.size},o.prototype.getValues=function(){return this.allValues.slice()},o.prototype.selectAllMatchingMiniFilter=function(t){var e=this;void 0===t&&(t=!1),null==this.miniFilterText?this.selectedValues=u._.convertToSet(this.allValues):(t&&this.selectedValues.clear(),this.displayedValues.forEach(function(r){return e.selectedValues.add(r)}))},o.prototype.deselectAllMatchingMiniFilter=function(){var t=this;null==this.miniFilterText?this.selectedValues.clear():this.displayedValues.forEach(function(e){return t.selectedValues.delete(e)})},o.prototype.selectValue=function(t){this.selectedValues.add(t)},o.prototype.deselectValue=function(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayedValues),this.selectedValues.delete(t)},o.prototype.isValueSelected=function(t){return this.selectedValues.has(t)},o.prototype.isEverythingVisibleSelected=function(){var t=this;return this.displayedValues.filter(function(e){return t.isValueSelected(e)}).length===this.displayedValues.length},o.prototype.isNothingVisibleSelected=function(){var t=this;return 0===this.displayedValues.filter(function(e){return t.isValueSelected(e)}).length},o.prototype.getModel=function(){return this.hasSelections()?u._.values(this.selectedValues):null},o.prototype.setModel=function(t){var e=this;return this.allValuesPromise.then(function(r){if(null==t)e.resetSelectionState(r||[]);else{e.selectedValues.clear();var n=e.uniqueValues(r||[]);t.forEach(function(i){var a=n[e.uniqueKey(i)];void 0!==a&&e.selectedValues.add(a)})}})},o.prototype.uniqueValues=function(t){var e=this,r={};return(t||[]).forEach(function(n){var i=u._.makeNull(n),a=e.uniqueKey(i);void 0===r[a]&&(r[a]=i)}),r},o.prototype.uniqueKey=function(t){return null==t?"__<ag-grid-pseudo-null>__":this.caseFormat(t)},o.prototype.resetSelectionState=function(t){this.filterParams.defaultToNothingSelected?this.selectedValues.clear():this.selectedValues=u._.convertToSet(t||[])},o.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",o}(),lT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ts=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},rs=function(o){function t(e,r,n,i){var a=o.call(this,t.TEMPLATE)||this;return a.value=e,a.params=r,a.translate=n,a.isSelected=i,a}return lT(t,o),t.prototype.init=function(){var e=this;this.render(),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.setDisabled(!!this.params.readOnly),!this.params.readOnly&&this.eCheckbox.onValueChange(function(r){var n=r||!1;e.isSelected=n,e.dispatchEvent({type:t.EVENT_SELECTION_CHANGED,isSelected:n})})},t.prototype.toggleSelected=function(){this.params.readOnly||(this.isSelected=!this.isSelected,this.eCheckbox.setValue(this.isSelected))},t.prototype.render=function(){var e=this.params.column,r=this.value,n=null;"function"==typeof r?r=r():n=this.getFormattedValue(this.params,e,r),this.params.showTooltips&&this.setTooltip(null!=n?n:r);var a={value:r,valueFormatted:n,api:this.gridOptionsWrapper.getApi(),columnApi:this.gridOptionsWrapper.getColumnApi(),context:this.gridOptionsWrapper.getContext(),colDef:this.params.colDef,column:this.params.column};this.renderCell(a)},t.prototype.getTooltipParams=function(){var e=o.prototype.getTooltipParams.call(this);return e.location="setFilterValue",e.colDef=this.getComponentHolder(),e},t.prototype.getFormattedValue=function(e,r,n){return this.valueFormatterService.formatValue(r,null,n,e&&e.valueFormatter,!1)},t.prototype.renderCell=function(e){var r=this,n=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,e),i=n?n.newAgStackInstance():void 0;if(null!=i)i.then(function(s){s&&(r.eCheckbox.setLabel(s.getGui()),r.addDestroyFunc(function(){return r.destroyBean(s)}))});else{var a=null==e.valueFormatted?e.value:e.valueFormatted;this.eCheckbox.setLabel(null==a?this.translate("blanks"):a)}},t.prototype.getComponentHolder=function(){return this.params.column.getColDef()},t.EVENT_SELECTION_CHANGED="selectionChanged",t.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',ts([u.Autowired("valueFormatterService")],t.prototype,"valueFormatterService",void 0),ts([u.Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),ts([u.RefSelector("eCheckbox")],t.prototype,"eCheckbox",void 0),ts([u.PostConstruct],t.prototype,"init",null),t}(u.Component),wp={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",noMatches:"No matches."},uT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Eo=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ns=function(o){function t(){var e=o.call(this,"setFilter")||this;return e.valueModel=null,e.setFilterParams=null,e.virtualList=null,e.caseSensitive=!1,e.appliedModelValues=null,e}return uT(t,o),t.prototype.postConstruct=function(){o.prototype.postConstruct.call(this),this.positionableFeature=new u.PositionableFeature(this.eSetFilterList,{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},t.prototype.updateUiVisibility=function(){},t.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'+this.translateForSetFilter("loadingOoo")+'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">'+this.translateForSetFilter("noMatches")+'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>'},t.prototype.handleKeyDown=function(e){if(o.prototype.handleKeyDown.call(this,e),!e.defaultPrevented)switch(e.key){case u.KeyCode.SPACE:this.handleKeySpace(e);break;case u.KeyCode.ENTER:this.handleKeyEnter(e)}},t.prototype.handleKeySpace=function(e){var r=this.gridOptionsWrapper.getDocument();if(this.eSetFilterList.contains(r.activeElement)&&this.virtualList){var n=this.virtualList.getLastFocusedRow();if(null!=n){var i=this.virtualList.getComponentAt(n);null!=i&&(e.preventDefault(),(this.setFilterParams||{}).readOnly||i.toggleSelected())}}},t.prototype.handleKeyEnter=function(e){if(this.setFilterParams){var r=this.setFilterParams||{};!r.excelMode||r.readOnly||(e.preventDefault(),this.onBtApply(!1,!1,e),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}},t.prototype.getCssIdentifier=function(){return"set-filter"},t.prototype.setModelAndRefresh=function(e){var r=this;return this.valueModel?this.valueModel.setModel(e).then(function(){return r.refresh()}):u.AgPromise.resolve()},t.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},t.prototype.setModelIntoUi=function(e){return this.setMiniFilter(null),this.setModelAndRefresh(null==e?null:e.values)},t.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getModel();return e?{values:e,filterType:this.getFilterType()}:null},t.prototype.getFilterType=function(){return"set"},t.prototype.getValueModel=function(){return this.valueModel},t.prototype.areModelsEqual=function(e,r){return null==e&&null==r||null!=e&&null!=r&&u._.areEqual(e.values,r.values)},t.prototype.setParams=function(e){var r=this;this.applyExcelModeOptions(e),o.prototype.setParams.call(this,e),this.setFilterParams=e,this.caseSensitive=e.caseSensitive||!1,this.valueModel=new Sp(e,function(n){return r.showOrHideLoadingScreen(n)},this.valueFormatterService,function(n){return r.translateForSetFilter(n)},function(n){return r.caseFormat(n)}),this.initialiseFilterBodyUi(),e.rowModel.getType()===u.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&!e.values&&this.addEventListenersForDataChanges()},t.prototype.applyExcelModeOptions=function(e){"windows"===e.excelMode?(e.buttons||(e.buttons=["apply","cancel"]),null==e.closeOnApply&&(e.closeOnApply=!0)):"mac"===e.excelMode&&(e.buttons||(e.buttons=["reset"]),null==e.applyMiniFilterWhileTyping&&(e.applyMiniFilterWhileTyping=!0),null==e.debounceMs&&(e.debounceMs=500))},t.prototype.addEventListenersForDataChanges=function(){var e=this;this.addManagedListener(this.eventService,u.Events.EVENT_ROW_DATA_UPDATED,function(){return e.syncAfterDataChange()}),this.addManagedListener(this.eventService,u.Events.EVENT_CELL_VALUE_CHANGED,function(r){e.setFilterParams&&r.column===e.setFilterParams.column&&e.syncAfterDataChange()})},t.prototype.syncAfterDataChange=function(e){var r=this;if(void 0===e&&(e=!0),!this.valueModel)throw new Error("Value model has not been created.");var n=u.AgPromise.resolve();return e&&(n=this.valueModel.refreshValues()),n.then(function(){r.refresh(),r.onBtApply(!1,!0)})},t.prototype.showOrHideLoadingScreen=function(e){u._.setDisplayed(this.eFilterLoading,e)},t.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},t.prototype.initVirtualList=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var n=this.gridOptionsWrapper.getLocaleTextFunc()("ariaFilterList","Filter List"),i=this.virtualList=this.createBean(new u.VirtualList("filter","listbox",n)),a=this.getRefElement("eSetFilterList");a&&a.appendChild(i.getGui());var l,s=this.setFilterParams.cellHeight;null!=s&&i.setRowHeight(s),i.setComponentCreator(function(c){return e.createSetListItem(c)}),l=this.setFilterParams.suppressSelectAll?new cT(this.valueModel):new hT(this.valueModel,function(){return e.isSelectAllSelected()}),i.setModel(l)},t.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(e)},t.prototype.createSetListItem=function(e){var n,r=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return e===t.SELECT_ALL_VALUE?((n=this.createBean(new rs(function(){return r.getSelectAllLabel()},this.setFilterParams,function(i){return r.translateForSetFilter(i)},this.isSelectAllSelected()))).addEventListener(rs.EVENT_SELECTION_CHANGED,function(i){return r.onSelectAll(i.isSelected)}),n):((n=this.createBean(new rs(e,this.setFilterParams,function(i){return r.translateForSetFilter(i)},this.valueModel.isValueSelected(e)))).addEventListener(rs.EVENT_SELECTION_CHANGED,function(i){return r.onItemSelected(e,i.isSelected)}),n)},t.prototype.initMiniFilter=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var n=this.eMiniFilter,a=this.gridOptionsWrapper.getLocaleTextFunc();n.setDisplayed(!this.setFilterParams.suppressMiniFilter),n.setValue(this.valueModel.getMiniFilter()),n.onValueChange(function(){return e.onMiniFilterInput()}),n.setInputAriaLabel(a("ariaSearchFilterValues","Search filter values")),this.addManagedListener(n.getInputElement(),"keypress",function(s){return e.onMiniFilterKeyPress(s)})},t.prototype.afterGuiAttached=function(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");o.prototype.afterGuiAttached.call(this,e),this.setFilterParams.excelMode&&(this.resetUiToActiveModel(),this.showOrHideResults()),this.refreshVirtualList();var r=this.eMiniFilter;r.setInputPlaceholder(this.translateForSetFilter("searchOoo")),(!e||!e.suppressFocus)&&r.getFocusableElement().focus();var i,n=!(!e||"floatingFilter"!==e.container);i=this.gridOptionsWrapper.isEnableRtl()?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0},n?(this.positionableFeature.restoreLastSize(),this.positionableFeature.setResizable(i)):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1))},t.prototype.applyModel=function(){var e=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var r=o.prototype.applyModel.call(this),n=this.getModel();return this.appliedModelValues=n?n.values.reduce(function(i,a){return i[e.caseFormat(String(a))]=!0,i},{}):null,r},t.prototype.isModelValid=function(e){return!this.setFilterParams||!this.setFilterParams.excelMode||null==e||e.values.length>0},t.prototype.doesFilterPass=function(e){var r=this;if(!this.setFilterParams||!this.valueModel||!this.appliedModelValues)return!0;var n=e.node,i=e.data,a=this.setFilterParams,l=a.colDef.keyCreator,c=a.api,h=a.colDef,p=a.column,f=a.columnApi,d=a.context,v=(0,a.valueGetter)({api:c,colDef:h,column:p,columnApi:f,context:d,data:i,getValue:function(y){return i[y]},node:n});return l&&(v=l({value:v,colDef:h,column:p,node:n,data:i,api:c,columnApi:f,context:d})),v=u._.makeNull(v),Array.isArray(v)?v.some(function(y){return!0===r.appliedModelValues[r.caseFormat(String(u._.makeNull(y)))]}):!0===this.appliedModelValues[this.caseFormat(String(v))]},t.prototype.onNewRowsLoaded=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.getValuesType();this.syncAfterDataChange(e===ht.TAKEN_FROM_GRID_VALUES)},t.prototype.setFilterValues=function(e){var r=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(e).then(function(){r.refresh(),r.onUiChanged()})},t.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(ht.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange(!0)},t.prototype.refreshFilterValues=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");!this.valueModel.isInitialised()||this.valueModel.refreshValues().then(function(){e.refresh(),e.onUiChanged()})},t.prototype.onAnyFilterChanged=function(){var e=this;setTimeout(function(){if(e.isAlive()){if(!e.valueModel)throw new Error("Value model has not been created.");e.valueModel.refreshAfterAnyFilterChanged().then(function(){return e.refresh()})}},0)},t.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var e=this.setFilterParams||{};!e.readOnly&&e.applyMiniFilterWhileTyping?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},t.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.setFilterParams||{};null==e.excelMode||e.readOnly?this.refresh():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel():(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()),this.showOrHideResults()},t.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var e=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;u._.setDisplayed(this.eNoMatches,e),u._.setDisplayed(this.eSetFilterList,!e)},t.prototype.resetUiToActiveModel=function(){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.eMiniFilter.setValue(null,!0),this.valueModel.setMiniFilter(null),this.setModelIntoUi(this.getModel()).then(function(){return e.onUiChanged(!1,"prevent")})},t.prototype.onMiniFilterKeyPress=function(e){var r=this.setFilterParams||{};e.key===u.KeyCode.ENTER&&!r.excelMode&&!r.readOnly&&this.filterOnAllVisibleValues()},t.prototype.filterOnAllVisibleValues=function(e){void 0===e&&(e=!0);var r=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(r)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,e?"immediately":"debounce"),this.showOrHideResults()},t.prototype.focusRowIfAlive=function(e){var r=this;null!=e&&window.setTimeout(function(){if(!r.virtualList)throw new Error("Virtual list has not been created.");r.isAlive()&&r.virtualList.focusRow(e)},0)},t.prototype.onSelectAll=function(e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");e?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter();var r=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(r)},t.prototype.onItemSelected=function(e,r){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");r?this.valueModel.selectValue(e):this.valueModel.deselectValue(e);var n=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(n)},t.prototype.setMiniFilter=function(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()},t.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},t.prototype.refresh=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh()},t.prototype.getValues=function(){return this.valueModel?this.valueModel.getValues():[]},t.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()},t.prototype.translateForSetFilter=function(e){return this.gridOptionsWrapper.getLocaleTextFunc()(e,wp[e])},t.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},t.prototype.destroy=function(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),o.prototype.destroy.call(this)},t.prototype.caseFormat=function(e){return null==e||"string"!=typeof e||this.caseSensitive?e:e.toUpperCase()},t.SELECT_ALL_VALUE="__AG_SELECT_ALL__",Eo([u.RefSelector("eMiniFilter")],t.prototype,"eMiniFilter",void 0),Eo([u.RefSelector("eFilterLoading")],t.prototype,"eFilterLoading",void 0),Eo([u.RefSelector("eSetFilterList")],t.prototype,"eSetFilterList",void 0),Eo([u.RefSelector("eFilterNoMatches")],t.prototype,"eNoMatches",void 0),Eo([u.Autowired("valueFormatterService")],t.prototype,"valueFormatterService",void 0),t}(u.ProvidedFilter),cT=function(){function o(t){this.model=t}return o.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},o.prototype.getRow=function(t){return this.model.getDisplayedValue(t)},o.prototype.isRowSelected=function(t){return this.model.isValueSelected(this.getRow(t))},o}(),hT=function(){function o(t,e){this.model=t,this.isSelectAllSelected=e}return o.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()+1},o.prototype.getRow=function(t){return 0===t?ns.SELECT_ALL_VALUE:this.model.getDisplayedValue(t-1)},o.prototype.isRowSelected=function(t){return 0===t?this.isSelectAllSelected():this.model.isValueSelected(this.getRow(t))},o}(),fT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pu=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},pT=function(o){function t(){var e=o.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;return e.availableValuesListenerAdded=!1,e}return fT(t,o),t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.init=function(e){var r=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),n=this.gridOptionsWrapper.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(r+" "+n("ariaFilterInput","Filter Input")).addGuiEventListener("click",function(){return e.showParentFilter()}),this.params=e},t.prototype.onParentModelChanged=function(e){this.updateFloatingFilterText(e)},t.prototype.parentSetFilterInstance=function(e){this.params.parentFilterInstance(function(r){if(!(r instanceof ns))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as it's parent");e(r)})},t.prototype.addAvailableValuesListener=function(){var e=this;this.parentSetFilterInstance(function(r){var n=r.getValueModel();!n||e.addManagedListener(n,Sp.EVENT_AVAILABLE_VALUES_CHANGED,function(){return e.updateFloatingFilterText()})}),this.availableValuesListenerAdded=!0},t.prototype.updateFloatingFilterText=function(e){var r=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(function(n){var i=(e||n.getModel()||{}).values,a=n.getValueModel();if(null!=i&&null!=a){var s=r.gridOptionsWrapper.getLocaleTextFunc(),c=i.filter(function(f){return a.isValueAvailable(f)}).map(function(f){var d=r.params,y=r.valueFormatterService.formatValue(d.column,null,f,d.filterParams.valueFormatter,!1),m=null!=y?y:f;return null==m?s("blanks",wp.blanks):m}),h=c.length>10?c.slice(0,10).concat("..."):c,p="("+c.length+") "+h.join(",");r.eFloatingFilterText.setValue(p)}else r.eFloatingFilterText.setValue("")})},Pu([u.RefSelector("eFloatingFilterText")],t.prototype,"eFloatingFilterText",void 0),Pu([u.Autowired("valueFormatterService")],t.prototype,"valueFormatterService",void 0),Pu([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),t}(u.Component),dT={moduleName:u.ModuleNames.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:ns},{componentName:"agSetColumnFloatingFilter",componentClass:pT}],dependantModules:[Re]},vT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yT=function(o){function t(){var e=o.call(this)||this;return e.allComponents={},e}return vT(t,o),t.prototype.registerStatusPanel=function(e,r){this.allComponents[e]=r},t.prototype.getStatusPanel=function(e){return this.allComponents[e]},t=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i}([u.Bean("statusBarService")],t),t}(u.BeanStub),mT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},CT=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return mT(t,o),t.prototype.postConstruct=function(){if(this.gridOptions.statusBar&&this.gridOptions.statusBar.statusPanels){var e=this.gridOptions.statusBar.statusPanels.filter(function(i){return"left"===i.align});this.createAndRenderComponents(e,this.eStatusBarLeft);var r=this.gridOptions.statusBar.statusPanels.filter(function(i){return"center"===i.align});this.createAndRenderComponents(r,this.eStatusBarCenter);var n=this.gridOptions.statusBar.statusPanels.filter(function(i){return!i.align||"right"===i.align});this.createAndRenderComponents(n,this.eStatusBarRight)}else this.setDisplayed(!1)},t.prototype.createAndRenderComponents=function(e,r){var n=this,i=[];e.forEach(function(a){var c=n.userComponentFactory.getStatusPanelCompDetails(a,{}).newAgStackInstance();!c||i.push({key:a.key||a.statusPanel,promise:c})}),u.AgPromise.all(i.map(function(a){return a.promise})).then(function(){i.forEach(function(a){a.promise.then(function(s){var l=function(){n.getContext().destroyBean(s)};n.isAlive()?(n.statusBarService.registerStatusPanel(a.key,s),r.appendChild(s.getGui()),n.addDestroyFunc(l)):l()})})})},t.TEMPLATE='<div class="ag-status-bar">\n            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>',Mn([u.Autowired("gridOptions")],t.prototype,"gridOptions",void 0),Mn([u.Autowired("userComponentFactory")],t.prototype,"userComponentFactory",void 0),Mn([u.Autowired("statusBarService")],t.prototype,"statusBarService",void 0),Mn([u.RefSelector("eStatusBarLeft")],t.prototype,"eStatusBarLeft",void 0),Mn([u.RefSelector("eStatusBarCenter")],t.prototype,"eStatusBarCenter",void 0),Mn([u.RefSelector("eStatusBarRight")],t.prototype,"eStatusBarRight",void 0),Mn([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),_T=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xp=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},Mo=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return _T(t,o),t.prototype.setLabel=function(e,r){this.setDisplayed(!1);var n=this.gridOptionsWrapper.getLocaleTextFunc();this.eLabel.innerHTML=n(e,r)},t.prototype.setValue=function(e){this.eValue.innerHTML=e},t.TEMPLATE='<div class="ag-status-name-value">\n            <span ref="eLabel"></span>:&nbsp;\n            <span ref="eValue" class="ag-status-name-value-value"></span>\n        </div>',xp([u.RefSelector("eLabel")],t.prototype,"eLabel",void 0),xp([u.RefSelector("eValue")],t.prototype,"eValue",void 0),t}(u.Component),bT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Op=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},ST=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return bT(t,o),t.prototype.postConstruct=function(){"clientSide"===this.gridApi.getModel().getType()?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,u.Events.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.")},t.prototype.onDataChanged=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator","."),i=u._.formatNumberCommas(this.getFilteredRowCountValue(),r,n),a=u._.formatNumberCommas(this.getTotalRowCount(),r,n);if(i===a)this.setValue(i);else{var s=this.gridOptionsWrapper.getLocaleTextFunc();this.setValue(i+" "+s("of","of")+" "+a)}},t.prototype.getFilteredRowCountValue=function(){var e=0;return this.gridApi.forEachNodeAfterFilter(function(r){r.group||e++}),e},t.prototype.getTotalRowCount=function(){var e=0;return this.gridApi.forEachNode(function(r){r.group||e++}),e},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},Op([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Op([u.PostConstruct],t.prototype,"postConstruct",null),t}(Mo),wT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pp=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},xT=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return wT(t,o),t.prototype.postConstruct=function(){if(this.setLabel("filteredRows","Filtered"),"clientSide"===this.gridApi.getModel().getType()){this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);var e=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,u.Events.EVENT_MODEL_UPDATED,e),e()}else console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.")},t.prototype.onDataChanged=function(){var e=this.getTotalRowCountValue(),r=this.getFilteredRowCountValue(),n=this.gridOptionsWrapper.getLocaleTextFunc(),i=n("thousandSeparator",","),a=n("decimalSeparator",".");this.setValue(u._.formatNumberCommas(r,i,a)),this.setDisplayed(e!==r)},t.prototype.getTotalRowCountValue=function(){var e=0;return this.gridApi.forEachNode(function(r){return e+=1}),e},t.prototype.getFilteredRowCountValue=function(){var e=0;return this.gridApi.forEachNodeAfterFilter(function(r){r.group||(e+=1)}),e},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},Pp([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Pp([u.PostConstruct],t.prototype,"postConstruct",null),t}(Mo),OT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Tp=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},PT=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return OT(t,o),t.prototype.postConstruct=function(){this.setLabel("totalRows","Total Rows"),"clientSide"===this.gridApi.getModel().getType()?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,u.Events.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.")},t.prototype.onDataChanged=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator",".");this.setValue(u._.formatNumberCommas(this.getRowCountValue(),r,n))},t.prototype.getRowCountValue=function(){var e=0;return this.gridApi.forEachLeafNode(function(r){return e+=1}),e},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},Tp([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Tp([u.PostConstruct],t.prototype,"postConstruct",null),t}(Mo),TT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ap=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},AT=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return TT(t,o),t.prototype.postConstruct=function(){if(this.isValidRowModel()){this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count");var e=this.gridApi.getSelectedRows().length,r=this.gridOptionsWrapper.getLocaleTextFunc(),n=r("thousandSeparator",","),i=r("decimalSeparator",".");this.setValue(u._.formatNumberCommas(e,n,i)),this.setDisplayed(e>0);var a=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,u.Events.EVENT_MODEL_UPDATED,a),this.addManagedListener(this.eventService,u.Events.EVENT_SELECTION_CHANGED,a)}else console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.")},t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return"clientSide"===e||"serverSide"===e},t.prototype.onRowSelectionChanged=function(){var e=this.gridApi.getSelectedRows().length,r=this.gridOptionsWrapper.getLocaleTextFunc(),n=r("thousandSeparator",","),i=r("decimalSeparator",".");this.setValue(u._.formatNumberCommas(e,n,i)),this.setDisplayed(e>0)},t.prototype.init=function(){},t.prototype.destroy=function(){o.prototype.destroy.call(this)},Ap([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Ap([u.PostConstruct],t.prototype,"postConstruct",null),t}(Mo),ET=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ft=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},MT=function(o){function t(){return o.call(this,t.TEMPLATE)||this}return ET(t,o),t.prototype.destroy=function(){o.prototype.destroy.call(this)},t.prototype.postConstruct=function(){this.isValidRowModel()?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,u.Events.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,u.Events.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))):console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.")},t.prototype.isValidRowModel=function(){var e=this.gridApi.getModel().getType();return"clientSide"===e||"serverSide"===e},t.prototype.init=function(){},t.prototype.setAggregationComponentValue=function(e,r,n){var i=this.getAggregationValueComponent(e);if(u._.exists(i)&&i){var a=this.gridOptionsWrapper.getLocaleTextFunc(),s=a("thousandSeparator",","),l=a("decimalSeparator",".");i.setValue(u._.formatNumberTwoDecimalPlacesAndCommas(r,s,l)),i.setDisplayed(n)}},t.prototype.getAggregationValueComponent=function(e){var r=e+"AggregationComp",n=null,i=u._.exists(this.gridOptions.statusBar)&&this.gridOptions.statusBar?this.gridOptions.statusBar.statusPanels.find(function(a){return"agAggregationComponent"===a.statusPanel}):null;return u._.exists(i)&&i?(!u._.exists(i.statusPanelParams)||u._.exists(i.statusPanelParams)&&u._.exists(i.statusPanelParams.aggFuncs)&&u._.exists(i.statusPanelParams.aggFuncs.find(function(a){return a===e})))&&(n=this[r]):n=this[r],n},t.prototype.onRangeSelectionChanged=function(){var e=this,r=this.rangeService?this.rangeService.getCellRanges():void 0,n=0,i=0,a=0,s=null,l=null,c={};r&&!u._.missingOrEmpty(r)&&r.forEach(function(f){for(var d=e.rangeService.getRangeStartRow(f),v=e.rangeService.getRangeEndRow(f);!u._.missing(d)&&d&&!e.rowPositionUtils.before(v,d)&&d&&f.columns;)f.columns.forEach(function(y){if(null!==d){var m=e.cellPositionUtils.createId({rowPinned:d.rowPinned,column:y,rowIndex:d.rowIndex});if(!c[m]){c[m]=!0;var C=e.rowRenderer.getRowNode(d);if(!u._.missing(C)){var _=e.valueService.getValue(y,C);u._.missing(_)||""===_||(_.value&&(_=_.value),"string"==typeof _&&(_=Number(_)),"number"==typeof _&&!isNaN(_)&&(n+=_,(null===l||_>l)&&(l=_),(null===s||_<s)&&(s=_),a++),i++)}}}}),d=e.cellNavigationService.getRowBelow(d)});var p=a>1;this.setAggregationComponentValue("count",i,i>1),this.setAggregationComponentValue("sum",n,p),this.setAggregationComponentValue("min",s,p),this.setAggregationComponentValue("max",l,p),this.setAggregationComponentValue("avg",n/a,p)},t.TEMPLATE='<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value ref="countAggregationComp"></ag-name-value>\n            <ag-name-value ref="minAggregationComp"></ag-name-value>\n            <ag-name-value ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value ref="sumAggregationComp"></ag-name-value>\n        </div>',ft([u.Optional("rangeService")],t.prototype,"rangeService",void 0),ft([u.Autowired("valueService")],t.prototype,"valueService",void 0),ft([u.Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0),ft([u.Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),ft([u.Autowired("gridOptions")],t.prototype,"gridOptions",void 0),ft([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),ft([u.Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),ft([u.Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),ft([u.RefSelector("sumAggregationComp")],t.prototype,"sumAggregationComp",void 0),ft([u.RefSelector("countAggregationComp")],t.prototype,"countAggregationComp",void 0),ft([u.RefSelector("minAggregationComp")],t.prototype,"minAggregationComp",void 0),ft([u.RefSelector("maxAggregationComp")],t.prototype,"maxAggregationComp",void 0),ft([u.RefSelector("avgAggregationComp")],t.prototype,"avgAggregationComp",void 0),ft([u.PostConstruct],t.prototype,"postConstruct",null),t}(u.Component),DT={moduleName:u.ModuleNames.StatusBarModule,beans:[yT],agStackComponents:[{componentName:"AgStatusBar",componentClass:CT},{componentName:"AgNameValue",componentClass:Mo}],userComponents:[{componentName:"agAggregationComponent",componentClass:MT},{componentName:"agSelectedRowCountComponent",componentClass:AT},{componentName:"agTotalRowCountComponent",componentClass:PT},{componentName:"agFilteredRowCountComponent",componentClass:xT},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:ST}],dependantModules:[Re]},RT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dn=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},FT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.firstRow=-1,e.lastRow=-1,e.rowCount=-1,e.rowNodesByIndex={},e}return RT(t,o),t.prototype.ensureRowHeightsValid=function(e,r,n,i){return!1},t.prototype.init=function(){this.rowHeight=this.gridOptionsWrapper.getRowHeightAsNumber(),this.addManagedListener(this.eventService,u.Events.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this))},t.prototype.start=function(){this.gridOptionsWrapper.getViewportDatasource()&&this.setViewportDatasource(this.gridOptionsWrapper.getViewportDatasource())},t.prototype.isLastRowIndexKnown=function(){return!0},t.prototype.destroyDatasource=function(){!this.viewportDatasource||(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)},t.prototype.calculateFirstRow=function(e){var r=this.gridOptionsWrapper.getViewportRowModelBufferSize(),n=this.gridOptionsWrapper.getViewportRowModelPageSize(),i=e-r;return i<0?0:Math.floor(i/n)*n},t.prototype.calculateLastRow=function(e){if(-1===e)return e;var r=this.gridOptionsWrapper.getViewportRowModelBufferSize(),n=this.gridOptionsWrapper.getViewportRowModelPageSize(),a=Math.ceil((e+r)/n)*n;return Math.min(a,this.rowCount-1)},t.prototype.onViewportChanged=function(e){var r=this.calculateFirstRow(e.firstRow),n=this.calculateLastRow(e.lastRow);(this.firstRow!==r||this.lastRow!==n)&&(this.firstRow=r,this.lastRow=n,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))},t.prototype.purgeRowsNotInViewport=function(){var e=this;Object.keys(this.rowNodesByIndex).forEach(function(r){var n=parseInt(r,10);(n<e.firstRow||n>e.lastRow)&&delete e.rowNodesByIndex[n]})},t.prototype.setViewportDatasource=function(e){this.destroyDatasource(),this.viewportDatasource=e,this.rowCount=0,e.init?e.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")},t.prototype.getType=function(){return u.Constants.ROW_MODEL_TYPE_VIEWPORT},t.prototype.getRow=function(e){return this.rowNodesByIndex[e]||(this.rowNodesByIndex[e]=this.createBlankRowNode(e)),this.rowNodesByIndex[e]},t.prototype.getRowNode=function(e){var r;return this.forEachNode(function(n){n.id===e&&(r=n)}),r},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowIndexAtPixel=function(e){return 0!==this.rowHeight?Math.floor(e/this.rowHeight):0},t.prototype.getRowBounds=function(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}},t.prototype.getTopLevelRowCount=function(){return this.getRowCount()},t.prototype.getTopLevelRowDisplayedIndex=function(e){return e},t.prototype.isEmpty=function(){return this.rowCount>0},t.prototype.isRowsToRender=function(){return this.rowCount>0},t.prototype.getNodesInRangeForSelection=function(e,r){var n=u._.missing(e)?0:e.rowIndex,i=r.rowIndex;if(n<this.firstRow||n>this.lastRow||i<this.firstRow||i>this.lastRow)return[];for(var l=[],h=n<=i?i:n,p=n<=i?n:i;p<=h;p++)l.push(this.rowNodesByIndex[p]);return l},t.prototype.forEachNode=function(e){var r=this,n=0;Object.keys(this.rowNodesByIndex).forEach(function(i){var a=parseInt(i,10);e(r.rowNodesByIndex[a],n),n++})},t.prototype.setRowData=function(e){var r=this;u._.iterateObject(e,function(n,i){var a=parseInt(n,10);if(a>=r.firstRow&&a<=r.lastRow){var s=r.rowNodesByIndex[a];u._.missing(s)&&(s=r.createBlankRowNode(a),r.rowNodesByIndex[a]=s),s.setDataAndId(i,a.toString())}})},t.prototype.createBlankRowNode=function(e){var r=new u.RowNode(this.beans);return r.setRowHeight(this.rowHeight),r.setRowTop(this.rowHeight*e),r.setRowIndex(e),r},t.prototype.setRowCount=function(e,r){void 0===r&&(r=!1),e!==this.rowCount&&(this.rowCount=e,this.eventService.dispatchEvent({type:u.Events.EVENT_MODEL_UPDATED,api:this.gridApi,columnApi:this.columnApi,newData:!1,newPage:!1,keepRenderedRows:r,animate:!1}))},t.prototype.isRowPresent=function(e){return!1},Dn([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),Dn([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),Dn([u.Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),Dn([u.Autowired("beans")],t.prototype,"beans",void 0),Dn([u.PostConstruct],t.prototype,"init",null),Dn([u.PreDestroy],t.prototype,"destroyDatasource",null),Dn([u.Bean("rowModel")],t)}(u.BeanStub),kT={moduleName:u.ModuleNames.ViewportRowModelModule,rowModels:{viewport:FT},dependantModules:[Re]},LT=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])})(t,e)};return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qe=function(o,t,e,r){var a,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(o,t,e,r);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(i=(n<3?a(i):n>3?a(t,e,i):a(t,e))||i);return n>3&&i&&Object.defineProperty(t,e,i),i},IT=function(o,t){var e="function"==typeof Symbol&&o[Symbol.iterator];if(!e)return o;var n,a,r=e.call(o),i=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return i},GT=function(o){function t(){var e=null!==o&&o.apply(this,arguments)||this;return e.navigatorApiFailed=!1,e}return LT(t,o),t.prototype.init=function(){var e=this;this.logger=this.loggerFactory.create("ClipboardService"),this.rowModel.getType()===u.Constants.ROW_MODEL_TYPE_CLIENT_SIDE&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(function(r){e.gridCtrl=r.gridCtrl})},t.prototype.pasteFromClipboard=function(){var e=this;this.logger.log("pasteFromClipboard"),!this.gridOptionsWrapper.isSuppressClipboardApi()&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(function(n){u._.doOnce(function(){console.warn(n),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")},"clipboardApiError"),e.navigatorApiFailed=!0,e.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()},t.prototype.pasteFromClipboardLegacy=function(){var e=this;this.executeOnTempElement(function(r){return r.focus({preventScroll:!0})},function(r){e.processClipboardData(r.value)})},t.prototype.processClipboardData=function(e){var r=this;if(null!=e){var n=u._.stringToArray(e,this.gridOptionsWrapper.getClipboardDelimiter()),i=this.gridOptionsWrapper.getProcessDataFromClipboardFunc();i&&(n=i({data:n})),null!=n&&(this.gridOptionsWrapper.isSuppressLastEmptyLineOnPaste()&&this.removeLastLineIfBlank(n),this.doPasteOperation(function(s,l,c,h){r.rangeService&&r.rangeService.isMoreThanOneCell()&&!r.hasOnlyOneValueToPaste(n)?r.pasteIntoActiveRange(n,s,l,h):r.pasteStartingFromFocusedCell(n,s,l,c,h)}))}},t.prototype.doPasteOperation=function(e){var a,r=this.gridOptionsWrapper.getApi(),n=this.gridOptionsWrapper.getColumnApi(),i="clipboard";if(this.eventService.dispatchEvent({type:u.Events.EVENT_PASTE_START,api:r,columnApi:n,source:i}),this.clientSideRowModel){var s=this.gridOptionsWrapper.isAggregateOnlyChangedColumns();a=new u.ChangedPath(s,this.clientSideRowModel.getRootNode())}var l={},c=[],h=this.focusService.getFocusedCell();e(l,c,h,a),a&&this.clientSideRowModel.doAggregate(a),this.rowRenderer.refreshCells(),this.dispatchFlashCells(l),this.fireRowChanged(c),h&&this.focusService.setFocusedCell(h.rowIndex,h.column,h.rowPinned,!0),this.eventService.dispatchEvent({type:u.Events.EVENT_PASTE_END,api:r,columnApi:n,source:i})},t.prototype.pasteIntoActiveRange=function(e,r,n,i){var a=this,s=this.getRangeSize()%e.length!=0,l=0,c=0;this.iterateActiveRanges(!1,function(p,f,d,v){if(v-l>=e.length){if(s)return;l+=c,c=0}var y=e[v-l];n.push(f);var m=a.gridOptionsWrapper.getProcessCellFromClipboardFunc();d.forEach(function(C,_){if(C.isCellEditable(f)&&!C.isSuppressPaste(f)){_>=y.length&&(_%=y.length);var w=a.processCell(f,C,y[_],u.Constants.EXPORT_TYPE_DRAG_COPY,m);f.setDataValue(C,w,u.Constants.SOURCE_PASTE),i&&i.addParentNode(f.parent,[C]);var P=a.cellPositionUtils.createIdFromValues(p.rowIndex,C,p.rowPinned);r[P]=!0}}),c++})},t.prototype.pasteStartingFromFocusedCell=function(e,r,n,i,a){if(i){var s={rowIndex:i.rowIndex,rowPinned:i.rowPinned},l=this.columnModel.getDisplayedColumnsStartingAt(i.column);this.isPasteSingleValueIntoRange(e)?this.pasteSingleValueIntoRange(e,n,r,a):this.pasteMultipleValues(e,s,n,l,r,u.Constants.EXPORT_TYPE_CLIPBOARD,a)}},t.prototype.isPasteSingleValueIntoRange=function(e){return this.hasOnlyOneValueToPaste(e)&&null!=this.rangeService&&!this.rangeService.isEmpty()},t.prototype.pasteSingleValueIntoRange=function(e,r,n,i){var a=this,s=e[0][0];this.iterateActiveRanges(!1,function(c,h,p){r.push(h),p.forEach(function(f){return a.updateCellValue(h,f,s,n,u.Constants.EXPORT_TYPE_CLIPBOARD,i)})})},t.prototype.hasOnlyOneValueToPaste=function(e){return 1===e.length&&1===e[0].length},t.prototype.copyRangeDown=function(){var e=this;if(this.rangeService&&!this.rangeService.isEmpty()){var r=[];this.doPasteOperation(function(i,a,s,l){var c=e.gridOptionsWrapper.getProcessCellForClipboardFunc(),h=e.gridOptionsWrapper.getProcessCellFromClipboardFunc();e.iterateActiveRanges(!0,function(f,d,v){r.length?(a.push(d),v.forEach(function(g,y){if(g.isCellEditable(d)&&!g.isSuppressPaste(d)){var m=e.processCell(d,g,r[y],u.Constants.EXPORT_TYPE_DRAG_COPY,h);d.setDataValue(g,m,u.Constants.SOURCE_PASTE),l&&l.addParentNode(d.parent,[g]);var C=e.cellPositionUtils.createIdFromValues(f.rowIndex,g,f.rowPinned);i[C]=!0}})):v.forEach(function(g){var y=e.processCell(d,g,e.valueService.getValue(g,d),u.Constants.EXPORT_TYPE_DRAG_COPY,c);r.push(y)})})})}},t.prototype.removeLastLineIfBlank=function(e){var r=u._.last(e);r&&1===r.length&&""===r[0]&&u._.removeFromArray(e,r)},t.prototype.fireRowChanged=function(e){var r=this;!this.gridOptionsWrapper.isFullRowEdit()||e.forEach(function(n){var i={type:u.Events.EVENT_ROW_VALUE_CHANGED,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,context:r.gridOptionsWrapper.getContext(),api:r.gridOptionsWrapper.getApi(),columnApi:r.gridOptionsWrapper.getColumnApi()};r.eventService.dispatchEvent(i)})},t.prototype.pasteMultipleValues=function(e,r,n,i,a,s,l){var c=this,h=r,p=null!=this.clientSideRowModel&&!this.gridOptionsWrapper.isTreeData();e.forEach(function(d){var v=function(){for(;;){if(!h)return null;var d=c.rowPositionUtils.getRowNode(h);if(h=c.cellNavigationService.getRowBelow({rowPinned:h.rowPinned,rowIndex:h.rowIndex}),null==d)return null;if(!(d.detail||d.footer||p&&d.group))return d}}();!v||(d.forEach(function(g,y){return c.updateCellValue(v,i[y],g,a,s,l)}),n.push(v))})},t.prototype.updateCellValue=function(e,r,n,i,a,s){if(e&&r&&r.isCellEditable(e)&&!r.isSuppressPaste(e)){var l=this.processCell(e,r,n,a,this.gridOptionsWrapper.getProcessCellFromClipboardFunc());e.setDataValue(r,l,u.Constants.SOURCE_PASTE),i[this.cellPositionUtils.createIdFromValues(e.rowIndex,r,e.rowPinned)]=!0,s&&s.addParentNode(e.parent,[r])}},t.prototype.copyToClipboard=function(e){void 0===e&&(e={});var r=e.includeHeaders,n=e.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = "+r),null==r&&(r=this.gridOptionsWrapper.isCopyHeadersToClipboard()),null==n&&(n=this.gridOptionsWrapper.isCopyGroupHeadersToClipboard());var i={includeHeaders:r,includeGroupHeaders:n},a=!this.gridOptionsWrapper.isSuppressCopyRowsToClipboard();!this.rangeService||this.rangeService.isEmpty()||this.shouldSkipSingleCellRange()?a&&!this.selectionService.isEmpty()?this.copySelectedRowsToClipboard(i):this.focusService.isAnyCellFocused()&&this.copyFocusedCellToClipboard(i):this.copySelectedRangeToClipboard(i)},t.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsWrapper.isSuppressCopySingleCellRanges()&&!this.rangeService.isMoreThanOneCell()},t.prototype.iterateActiveRanges=function(e,r,n){var i=this;if(this.rangeService&&!this.rangeService.isEmpty()){var a=this.rangeService.getCellRanges();e?this.iterateActiveRange(a[0],r,n,!0):a.forEach(function(s,l){return i.iterateActiveRange(s,r,n,l===a.length-1)})}},t.prototype.iterateActiveRange=function(e,r,n,i){if(this.rangeService){var a=this.rangeService.getRangeStartRow(e),s=this.rangeService.getRangeEndRow(e);n&&e.columns&&n(e.columns);for(var l=0,c=!1;!c&&null!=a;){var h=this.rowPositionUtils.getRowNode(a);c=this.rowPositionUtils.sameRow(a,s),r(a,h,e.columns,l++,c&&i),a=this.cellNavigationService.getRowBelow(a)}}},t.prototype.copySelectedRangeToClipboard=function(e){if(void 0===e&&(e={}),this.rangeService&&!this.rangeService.isEmpty()){var n=this.rangeService.areAllRangesAbleToMerge()?this.buildDataFromMergedRanges(e):this.buildDataFromRanges(e),a=n.cellsToFlash;this.copyDataToClipboard(n.data),this.dispatchFlashCells(a)}},t.prototype.buildDataFromMergedRanges=function(e){var r=this,n=new Set,i=this.rangeService.getCellRanges(),a=[],s={};i.forEach(function(p){p.columns.forEach(function(g){return n.add(g)});var f=r.getRangeRowPositionsAndCellsToFlash(p),v=f.cellsToFlash;a.push.apply(a,function(){for(var o=[],t=0;t<arguments.length;t++)o=o.concat(IT(arguments[t]));return o}(f.rowPositions)),Object.assign(s,v)});var l=this.columnModel.getAllDisplayedColumns(),c=Array.from(n);return c.sort(function(p,f){return l.indexOf(p)-l.indexOf(f)}),{data:this.buildExportParams({columns:c,rowPositions:a,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}),cellsToFlash:s}},t.prototype.buildDataFromRanges=function(e){var r=this,n=this.rangeService.getCellRanges(),i=[],a={};return n.forEach(function(s){var l=r.getRangeRowPositionsAndCellsToFlash(s),c=l.rowPositions;Object.assign(a,l.cellsToFlash),i.push(r.buildExportParams({columns:s.columns,rowPositions:c,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}))}),{data:i.join("\n"),cellsToFlash:a}},t.prototype.getRangeRowPositionsAndCellsToFlash=function(e){for(var r=this,n=[],i={},a=this.rangeService.getRangeStartRow(e),s=this.rangeService.getRangeEndRow(e),l=a;l&&(n.push(l),e.columns.forEach(function(c){var h=r.cellPositionUtils.createIdFromValues(l.rowIndex,c,l.rowPinned);i[h]=!0}),!this.rowPositionUtils.sameRow(l,s));)l=this.cellNavigationService.getRowBelow(l);return{rowPositions:n,cellsToFlash:i}},t.prototype.copyFocusedCellToClipboard=function(e){var r;void 0===e&&(e={});var n=this.focusService.getFocusedCell();if(null!=n){var i=this.cellPositionUtils.createId(n),l=this.buildExportParams({columns:[n.column],rowPositions:[{rowPinned:n.rowPinned,rowIndex:n.rowIndex}],includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});this.copyDataToClipboard(l),this.dispatchFlashCells(((r={})[i]=!0,r))}},t.prototype.copySelectedRowsToClipboard=function(e){void 0===e&&(e={});var a=this.buildExportParams({columns:e.columnKeys,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});this.copyDataToClipboard(a)},t.prototype.buildExportParams=function(e){var n=e.rowPositions,i=e.includeHeaders,s=e.includeGroupHeaders,c={columnKeys:e.columns,rowNodes:n,skipColumnHeaders:!(void 0!==i&&i),skipColumnGroupHeaders:!(void 0!==s&&s),suppressQuotes:!0,columnSeparator:this.gridOptionsWrapper.getClipboardDelimiter(),onlySelected:!n,processCellCallback:this.gridOptionsWrapper.getProcessCellForClipboardFunc(),processRowGroupCallback:function(h){return h.node.key},processHeaderCallback:this.gridOptionsWrapper.getProcessHeaderForClipboardFunc(),processGroupHeaderCallback:this.gridOptionsWrapper.getProcessGroupHeaderForClipboardFunc()};return this.csvCreator.getDataAsCsv(c)},t.prototype.dispatchFlashCells=function(e){var r=this;window.setTimeout(function(){r.eventService.dispatchEvent({type:u.Events.EVENT_FLASH_CELLS,cells:e,api:r.gridApi,columnApi:r.columnApi})},0)},t.prototype.processCell=function(e,r,n,i,a){return a?a({column:r,node:e,value:n,type:i}):n},t.prototype.copyDataToClipboard=function(e){var r=this,n=this.gridOptionsWrapper.getSendToClipboardFunc();n?n({data:e}):!this.gridOptionsWrapper.isSuppressClipboardApi()&&navigator.clipboard?navigator.clipboard.writeText(e).catch(function(a){u._.doOnce(function(){console.warn(a),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")},"clipboardApiError"),r.copyDataToClipboardLegacy(e)}):this.copyDataToClipboardLegacy(e)},t.prototype.copyDataToClipboardLegacy=function(e){var r=this;this.executeOnTempElement(function(n){var i=r.gridOptionsWrapper.getDocument(),a=i.activeElement;n.value=e||" ",n.select(),n.focus({preventScroll:!0}),i.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),null!=a&&null!=a.focus&&a.focus({preventScroll:!0})})},t.prototype.executeOnTempElement=function(e,r){var n=this.gridOptionsWrapper.getDocument(),i=n.createElement("textarea");i.style.width="1px",i.style.height="1px",i.style.top=n.documentElement.scrollTop+"px",i.style.left=n.documentElement.scrollLeft+"px",i.style.position="absolute",i.style.opacity="0";var a=this.gridCtrl.getGui();a.appendChild(i);try{e(i)}catch(s){console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}r?window.setTimeout(function(){r(i),a.removeChild(i)},100):a.removeChild(i)},t.prototype.getRangeSize=function(){var e=this.rangeService.getCellRanges(),r=0,n=0;return e.length>0&&(r=this.rangeService.getRangeStartRow(e[0]).rowIndex,n=this.rangeService.getRangeEndRow(e[0]).rowIndex),r-n+1},qe([u.Autowired("csvCreator")],t.prototype,"csvCreator",void 0),qe([u.Autowired("loggerFactory")],t.prototype,"loggerFactory",void 0),qe([u.Autowired("selectionService")],t.prototype,"selectionService",void 0),qe([u.Optional("rangeService")],t.prototype,"rangeService",void 0),qe([u.Autowired("rowModel")],t.prototype,"rowModel",void 0),qe([u.Autowired("ctrlsService")],t.prototype,"ctrlsService",void 0),qe([u.Autowired("valueService")],t.prototype,"valueService",void 0),qe([u.Autowired("focusService")],t.prototype,"focusService",void 0),qe([u.Autowired("rowRenderer")],t.prototype,"rowRenderer",void 0),qe([u.Autowired("columnModel")],t.prototype,"columnModel",void 0),qe([u.Autowired("cellNavigationService")],t.prototype,"cellNavigationService",void 0),qe([u.Autowired("columnApi")],t.prototype,"columnApi",void 0),qe([u.Autowired("gridApi")],t.prototype,"gridApi",void 0),qe([u.Autowired("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),qe([u.Autowired("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),qe([u.PostConstruct],t.prototype,"init",null),qe([u.Bean("clipboardService")],t)}(u.BeanStub),BT={moduleName:u.ModuleNames.ClipboardModule,beans:[GT],dependantModules:[Re,vc]};u.ModuleRegistry.register(Xp,!1),u.ModuleRegistry.register(pg,!1),u.ModuleRegistry.register(Sg,!1),u.ModuleRegistry.register(aC,!1),u.ModuleRegistry.register(hP,!1),u.ModuleRegistry.register(gP,!1),u.ModuleRegistry.register(wP,!1),u.ModuleRegistry.register(AP,!1),u.ModuleRegistry.register(fp,!1),u.ModuleRegistry.register(FP,!1),u.ModuleRegistry.register(tc,!1),u.ModuleRegistry.register(iT,!1),u.ModuleRegistry.register(dT,!1),u.ModuleRegistry.register(Fs,!1),u.ModuleRegistry.register(DT,!1),u.ModuleRegistry.register(kT,!1),u.ModuleRegistry.register(BT,!1)}}]);